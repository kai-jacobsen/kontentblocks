/*! Kontentblocks ProdVersion 2021-11-26 08:11 */

!function s(l,r,a){function d(n,e){if(!r[n]){if(!l[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var o=r[n]={exports:{}};l[n][0].call(o.exports,function(e){var t=l[n][1][e];return d(t||e)},o,o.exports,s,l,r,a)}return r[n].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)d(a[e]);return d}({1:[function(s,e,t){var l=window.KB||{};l.Events={},_.extend(l,Backbone.Events),_.extend(l.Events,Backbone.Events),l.currentModule={},l.currentArea={},"undefined"==typeof global&&(global=window);var n=s("shared/ViewsCollection"),r=s("fields/FieldControlsCollection"),i=s("backend/Collections/AreasCollection"),a=s("common/Payload"),d=s("common/Index"),u=s("common/UI"),c=(s("common/Autosave"),s("common/Config")),h=s("backend/Views/ModuleView"),o=s("backend/Models/ModuleModel"),p=s("backend/Views/AreaView"),m=s("backend/Views/SystemAreaView"),f=s("backend/Models/AreaModel"),g=s("backend/Models/PanelModel"),b=s("backend/Views/PanelView"),v=s("backend/Views/ContextView"),k=s("backend/Models/ContextModel"),y=s("backend/Views/Ui/TabbedEditScreen"),w=s("shared/ChangeObserver"),x=(s("fields/RefieldsController"),s("fieldsAPI/FieldsAPIController"),s("shared/Collections/ObjectProxyCollection"));l.Views={Modules:new n,Areas:new n,Context:new n,Panels:new n,Contexts:new n},l.Modules=new Backbone.Collection([],{model:o}),l.Areas=new i([],{model:f}),l.Panels=new Backbone.Collection([],{model:g}),l.Contexts=new Backbone.Collection([],{model:k}),l.ObjectProxy=new x,l.ChangeObserver=new w,l.App=function(){function e(e){l.Views.Modules.add(e.get("mid"),new h({model:e,el:"#"+e.get("mid")})),u.initTabs()}function t(e){e.get("public")?l.Views.Areas.add(e.get("id"),new p({model:e,el:"#"+e.get("id")+"-kb-container"})):l.Views.Areas.add(e.get("id"),new m({model:e,el:"#"+e.get("id")+"-kb-container"}))}function n(e){l.Views.Areas.add(e.get("id"),new b({model:e,el:"#kbp-"+e.get("baseId")+"-kb-container"}))}function i(e){l.Views.Contexts.add(e.get("id"),new v({model:e,el:"#context_"+e.get("id")}))}function o(e){l.Views.Modules.remove(e.get("mid"))}return{init:function(){l.Modules.on("add",e),l.Areas.on("add",t),l.Panels.on("add",n),l.Modules.on("remove",o),l.Contexts.on("add",i),_.each(a.getPayload("Areas"),function(e){"_internal"!==e.id&&l.ObjectProxy.add(l.Areas.add(e))}),_.each(a.getPayload("Modules"),function(e){l.ObjectProxy.add(l.Modules.add(e))}),_.each(a.getPayload("Panels"),function(e){l.ObjectProxy.add(l.Panels.add(e))}),_.each(a.getPayload("Contexts"),function(e){l.ObjectProxy.add(l.Contexts.add(e))}),_.isArray(l.payload.Fields)&&0==l.payload.Fields.length&&(l.payload.Fields={}),l.FieldControls=new r,l.FieldControls.add(_.toArray(a.getPayload("Fields"))),l.Menus=s("backend/Menus"),l.Window=s("common/Window").init(),u.init(),"default-tabs"===c.getLayoutMode()&&new y,l.Index=d}}}(jQuery),jQuery(document).ready(function(){l.App.init(),l.appData&&!l.appData.config.frontend&&l.Views.Modules.ready()})},{"backend/Collections/AreasCollection":2,"backend/Menus":3,"backend/Models/AreaModel":4,"backend/Models/ContextModel":5,"backend/Models/ModuleModel":6,"backend/Models/PanelModel":7,"backend/Views/AreaView":12,"backend/Views/ContextView":21,"backend/Views/ModuleView":33,"backend/Views/PanelView":34,"backend/Views/SystemAreaView":37,"backend/Views/Ui/TabbedEditScreen":49,"common/Autosave":51,"common/Config":53,"common/Index":55,"common/Payload":58,"common/UI":60,"common/Window":62,"fields/FieldControlsCollection":66,"fields/RefieldsController":69,"fieldsAPI/FieldsAPIController":118,"shared/ChangeObserver":146,"shared/Collections/ObjectProxyCollection":147,"shared/ViewsCollection":170}],2:[function(e,t,n){t.exports=Backbone.Collection.extend({_bycontext:{},_globalAreas:{},initialize:function(){this.listenTo(this,"add",this.categorize)},categorize:function(e){var t=e.get("context");this._bycontext[t]||(this._bycontext[t]={}),(this._bycontext[t][e.get("id")]=e).get("dynamic")&&(this._globalAreas[e.get("id")]=e)},getByContext:function(e){return this._bycontext[e]?this._bycontext[e]:{}},getGlobalAreas:function(){return this._globalAreas}})},{}],3:[function(e,t,n){var i=e("common/Ajax"),o=e("common/Config");t.exports={loadingContainer:null,initiatorEl:null,sendButton:null,createSanitizedId:function(e,t){this.initiatorEl=jQuery(e),this.loadingContainer=this.initiatorEl.closest(".kb-menu-field").addClass("loading"),this.$sendButton=jQuery("#kb-submit"),this.disableSendButton(),i.send({inputvalue:e.value,checkmode:t,action:"getSanitizedId",_ajax_nonce:o.getNonce("read")},this.insertId,this)},insertId:function(e){e.success?(jQuery(".kb-js-area-id").val(e.data.id),this.enableSendButton()):(this.initiatorEl.addClass(),jQuery(".kb-js-area-id").val("Please chose a different name")),this.loadingContainer.removeClass("loading")},disableSendButton:function(){this.$sendButton.attr("disabled","disabled").val("Disabled")},enableSendButton:function(){this.$sendButton.attr("disabled",!1).val("Create")},reloadContext:function(e){var t=e.value;window.location.href=window.location+"&area-context="+t}}},{"common/Ajax":50,"common/Config":53}],4:[function(e,t,n){t.exports=Backbone.Model.extend({idAttribute:"id"})},{}],5:[function(e,t,n){t.exports=Backbone.Model.extend({idAttribute:"id"})},{}],6:[function(e,t,n){var i=e("common/Notice"),o=e("common/Ajax"),s=e("common/Config");t.exports=Backbone.Model.extend({idAttribute:"mid",attachedFields:{},initialize:function(){this.type="module",this.listenTo(this,"change:area",this.areaChanged),this.subscribeToArea()},destroy:function(){this.unsubscribeFromArea(),this.stopListening()},attachField:function(e){this.attachedFields[e.id]=e,this.listenTo(e,"remove",this.removeAttachedField)},removeAttachedField:function(e){this.attachedFields[e.id]&&delete this.attachedFields[e.id]},connectView:function(e){this.View=e,this.trigger("module.model.view.connected",e)},setArea:function(e){this.setEnvVar("area",e.get("id")),this.setEnvVar("areaContext",e.get("context")),this.set("areaContext",e.get("context")),this.set("area",e.get("id")),this.Area=e,this.subscribeToArea(e)},areaChanged:function(){this.View.updateModuleForm()},subscribeToArea:function(e){e||(e=KB.Areas.get(this.get("area"))),e&&(e.View.attachModule(this),this.Area=e)},unsubscribeFromArea:function(){this.Area.View.removeModule(this)},setEnvVar:function(e,t){var n=_.clone(this.get("envVars"));n[e]=t,this.set("envVars",n)},sync:function(){o.send({action:"updateModuleData",module:this.toJSON(),data:this.View.serialize(),_ajax_nonce:s.getNonce("update")},this.success,this)},success:function(e){e&&e.data.newModuleData||_K.error("Failed to save module data."),this.set("entityData",e.data.newModuleData,{silent:!0}),this.trigger("module.model.updated",this),i.notice("Data saved","success")}})},{"common/Ajax":50,"common/Config":53,"common/Notice":57}],7:[function(e,t,n){t.exports=Backbone.Model.extend({idAttribute:"id",attachedFields:{},attachField:function(e){this.attachedFields[e.id]=e,this.listenTo(e,"remove",this.removeAttachedField)},removeAttachedField:function(e){this.attachedFields[e.id]&&delete this.attachedFields[e.id]}})},{}],8:[function(e,t,n){var i=e("backend/Views/ModuleControls/ControlsView");t.exports=i.extend({initialize:function(){this.$menuWrap=jQuery(".kb-area__title-text",this.$el),this.$menuWrap.append("<div class='kb-area-actions'><div class='kb-area-actions-list'></div></div>"),this.$menuList=jQuery(".kb-area-actions-list",this.$menuWrap)}})},{"backend/Views/ModuleControls/ControlsView":23}],9:[function(e,t,n){var i=e("backend/Views/BaseControlView"),o=(e("common/Checks"),e("common/Config")),s=e("common/Notice"),l=e("common/Ajax");t.exports=i.extend({initialize:function(e){this.options=e||{},this.parent=e.parent},attributes:{},className:"dashicons dashicons-no-alt",events:{click:"detach"},detach:function(){var e=_.clone(this.model.get("settings"));e.attached=!e.attached,l.send({action:"syncAreaSettings",_ajax_nonce:o.getNonce("update"),areaId:this.model.get("id"),settings:e},this.success,this)},isValid:function(){return(!KB.Environment||"kb-dyar"!==KB.Environment.postType)&&this.model.get("dynamic")},success:function(e){e.success?(this.model.set("settings",e.data),s.notice("Area status updated","success"),this.parent.$el.remove()):s.notice(e.message,"error")}})},{"backend/Views/BaseControlView":13,"common/Ajax":50,"common/Checks":52,"common/Config":53,"common/Notice":57}],10:[function(e,t,n){var i=e("backend/Views/BaseControlView");e("common/Checks"),e("common/Config"),e("common/Notice"),e("common/Ajax");t.exports=i.extend({initialize:function(e){this.options=e||{},this.parent=e.parent},attributes:{},className:"genericon genericon-draggable kb-area-move-handle",isValid:function(){return!KB.Environment||"kb-dyar"!==KB.Environment.postType}})},{"backend/Views/BaseControlView":13,"common/Ajax":50,"common/Checks":52,"common/Config":53,"common/Notice":57}],11:[function(e,t,n){var i=e("backend/Views/BaseControlView"),o=(e("common/Checks"),e("common/Config")),s=e("common/Notice"),l=e("common/Ajax");t.exports=i.extend({initialize:function(e){this.options=e||{},this.parent=e.parent},attributes:{},className:"dashicons dashicons-visibility kb-area-status-action",events:{click:"changeStatus"},render:function(){var e=this.model.get("settings");this.parent.$el.removeClass("kb-area-status-inactive"),e.active||this.parent.$el.addClass("kb-area-status-inactive")},changeStatus:function(){var e=this.model.get("settings");e.active=!e.active,l.send({action:"syncAreaSettings",_ajax_nonce:o.getNonce("update"),areaId:this.model.get("id"),settings:e},this.success,this)},isValid:function(){return!KB.Environment||"kb-dyar"!==KB.Environment.postType},success:function(e){e.success?(this.model.set("settings",e.data),this.render(),s.notice("Area status updated","success")):s.notice(e.message,"error")}})},{"backend/Views/BaseControlView":13,"common/Ajax":50,"common/Checks":52,"common/Config":53,"common/Notice":57}],12:[function(e,t,n){var i=e("templates/backend/area-item-placeholder.hbs"),o=e("templates/backend/area-add-module.hbs"),s=e("shared/ModuleBrowser/ModuleBrowserController"),l=e("backend/Views/AreaControls/AreaControlsView"),r=e("backend/Views/AreaControls/controls/StatusControl"),a=e("backend/Views/AreaControls/controls/DetachControl"),d=e("backend/Views/AreaControls/controls/MoveControl"),u=e("common/Checks");t.exports=Backbone.View.extend({initialize:function(){this.attachedModules={},this.$controlsContainer=this.$(".add-modules"),this.$modulesList=this.$("#"+this.model.get("id")),this.$placeholder=jQuery(i({i18n:KB.i18n})),this.$footer=this.$(".kb-area--footer"),(this.model.View=this).listenTo(this,"module.attached",this.ui),this.AreaControls=new l({el:this.$el,parent:this}),this.setupDefaultMenuItems(),this.render()},events:{"click .modules-link":"openModuleBrowser",mouseenter:"setActive"},render:function(){this.addControls(),this.ui()},resetElement:function(){this.setElement("#"+this.model.get("id")+"-container"),this.initialize()},addControls:function(){var e=0<parseInt(this.model.get("limit"),10);u.userCan("create_kontentblocks")&&1<this.model.get("assignedModules").length&&this.$footer.append(o({i18n:KB.i18n,model:this.model.toJSON(),showLimit:e}))},openModuleBrowser:function(e){e.preventDefault(),this.ModuleBrowser||(this.ModuleBrowser=new s({area:this})),this.ModuleBrowser.render()},setActive:function(){KB.currentArea=this.model},attachModule:function(e){this.attachedModules[e.cid]=e,this.listenTo(e,"change:area",this.removeModule),this.trigger("module.attached",e)},removeModule:function(e){var t;t=e.cid,this.attachedModules[t]&&(delete this.attachedModules[t],this.stopListening(e,"change:area",this.removeModule)),this.trigger("module.detached",e)},ui:function(){0===_.size(this.attachedModules)?this.renderPlaceholder():this.$placeholder.remove()},renderPlaceholder:function(){this.$modulesList.before(this.$placeholder)},setupDefaultMenuItems:function(){this.AreaControls.addItem(new r({model:this.model,parent:this})),this.AreaControls.addItem(new a({model:this.model,parent:this})),this.AreaControls.addItem(new d({model:this.model,parent:this}))}})},{"backend/Views/AreaControls/AreaControlsView":8,"backend/Views/AreaControls/controls/DetachControl":9,"backend/Views/AreaControls/controls/MoveControl":10,"backend/Views/AreaControls/controls/StatusControl":11,"common/Checks":52,"shared/ModuleBrowser/ModuleBrowserController":148,"templates/backend/area-add-module.hbs":171,"templates/backend/area-item-placeholder.hbs":172}],13:[function(e,t,n){t.exports=Backbone.View.extend({tagName:"div",className:"",isValid:function(){return!0}})},{}],14:[function(e,t,n){var i=e("backend/Views/ContextBrowserAreaView"),o=e("templates/backend/context-browser.hbs");t.exports=Backbone.View.extend({tagName:"div",className:"kb-global-areas-browser-wrap base-box-border base-box-shadow",initialize:function(e){this.isOpen=!1,this.Controller=e.Controller,this.subViews=this.setupViews(),this.setupElements(),this.render(),this.open()},events:{"click .close-browser":"close"},render:function(){var n=this;this.$list.empty(),_.each(this.subViews,function(e){var t=e.render();t&&n.$list.append(t)})},setupElements:function(){this.$backdrop=jQuery("<div class='kb-global-areas-backdrop'></div>"),this.$el.append(o({i18n:KB.i18n})),this.$list=this.$(".kb-global-areas-list")},open:function(){this.$backdrop.appendTo("body"),jQuery("#wpwrap").addClass("module-browser-open"),this.$el.appendTo("body")},close:function(){this.$backdrop.detach(),jQuery("#wpwrap").removeClass("module-browser-open"),this.$el.detach()},setupViews:function(){var t=this,e=this.Controller.GlobalAreas;return _.map(e,function(e){return new i({model:e,Browser:t})})}})},{"backend/Views/ContextBrowserAreaView":15,"templates/backend/context-browser.hbs":176}],15:[function(e,t,n){var i=e("templates/backend/cb-global-area-item.hbs"),o=e("common/Ajax"),s=e("common/Config"),l=e("common/Notice");t.exports=Backbone.View.extend({tagName:"li",initialize:function(e){this.Browser=e.Browser,this.listenTo(this.model,"change:settings",this.visibility)},events:{click:"add"},visibility:function(){this.model.get("settings").attached?this.$el.hide():this.$el.show()},render:function(){this.$el.append(i({item:this.model.toJSON(),i18n:KB.i18n})),this.$el.appendTo(this.Browser.$list),this.visibility()},add:function(){var e=_.clone(this.model.get("settings"));e.attached=!0,o.send({action:"getGlobalAreaHTML",_ajax_nonce:s.getNonce("update"),areaId:this.model.get("id"),settings:e},this.success,this)},success:function(e){e.success?(this.model.set("settings",e.data.settings),this.Browser.Controller.$inner.append(e.data.html),this.Browser.close(),this.model.View.resetElement(),l.notice("Area attached","success")):l.notice(e.message,"error")}})},{"common/Ajax":50,"common/Config":53,"common/Notice":57,"templates/backend/cb-global-area-item.hbs":174}],16:[function(e,t,n){t.exports=Backbone.View.extend({initialize:function(e){this.Controller=e.Controller,this.ContextsViews=this.setupContextsViews(),this.isVisible=!0,this.listenTo(this.Controller,"columns.rendered",this.columnActivated),this.listenTo(this.Controller,"columns.reset",this.reset)},setupContextsViews:function(){var o={},s=this,e=this.$(".kb-context-container");return _.each(e,function(e,t){var n=e.dataset.kbcontext,i=KB.Contexts.get(n);o[i.View.cid]=i.View,i.View.isVisible=!0,(i.View.ColumnView=s).listenTo(i.View,"context.activated",s.activateColumn)}),o},activateColumn:function(){this.trigger("column.activate",this)},columnActivated:function(e){e.cid!==this.cid?_.each(this.ContextsViews,function(e){e.renderProxy()}):_.each(this.ContextsViews,function(e){e.removeProxy()})},reset:function(){_.each(this.ContextsViews,function(e){e.removeProxy()})}})},{}],17:[function(e,t,n){var i=e("templates/backend/context-bar.hbs"),o=e("backend/Views/ContextUi/ContextUiView"),s=e("backend/Views/ContextUi/ContextColumnView"),l=e("backend/Views/ContextUi/controls/ResetControl"),r=e("backend/Views/ContextUi/controls/ColumnControl");t.exports=Backbone.View.extend({initialize:function(){var e=this;this.columns=this.setupColumns(),this.layoutBackup=this.createLayoutBackup(),this.cols=_.toArray(this.columns).length,this.render(),jQuery(window).resize(function(){e.resetLayout()})},setupColumns:function(){var n=this,e=this.$(".kb-context-col");return _.map(e,function(e){var t=new s({el:e,Controller:n});return n.listenTo(t,"column.activate",n.evalLayout),t})},render:function(){var e=jQuery(i({}));this.$el.before(e),this.BarView=new o({el:e}),this.setupMenuItems()},setupMenuItems:function(){var t=this;this.BarView.addItem(new l({model:this.model,parent:this})),_.each(this.columns,function(e){t.BarView.addItem(new r({model:t.model,parent:t,ColumnView:e}))})},createLayoutBackup:function(){var n={};return _.each(this.columns,function(e,t){n[t]=e.$el.attr("class")}),n},resetLayout:function(){var t=this;_.each(this.columns,function(e){e.isVisible||e.Control.switch(),e.$el.attr("class",t.layoutBackup[e.cid]),e.$el.width("")}),this.trigger("columns.reset")},evalLayout:function(t){var n=this.$el.width()-20*this.cols,i=this.findProportion(this.cols);if(n<1100)return!1;_.each(this.columns,function(e){e.cid===t.cid?e.$el.width(Math.floor(n*i.large)):e.$el.width(Math.floor(n*i.small))}),this.trigger("columns.rendered",t)},renderLayout:function(){var e=_.filter(this.columns,function(e){return e.isVisible}),t=e.length,n=this.$el.width()-20*t;_.each(e,function(e){e.$el.width(Math.floor(n*(100/t/100)))})},findProportion:function(e){switch(e){case 3:return{small:.1,large:.8};case 2:return{small:.3333,large:.6666};default:return{small:1,large:1}}}})},{"backend/Views/ContextUi/ContextColumnView":16,"backend/Views/ContextUi/ContextUiView":18,"backend/Views/ContextUi/controls/ColumnControl":19,"backend/Views/ContextUi/controls/ResetControl":20,"templates/backend/context-bar.hbs":175}],18:[function(e,t,n){var i=e("backend/Views/ModuleControls/ControlsView");t.exports=i.extend({initialize:function(){this.$menuList=jQuery(".kb-context-bar--actions",this.$el)}})},{"backend/Views/ModuleControls/ControlsView":23}],19:[function(e,t,n){var i=e("backend/Views/BaseControlView");t.exports=i.extend({initialize:function(e){this.options=e||{},this.Controller=e.parent,this.ColumnView=e.ColumnView,this.ColumnView.Control=this},className:"context-visibility",events:{click:"switch"},render:function(){this.$el.append('<span class="kb-button-small">'+this.ColumnView.$el.data("kbcolname")+"</span>")},isValid:function(){return!0},switch:function(){this.$el.toggleClass("kb-context-hidden"),this.ColumnView.$el.toggle(),this.ColumnView.isVisible=!this.ColumnView.isVisible,this.Controller.renderLayout()}})},{"backend/Views/BaseControlView":13}],20:[function(e,t,n){var i=e("backend/Views/BaseControlView");t.exports=i.extend({initialize:function(e){this.options=e||{},this.Controller=e.parent},className:"context-reset-layout",events:{click:"resetLayout"},render:function(){this.$el.append('<span class="kb-button-small">Reset</span>')},isValid:function(){return!0},resetLayout:function(){this.Controller.resetLayout()}})},{"backend/Views/BaseControlView":13}],21:[function(e,t,n){var i=e("templates/backend/context-header.hbs"),o=e("backend/Views/ContextBrowser");t.exports=Backbone.View.extend({initialize:function(){this.active=!1,(this.model.View=this).Areas=this.setupAreas(),this.GlobalAreas=this.filterGlobalAreas(),this.AttachedGlobalAreas=this.filterAttachedGlobalAreas(),this.setupElements(),this.bindHandlers(),this.render(),this.listenTo(KB.Events,"context.activate",this.activate)},events:{"click .kb-js-add-global-area":"openBrowser","click .kb-context__header":function(){KB.Events.trigger("context.activate",this)},"click .kb-context-inner--overlay":function(){KB.Events.trigger("context.activate",this)}},setupElements:function(){this.$header=this.$(".kb-context__header"),this.$header.append(i({i18n:KB.i18n})),this.$button=jQuery(".kb-button-small",this.$header),this.$inner=this.$(".kb-context__inner"),this.$overlay=jQuery('<div class="kb-context-inner--overlay"><span>'+this.model.get("title")+"</span><br>click to show</div>")},render:function(){_.isEmpty(this.GlobalAreas)?this.$button.hide():this.$button.show()},activate:function(e){e.cid!==this.cid||this.active?this.active&&e.cid!==this.cid&&(this.active=!1,this.$el.removeClass("kb-context-focus"),this.trigger("context.deactivated",this)):(this.active=!0,this.trigger("context.activated",this),this.$el.addClass("kb-context-focus"))},setupAreas:function(){return KB.Areas.getByContext(this.model.get("id"))},filterGlobalAreas:function(){var t={};return _.each(this.Areas,function(e){e.get("dynamic")&&!e.get("settings").attached&&(t[e.get("id")]=e)}),t},filterAttachedGlobalAreas:function(){var t={};return _.each(this.Areas,function(e){e.get("settings").attached&&e.get("dynamic")&&(t[e.get("id")]=e)}),t},bindHandlers:function(){var t=this;_.each(this.Areas,function(e){t.listenTo(e,"change:settings",t.observeAttachedAreas)})},observeAttachedAreas:function(e){this.GlobalAreas=this.filterGlobalAreas(),this.render()},openBrowser:function(){this.Browser||(this.Browser=new o({Controller:this})),this.Browser.open()},renderProxy:function(){this.$el.addClass("kb-context-downsized"),this.$inner.append(this.$overlay)},removeProxy:function(){this.$el.removeClass("kb-context-downsized"),this.$overlay.detach()}})},{"backend/Views/ContextBrowser":14,"templates/backend/context-header.hbs":177}],22:[function(e,t,n){var i=e("templates/backend/fullscreen-inner.hbs"),o=e("common/TinyMCE"),s=e("common/UI");t.exports=Backbone.View.extend({className:"kb-fullscreen--holder",initialize:function(){return this.$parent=this.model.View.$el,this.$body=jQuery(".kb-module__body",this.$parent),this},events:{"click .kb-fullscreen-js-close":"close","change .kb-template-select":"viewfileChange"},viewfileChange:function(e){var t=this;this.model.View.viewfileChange(e),this.listenToOnce(this.model.View,"kb:backend::viewUpdated",function(){s.repaint(t.$body)})},open:function(){var e=this;e.model.View.open=!0,o.removeEditors(),this.$backdrop=jQuery('<div class="kb-fullscreen-backdrop"></div>').appendTo("body"),this.$fswrap=jQuery(i()).appendTo(this.$el),this.$el.width(.7*jQuery(window).width()),jQuery("#wpwrap").addClass("module-browser-open"),this.$body.detach().appendTo(this.$fswrap.find(".kb-fullscreen--inner")).show().addClass("kb-module--fullscreen"),jQuery(window).resize(function(){e.$fswrap.width(.7*jQuery(window).width())}),this.$el.appendTo("body"),o.restoreEditors(),this.trigger("open"),this.reposition();var t=jQuery(window).height();jQuery(".kb-nano",this.$el).height(t-100),jQuery(".kb-nano").nanoScroller({preventPageScrolling:!0,contentClass:"kb-nano-content"})},reposition:function(){var e=jQuery(window).scrollTop();this.$el.css("top",e+30+"px")},close:function(){o.removeEditors(),jQuery("#wpwrap").removeClass("module-browser-open"),this.$body.detach().appendTo(this.$parent),this.$backdrop.remove(),this.$fswrap.remove(),this.$el.detach(),jQuery(window).off("scroll",jQuery.proxy(this.reposition,this)),this.model.View.open=!1,setTimeout(function(){o.restoreEditors()},250),this.trigger("close")}})},{"common/TinyMCE":59,"common/UI":60,"templates/backend/fullscreen-inner.hbs":178}],23:[function(e,t,n){t.exports=Backbone.View.extend({id:"",$menuWrap:{},$menuList:{},initialize:function(e){this.parent=e.parent,this.$menuWrap=jQuery(".menu-wrap",this.$el),this.$menuWrap.append("<div class='module-actions'></div>"),this.$menuList=jQuery(".module-actions",this.$menuWrap)},addItem:function(e){if(this.controls=this.controls||{},e.isValid&&!0===e.isValid()){var t=jQuery('<div class="kb-controls-item"></div>').appendTo(this.$menuList).append(e.el);this.$menuList.append(t),e.render.call(e),this.controls[e.id]=e}},getView:function(e){return!!this.controls[e]&&this.controls[e]}})},{}],24:[function(e,t,n){var i=e("backend/Views/BaseControlView"),o=e("common/Checks"),s=e("common/Notice"),l=e("common/Ajax"),r=e("common/Config"),a=e("common/TinyMCE"),d=e("common/Window"),u=e("shared/BatchDelete/BatchDeleteController"),c=e("common/I18n");t.exports=i.extend({id:function(){return"delete_"+this.model.get("id")},marked:!1,className:"kb-delete block-menu-icon",attributes:{"data-kbtooltip":c.getString("Modules.controls.be.tooltips.delete"),tabindex:"0",role:"button","aria-label":c.getString("Modules.controls.be.tooltips.delete")},initialize:function(){_.bindAll(this,"yes","no")},events:{click:"deleteModule",keydown:"keyDown"},keyDown:function(e){13===e.keyCode&&this.$el.trigger("click")},deleteModule:function(){d.ctrlPressed()?this.marked?(u.remove(this),this.unmark()):(u.add(this),this.mark()):s.confirm("Delete Module?",KB.i18n.EditScreen.notices.confirmDeleteMsg,this.yes,this.no,this)},mark:function(){this.$el.addClass("kb-batch-marked"),this.marked=!0},unmark:function(){this.$el.removeClass("kb-batch-marked"),this.marked=!1},isValid:function(){return!!o.userCan(this.model.get("settings").cap)&&!(this.model.get("predefined")||this.model.get("disabled")||this.model.get("submodule")||!o.userCan("delete_kontentblocks"))},yes:function(){l.send({action:"removeModules",_ajax_nonce:r.getNonce("delete"),module:this.model.get("mid")},this.success,this)},no:function(){return!1},success:function(e){e.success?(a.removeEditors(this.model.View.$el),KB.ObjectProxy.removeModel(this.model),KB.Modules.remove(this.model),wp.heartbeat.interval("fast",2)):s.notice("Error while removing a module","error")}})},{"backend/Views/BaseControlView":13,"common/Ajax":50,"common/Checks":52,"common/Config":53,"common/I18n":54,"common/Notice":57,"common/TinyMCE":59,"common/Window":62,"shared/BatchDelete/BatchDeleteController":145}],25:[function(e,t,n){var i=e("backend/Views/BaseControlView"),o=e("common/Checks"),s=e("common/Notice"),l=e("common/Ajax"),r=e("common/Config"),a=e("common/UI"),d=e("common/Payload"),u=e("common/I18n");t.exports=i.extend({id:"duplicate",className:"kb-duplicate block-menu-icon",events:{click:"duplicateModule"},attributes:{"data-kbtooltip":u.getString("Modules.controls.be.tooltips.duplicate")},duplicateModule:function(){l.send({action:"duplicateModule",module:this.model.get("mid"),areaContext:this.model.Area.get("context"),_ajax_nonce:r.getNonce("create"),class:this.model.get("class")},this.success,this)},isValid:function(){return!!o.userCan(this.model.get("settings").cap)&&!(this.model.get("predefined")||this.model.get("disabled")||this.model.get("submodule")||!o.userCan("edit_kontentblocks"))},success:function(e){var t,n=this;if(!e.success)return s.notice("Request Error","error"),!1;this.model.Area.View.$modulesList.append(e.data.html),(t=e.data.module).mid&&(t.id=t.mid);var i=KB.ObjectProxy.add(KB.Modules.add(t));this.model.Area.View.attachModule(i),s.notice("Module Duplicated","success"),_.defer(function(){n.parseAdditionalJSON(e.data.json),a.repaint("#"+e.data.module.mid),KB.Fields.trigger("update")})},parseAdditionalJSON:function(e){KB.payload.Fields||(KB.payload.Fields={}),_.extend(KB.payload.Fields,e.Fields),KB.payload.fieldData||(KB.payload.fieldData={}),_.extend(KB.payload.fieldData,e.fieldData),d.parseAdditionalJSON(e)}})},{"backend/Views/BaseControlView":13,"common/Ajax":50,"common/Checks":52,"common/Config":53,"common/I18n":54,"common/Notice":57,"common/Payload":58,"common/UI":60}],26:[function(e,t,n){var i=e("backend/Views/BaseControlView"),o=e("common/Checks"),s=(e("common/Notice"),e("common/Ajax"),e("common/Config"),e("common/UI"),e("common/Payload"),e("common/I18n"));t.exports=i.extend({id:"save",initialize:function(e){this.options=e||{},this.parentView=e.parent,this.listenTo(this.parentView,"kb::module.input.changed",this.getDirty),this.listenTo(this.parentView,"kb::module.data.updated",this.getClean),this.listenTo(this.model,"change:entityData",this.getDirty)},attributes:{"data-kbtooltip":s.getString("Modules.controls.be.tooltips.save")},className:"kb-save block-menu-icon",events:{click:"saveData"},saveData:function(){tinyMCE.triggerSave(),this.model.sync()},getDirty:function(){this.$el.addClass("is-dirty")},getClean:function(){this.$el.removeClass("is-dirty")},isValid:function(){return!!o.userCan(this.model.get("settings").cap)&&(!this.model.get("master")&&(!this.model.get("disabled")&&o.userCan("edit_kontentblocks")))}})},{"backend/Views/BaseControlView":13,"common/Ajax":50,"common/Checks":52,"common/Config":53,"common/I18n":54,"common/Notice":57,"common/Payload":58,"common/UI":60}],27:[function(e,t,n){var i=e("backend/Views/BaseControlView"),o=e("common/Checks"),s=e("common/Config"),l=e("common/Notice"),r=e("common/Ajax"),a=e("common/I18n");t.exports=i.extend({id:function(){return"status_"+this.model.get("id")},initialize:function(e){this.options=e||{}},className:"module-status block-menu-icon",events:{click:"changeStatus",keydown:"keyDown"},keyDown:function(e){13===e.keyCode&&this.$el.trigger("click")},attributes:function(){return this.model.get("state").active?{"data-kbtooltip":a.getString("Modules.controls.be.tooltips.status.off"),"aria-label":a.getString("Modules.controls.be.tooltips.status.off"),tabindex:"0",role:"button"}:{"data-kbtooltip":a.getString("Modules.controls.be.tooltips.status.on"),"aria-label":a.getString("Modules.controls.be.tooltips.status.on"),tabindex:"0",role:"button"}},changeStatus:function(){r.send({action:"changeModuleStatus",module:this.model.get("mid"),_ajax_nonce:s.getNonce("update")},this.success,this)},isValid:function(){return!!o.userCan(this.model.get("settings").cap)&&!(this.model.get("disabled")||!o.userCan("deactivate_kontentblocks"))},success:function(){var e=this.model.get("state");e.active=!e.active,this.model.set("state",e),e.active?(this.$el.attr("data-kbtooltip",a.getString("Modules.controls.be.tooltips.status.off")),this.$el.attr("aria-label",a.getString("Modules.controls.be.tooltips.status.off"))):(this.$el.attr("data-kbtooltip",a.getString("Modules.controls.be.tooltips.status.on")),this.$el.attr("aria-label",a.getString("Modules.controls.be.tooltips.status.on"))),this.options.parent.$head.toggleClass("module-inactive"),this.options.parent.$el.toggleClass("activated deactivated"),l.notice("Status changed","success")}})},{"backend/Views/BaseControlView":13,"common/Ajax":50,"common/Checks":52,"common/Config":53,"common/I18n":54,"common/Notice":57}],28:[function(e,t,n){var i=e("backend/Views/ModuleControls/ControlsView");t.exports=i.extend({initialize:function(){this.$menuWrap=jQuery(".ui-wrap",this.$el),this.$menuWrap.append("<div class='ui-actions'></div>"),this.$menuList=jQuery(".ui-actions",this.$menuWrap)}})},{"backend/Views/ModuleControls/ControlsView":23}],29:[function(e,t,n){var i=e("backend/Views/BaseControlView");t.exports=i.extend({id:"disable",initialize:function(e){this.options=e||{}},className:"ui-disabled kb-disabled block-menu-icon dashicons dashicons-dismiss",isValid:function(){return!!this.model.get("settings").disabled}})},{"backend/Views/BaseControlView":13}],30:[function(e,t,n){var i=e("backend/Views/BaseControlView"),o=e("backend/Views/FullscreenView"),s=e("common/Checks"),l=e("common/I18n");t.exports=i.extend({id:"fullscreen",initialize:function(e){this.options=e||{},this.$parent=this.model.View.$el,this.$body=jQuery(".kb-module__body",this.$parent)},attributes:{"data-kbtooltip":l.getString("Modules.tooltips.toggleFullscreen")},events:{click:"openFullscreen"},className:"ui-fullscreen kb-fullscreen block-menu-icon",isValid:function(){return!!s.userCan(this.model.get("settings").cap)&&!(this.model.get("settings").disabled||!s.userCan("edit_kontentblocks"))},openFullscreen:function(){this.FullscreenView||(this.FullscreenView=new o({model:this.model}).open())},getFullscreenView:function(){return this.FullscreenView||(this.FullscreenView=new o({model:this.model})),this.FullscreenView}})},{"backend/Views/BaseControlView":13,"backend/Views/FullscreenView":22,"common/Checks":52,"common/I18n":54}],31:[function(e,t,n){var i=e("backend/Views/BaseControlView"),o=e("common/Checks"),s=e("common/I18n");t.exports=i.extend({id:"move",initialize:function(e){this.options=e||{}},attributes:{"data-kbtooltip":s.getString("Modules.tooltips.dragToSort")},className:"ui-move kb-move block-menu-icon",isValid:function(){return!!o.userCan(this.model.get("settings").cap)&&!(this.model.get("settings").disabled||!o.userCan("edit_kontentblocks")||this.model.get("submodule"))}})},{"backend/Views/BaseControlView":13,"common/Checks":52,"common/I18n":54}],32:[function(e,t,n){var i=e("backend/Views/BaseControlView"),o=e("common/Checks"),s=e("common/I18n");t.exports=i.extend({id:function(){return"toggle_"+this.model.get("id")},initialize:function(e){this.options=e||{},this.parent=e.parent,this.listenTo(this.parent,"toggle.open",this.toggleBody),store.get(this.parent.model.get("mid")+"_open")?(this.toggleBody(),this.parent.open=!0):this.parent.model.get("globalModule")||(this.parent.open=!1)},events:{click:"toggleBody",keydown:"keyDown"},attributes:{tabindex:"0",role:"button","aria-pressed":"false","data-kbtooltip":s.getString("Modules.tooltips.toggleModule"),"aria-label":s.getString("Modules.tooltips.toggleModule")},className:"ui-toggle kb-toggle block-menu-icon",isValid:function(){return!!o.userCan(this.model.get("settings").cap)&&!(this.model.get("settings").disabled||this.model.get("submodule")||!o.userCan("edit_kontentblocks"))},keyDown:function(e){13===e.keyCode&&this.$el.trigger("click")},toggleBody:function(e){var t=e||400;o.userCan("edit_kontentblocks")&&(this.parent.$body.slideToggle(t),this.parent.$el.toggleClass("kb-open"),KB.currentModule=this.model,this.setOpenStatus())},setOpenStatus:function(){this.parent.open=!this.parent.open,store.set(this.parent.model.get("mid")+"_open",this.parent.open),this.parent.trigger("kb.module.view.open",this.parent.open),this.parent.model.trigger("kb.module.view.open",this.parent.open),this.parent.open?this.$el.attr("aria-pressed","true"):this.$el.attr("aria-pressed","false")}})},{"backend/Views/BaseControlView":13,"common/Checks":52,"common/I18n":54}],33:[function(e,t,n){var i=e("backend/Views/ModuleControls/ControlsView"),o=e("backend/Views/ModuleUi/ModuleUiView"),s=e("shared/ModuleStatusBar/ModuleStatusBarView"),l=e("backend/Views/ModuleControls/controls/DeleteControl"),r=e("backend/Views/ModuleControls/controls/DuplicateControl"),a=e("backend/Views/ModuleControls/controls/SaveControl"),d=e("backend/Views/ModuleControls/controls/StatusControl"),u=e("backend/Views/ModuleUi/controls/MoveControl"),c=e("backend/Views/ModuleUi/controls/ToggleControl"),h=e("backend/Views/ModuleUi/controls/FullscreenControl"),p=e("backend/Views/ModuleUi/controls/DisabledControl"),m=e("shared/ModuleStatusBar/status/DraftStatus"),f=e("shared/ModuleStatusBar/status/OriginalNameStatus"),g=e("shared/ModuleStatusBar/status/SettingsStatus"),b=e("shared/ModuleStatusBar/status/LoggedInStatus"),v=e("shared/ModuleStatusBar/status/TemplateStatus"),k=e("shared/ModuleStatusBar/status/TemplateEditorStatus"),y=(e("common/Checks"),e("common/Ajax")),w=e("common/UI"),x=e("common/Config"),C=e("common/Payload");t.exports=Backbone.View.extend({$head:{},$body:{},ModuleMenu:{},instanceId:"",events:{mouseenter:"setFocusedModule","change .kb-template-select":"viewfileChange","tinymce.change":"handleChange"},setFocusedModule:function(){KB.focusedModule=this.model},handleChange:function(){this.trigger("kb::module.input.changed",this)},viewfileChange:function(e){var t=jQuery(e.currentTarget);this.model.set("viewfile",t.val()),this.clearFields(),this.updateModuleForm(),this.trigger("KB::backend.module.viewfile.changed")},initialize:function(){!(this.open=!1)===this.model.get("globalModule")&&(this.open=!0),this.$head=jQuery(".kb-module__header",this.$el),this.$body=jQuery(".kb-module__body",this.$el),this.$inner=jQuery(".kb-module__controls-inner",this.$el),this.$innerForm=jQuery(".kb-module__controls-inner-form",this.$el),this.attachedFields={},this.instanceId=this.model.get("mid"),this.ModuleMenu=new i({el:this.$el,parent:this}),this.ModuleUi=new o({el:this.$el,parent:this}),this.ModuleStatusBar=new s({el:this.$el,parent:this}),this.model.connectView(this),this.setupDefaultMenuItems(),this.setupDefaultUiItems(),this.setupDefaultStatusItems(),KB.Views.Modules.on("kb.modules.view.deleted",function(e){e.$el.fadeOut(500,function(){e.$el.remove()})}),this.$(".kb-template-select").select2({width:200,templateResult:function(e){if(!e.id)return e.text;var t=e.element.dataset.tpldesc;return jQuery("<span>"+e.text+'<br><span class="kb-tpl-desc">'+t+"</span></span>")}})},setupDefaultMenuItems:function(){this.ModuleMenu.addItem(new a({model:this.model,parent:this})),this.ModuleMenu.addItem(new r({model:this.model,parent:this})),this.ModuleMenu.addItem(new l({model:this.model,parent:this})),this.ModuleMenu.addItem(new d({model:this.model,parent:this})),this.trigger("module.view.setup.menu",this.ModuleMenu,this.model,this)},setupDefaultUiItems:function(){this.ModuleUi.addItem(new u({model:this.model,parent:this})),this.ModuleUi.addItem(new c({model:this.model,parent:this})),this.ModuleUi.addItem(new h({model:this.model,parent:this})),this.ModuleUi.addItem(new p({model:this.model,parent:this})),this.trigger("module.view.setup.ui",this.ModuleUi,this.model,this)},setupDefaultStatusItems:function(){this.ModuleStatusBar.addItem(new g({model:this.model,parent:this})),this.ModuleStatusBar.addItem(new m({model:this.model,parent:this})),this.ModuleStatusBar.addItem(new f({model:this.model,parent:this})),this.ModuleStatusBar.addItem(new b({model:this.model,parent:this})),this.ModuleStatusBar.addItem(new v({model:this.model,parent:this})),this.ModuleStatusBar.addItem(new k({model:this.model,parent:this}))},updateModuleForm:function(){y.send({action:"afterAreaChange",module:this.model.toJSON(),_ajax_nonce:x.getNonce("read")},this.insertNewUpdateForm,this)},insertNewUpdateForm:function(e){e.success?this.$innerForm.html(e.data.html):this.$innerForm.html("empty"),e.data.json.Fields&&(KB.payload.Fields=_.extend(C.getPayload("Fields"),e.data.json.Fields),KB.payload.fieldData=_.extend(C.getPayload("fieldData"),e.data.json.fieldData),KB.FieldControls.add(_.toArray(KB.payload.Fields))),w.repaint(this.$el),KB.Fields.trigger("update"),this.trigger("kb:backend::viewUpdated"),this.model.trigger("after.change.area")},serialize:function(){var e;return delete(e=jQuery("#post").serializeJSON()[this.model.get("mid")]).areaContext,this.trigger("kb::module.data.updated"),e},addField:function(e,t,n){_.isEmpty(n)?this.attachedFields[e]=t:this.attachedFields[n][e]=t},hasField:function(e,t){return _.isEmpty(t)?e in this.attachedFields:(this.attachedFields[t]||(this.attachedFields[t]={}),e in this.attachedFields[t])},getField:function(e,t){return _.isEmpty(t)?this.attachedFields[e]:this.attachedFields[t][e]},clearFields:function(){this.attachedFields={}},dispose:function(){},getDirty:function(){},getClean:function(){},isOpen:function(){return this.open}})},{"backend/Views/ModuleControls/ControlsView":23,"backend/Views/ModuleControls/controls/DeleteControl":24,"backend/Views/ModuleControls/controls/DuplicateControl":25,"backend/Views/ModuleControls/controls/SaveControl":26,"backend/Views/ModuleControls/controls/StatusControl":27,"backend/Views/ModuleUi/ModuleUiView":28,"backend/Views/ModuleUi/controls/DisabledControl":29,"backend/Views/ModuleUi/controls/FullscreenControl":30,"backend/Views/ModuleUi/controls/MoveControl":31,"backend/Views/ModuleUi/controls/ToggleControl":32,"common/Ajax":50,"common/Checks":52,"common/Config":53,"common/Payload":58,"common/UI":60,"shared/ModuleStatusBar/ModuleStatusBarView":156,"shared/ModuleStatusBar/status/DraftStatus":157,"shared/ModuleStatusBar/status/LoggedInStatus":158,"shared/ModuleStatusBar/status/OriginalNameStatus":159,"shared/ModuleStatusBar/status/SettingsStatus":167,"shared/ModuleStatusBar/status/TemplateEditorStatus":168,"shared/ModuleStatusBar/status/TemplateStatus":169}],34:[function(e,t,n){var i=e("common/Logger"),o=e("backend/Views/Renderer/FieldsRendererSections");t.exports=Backbone.View.extend({initialize:function(){this.open=!0,(this.model.View=this).setupRenderer()},getDirty:function(){i.Debug.info("Panel data dirty")},getClean:function(){i.Debug.info("Panel data clean")},setupRenderer:function(){var e=this.$el.data();e&&e.kbFieldRenderer&&"fields-renderer-sections"===e.kbFieldRenderer&&new o({el:this.el})},isOpen:function(){return this.open}})},{"backend/Views/Renderer/FieldsRendererSections":35,"common/Logger":56}],35:[function(e,t,n){var a=e("backend/Views/Renderer/ToggleSection");t.exports=Backbone.View.extend({initialize:function(){this.quicknav=this.$("ul.kbf-sections-quicknav"),this.sections=this.setupSections()},setupSections:function(){var l=this,e=this.$("[data-kb-toggle-trigger]"),r=[];return _.each(e,function(e){var t=jQuery(e),n=t.data("kb-toggle-trigger"),i=this.$('[data-kb-toggle-container="'+n+'"]'),o=t.find("h2").text(),s=t.parent().attr("id");setTimeout(function(){t.is(":visible")&&l.quicknav.append('<li><a href="#'+s+'">'+o+"</a></li>")},120),r.push(new a({el:i,$toggle:jQuery(e),uid:n}))},this),r}})},{"backend/Views/Renderer/ToggleSection":36}],36:[function(e,t,n){var i=e("common/Utilities");t.exports=Backbone.View.extend({initialize:function(e){var t=this;this.$toggle=e.$toggle,this.uid=e.uid;var n=i.store.get(this.uid);window.store.enabled&&(_.isUndefined(n)&&i.store.set(this.uid,{open:!0}),this.bindHandlers(),_.defer(function(){t.initialState()}))},bindHandlers:function(){var e=this;this.$toggle.on("click",function(){e.toggle()})},toggle:function(){var e=i.store.get(this.uid)||{open:!0};this.$el.slideToggle(250),e=!e.open,i.store.set(this.uid,{open:e}),this.$toggle.toggleClass("kb-toggle-open")},initialState:function(){var e=i.store.get(this.uid);if(e&&!_.isUndefined(e.open)&&!1===e.open)return this.$el.slideUp(200),this.$toggle.removeClass("kb-toggle-open"),null;this.$toggle.addClass("kb-toggle-open")}})},{"common/Utilities":61}],37:[function(e,t,n){e("templates/backend/area-item-placeholder.hbs"),e("templates/backend/area-add-module.hbs"),e("shared/ModuleBrowser/ModuleBrowserController"),e("backend/Views/AreaControls/AreaControlsView"),e("backend/Views/AreaControls/controls/StatusControl"),e("backend/Views/AreaControls/controls/DetachControl"),e("backend/Views/AreaControls/controls/MoveControl"),e("common/Checks");t.exports=Backbone.View.extend({initialize:function(){this.attachedModules={},this.$controlsContainer=this.$(".add-modules"),this.$modulesList=this.$("#"+this.model.get("id")),(this.model.View=this).render()},render:function(){},attachModule:function(e){this.attachedModules[e.cid]=e,this.listenTo(e,"change:area",this.removeModule),this.trigger("module.attached",e)},removeModule:function(e){var t;t=e.cid,this.attachedModules[t]&&(delete this.attachedModules[t],this.stopListening(e,"change:area",this.removeModule)),this.trigger("module.detached",e)}})},{"backend/Views/AreaControls/AreaControlsView":8,"backend/Views/AreaControls/controls/DetachControl":9,"backend/Views/AreaControls/controls/MoveControl":10,"backend/Views/AreaControls/controls/StatusControl":11,"common/Checks":52,"shared/ModuleBrowser/ModuleBrowserController":148,"templates/backend/area-add-module.hbs":171,"templates/backend/area-item-placeholder.hbs":172}],38:[function(e,t,n){var i=e("common/Ajax"),o=e("common/Config"),s=e("./ViewsList"),l=e("./Controls"),r=e("./FieldsList"),a=e("templates/backend/template-editor/wrap.hbs");t.exports=Backbone.View.extend({className:"kb-codemirror-overlay",currentView:null,initialize:function(e){this.viewfile=e.viewfile,this.moduleView=e.moduleView,this.$wrap=jQuery(a()).appendTo(this.$el),this.$sidebar=this.$(".kb-tpled--sidebar"),this.$content=this.$(".kb-tpled--content"),this.moduleModel=e.module,this.views=this.prepareViews(this.moduleModel.get("views")),this.open()},events:{"click .kb-tpled--close":"close"},open:function(){this.$backdrop=jQuery('<div class="kb-fullscreen-backdrop"></div>').appendTo("body"),jQuery("#wpwrap").addClass("module-browser-open"),this.$el.appendTo("body"),this.trigger("open"),this.editor=CodeMirror(document.getElementById("codemirror"),{mode:"twig",theme:"dracula",lineNumbers:!0,lineWrapping:!0,tabMode:"indent",indentUnit:4}),this.render()},close:function(){this.$backdrop.remove(),jQuery("#wpwrap").removeClass("module-browser-open"),this.$el.detach(),this.trigger("close")},render:function(){this.List=new s({$container:this.$("[data-views]"),views:this.views,controller:this}).render(),this.Controls=new l({$container:this.$("[data-controls]"),controller:this}).render(),this.Fields=new r({$container:this.$("[data-fields]"),controller:this}),this.load(this.List.getActiveView())},load:function(t){var n=this;this.currentView&&this.currentView.deselect(),i.send({viewfile:t.model.toJSON(),action:"getTemplateString",module:this.moduleModel.toJSON(),_ajax_nonce:o.getNonce("read")},function(e){n.editor.setValue(e.data.string),n.currentView=t,n.currentView.select(),n.Fields.setFields(e.data.fields).render()},this)},getCurrentView:function(){return this.currentView},prepareViews:function(e){return _.map(e,function(e){return e.selected=e.filename===this.moduleModel.get("viewfile")?'selected="selected"':"",e.isActive=e.filename===this.moduleModel.get("viewfile"),e},this)}})},{"./Controls":39,"./FieldsList":41,"./ViewsList":43,"common/Ajax":50,"common/Config":53,"templates/backend/template-editor/wrap.hbs":194}],39:[function(e,t,n){var i=e("backend/Views/TemplateEditor/controls/UpdateControl"),o=e("backend/Views/TemplateEditor/controls/CreateControl"),s=e("backend/Views/TemplateEditor/controls/DuplicateControl"),l=e("backend/Views/TemplateEditor/controls/FeedbackControl"),r=e("backend/Views/TemplateEditor/controls/DeleteControl");t.exports=Backbone.View.extend({tagName:"ul",className:"kb-tpl-editor-controls",initialize:function(e){this.$container=e.$container,this.controller=e.controller},render:function(){return this.$container.empty().append(this.$el),this.createControls(),this},createControls:function(){this.$el.append(new i({controller:this.controller,controls:this}).render()),this.$el.append(new o({controller:this.controller,controls:this}).render()),this.$el.append(new s({controller:this.controller,controls:this}).render()),this.$el.append(new r({controller:this.controller,controls:this}).render()),this.$el.append(new l({controller:this.controller,controls:this}).render())}})},{"backend/Views/TemplateEditor/controls/CreateControl":44,"backend/Views/TemplateEditor/controls/DeleteControl":45,"backend/Views/TemplateEditor/controls/DuplicateControl":46,"backend/Views/TemplateEditor/controls/FeedbackControl":47,"backend/Views/TemplateEditor/controls/UpdateControl":48}],40:[function(e,t,n){var i=e("templates/backend/template-editor/field-item.hbs");t.exports=Backbone.View.extend({tagName:"li",initialize:function(e){this.controller=e.controller,this.$list=e.$list},render:function(){console.log(this.model.toJSON()),this.$el.append(i({data:this.model.toJSON()})),this.$list.append(this.$el)}})},{"templates/backend/template-editor/field-item.hbs":192}],41:[function(e,t,n){var i=e("backend/Views/TemplateEditor/FieldItem");t.exports=Backbone.View.extend({tagName:"ul",initialize:function(e){this.$container=e.$container,this.controller=e.controller},render:function(){return this.$container.empty().append(this.$el),this.$el.empty(),_.each(this.fields,function(e){e.render()}),this},setFields:function(e){return this.fields=this.createViews(e),this},createViews:function(e){return _.map(e,function(e){return new i({controller:this.controller,$list:this.$el,model:new Backbone.Model(e)})},this)}})},{"backend/Views/TemplateEditor/FieldItem":40}],42:[function(e,t,n){var i=e("templates/backend/template-editor/list-item.hbs");t.exports=Backbone.View.extend({tagName:"li",initialize:function(e){this.controller=e.controller,this.$list=e.$list},events:{click:"loadView"},render:function(){this.$el.append(i({data:this.model.toJSON()})),this.$list.append(this.$el)},loadView:function(){this.controller.load(this)},select:function(){this.$el.addClass("kb-active-template")},deselect:function(){this.$el.removeClass("kb-active-template")}})},{"templates/backend/template-editor/list-item.hbs":193}],43:[function(e,t,n){var i=e("backend/Views/TemplateEditor/ListItem");t.exports=Backbone.View.extend({tagName:"ul",initialize:function(e){this.$container=e.$container,this.controller=e.controller,this.views=this.createViews(e.views)},render:function(){return this.$container.empty().append(this.$el),_.each(this.views,function(e){e.render()}),this},updateViews:function(e){var t=this.controller.prepareViews(e);this.views=this.createViews(t),this.$el.empty(),this.render(),this.controller.moduleView.ModuleStatusBar.getView("templates").render(t)},getActiveView:function(){return _.find(this.views,function(e){return e.model.get("isActive")})},createViews:function(e){return _.map(e,function(e){return new i({controller:this.controller,$list:this.$el,model:new Backbone.Model(e)})},this)}})},{"backend/Views/TemplateEditor/ListItem":42}],44:[function(e,t,n){var i=e("common/Ajax"),o=e("common/Config"),s=e("common/Notice");t.exports=Backbone.View.extend({tagName:"li",initialize:function(e){this.controller=e.controller,this.controls=e.controls},events:{click:"ask"},render:function(){return this.$el.html('<span class="dashicons dashicons-welcome-add-page"></span> Create new template')},ask:function(){var n;s.prompt("Template Name","Please provide a unique template name",".twig",function(e,t){n=t,this.create(n)},function(e,t){},this)},create:function(e){this.controller.getCurrentView();i.send({action:"createModuleViewTemplate",_ajax_nonce:o.getNonce("update"),module:this.controller.moduleModel.toJSON(),tplstring:"",filename:e},this.success,this)},success:function(e){!1!==e.success?(this.controller.List.updateViews(e.data.views),this.controller.trigger("broadcast",e.message)):s.notice(e.message,"error",8)}})},{"common/Ajax":50,"common/Config":53,"common/Notice":57}],45:[function(e,t,n){var i=e("common/Ajax"),o=e("common/Config"),s=e("common/Notice");t.exports=Backbone.View.extend({tagName:"li",initialize:function(e){this.controller=e.controller,this.controls=e.controls},events:{click:"ask"},render:function(){return this.$el.html('<span class="dashicons dashicons-trash"></span> Delete loaded template')},ask:function(){s.confirm("Template Name","Delete template?",function(e,t){this.delete()},function(e,t){},this)},delete:function(){var e=this.controller.getCurrentView();i.send({action:"deleteModuleViewTemplate",_ajax_nonce:o.getNonce("update"),module:this.controller.moduleModel.toJSON(),view:e.model.toJSON()},this.success,this)},success:function(e){if(!1===e.success)return s.notice(e.message,"error",8),void this.controller.trigger("broadcast",e.message);this.controller.List.updateViews(e.data.views),this.controller.trigger("broadcast",e.message)}})},{"common/Ajax":50,"common/Config":53,"common/Notice":57}],46:[function(e,t,n){var i=e("common/Ajax"),o=e("common/Config"),s=e("common/Notice");t.exports=Backbone.View.extend({tagName:"li",initialize:function(e){this.controller=e.controller,this.controls=e.controls},events:{click:"ask"},render:function(){return this.$el.html('<span class="dashicons dashicons-admin-page"></span> Copy')},ask:function(){var n;s.prompt("Template Name","Please provide a unique template name",".twig",function(e,t){n=t,this.create(n)},function(e,t){},this)},create:function(e){this.controller.getCurrentView();i.send({action:"createModuleViewTemplate",_ajax_nonce:o.getNonce("update"),module:this.controller.moduleModel.toJSON(),filename:e,tplstring:this.controller.editor.getValue()},this.success,this)},success:function(e){!1!==e.success?(this.controller.List.updateViews(e.data.views),this.controller.trigger("broadcast",e.message)):s.notice(e.message,"error",8)}})},{"common/Ajax":50,"common/Config":53,"common/Notice":57}],47:[function(e,t,n){e("common/Ajax"),e("common/Config"),e("common/Notice");t.exports=Backbone.View.extend({tagName:"li",className:"kb-tpled--notice",initialize:function(e){this.controller=e.controller,this.controls=e.controls,this.listenTo(this.controller,"broadcast",this.setMessage)},events:{click:"update"},render:function(){return this.$el.html('<span class="dashicons dashicons-warning"></span><div class="" data-message></div>')},setMessage:function(e){var t=this.$("[data-message]");t.hide().html(e).fadeIn(1500),setTimeout(function(){t.fadeOut(2e3)},5e3)}})},{"common/Ajax":50,"common/Config":53,"common/Notice":57}],48:[function(e,t,n){var i=e("common/Ajax"),o=e("common/Config"),s=e("common/Notice");t.exports=Backbone.View.extend({tagName:"li",initialize:function(e){this.controller=e.controller,this.controls=e.controls},events:{click:"update"},render:function(){return this.$el.html('<span class="dashicons dashicons-update"></span> Update')},update:function(){var e=this.controller.getCurrentView();i.send({action:"updateModuleViewTemplate",_ajax_nonce:o.getNonce("update"),view:e.model.toJSON(),tplstring:this.controller.editor.getValue(),module:this.controller.moduleModel.toJSON()},this.success,this)},success:function(e){!1===e.success&&(s.notice(e.message,"error",8),this.controller.trigger("broadcast",e.message)),this.controller.trigger("broadcast",e.message)}})},{"common/Ajax":50,"common/Config":53,"common/Notice":57}],49:[function(e,t,n){t.exports=Backbone.View.extend({el:"#kb-contexts-tabs",initialize:function(){var i=this,e=this.$el.tabs({}),o=jQuery("ul:first li",e).droppable({accept:".kb-module-ui__sortable--connect li",hoverClass:"ui-state-hover",tolerance:"pointer",over:function(e,t){var n=jQuery(this);i.$el.tabs("option","active",o.index(n)),i.$(".kb-module-ui__sortable").sortable("refresh")}})}})},{}],50:[function(e,t,n){var r=e("common/Notice");t.exports={send:function(e,t,n,i){var o,s=i||{};o=e.postId?e.postId:!(!KB.Environment||!KB.Environment.postId)&&KB.Environment.postId;var l=_.extend({supplemental:e.supplemental||{},nonce:jQuery("#_kontentblocks_ajax_nonce").val(),post_id:o,postId:o,kbajax:!0},e);return jQuery("#publish").attr("disabled","disabled"),jQuery.ajax({url:ajaxurl,data:l,type:"POST",dataType:"json",success:function(e){e&&(n&&t?t.call(n,e,s):t&&t(e,s))},error:function(){r.notice("<p>Generic Ajax Error</p>","error")},complete:function(){jQuery("#publish").removeAttr("disabled")}})}}},{"common/Notice":57}],51:[function(e,t,n){var i=e("common/Ajax"),o=e("common/Config");t.exports=Backbone.View.extend({initialize:function(){var i=this;jQuery(document).ajaxSend(function(e,t,n){-1!==n.data.indexOf("wp_autosave")&&t.then(function(e){e&&e.wp_autosave&&e.wp_autosave.success&&i.handleAutosave()})})},handleAutosave:function(){var e=jQuery("#post");if(0===e.length)return!1;var t=e.serializeJSON();i.send({action:"autosave",data:t,_ajax_nonce:o.getNonce("update")},this.success,this)},success:function(e){console.log(e)}})},{"common/Ajax":50,"common/Config":53}],52:[function(e,t,n){e("common/Config");t.exports={blockLimit:function(e){var t=e.get("limit"),n=jQuery("#"+e.get("id")+" li.kb-module").length;return!(0!==t&&n===t)},userCan:function(e){return!0}}},{"common/Config":53}],53:[function(e,t,n){var i,o=(jQuery,i=KB.appData.config||{},{get:function(e){return e?i[e]?i[e]:null:i},getNonce:function(e){return-1!==_.indexOf(["update","create","delete","read"],e)?i.nonces[e]:(console.error("Invalid nonce requested in kb.cm.Config.js"),null)},isAdmin:function(){return!i.frontend},inDevMode:function(){return i.env.dev},getRootURL:function(){return i.env.rootUrl},getFieldJsUrl:function(){return i.env.fieldJsUrl},getHash:function(){return i.env.hash},getLayoutMode:function(){return i.layoutMode||"default-boxes"}});t.exports=o},{}],54:[function(e,t,n){var i=e("common/Utilities");t.exports={getString:function(e){return e&&KB&&KB.i18n?i.getIndex(KB.i18n,e):null}}},{"common/Utilities":61}],55:[function(e,t,n){t.exports={fields:[],strings:[],getFields:function(){this.fields=[],this.strings=[];var e=jQuery("[data-kbfuid]");_.each(e,function(e){var t=jQuery(e).data("kbfuid"),n=KB.FieldControls.get(t);n&&this.fields.push(n)},this)},getStrings:function(){this.getFields(),_.each(this.fields,function(e){e.FieldControlView&&this.strings.push(e.FieldControlView.toString())},this)},concatStrings:function(){this.getStrings();var t="";return _.each(this.strings,function(e){""!==e&&(t=t+e+"\n")}),t}}},{}],56:[function(e,t,n){var i=e("common/Config");Function.prototype.bind&&window.console&&"object"==typeof console.log&&["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.bind(console[e],console)},Function.prototype.call),Logger.useDefaults();var o=Logger.get("_K"),s=Logger.get("_KS");o.setLevel(o.INFO),s.setLevel(s.INFO),i.inDevMode()||o.setLevel(Logger.OFF),Logger.setHandler(function(e,t){if(KB.Menubar&&2===t.level.value&&"_KS"===t.name)e[0]&&KB.Menubar.StatusBar.setMsg(e[0]);else{var n=window.console,i=n.log;t.name&&(e[0]="["+t.name+"] "+e[0]),t.level===Logger.WARN&&n.warn?i=n.warn:t.level===Logger.ERROR&&n.error?i=n.error:t.level===Logger.INFO&&n.info&&(i=n.info),i.apply(n,e)}}),t.exports={Debug:o,User:s}},{"common/Config":53}],57:[function(e,t,n){"use strict";t.exports={notice:function(e,t,n){var i=n||3;window.alertify.notify(e,t,i)},confirm:function(e,t,n,i,o){var s=e||"Title";window.alertify.confirm(s,t,function(){n.call(o)},function(){i.call(o)})},prompt:function(e,t,n,i,o,s){var l=e||"Title";window.alertify.prompt(l,t,n,function(e,t){i.call(s,e,t)},function(e,t){o.call(s,e,t)})}}},{}],58:[function(e,t,n){t.exports={getFieldData:function(e,t,n,i){var o;return this._typeExists(e)&&(o=KB.payload.fieldData[e])[t]?_.isEmpty(i)?o[t][n]?o[t][n]:[]:o[t][i]&&o[t][i][n]?o[t][i][n]:[]:[]},_typeExists:function(e){return!_.isUndefined(KB.payload.fieldData[e])},getFieldArgs:function(e,t){return KB.payload.Fields&&KB.payload.Fields[e]?t&&KB.payload.Fields[e][t]?KB.payload.Fields[e][t]:KB.payload.Fields[e]:null},parseAdditionalJSON:function(e){var t;return t={Fields:[]},e&&e.Areas&&_.each(e.Areas,function(e){KB.ObjectProxy.add(KB.Areas.add(e))}),e&&e.Fields&&(t.Fields=KB.FieldControls.add(_.toArray(e.Fields))),t},getPayload:function(e){return KB&&KB.payload&&KB.payload[e]?KB.payload[e]:{}}}},{}],59:[function(e,t,n){var d=e("common/Ajax"),u=e("common/Logger"),c=e("common/Config");t.exports={removeEditors:function(e){e||(e=jQuery("body")),jQuery(".wp-editor-area",e).each(function(){if("wp-content-wrap"===jQuery(this).attr("id")||"ghosteditor"===jQuery(this).attr("id")||"replycontent"===jQuery(this).attr("id"));else{var e=this.id;tinyMCE.execCommand("mceRemoveEditor",!0,e)}})},restoreEditors:function(e){e||(e=jQuery("body")),jQuery(".wp-editor-wrap",e).each(function(){var e=jQuery(this).find("textarea").attr("id"),t=jQuery(this).find("textarea");"ghosteditor"!==e&&"replycontent"!==e&&(t.val(switchEditors.wpautop(t.val())),tinyMCE.execCommand("mceAddEditor",!0,e),switchEditors.go(e,"tmce"))})},addEditor:function(e,t,n,i){if(!e)return u.Debug.error("No scope element ($el) provided"),!1;if(_.isUndefined(tinyMCEPreInit))return!1;var o=n||350,s=!!_.isUndefined(i);jQuery(".wp-editor-area",e).each(function(){var e=this.id;window.tinyMCE.get(e)&&tinyMCE.execCommand("mceRemoveEditor",null,e);var t=tinyMCEPreInit&&tinyMCEPreInit.mceInit&&tinyMCEPreInit.mceInit.ghosteditor?"ghosteditor":"content",n=_.clone(tinyMCEPreInit.mceInit[t]);n.elements=e,n.selector="#"+e,n.id=e,n.kblive=s,n.height=o,n.remove_linebreaks=!1,n.setup=function(e){e.on("init",function(){KB.Events.trigger("kb.tinymce.new-editor",e)}),e.on("change",function(){})},tinymce.init(n),tinyMCEPreInit.mceInit[e]||(tinyMCEPreInit.mceInit[e]=n);var i={buttons:"",disabled_buttons:"",id:e};window.quicktags(i)}),setTimeout(function(){jQuery(".wp-editor-wrap",e).removeClass("html-active").addClass("tmce-active"),window.QTags._buttonsInit()},1500)},remoteGetEditor:function(t,e,n,i,o,s,l){var r=o||KB.appData.config.post.ID;n=n||t.attr("id");if(!s)s=!1;var a=i||"";return d.send({action:"getRemoteEditor",editorId:n+"_ed",editorName:e,post_id:r,postId:r,editorContent:a,_ajax_nonce:c.getNonce("read"),args:{media_buttons:s}},function(e){e.success?(t.empty().append(e.data.html),this.addEditor(t,null,250,l)):u.Debug.info("Editor markup could not be retrieved from the server")},this)}}},{"common/Ajax":50,"common/Config":53,"common/Logger":56}],60:[function(e,t,n){var r=jQuery,a=e("common/Config"),i=e("common/Ajax"),d=e("common/TinyMCE"),u=e("common/Notice"),o=e("backend/Views/ContextUi/ContextRowGrid"),s={isSorting:!1,init:function(){var i=this,e=r("body");this.initTabs(),this.initSortable(),this.initSortableAreas(),this.initToggleBoxes(),this.flexContext(),this.flushLocalStorage(),this.initTipsy(),e.on("mousedown",".kb-field",function(e){activeField=this}),e.on("mousedown",".kb-module",function(e){activeBlock=this.id}),e.on("mouseenter","[data-kbfield]",function(){KB.currentFieldId=this.id}),e.on("mouseenter",".kb-area__list-item li",function(){KB.currentModuleId=this.id}),jQuery(document).ajaxComplete(function(e,t,n){i.metaBoxReorder(e,t,n,"restore")}),jQuery(document).ajaxSend(function(e,t,n){i.metaBoxReorder(e,t,n,"remove")})},flexContext:function(){jQuery(".kb-context-row").each(function(e,t){jQuery(t).data("KB.ContextRow",new o({el:t}))})},repaint:function(e){this.initTabs(e),this.initToggleBoxes(),d.addEditor(e)},initTabs:function(e){var t=e||jQuery("body"),n=r(".kb-field--tabs",t);r(window);n.tabs({activate:function(e,t){_.defer(function(){r(".kb-nano").nanoScroller({contentClass:"kb-nano-content"}),KB.Events.trigger("modal.recalibrate")})}}),n.each(function(){1===r(".ui-tabs-nav li",r(this)).length&&r(this).find(".ui-tabs-nav").css("display","none")});r("[data-kbfsubtabs]",t).tabs({activate:function(){KB.Events.trigger("modal.recalibrate")}})},initToggleBoxes:function(){r(".kb-togglebox-header").on("click",function(){r(this).next("div").slideToggle()}),r(".kb_fieldtoggles div:first-child").trigger("click")},initSortable:function(e){var i,o,t=e||jQuery("body"),n=this;function s(){var e,t=o.get("limit"),n=(e=o.get("id"),r("#"+e+" li.kb-module").length);return-1!==_.indexOf(o.get("assignedModules"),i.get("settings").class)&&(!(0!==t&&t<=n-1)||(u.notice("Not allowed here","error"),!1))}var l="parent";"default-tabs"===a.getLayoutMode()&&(l="#kb-contexts-tabs"),r(".kb-module-ui__sortable",t).sortable({placeholder:"ui-state-highlight",ghost:!0,connectWith:".kb-module-ui__sortable--connect",helper:"clone",handle:".kb-move",cancel:"li.disabled, li.cantsort",tolerance:"pointer",delay:150,revert:350,appendTo:l,start:function(e,t){n.isSorting=!0,r("body").addClass("kb-is-sorting"),i=KB.Modules.get(t.item.attr("id")),o=KB.currentArea,r(KB).trigger("kb:sortable::start"),r(".kb-open").toggleClass("kb-open"),r(".kb-module__body").hide(),o.View&&o.View.$el?d.removeEditors(o.View.$el):d.removeEditors(),r(document).trigger("kb_sortable_start",[e,t])},stop:function(e,t){n.isSorting=!1,r("body").removeClass("kb-is-sorting"),d.restoreEditors(),r(document).trigger("kb_sortable_stop",[e,t]),i.get("open")&&i.View.toggleBody(155)},over:function(e,t){o=KB.Areas.get(this.id)},receive:function(e,t){s()||(u.notice("Module not allowed in this area","error"),r(t.sender).sortable("cancel"))},update:function(e,t){if(!s())return!1;if(this!==t.item.parent("ul")[0]||t.sender){if(t.sender){if(t.item.parent("ul")[0].id===t.sender.attr("id"))return!1;r.when(n.changeArea(o,i)).then(function(e){if(!e.success)return!1;n.resort(t.sender)}).done(function(){n.triggerAreaChange(o,i),r(KB).trigger("kb:sortable::update"),i.View.clearFields(),u.notice("Area change and order were updated successfully","success")})}}else r.when(n.resort(t.sender)).done(function(e){if(!e.success)return u.notice(e.message,"error"),!1;r(KB).trigger("kb:sortable::update"),u.notice(e.message,"success")})}})},flushLocalStorage:function(){var e=a.get("env").hash;store.get("kbhash")!==e&&store.set("kbhash",e)},resort:function(e){var t={};return r(".kb-module-ui__sortable").each(function(){t[this.id]=r("#"+this.id).sortable("serialize",{attribute:"rel"})}),i.send({action:"resortModules",data:t,_ajax_nonce:a.getNonce("update")})},changeArea:function(e,t){return i.send({action:"changeArea",_ajax_nonce:a.getNonce("update"),mid:t.get("mid"),area_id:e.get("id"),context:e.get("context")})},triggerAreaChange:function(e,t){t.unsubscribeFromArea(),t.setArea(e)},toggleModule:function(){r("body").on("click",".kb-toggle",function(){KB.isLocked()&&!KB.userCan("lock_kontentblocks")?u.notice(kontentblocks.l18n.gen_no_permission,"alert"):(r(this).parent().nextAll(".kb-module__body:first").slideToggle("fast",function(){r("body").trigger("module::opened")}),r("#"+activeBlock).toggleClass("kb-open",1e3))})},initSortableAreas:function(){jQuery(".kb-context__inner").sortable({items:".kb-area__wrap",handle:".kb-area-move-handle",start:function(e,t){d.removeEditors()},stop:function(e,t){var n=jQuery("#post").serializeJSON().kbcontext;n&&i.send({action:"updateContextAreaOrder",_ajax_nonce:a.getNonce("update"),data:n},function(e){e.success?u.notice(e.message,"success"):u.notice(e.message,"error"),d.restoreEditors()},this)}})},initTipsy:function(){jQuery("body").on("mouseenter","[data-kbtooltip]",function(e){jQuery(this).qtip({content:{attr:"data-kbtooltip"},style:"qtip-dark qtip-shadow",show:{event:e.type,effect:!0,delay:180,solo:!0,ready:!0}})})},metaBoxReorder:function(e,t,n,i){if(n.data){var o=n.data;if(o&&o.split){var s=o.split("&"),l={};r.each(s,function(e,t){var n=t.split("=");l[n[0]]=n[1]}),"meta-box-order"===l.action&&("restore"===i?d.restoreEditors():"remove"===i&&d.removeEditors())}}}};t.exports=s},{"backend/Views/ContextUi/ContextRowGrid":17,"common/Ajax":50,"common/Config":53,"common/Notice":57,"common/TinyMCE":59}],61:[function(e,t,n){var i=(jQuery,{stex:{set:function(e,t,n){store.set(e,{val:t,exp:n,time:(new Date).getTime()})},get:function(e){var t=store.get(e);return t?(new Date).getTime()-t.time>t.exp?null:t.val:null}},store:{set:function(e,t){store.set(e,t)},get:function(e){return store.get(e)}},setIndex:function(e,t,n){return _.isObject(e)||(e={}),"string"==typeof t?this.setIndex(e,t.split("."),n):1==t.length&&void 0!==n?e[t[0]]=n:0==t.length?e:this.setIndex(e[t[0]],t.slice(1),n)},getIndex:function(e,t){for(var n=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".");n.length;){var i=n.shift();if(!(_.isObject(e)&&i in e))return{};e=e[i]}return e},hashString:function(e){var t,n,i=0;if(0==e)return i;for(t=0,n=e.length;t<n;t++)i=(i<<5)-i+e.charCodeAt(t),i|=0;return Math.abs(i)},sleep:function(e){for(var t=(new Date).getTime(),n=0;n<1e7&&!((new Date).getTime()-t>e);n++);}});t.exports=i},{}],62:[function(e,t,n){t.exports={cntrlIsPressed:!1,init:function(){var t=this;jQuery(document).keydown(function(e){"17"==e.which&&(t.cntrlIsPressed=!0)}),jQuery(document).keyup(function(){t.cntrlIsPressed=!1})},ctrlPressed:function(){return this.cntrlIsPressed}}},{}],63:[function(e,t,n){t.exports=Backbone.View.extend({rerender:function(){this.render()},gone:function(){this.trigger("field.view.gone",this)},toString:function(){return""}})},{}],64:[function(e,t,n){var i=e("common/Checks"),r=e("common/Utilities"),a=e("common/Payload"),s=e("common/Config"),l=e("common/Logger");t.exports=Backbone.Model.extend({initialize:function(){this.cleanUp();var e=this.get("relId");e&&(this.ModuleModel=KB.ObjectProxy.get(e))&&this.getType()&&(this.set("ModuleModel",this.ModuleModel),this.setData(),this.bindHandlers(),this.setupType(),this.ModuleModel.attachField(this))},cleanUp:function(){var e=this.get("linkedFields")||{};e.hasOwnProperty(this.get("uid"))&&delete e[this.get("uid")]},bindHandlers:function(){this.listenTo(this,"field.model.settings",this.updateLinkedFields),this.listenTo(this.ModuleModel,"remove",this.remove),this.listenTo(this.ModuleModel,"change:entityData",this.setData),this.listenTo(this.ModuleModel,"module.model.updated",this.getClean),this.listenTo(this,"change:value",this.upstreamData),this.listenTo(this.ModuleModel,"modal.serialize.before",this.unbind),this.listenTo(this.ModuleModel,"modal.serialize",this.rebind),this.listenTo(this.ModuleModel,"change:area",this.unbind),this.listenTo(this.ModuleModel,"change:viewfile",this.unbind),this.listenTo(this.ModuleModel,"after.change.area",this.rebind)},setupType:function(){var e;(e=this.getType())&&(this.FieldControlView=new e({el:this.getElement(),model:this}))},updateLinkedFields:function(e){var t=this;e.linkedFields&&(this.set("linkedFields",e.linkedFields),this.cleanUp(),this.unbind(),_.defer(function(){t.rebind()}))},getElement:function(){return jQuery('*[data-kbfuid="'+this.get("uid")+'"]')[0]},getType:function(){var e=this.get("type");if(!i.userCan("edit_kontentblocks"))return!1;var t=KB.Fields.get(e);return!(!t||!t.prototype.hasOwnProperty("initialize"))&&t},getClean:function(){this.trigger("field.model.clean",this)},setData:function(e){var t,n,i,o,s,l={};t=e||this.get("ModuleModel"),(n=a.getPayload("fieldData"))[this.get("type")]&&(i=n[this.get("type")])[this.get("fieldId")]&&(o=i[this.get("fieldId")],l=r.getIndex(o,this.get("kpath"))),s=_.clone(r.getIndex(t.get("entityData"),this.get("kpath"))),this.set("value",_.extend(s,l))},upstreamData:function(){var e;if(e=this.get("ModuleModel")){var t=_.clone(this.get("ModuleModel").get("entityData"));r.setIndex(t,this.get("kpath"),this.get("value")),e.set("entityData",t,{silent:!1})}},externalUpdate:function(e){this.FieldControlView.synchronize(e)},remove:function(){this.stopListening(),KB.FieldControls.remove(this)},rebind:function(){var e=this;_.defer(function(){_.isUndefined(e.getElement())?_.defer(_.bind(e.FieldControlView.gone,e.FieldControlView)):e.FieldControlView&&(e.FieldControlView.setElement(e.getElement()),_.defer(_.bind(e.FieldControlView.rerender,e.FieldControlView)))},!0)},unbind:function(){this.FieldControlView&&this.FieldControlView.derender&&this.FieldControlView.derender()},sync:function(e){var t=this;KB.Events.trigger("field.before.sync",this.model);var n=t.toJSON(),i=n.ModuleModel.type,o=n.ModuleModel.toJSON();return delete n.ModuleModel,delete n.linkedFields,jQuery.ajax({url:ajaxurl,data:{action:"updateFieldModel",data:t.get("value"),field:n,module:o,type:i,_ajax_nonce:s.getNonce("update")},context:e||t,type:"POST",dataType:"json",success:function(e){t.trigger("field.model.updated",t)},error:function(){l.Debug.error("serialize | FrontendModal | Ajax error")}})},getEntityModel:function(){return!!this.ModuleModel&&this.ModuleModel}})},{"common/Checks":52,"common/Config":53,"common/Logger":56,"common/Payload":58,"common/Utilities":61}],65:[function(e,t,n){var i=e("./FieldControlModel");t.exports=i.extend({bindHandlers:function(){this.listenToOnce(this.ModuleModel,"remove",this.remove),this.listenTo(this.ModuleModel,"change:entityData",this.setData),this.listenTo(KB.Events,"modal.reload",this.rebind),this.listenTo(KB.Events,"modal.close",this.remove)},rebind:function(){this.FieldControlView&&(this.FieldControlView.setElement(this.getElement()),this.FieldControlView.rerender())},getElement:function(){return jQuery('*[data-kbfuid="'+this.get("uid")+'"]')}})},{"./FieldControlModel":64}],66:[function(e,t,n){var i=e("./FieldControlModel");t.exports=Backbone.Collection.extend({initialize:function(){this._byModule={},this._byArea={},this._linkedFields=[],this.listenTo(this,"add",this.addToModules),this.listenTo(this,"add",this.bindLinkedFields)},model:i,addToModules:function(e){if(e.ModuleModel){var t=e.ModuleModel.id;if(this._byModule[t]||(this._byModule[t]={}),e.ModuleModel.Area){var n=e.ModuleModel.Area.id;this._byArea[n]||(this._byArea[n]={}),this._byArea[n][e.id]=e}this._byModule[t][e.id]=e}},getFieldsforModule:function(e){return this._byModule[e]?this._byModule[e]:{}},bindLinkedFields:function(i){var o=i.get("linkedFields");_.each(o,function(e,t){if(_.isNull(e)){var n=this.get(t);n&&(o[t]=n,i.listenTo(n,"external.change",i.externalUpdate),this.bindLinkedFields(n))}},this)},updateModels:function(e){e&&_.each(e,function(e){var t=this.get(e.uid);t?t.trigger("field.model.settings",e):this.add(e)},this)}})},{"./FieldControlModel":64}],67:[function(e,t,n){var i={};e("common/Logger");_.extend(i,Backbone.Events),_.extend(i,{fields:{},registerObject:function(e,t){_.extend(t,Backbone.Events),this.fields[e]=t},get:function(e){return this.fields[e]?this.fields[e]:null}}),t.exports=i},{"common/Logger":56}],68:[function(e,t,n){t.exports=Backbone.View.extend({type:"",render:function(){this.setupElements(),this.bindHandlers(),this.initialSetup()},initialSetup:function(){var e=this.setupData();_.isArray(e)?(_.each(e,function(e,t){this.model.get("limit");this.createElement(e)},this),this.handleLimit()):this.createElement()},setupData:function(){return this.model.get("value")},createElement:function(e){var t=e||"",n=this,i=_.extend(this.model.toJSON(),{value:t,uniqueId:_.uniqueId("mdate"),arrayKey:this.model.get("arrayKey"),fieldkey:this.model.get("fieldkey"),primeKey:this.model.get("fieldkey"),fieldId:this.model.get("fieldId"),type:this.type}),o=KB.FieldsAPI.getRefByType(this.type,i);this.$list.append(o.render()),_.defer(function(){o.postRender&&o.postRender.call(o)}),o.$el.on("click",'[data-kbfaction="delete"]',function(){o.$el.off(),o.remove(),n.handleLimit(),n.handleEmptyList()}),this.handleLimit()},setupElements:function(){this.$list=this.$('[data-kfel="list"]'),this.$button=this.$('[data-kfui="add-entry"]'),this.$list.sortable()},bindHandlers:function(){var e=this;this.$button.on("click",function(){e.createElement()})},handleLimit:function(){var e=this.model.get("limit");e&&(e<=jQuery(".kb-field--"+this.type+"-item",this.$list).length?this.$button.hide():this.$button.show())},handleEmptyList:function(){0===jQuery(".kb-field--"+this.type+"-item",this.$list).length&&this.createElement("")}})},{}],69:[function(e,t,n){var i=e("./Fields");(window.KB.Fields=i).registerObject("color",e("./controls/color")),i.registerObject("datetime",e("./controls/datetime")),i.registerObject("file",e("./controls/file")),i.registerObject("file-multiple",e("./controls/file-multiple")),i.registerObject("flexfields",e("./controls/flexfields")),i.registerObject("gallery",e("./controls/gallery")),i.registerObject("gallery2",e("./controls/gallery2")),i.registerObject("gallery-ext",e("./controls/gallery-ext")),i.registerObject("image",e("./controls/image")),i.registerObject("cropimage",e("./controls/cropimage")),i.registerObject("link",e("./controls/link")),i.registerObject("textarea",e("./controls/textarea")),i.registerObject("code",e("./controls/code")),i.registerObject("text",e("./controls/text")),i.registerObject("checkbox",e("./controls/checkbox")),i.registerObject("text-multiple",e("./controls/text-multiple")),i.registerObject("multitext",e("./controls/text-multiple")),i.registerObject("date-multiple",e("./controls/date-multiple")),i.registerObject("tagsinput",e("./controls/tagsinput")),i.registerObject("multiselect",e("./controls/multiselect")),i.registerObject("select",e("./controls/select")),i.registerObject("editor",e("./controls/editor")),i.registerObject("otimes",e("./controls/otimes")),i.registerObject("oembed",e("./controls/oembed")),i.registerObject("subarea",e("./controls/subarea")),i.registerObject("medium",e("./controls/medium")),i.registerObject("imageselect",e("./controls/imageselect")),i.registerObject("osm",e("./controls/osm"))},{"./Fields":67,"./controls/checkbox":70,"./controls/code":71,"./controls/color":72,"./controls/cropimage":73,"./controls/date-multiple":74,"./controls/datetime":76,"./controls/editor":77,"./controls/file":80,"./controls/file-multiple":78,"./controls/flexfields":81,"./controls/gallery":90,"./controls/gallery-ext":87,"./controls/gallery2":93,"./controls/image":96,"./controls/imageselect":97,"./controls/link":98,"./controls/medium":99,"./controls/multiselect":100,"./controls/oembed":101,"./controls/osm":102,"./controls/otimes":103,"./controls/select":104,"./controls/subarea":105,"./controls/tagsinput":112,"./controls/text":115,"./controls/text-multiple":113,"./controls/textarea":116}],70:[function(e,t,n){var i=e("../FieldControlBaseView");t.exports=i.extend({initialize:function(){this.render()},render:function(){var e=this;this.$input=this.$(".kb-field--checkbox input"),this.$input.on("change",function(){e.update(e.$input.prop("checked"))})},derender:function(){this.$input.off()},update:function(e){this.model.set("value",e)},toString:function(){return this.$input.val()}})},{"../FieldControlBaseView":63}],71:[function(e,t,n){var i=e("../FieldControlBaseView");t.exports=i.extend({initialize:function(){this.defaults={mode:"htmlmixed",theme:"dracula",lineNumbers:!0,lineWrapping:!0,tabMode:"indent",indentUnit:4,autoCloseBrackets:!0,autoCloseTags:!0},this.settings=this.model.get("settings")||{},this.render()},render:function(){var t=this;this.$textarea=this.$("textarea"),this.editor=this.getEditor(),this.editor.on("change",function(e){e.save(),t.update(e.getTextArea().value)})},derender:function(){this.editor&&(this.editor.save(),this.editor.toTextArea()),this.editor=null,delete this.editor},getEditor:function(){if(this.editor)return this.editor;var e=_.extend(this.defaults,this.settings);return this.editor=CodeMirror.fromTextArea(this.$textarea.get(0),e),this.editor},update:function(e){this.model.set("value",e)},toString:function(){return this.editor?this.editor.getTextArea().value:this.$textarea.val()}})},{"../FieldControlBaseView":63}],72:[function(e,t,n){var i=e("../FieldControlBaseView");t.exports=i.extend({initialize:function(){this.render()},events:{"mouseup .kb-field--color":"recalibrate"},render:function(){this.$(".kb-color-picker").wpColorPicker({}),jQuery("body").on("click.wpcolorpicker",this.update)},derender:function(){jQuery("body").off("click.wpcolorpicker",this.update)},update:function(){},recalibrate:function(){_.delay(function(){KB.Events.trigger("modal.recalibrate")},150)}})},{"../FieldControlBaseView":63}],73:[function(e,t,n){var i=e("../FieldControlBaseView"),d=e("common/Utilities"),o=e("common/Config");t.exports=i.extend({initialize:function(){this.render()},events:{"click .kb-js-add-image":"openFrame","click .kb-js-reset-image":"resetImage"},render:function(){this.$reset=this.$(".kb-js-reset-image"),this.$container=this.$(".kb-field-image-container"),this.$saveId=this.$(".kb-js-image-id"),this.$description=this.$(".kb-js-image-description"),this.$title=this.$(".kb-js-image-title")},editImage:function(){this.openFrame(!0)},derender:function(){this.frame&&this.frame.dispose()},openFrame:function(e){var t,n=this;this.frame&&this.frame.dispose();var i={};void 0!==this.model.get("value").id&&(i.post__in=[this.model.get("value").id]),console.log(i),wp.media.query(i).more().done(function(){var e=this.first();n.attachment=e,e?(e.set("attachment_id",e.get("id")),n.attachment.toJSON()):{},t={cropOptions:{maxWidth:n.model.get("width")||300,maxHeight:n.model.get("height")||300},croppedCallback:n.handleAttachment,parentController:n,library:{type:"image",cache:!1}},!0===n.model.get("uploadedTo")&&(t.library.uploadedTo=KB.Environment.postId||0),n.frame=new wp.media.view.KBCropperFrame(t).on("update",function(e){n.update(e)}).on("close",function(e){n.frame.image&&n.frame.image.attachment&&(n.$description.val(n.frame.image.attachment.get("caption")),n.$title.val(n.frame.image.attachment.get("title")))}).on("ready",function(){n.ready()}).on("replace",function(){}).on("select",function(e){}).on("cropped",function(e){}).open()})},ready:function(){jQuery(".media-modal").addClass("smaller kb-image-frame")},replace:function(e){this.attachment=e,this.handleAttachment(e)},update:function(e){this.attachment.set(e),this.attachment.sync("update",this.attachment)},prepareArgs:function(){return{width:this.model.get("previewWidth")||null,height:this.model.get("previewHeight")||null,crop:!0,upscale:this.model.get("upscale")||!1}},handleAttachment:function(e){var t=e.get("id"),n=this.prepareValue(e),i=_.clone(this.model.get("ModuleModel").get("entityData")),o=this.model.get("kpath");d.setIndex(i,o,n),this.model.get("ModuleModel").set("entityData",i);var s=this.model.get("previewWidth"),l=this.model.get("previewHeight");if(s&&l){var r=this.prepareArgs();this.retrieveImage(r,t)}else{var a=e.get("sizes").full.url;this.$container.html('<img src="'+a+' " >')}this.$saveId.val(e.get("id")),this.$description.val(e.get("caption")),this.$title.val(e.get("title")),this.model.get("ModuleModel").trigger("data.updated",{silent:!0})},retrieveImage:function(e,t){var n=this;jQuery.ajax({url:ajaxurl,data:{action:"fieldGetImage",args:e,id:t,_ajax_nonce:o.getNonce("read")},type:"POST",dataType:"json",success:function(e){n.$container.html('<img src="'+e.data.src+'" >')},error:function(){}})},prepareValue:function(e){var t={id:e.get("id"),title:e.get("title"),caption:e.get("caption"),alt:e.get("alt")},n=this.model.get("value");return _.defaults(n,t)},resetImage:function(){this.$container.html(""),this.$saveId.val(""),this.model.set("value",{id:null,caption:"",title:""}),this.$description.val(""),this.$title.val("")},toString:function(){return this.attachment?"<img src='"+(this.attachment.get("sizes").thumbnail?this.attachment.get("sizes").thumbnail:this.attachment.get("sizes").full).url+"'>":""}})},{"../FieldControlBaseView":63,"common/Config":53,"common/Utilities":61}],74:[function(e,t,n){var i=e("../FieldControlBaseView"),o=e("fields/controls/date-multiple/DateMultipleController");t.exports=i.extend({initialize:function(){this.createController(),this.render()},render:function(){var e=this;this.$stage=this.$('[data-kftype="date-multiple"]'),this.DateMultipleController.setElement(this.$stage.get(0)),_.defer(function(){e.DateMultipleController.render()})},derender:function(){this.FlexFieldsController.derender()},rerender:function(){this.render()},createController:function(){if(!this.DateMultipleController)return this.DateMultipleController=new o({el:this.$('[data-kftype="date-multiple"]'),model:this.model,parentView:this})}})},{"../FieldControlBaseView":63,"fields/controls/date-multiple/DateMultipleController":75}],75:[function(e,t,n){var i=e("fields/MultipleControllerBase");t.exports=i.extend({type:"date-multiple",setupData:function(){var e=this.model.get("value");return e.sort(function(e,t){return e.unix<t.unix?-1:1}),e}})},{"fields/MultipleControllerBase":68}],76:[function(e,t,n){var i=e("../FieldControlBaseView");t.exports=i.extend({initialize:function(){var n=this;this.defaults={format:"d.m.Y H:i",inline:!1,mask:!0,lang:"de",allowBlank:!0,onChangeDateTime:function(e,t){n.$unixIn.val(e.dateFormat("unixtime")),n.$sqlIn.val(e.dateFormat("Y-m-d H:i:s"))}},this.settings=this.model.get("settings")||{},this.render()},render:function(){this.$unixIn=this.$(".kb-datetimepicker--js-unix"),this.$sqlIn=this.$(".kb-datetimepicker--js-sql"),this.$(".kb-datetimepicker").kbdatetimepicker(_.extend(this.defaults,this.settings))},derender:function(){this.$(".kb-datetimepicker").kbdatetimepicker("destroy")}})},{"../FieldControlBaseView":63}],77:[function(e,t,n){var i=e("../FieldControlBaseView");e("common/TinyMCE");t.exports=i.extend({initialize:function(){this.render()},render:function(){var n=this;this.$textarea=this.$("textarea");var e=tinymce.get(n.$textarea.attr("id"));n.attachEvents(e),tinymce.on("AddEditor",function(e){var t=e.editor;t&&n.attachEvents(t)})},attachEvents:function(e){var t=this,n=this.model.toJSON();if(e&&e.id===t.$textarea.attr("id")&&!t.editor&&((t.editor=e).on("change",function(){t.update(e.getContent())}),n.settings&&n.settings.charlimit)){var r=n.settings.charlimit,a=t.$(".char-limit");e.on("keyDown SetContent",function(e,t){var n=this.getContent({format:"text"}),i=r,o=n.length,s=o-i;if(i<=o)a.html('<span class="text-error" style="color: red;">Zu viele Zeichen:-'+s+"</span>");else{var l=i-o;a.html(l+" Zeichen verbleiben")}})}},derender:function(){this.stopListening(),this.editor=null},update:function(e){this.model.set("value",e)},toString:function(){if(this.editor)try{return this.editor.getContent()}catch(e){return""}return""}})},{"../FieldControlBaseView":63,"common/TinyMCE":59}],78:[function(e,t,n){var i=e("../FieldControlBaseView"),o=e("fields/controls/file-multiple/FileMultipleController");t.exports=i.extend({initialize:function(){this.createController(),this.render()},render:function(){var e=this;this.$stage=this.$('[data-kftype="file-multiple"]'),this.FileMultipleController.setElement(this.$stage.get(0)),_.defer(function(){e.FileMultipleController.render()})},derender:function(){this.FileMultipleController.derender()},rerender:function(){this.render()},createController:function(){if(!this.FileMultipleController)return this.FileMultipleController=new o({el:this.$('[data-kftype="file-multiple"]'),model:this.model,parentView:this})}})},{"../FieldControlBaseView":63,"fields/controls/file-multiple/FileMultipleController":79}],79:[function(e,t,n){var i=e("fields/MultipleControllerBase");t.exports=i.extend({type:"file-multiple"})},{"fields/MultipleControllerBase":68}],80:[function(e,t,n){var i=e("../FieldControlBaseView");t.exports=i.extend({initialize:function(){this.render()},events:{"click .kb-js-add-file":"openFrame","click .kb-js-reset-file":"reset"},render:function(){this.$container=this.$(".kb-field-file-wrapper"),this.$IdIn=this.$(".kb-file-attachment-id"),this.$resetIn=this.$(".kb-js-reset-file")},derender:function(){this.frame&&(this.frame.dispose(),this.frame=null)},openFrame:function(){var e=this;if(this.frame)return this.frame.open();var t={title:KB.i18n.Refields.file.modalTitle,button:{text:KB.i18n.Refields.common.select},multiple:!1,library:{type:""}};return!0===e.model.get("uploadedTo")&&(t.library.uploadedTo=KB.Environment.postId||0),this.frame=wp.media(t),this.frame.on("ready",function(){e.ready(this)}),this.frame.state("library").on("select",function(){e.select(this)}),this.frame.open()},ready:function(e){this.$(".media-modal").addClass(" smaller no-sidebar");var t=this.model.get("settings");t&&t.uploadFolder&&(this.frame.uploader.options.uploader.params.upload_folder=t.uploadFolder)},select:function(e){var t=e.get("selection").first();this.handleAttachment(t)},handleAttachment:function(e){this.$(".kb-file-filename",this.$container).html(e.get("filename")),this.$(".kb-file-attachment-id",this.$container).val(e.get("id")),this.$(".kb-file-title",this.$container).html(e.get("title")),this.$(".kb-file-id",this.$container).html(e.get("id")),this.$(".kb-file-editLink",this.$container).attr("href",e.get("editLink")),this.$resetIn.show(),this.$container.show(450,function(){KB.Events.trigger("modal.recalibrate")})},reset:function(){this.$IdIn.val(""),this.$container.hide(450),this.$resetIn.hide()}})},{"../FieldControlBaseView":63}],81:[function(e,t,n){var i=e("../FieldControlBaseView"),o=e("fields/controls/flexfields/FlexfieldsController");t.exports=i.extend({initialize:function(){this.createController(),this.render()},render:function(){var e=this;this.$stage=this.$(".flexible-fields--stage"),this.FlexFieldsController.setElement(this.$stage.get(0)),_.defer(function(){e.FlexFieldsController.render()})},derender:function(){this.FlexFieldsController.derender()},rerender:function(){this.FlexFieldsController.derender(),this.render()},createController:function(){if(!this.FlexFieldsController)return this.FlexFieldsController=new o({el:this.$(".flexible-fields2--stage"),model:this.model,parentView:this})}})},{"../FieldControlBaseView":63,"fields/controls/flexfields/FlexfieldsController":84}],82:[function(e,t,n){var i=e("fields/FieldControlModelModal");t.exports=Backbone.Collection.extend({model:i})},{"fields/FieldControlModelModal":65}],83:[function(e,t,n){t.exports=Backbone.View.extend({initialize:function(e){this.controller=e.controller,this.types=this.model.get("fields")},factorNewItem:function(i,e){var t=e._meta.uid||null,n=e._meta.title||null,o=e._meta.type,s=e._meta.status||"visible",l=t||_.uniqueId("ff2"),r=this.model.get("newitemtext")||"Enter a title : ";n=this.model.get("requesttitle")||!1?n||prompt(r,""):n||"#"+this.controller.subviews.length;var a=this.types[o].sections||[];_.clone(this.types);return _.each(a,function(e){_.each(e.fields,function(e){var t=i&&i[e.key]?i[e.key]:e.std,n=_.extend(e,{value:t||"",arrayKey:this.model.get("arrayKey"),fieldkey:this.model.get("fieldkey"),relId:this.model.get("relId"),primeKey:e.key,fieldId:this.model.get("fieldId"),index:l,type:e.type});e.view=KB.FieldsAPI.getRefByType(e.type,n),t||e.view.setDefaults()},this)},this),{itemId:l,fftype:o,title:n,status:s,sections:a}}})},{}],84:[function(e,t,n){var i=e("fields/controls/flexfields/ToggleBoxItem"),o=e("fields/controls/flexfields/SectionBoxItem"),s=e("fields/controls/flexfields/FlexFieldsFactory"),l=e("common/TinyMCE"),r=e("common/UI"),a=e("common/Logger"),d=e("fields/controls/flexfields/FlexFieldsCollection"),u=e("templates/fields/FlexibleFields/skeleton.hbs"),c=e("common/I18n");t.exports=Backbone.View.extend({initialize:function(e){this.parentView=e.parentView,this.active=!1,this.Renderer="sections"==this.model.get("renderer")?o:i,this.Fields=new d,this.subviews=[],this.factory=new s({controller:this,model:this.model}),a.Debug.log("Fields: Flexfields2 instance created and initialized")},events:{"click .kb-flexible-fields--js-add-item":"addItem"},initialSetup:function(){var o,s;o=this.model.get("value"),s=this.model.get("fields"),_.isEmpty(o)||_.each(o,function(e,t){if(e&&(e._meta.type||(e._meta.type="default"),s[e._meta.type])){var n=this.factory.factorNewItem(o[e._meta.uid],e),i=new this.Renderer({controller:this,model:new Backbone.Model(n)});this.subviews.push(i),this.$list.append(i.render()),r.initTabs(),KB.Events.trigger("modal.recalibrate")}},this),r.initTabs(),this.$list.sortable({handle:".flexible-fields--js-drag-handle",start:function(){l.removeEditors()},stop:function(){l.restoreEditors()}}),KB.Events.trigger("modal.recalibrate"),this._initialized=!0},duplicateItem:function(e){var t=e.get("itemId"),n=e.get("title")+" (Copy)",i=this.model.get("value");if(!i[t])return!1;var o=JSON.parse(JSON.stringify(i[t]));if(!o._meta)return!1;o._meta.uid=null,o._meta.title=n;var s=this.factory.factorNewItem(o,o),l=new this.Renderer({controller:this,model:new Backbone.Model(s)});this.subviews.push(l),this.$list.append(l.render()),r.initTabs(),KB.Events.trigger("modal.recalibrate")},render:function(){if(this.active)return null;this.$el.append(u({i18n:c.getString("Refields.flexfields"),model:this.model.toJSON()})),this.setupElements(),this.initialSetup(),this.active=!0},derender:function(){this.trigger("derender"),this.subviews=[],this.active=!1},setupElements:function(){this.$list=this.$(".flexible-fields--item-list"),this.$addButton=this.$(".kb-flexible-fields--js-add-item")},addItem:function(e){var t=jQuery(e.currentTarget).data("kbf-addtype"),n=this.factory.factorNewItem(null,{_meta:{type:t}}),i=new this.Renderer({controller:this,model:new Backbone.Model(n)});this.subviews.push(i),this.$list.append(i.render()),r.initTabs(),KB.Events.trigger("modal.recalibrate")}})},{"common/I18n":54,"common/Logger":56,"common/TinyMCE":59,"common/UI":60,"fields/controls/flexfields/FlexFieldsCollection":82,"fields/controls/flexfields/FlexFieldsFactory":83,"fields/controls/flexfields/SectionBoxItem":85,"fields/controls/flexfields/ToggleBoxItem":86,"templates/fields/FlexibleFields/skeleton.hbs":204}],85:[function(e,t,n){var i=e("fields/controls/flexfields/ToggleBoxItem"),o=e("templates/fields/FlexibleFields/single-section-box.hbs");t.exports=i.extend({events:function(){return _.extend({},i.prototype.events,{mouseenter:"mousein",mouseleave:"mouseout"})},mousein:function(){},mouseout:function(){},render:function(){var e=this.createInputName(this.model.get("itemId")),t=this.model.toJSON(),n=this.$el.append(o({item:t,inputName:e,uid:this.model.get("itemId"),fftype:this.model.get("fftype"),visible:!0}));return this.renderTabs(n),n}})},{"fields/controls/flexfields/ToggleBoxItem":86,"templates/fields/FlexibleFields/single-section-box.hbs":202}],86:[function(e,t,n){var i=e("common/Notice"),o=e("templates/fields/FlexibleFields/single-toggle-box.hbs"),a=e("handlebars"),s=e("common/TinyMCE");t.exports=Backbone.View.extend({tagName:"li",className:"kb-flexible-fields--item-wrapper",initialize:function(e){this.Controller=e.controller,this.listenTo(this.Controller,"derender",this.derender),this.FieldViews={}},events:{"click .flexible-fields--js-toggle":"toggleItem","click .flexible-fields--js-trash":"deleteItem","click .flexible-fields--js-visibility":"toggleItemStatus","click .flexible-fields--js-duplicate":"duplicateItem"},toggleItem:function(){this.$(".flexible-fields--toggle-title").next().slideToggle(250,function(){jQuery(this).toggleClass("kb-togglebox-open"),jQuery(this).hasClass("kb-togglebox-open")&&(s.removeEditors(jQuery(this)),s.restoreEditors(jQuery(this))),_.defer(function(){KB.Events.trigger("modal.recalibrate")})})},deleteItem:function(){this.$el.hide(250);var e=this.createInputName(this.model.get("itemId"));this.$el.append('<input type="hidden" name="'+e+'[_meta][delete]" value="'+this.model.get("itemId")+'" >'),i.notice("Please click update to save the changes","success")},toggleItemStatus:function(){var e="visible"===this.$("[data-flexfield-visible]").val()?"hidden":"visible";this.$("[data-flexfield-visible]").val(e),this.$el.toggleClass("ff-section-invisible"),i.notice("Please click update to save the changes","success")},duplicateItem:function(){this.Controller.duplicateItem(this.model)},render:function(){var e=this.createInputName(this.model.get("itemId")),t=this.model.toJSON(),n=this.$el.append(o({item:t,inputName:e,uid:this.model.get("itemId"),fftype:this.model.get("fftype"),status:this.model.get("status")}));return this.renderTabs(n),"hidden"===this.model.get("status")&&this.$el.toggleClass("ff-section-invisible"),n},renderTabs:function(o){var s=this,l=a.compile("<li><a href='#tab-{{ uid }}-{{ index }}'>{{ section.label }}</a></li>"),r=a.compile("<div id='tab-{{ uid }}-{{ index }}'></div>");_.each(this.model.get("sections"),function(e,t){jQuery(".flexible-field--tab-nav",o).append(l({uid:s.model.get("itemId"),section:e,index:t}));var n=jQuery(".kb-field--tabs",o),i=jQuery(r({uid:s.model.get("itemId"),index:t})).appendTo(n);s.renderFields(e,i)})},renderFields:function(e,i){var o;_.each(e.fields,function(e){var t=a.compile("<div class='kb-field-wrapper' data-kbfuid='{{ kbfuid }}' id='{{ kbfuid }}'></div>");o=e.view,this.model.get("value"),o.listenTo(this,"derender",o.derender);var n=jQuery(t({kbfuid:o.model.get("uid")}));n.append(o.render()),i.append(n),this.setupFieldInstance(o,i)},this)},createInputName:function(e){return this.createBaseId()+"["+this.Controller.model.get("fieldkey")+"]["+e+"]"},createBaseId:function(){return _.isEmpty(this.Controller.model.get("arrayKey"))?this.Controller.model.get("fieldId"):this.Controller.model.get("fieldId")+"["+this.Controller.model.get("arrayKey")+"]"},derender:function(){this.stopListening(),this.remove()},setupFieldInstance:function(t,e){var n=this;n.Controller.parentView&&_.defer(function(){var e=n.Controller.Fields.findWhere({uid:t.model.get("uid")});_.isUndefined(e)?t.fieldModel=n.Controller.Fields.add(t.model.toJSON()):e.rebind()}),_.defer(function(){t.setElement(e),t.postRender&&t.postRender.call(t)})}})},{"common/Notice":57,"common/TinyMCE":59,handlebars:253,"templates/fields/FlexibleFields/single-toggle-box.hbs":203}],87:[function(e,t,n){var i=e("fields/FieldControlBaseView"),o=e("./gallery-ext/GalleryExtController");t.exports=i.extend({initialize:function(){this.selection=null,this.render()},render:function(){this.$stage=this.$(".kb-gallery-ext__stage"),this.createController(),this.$stage.append(this.GalleryController.render())},derender:function(){this.GalleryController&&this.GalleryController.$el.detach()},createController:function(){return this.GalleryController||(this.GalleryController=new o({el:this.$stage.get(0),model:this.model})),this.GalleryController}})},{"./gallery-ext/GalleryExtController":88,"fields/FieldControlBaseView":63}],88:[function(e,t,n){var i=e("common/Logger"),s=e("./ImageView");t.exports=Backbone.View.extend({initialize:function(e){this._frame=null,this.subviews={},this.ids=[],this.data={},i.Debug.log("Fields: Gallery instance created and initialized"),this.renderElements(),this.initialSetup()},render:function(){return this.trigger("render"),this.setupElements(),this.delegateEvents(),this.$el},events:{"click .kb-gallery-ext--js-add-images":"addImages"},derender:function(){},renderElements:function(){jQuery('<div class="kb-gallery-ext--item-list"></div>').appendTo(this.$el),jQuery('<a class="button button-primary kb-gallery-ext--js-add-images">'+KB.i18n.Refields.gallery.addButton+"</a>").appendTo(this.$el)},setupElements:function(){this.$list=this.$(".kb-gallery-ext--item-list"),this.$list.sortable({revert:!0,delay:300,helper:"clone",stop:_.bind(this.updateOrder,this)})},addImages:function(){this.openModal()},updateOrder:function(){this.resortSelection(),this.model.set("value",this.ids)},frame:function(){if(this._frame)return this._frame},openModal:function(){var t=this;if(!this._frame)return this._frame=new wp.media.view.KBGallery({state:"gallery-edit",multiple:!0,selection:this.selection,editing:!0}),this._frame.state("gallery-edit").on("update",function(e){t.selection=e,t.resortToSelection(),setTimeout(function(){KB.Events.trigger("modal.recalibrate")},250)}),this._frame.options.selection.on("add",function(e){t.add(e)}),this._frame.on("ready",function(e){jQuery(".media-modal").addClass("kb-gallery-frame")}),this._frame.options.selection.on("remove",function(e){t.remove(e)}),this._frame.open(),this._frame;this._frame.open()},initialSetup:function(){var t=this,e=this.model.get("value").images||{};if(e=_.filter(e,function(e){return e&&e.hasOwnProperty("id")}),_.each(e,function(e){t.data[e.id]=e}),this.setIds(e),""!=this.ids){var n={post__in:this.ids,suppress_filters:!0},i=wp.media.query(n);this.selection||(this.selection=new wp.media.model.Selection(i.models,{props:i.props.toJSON(),multiple:!0}),this.selection.more().done(function(){t.selection.props.set({query:!1}),t.selection.unmirror(),t.selection.props.unset("orderby"),t.initImages(),t.resortSelection()}))}},initImages:function(){_.each(this.ids,function(e){this.selection.get(e)&&this.add(this.selection.get(e))},this)},add:function(e){var t="",n="";this.data.hasOwnProperty(e.id)&&(t=this.data[e.id].meta),e.set("meta",t),this.data.hasOwnProperty(e.id)&&(n=this.data[e.id].caption),e.set("caption",n);var i=new s({model:e,Controller:this}),o=(this.subviews[e.get("id")]=i).render();this.ids.push(e.get("id")),this.$list.append(o)},setIds:function(e){var t=[];_.each(e,function(e){e.id=parseInt(e.id,10),_.isNumber(e.id)&&!isNaN(e.id)&&t.push(e.id)}),this.ids=t},resortSelection:function(){var t=[],e=this.getIdsFromInputs();_.each(e,function(e){t.push(this.selection.get(e))},this),this.selection.reset(t),this.setIds(e)},remove:function(e){var t=this.ids.indexOf(e.get("id"));-1!==t&&this.ids.splice(t,1);var n=this.subviews[e.get("id")];n&&n.remove&&(n.remove(),delete this.subviews[e.get("id")])},getIdsFromInputs:function(){return this.$(".kb-gallery--image-holder input").map(function(e,t){return jQuery(t).val()}).get()},resortToSelection:function(){var e=_.pluck(this.selection.models,"id");_.each(this.subviews,function(e){e.$el.detach()},this),_.each(e,function(e){this.subviews[e].$el.appendTo(this.$list)},this)}})},{"./ImageView":89,"common/Logger":56}],89:[function(e,t,n){var i=e("templates/fields/GalleryExt/single-image.hbs");t.exports=Backbone.View.extend({tagName:"div",className:"kb-gallery--image-wrapper",initialize:function(e){this.Controller=e.Controller},remove:function(){this.$el.remove(),delete this.$el},render:function(){var e=this.createInputName(this.model),t=this.model.toJSON();if(t.sizes){t.previewUrl=t.sizes.thumbnail?t.sizes.thumbnail.url:t.url;jQuery(i({image:t,id:t.id,inputName:e,model:this.Controller.model.toJSON()})).appendTo(this.$el);return this.$el}},createInputName:function(e){var t=e.get("id");return this.createBaseId()+"["+this.Controller.model.get("fieldkey")+"][images]["+t+"]"},createBaseId:function(){return this.Controller.model.get("baseId")}})},{"templates/fields/GalleryExt/single-image.hbs":207}],90:[function(e,t,n){var i=e("fields/FieldControlBaseView"),o=e("./gallery/GalleryController");t.exports=i.extend({initialize:function(){this.render()},render:function(){this.$stage=this.$(".kb-gallery--stage"),this.createController()},derender:function(){this.GalleryController.dispose()},rerender:function(){this.derender(),this.render()},createController:function(){return this.GalleryController?(this.GalleryController.setElement(this.$stage.get(0)),this.GalleryController.render()):this.GalleryController=new o({el:this.$stage.get(0),model:this.model})}})},{"./gallery/GalleryController":91,"fields/FieldControlBaseView":63}],91:[function(e,t,n){var i=e("common/Logger"),s=e("./ImageView");t.exports=Backbone.View.extend({initialize:function(e){this._frame=null,this.subviews=[],this.listenTo(KB.Events,"modal.saved",this.frontendSave),this.setupElements(),this.initialSetup(),i.Debug.log("Fields: Gallery instance created and initialized")},events:{"click .kb-gallery--js-add-images":"addImages"},setupElements:function(){this.$list=jQuery('<div class="kb-gallery--item-list"></div>').appendTo(this.$el),this.$list.sortable({revert:!0,delay:300}),this.$addButton=jQuery('<a class="button button-primary kb-gallery--js-add-images">'+KB.i18n.Refields.image.addButton+"</a>").appendTo(this.$el)},addImages:function(){this.openModal()},frame:function(){if(this._frame)return this._frame},openModal:function(){var e=this;if(!this._frame)return this._frame=wp.media({title:KB.i18n.Refields.image.modalHelpTitle,button:{text:KB.i18n.Refields.common.select},multiple:!0,library:{type:"image"}}),this._frame.state("library").on("select",function(){e.select(this)}),this._frame.open(),this._frame;this._frame.open()},select:function(e){var t=e.get("selection");0<t.length&&this.handleModalSelection(t.models)},handleModalSelection:function(e){var o=this;_.each(e,function(e){var t={file:e.toJSON(),details:{title:"",alt:"",description:""},id:e.get("id")},n=new Backbone.Model(t),i=new s({model:n,Controller:o});o.subviews.push(i),o.$list.append(i.render()),setTimeout(function(){KB.Events.trigger("modal.recalibrate")},250)})},initialSetup:function(){var i=this,e=this.model.get("value").images||{};0<_.toArray(e).length&&_.each(e,function(e){var t=new Backbone.Model(e),n=new s({model:t,Controller:i});i.subviews.push(n),i.$list.append(n.render())})},frontendSave:function(){var n=this;0<this.subviews.length&&_.each(this.subviews,function(e,t){e._remove&&(delete n.subviews[t],e.remove())})}})},{"./ImageView":92,"common/Logger":56}],92:[function(e,t,n){var i=e("common/TinyMCE"),o=e("common/UI"),s=e("templates/fields/Gallery/single-image.hbs");t.exports=Backbone.View.extend({tagName:"div",className:"kb-gallery--image-wrapper",initialize:function(e){this.Controller=e.Controller,this.uid=this.model.get("uid")||_.uniqueId("kbg"),this.editorAdded=!1,this._remove=!1},events:{"click .kb-gallery--js-edit":"edit","click .kb-gallery--js-delete":"delete","click .kb-gallery--js-meta-close":"close"},edit:function(){this.$el.wrap('<div class="kb-gallery--item-placeholder kb-gallery--image-wrapper"></div>'),this._placeholder=this.$el.parent(),this.$el.addClass("kb-gallery--active-item kb-field").appendTo("body"),jQuery("#wpwrap").addClass("module-browser-open"),this.handleEditor(),o.initTabs()},handleEditor:function(){var t=this,e=jQuery(".kb-js--remote-editor",this.$el),n=this.createInputName(this.uid)+"[details][description]";this.editorAdded?i.addEditor(e,null,150):i.remoteGetEditor(e,n,this.uid,this.model.get("details").description,null,!1,!1).done(function(e){t.editorAdded=e,o.initTabs()})},delete:function(){this._remove?(this.$el.fadeTo(450,1).css("borderColor","#ccc"),jQuery(".kb-gallery--image-remove",this.$el).val(""),this._remove=!1):(this.$el.fadeTo(450,.5).css("borderColor","red"),this._remove=!0,jQuery(".kb-gallery--image-remove",this.$el).val("true"))},remove:function(){this.$el.remove(),delete this.$el},close:function(){var e=tinymce.get(this.uid+"_ededitor");this.model.get("details").description=this.getEditorContent(e),tinymce.remove(e),this.$el.appendTo(this._placeholder).unwrap(),this.$el.removeClass("kb-gallery--active-item").removeClass("kb-field"),jQuery("#wpwrap").removeClass("module-browser-open")},getEditorContent:function(e){if(jQuery("#wp-"+this.uid+"_ededitor-wrap").hasClass("tmce-active"))return e.getContent();var t=document.getElementById(this.uid+"_ededitor").value;return t=t.replace(/<br\s*\/?>/gm,"\n"),e.setContent(t),t},render:function(){var e=this.createInputName(this.uid),t=this.model.toJSON();return this.$el.append(s({image:t,id:t.id,inputName:e,uid:this.uid}))},createInputName:function(e){return this.createBaseId()+"["+this.Controller.model.get("fieldkey")+"][images]["+e+"]"},createBaseId:function(){return _.isEmpty(this.Controller.model.get("arrayKey"))?this.Controller.model.get("baseId"):this.Controller.model.get("baseId")+"["+this.Controller.model.get("arrayKey")+"]"}})},{"common/TinyMCE":59,"common/UI":60,"templates/fields/Gallery/single-image.hbs":205}],93:[function(e,t,n){var i=e("fields/FieldControlBaseView"),o=e("./gallery2/Gallery2Controller");t.exports=i.extend({initialize:function(){this.selection=null,this.render()},render:function(){this.$stage=this.$(".kb-gallery2__stage"),this.createController(),this.$stage.append(this.GalleryController.render())},derender:function(){this.GalleryController&&this.GalleryController.$el.detach()},createController:function(){return this.GalleryController||(this.GalleryController=new o({el:this.$stage.get(0),model:this.model})),this.GalleryController}})},{"./gallery2/Gallery2Controller":94,"fields/FieldControlBaseView":63}],94:[function(e,t,n){var i=e("common/Logger"),o=e("./ImageView");t.exports=Backbone.View.extend({initialize:function(e){this._frame=null,this.subviews={},this.ids=[],i.Debug.log("Fields: Gallery instance created and initialized"),this.renderElements(),this.initialSetup()},render:function(){return this.trigger("render"),this.setupElements(),this.delegateEvents(),this.$el},events:{"click .kb-gallery2--js-add-images":"addImages"},derender:function(){},renderElements:function(){jQuery('<div class="kb-gallery2--item-list"></div>').appendTo(this.$el),jQuery('<a class="button button-primary kb-gallery2--js-add-images">'+KB.i18n.Refields.gallery.addButton+"</a>").appendTo(this.$el)},setupElements:function(){this.$list=this.$(".kb-gallery2--item-list"),this.$list.sortable({revert:!0,delay:300,helper:"clone",stop:_.bind(this.updateOrder,this)})},addImages:function(){this.openModal()},updateOrder:function(){this.resortSelection(),this.model.set("value",this.ids)},frame:function(){if(this._frame)return this._frame},openModal:function(){var t=this;if(!this._frame)return this._frame=new wp.media.view.KBGallery({state:"gallery-edit",multiple:!0,selection:this.selection,editing:!0}),this._frame.state("gallery-edit").on("update",function(e){t.selection=e,t.resortToSelection(),setTimeout(function(){KB.Events.trigger("modal.recalibrate")},250)}),this._frame.options.selection.on("add",function(e){t.add(e)}),this._frame.on("ready",function(e){jQuery(".media-modal").addClass("kb-gallery-frame")}),this._frame.options.selection.on("remove",function(e){t.remove(e)}),this._frame.open(),this._frame;this._frame.open()},initialSetup:function(){var e=this,t=this.model.get("value").images||{};if(this.setIds(t),""!=this.ids){var n={post__in:this.ids,suppress_filters:!0},i=wp.media.query(n);this.selection||(this.selection=new wp.media.model.Selection(i.models,{props:i.props.toJSON(),multiple:!0}),this.selection.more().done(function(){e.selection.props.set({query:!1}),e.selection.unmirror(),e.selection.props.unset("orderby"),e.initImages(),e.resortSelection()}))}},initImages:function(){_.each(this.ids,function(e){this.selection.get(e)&&this.add(this.selection.get(e))},this)},add:function(e){var t=new o({model:e,Controller:this}),n=(this.subviews[e.get("id")]=t).render();this.ids.push(e.get("id")),this.$list.append(n)},setIds:function(e){var t=[];_.each(e,function(e){e=parseInt(e,10),_.isNumber(e)&&!isNaN(e)&&t.push(e)}),this.ids=t},resortSelection:function(){var t=[],e=this.getIdsFromInputs();_.each(e,function(e){t.push(this.selection.get(e))},this),this.selection.reset(t),this.setIds(e)},remove:function(e){var t=this.ids.indexOf(e.get("id"));-1!==t&&this.ids.splice(t,1);var n=this.subviews[e.get("id")];n&&n.remove&&(n.remove(),delete this.subviews[e.get("id")])},getIdsFromInputs:function(){return this.$(".kb-gallery--image-holder input").map(function(e,t){return jQuery(t).val()}).get()},resortToSelection:function(){var e=_.pluck(this.selection.models,"id");_.each(this.subviews,function(e){e.$el.detach()},this),_.each(e,function(e){this.subviews[e].$el.appendTo(this.$list)},this)}})},{"./ImageView":95,"common/Logger":56}],95:[function(e,t,n){var i=e("templates/fields/Gallery2/single-image.hbs");t.exports=Backbone.View.extend({tagName:"div",className:"kb-gallery--image-wrapper",initialize:function(e){this.Controller=e.Controller},remove:function(){this.$el.remove(),delete this.$el},render:function(){var e=this.createInputName(this.uid),t=this.model.toJSON();if(t.sizes){t.previewUrl=t.sizes.thumbnail?t.sizes.thumbnail.url:t.url;jQuery(i({image:t,id:t.id,inputName:e})).appendTo(this.$el);return this.$el}},createInputName:function(e){return this.createBaseId()+"["+this.Controller.model.get("fieldkey")+"][images][]"},createBaseId:function(){return this.Controller.model.get("baseId")}})},{"templates/fields/Gallery2/single-image.hbs":206}],96:[function(e,t,n){var i=e("../FieldControlBaseView"),r=e("common/Utilities"),o=e("common/Config");t.exports=i.extend({initialize:function(){this.defaultState="replace-image",this.defaultFrame="image",this.render()},events:{"click .kb-js-add-image":"openFrame","click .kb-js-reset-image":"resetImage","change [data-kbimage-crop]":"handleCropChange"},handleCropChange:function(){var e=this.$cropSelect.val(),t=this.model.get("value");t.crop=e,this.model.set("value",t);var n=this.prepareArgs();this.retrieveImage(n,t.id)},render:function(){this.$reset=this.$(".kb-js-reset-image"),this.$container=this.$(".kb-field-image-container"),this.$saveId=this.$(".kb-js-image-id"),this.$description=this.$(".kb-js-image-description"),this.$title=this.$(".kb-js-image-title"),this.$cropSelect=this.$("[data-kbimage-crop]")},editImage:function(){this.openFrame(!0)},derender:function(){this.frame&&this.frame.dispose()},openFrame:function(e){var t,n=this;this.frame&&this.frame.dispose();var i={};void 0!==this.model.get("value").id&&(i.post__in=[this.model.get("value").id]),console.log(i),wp.media.query(i).more().done(function(){var e=this.first();n.attachment=e,t={},n.defaultFrame="select",n.defaultState="library",n.frame=wp.media({frame:n.defaultFrame,state:n.defaultState,metadata:t,imageEditView:n,uploadedTo:0,type:"image",library:{type:"image",cache:!1}}),n.frame.on("update",function(e){n.update(e)}).on("close",function(e){n.frame.image&&n.frame.image.attachment&&(n.$description.val(n.frame.image.attachment.get("caption")),n.$title.val(n.frame.image.attachment.get("title")))}).on("ready",function(){n.ready(n)}).on("replace",function(){n.replace(n.frame.image.attachment)}).on("select",function(e){var t=this.get("library").get("selection").first();n.replace(t)}).open()})},ready:function(e){jQuery(".media-modal").addClass("smaller kb-image-frame");var t=e.model.get("settings");t&&t.minDimensions&&(e.frame.uploader.options.uploader.params.mindimensions=t.minDimensions)},replace:function(e){this.attachment=e,this.handleAttachment(e)},update:function(e){this.attachment.set(e),this.attachment.sync("update",this.attachment)},getCropValue:function(){var e=this.model.get("value");return e.crop&&""!==e.crop?e.crop:this.model.get("crop")},prepareArgs:function(){return{width:this.model.get("width")||null,height:this.model.get("height")||null,crop:this.getCropValue()||!0,upscale:this.model.get("upscale")||!1}},handleAttachment:function(e){var t=e.get("id"),n=this.prepareValue(e);this.model.set("value",n);var i=_.clone(this.model.get("ModuleModel").get("entityData")),o=this.model.get("kpath");r.setIndex(i,o,n),this.model.get("ModuleModel").set("entityData",i);var s=this.prepareArgs();if(s.width)this.retrieveImage(s,t);else{var l=e.get("sizes").thumbnail?e.get("sizes").thumbnail.url:e.get("sizes").full.url;this.$container.html('<img src="'+l+'" >')}this.$saveId.val(e.get("id")),this.$description.val(n.caption),this.$title.val(n.title),this.model.get("ModuleModel").trigger("data.updated",{silent:!0})},retrieveImage:function(e,t){var n=this;jQuery.ajax({url:ajaxurl,data:{action:"fieldGetImage",args:e,id:t,_ajax_nonce:o.getNonce("read")},type:"POST",dataType:"json",success:function(e){n.$container.html('<img src="'+e.data.src+'" >')},error:function(){}})},prepareValue:function(e){var t={id:e.get("id"),alt:e.get("alt")},n=this.model.get("value");return _.isObject(n)||(n={}),_.extend(n,t)},resetImage:function(){this.$container.html(""),this.$saveId.val(""),this.model.set("value",{id:null,caption:"",title:""}),this.$description.val(""),this.$title.val("")},toString:function(){var t=this;if(!this.attachment&&!_.isEmpty(this.model.get("value").id)){var n=wp.media.query({post__in:[this.model.get("value").id]});n.more().done(function(e){t.attachment=n.first()})}return this.attachment?"<img src='"+(this.attachment.get("sizes").thumbnail?this.attachment.get("sizes").thumbnail:this.attachment.get("sizes").full).url+"'>":""}})},{"../FieldControlBaseView":63,"common/Config":53,"common/Utilities":61}],97:[function(e,t,n){var i=e("../FieldControlBaseView");t.exports=i.extend({initialize:function(){this.defaults={filter:!0},this.settings=this.model.get("settings")||{},this.render()},render:function(){this.$("[data-kftype='imageselect']").imagepicker(_.extend(this.defaults,this.settings))},rerender:function(){this.$("[data-kftype='imageselect']").imagepicker("destroy"),this.render()}})},{"../FieldControlBaseView":63}],98:[function(e,t,n){var i=e("../FieldControlBaseView");t.exports=i.extend({initialize:function(){this.render()},events:{"click .kb-js-add-link":"openModal"},render:function(){this.$input=this.$("[data-kbf-link-url]"),this.$text=this.$("[data-kbf-link-linktext]"),this.$target=this.$("[data-kbf-link-target]")},derender:function(){},openModal:function(){window._kbLink=this,wpActiveEditor=this.$input.attr("id"),jQuery("#wp-link-wrap").addClass("kb-customized"),window.kb_restore_htmlUpdate=wpLink.htmlUpdate,window.kb_restore_isMce=wpLink.isMCE,wpLink.isMCE=this.isMCE,wpLink.htmlUpdate=this.htmlUpdate,wpLink.open(),jQuery("#wp-link-text").val(this.$text.val()),jQuery("#wp-link-url").val(this.$input.val()),this.model.get("showtarget")||jQuery("#link-selector .link-target").addClass("kb-hide"),this.setTarget()},setTarget:function(){var e=jQuery("#wp-link-target");this.$target.is(":checked")?e.prop("checked",!0):e.prop("checked",!1)},setTargetFromModal:function(e){"_blank"===e?this.$target.prop("checked",!0):this.$target.prop("checked",!1)},htmlUpdate:function(){var e,t,n,i,o=wpLink.textarea;o&&(t=wpLink.getAttrs(),i=jQuery("#wp-link-text").val(),e=t.target,window._kbLink.setTargetFromModal(e),t.href&&(n=t.href,window._kbLink.$input.empty(),window._kbLink.$input.val(n),window._kbLink.trigger("update",i,n),window._kbLink.$text.val(i),wpLink.close(),window._kbLink.close(),o.focus()))},isMCE:function(){return!1},close:function(){this.model.get("showtarget")||jQuery("#link-selector .link-target").removeClass("kb-hide"),wpLink.isMCE=window.kb_restore_isMce,wpLink.htmlUpdate=window.kb_restore_htmlUpdate}})},{"../FieldControlBaseView":63}],99:[function(e,t,n){var i=e("../FieldControlBaseView");t.exports=i.extend({initialize:function(){this.render()},render:function(){this.editor=new MediumEditor(this.$(".kb-medium-editable"))},derender:function(){},update:function(e){},toString:function(){}})},{"../FieldControlBaseView":63}],100:[function(e,t,n){var i=e("../FieldControlBaseView");t.exports=i.extend({initialize:function(){this.defaults={filter:!0},this.settings=this.model.get("settings")||{},this.render()},render:function(){this.$("[data-kftype='multiselect']").multipleSelect(_.extend(this.defaults,this.settings))},rerender:function(){this.$("[data-kftype='multiselect']").multipleSelect("refresh")}})},{"../FieldControlBaseView":63}],101:[function(e,t,n){var i=e("../FieldControlBaseView"),o=e("common/Ajax"),s=e("common/Config");t.exports=i.extend({initialize:function(){this.render()},render:function(){var e=this;this.$input=this.$(".kb-field--oembed input"),this.$preview=this.$("[data-kb-oembed-preview]"),this.$input.on("change",function(){e.update(e.$input.val())}),this.$input.trigger("change")},derender:function(){},update:function(e){var t=this;this.model.set("value",e);this.sendRequest(e).done(function(e){e&&e.data&&e.data.html&&t.$preview.html(e.data.html)})},toString:function(){return""},sendRequest:function(e){return o.send({action:"getOembed",embedUrl:e,_ajax_nonce:s.getNonce("read")})}})},{"../FieldControlBaseView":63,"common/Ajax":50,"common/Config":53}],102:[function(e,t,n){var i=e("../FieldControlBaseView");e("common/Utilities"),e("common/Config");t.exports=i.extend({initialize:function(){this.uniq=_.uniqueId("map"),this.marker=null,this.render()},events:{"change input":"updateMarker"},render:function(){var e=this;this.default={road:"",postcode:"",village:"",state:"",house_number:""},this.$map=this.$("[data-kb-osm-map]").attr("id",this.uniq),this.$lat=this.$("[data-kb-osm-lat]"),this.$lng=this.$("[data-kb-osm-lng]"),this.$road=this.$("[data-kb-osm-road]"),this.$postcode=this.$("[data-kb-osm-postcode]"),this.$village=this.$("[data-kb-osm-village]"),this.$state=this.$("[data-kb-osm-state]"),this.$housenumber=this.$("[data-kb-osm-housenumber]"),_.defer(function(){e.setupMap(),_.defer(function(){e.map.invalidateSize()})}),this.$map.on("mouseenter",function(){e.map.invalidateSize()})},updateMarker:function(){var e=this.$lat.val(),t=this.$lng.val();this.setMarker(e,t,this.default,!1),this.map.setView(this.marker.getLatLng())},derender:function(){},reverseGeocode:function(e,t,n){var i=this;new L.Control.Geocoder.Nominatim({collapsed:!1,defaultMarkGeocode:!1}).reverse(L.latLng(e,t),18,function(e){n.call(i,e)})},setupMap:function(){var i=this;this.map=L.map(this.uniq).setView([53.551086,9.993682],15),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery  <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18}).addTo(this.map);var e=new L.Control.Geocoder({collapsed:!1,defaultMarkGeocode:!1});e.on("markgeocode",function(e){i.map.setView(e.geocode.center,17),i.setMarker(e.geocode.properties.lat,e.geocode.properties.lon,Object.assign({},i.default,e.geocode.properties.address),!0)}),e.addTo(this.map),this.map.on("click",function(n){i.reverseGeocode(n.latlng.lat,n.latlng.lng,function(e){var t=e[0];t&&t.properties||i.setMarker(n.latlng.lat,n.latlng.lng,i.default,!0),i.setMarker(n.latlng.lat,n.latlng.lng,Object.assign({},i.default,{road:t.properties.address.footway||t.properties.address.pedestrian||t.properties.address.road,postcode:t.properties.address.postcode,village:t.properties.address.city||t.properties.address.town,state:t.properties.address.state||t.properties.address.city,house_number:t.properties.address.house_number||""}),!0)})}),this.updateMarker(),this.$(".leaflet-control-geocoder,[data-prevent-send]").on("keydown",function(e){13===e.which&&(e.stopPropagation(),e.preventDefault())})},setMarker:function(e,t,n,i){var o=this;i=i||!1,o.marker&&o.map.removeLayer(o.marker),o.marker=L.marker([e,t]).addTo(o.map),o.$lat.val(e),o.$lng.val(t),i&&(o.$road.val(n.road),o.$village.val(n.village),o.$postcode.val(n.postcode),o.$state.val(n.state),o.$housenumber.val(n.house_number))},toString:function(){return""}})},{"../FieldControlBaseView":63,"common/Config":53,"common/Utilities":61}],103:[function(e,t,n){var i=e("../FieldControlBaseView");t.exports=i.extend({events:{"click .js-oday-activate-split":"split","click input[type=checkbox]":"toggleClosed"},initialize:function(){this.render()},toggleClosed:function(){var e=this.$("tr");jQuery.each(e,function(e,t){var n=jQuery(t);jQuery("input[type=checkbox]",n).is(":checked")?n.find("input[type=text]:not(.ot-label)").attr("disabled","disabled"):n.find("input[type=text]:not(.ot-label)").removeAttr("disabled","")})},render:function(){this.$(".kb-ot-timepicker").kbdatetimepicker({datepicker:!1,format:"H:i",validateOnBlur:!1,step:30}),this.toggleClosed()},derender:function(){this.$(".kb-ot-timepicker").kbdatetimepicker("destroy")},split:function(){this.$("table").toggleClass("split")}})},{"../FieldControlBaseView":63}],104:[function(e,t,n){var i=e("../FieldControlBaseView");t.exports=i.extend({initialize:function(){this.defaults={sortable:!1,placeholder:"Click here to add options"},this.settings=this.model.get("settings")||{},this.render()},render:function(){var e=this,t=_.extend(this.defaults,this.settings);t.sortable?(this.$el.addClass("select-sortable"),this.$("[data-kbselect2='true']").select2_sortable(t)):(this.$el.removeClass("select-sortable"),this.$("[data-kbselect2='true']").select2(t)),e.$(".select2-search__field").attr("placeholder",t.placeholder),this.$el.on("change",function(){e.$(".select2-search__field").attr("placeholder",t.placeholder)})},rerender:function(){this.render()},derender:function(){_.extend(this.defaults,this.settings).sortable?this.$("[data-kbselect2='true']").select2_sortable("destroy"):(this.$el.removeClass("select-sortable"),this.$("[data-kbselect2='true']").select2("destroy"))}})},{"../FieldControlBaseView":63}],105:[function(e,t,n){var i=e("../FieldControlBaseView"),o=e("fields/controls/subarea/SubareaController");t.exports=i.extend({initialize:function(){this.createController(),this.render()},render:function(){this.$stage=this.$(".kb-field--subarea-stage"),this.SubareaConroller.setElement(this.$stage.get(0)),this.SubareaConroller.render()},derender:function(){this.SubareaConroller.derender()},rerender:function(){this.SubareaConroller.derender(),this.model.setData(),this.render()},createController:function(){if(!this.SubareaConroller)return this.SubareaConroller=new o({el:this.$(".kb-field--subarea-stage"),model:this.model,parentView:this,subarea:KB.Areas.get(this.$(".kb-field--subarea-stage").attr("id")),area:this.model.ModuleModel.Area})}})},{"../FieldControlBaseView":63,"fields/controls/subarea/SubareaController":109}],106:[function(e,t,n){var i=e("shared/ModuleBrowser/ModuleBrowserController"),o=e("common/Checks"),s=e("common/Config"),l=e("common/Notice"),r=e("common/Ajax");t.exports=i.extend({initialize:function(e){i.prototype.initialize.apply(this,arguments),this.subarea=e.subarea,this.isSubarea=!0},createModule:function(e){var t;o.userCan("create_kontentblocks")||l.notice("You're not allowed to do this","error"),t={action:"createNewModule",class:e.get("settings").class,globalModule:e.get("globalModule"),parentObject:e.get("parentObject"),parentObjectId:e.get("parentObjectId"),areaContext:this.subarea.model.get("context"),area:this.subarea.model.get("id"),_ajax_nonce:s.getNonce("create"),frontend:KB.appData.config.frontend,submodule:!0},this.area.model.get("parent_id")&&(t.postId=this.area.model.get("parent_id")),r.send(t,this.success,this)},success:function(e){this.trigger("browser.module.created",{res:e}),this.close()}})},{"common/Ajax":50,"common/Checks":52,"common/Config":53,"common/Notice":57,"shared/ModuleBrowser/ModuleBrowserController":148}],107:[function(e,t,n){var i=e("fields/controls/subarea/templates/module-view.hbs"),o=e("common/Ajax"),s=e("common/Config"),l=e("common/TinyMCE"),r=e("common/Payload"),a=e("backend/Views/FullscreenView"),d=e("common/UI");t.exports=Backbone.View.extend({events:{"click .kbms-action--open":"openForm","click .kbms-action--delete":"removeModule","click .kbms-action--update":"saveModule"},tagName:"div",className:"kb-submodule",initialize:function(e){this.formLoaded=!1,this.slotView=e.slotView,this.controller=e.slotView.controller,this.ModuleModel=e.ModuleModel,this.parentModel=e.parentModel},draft:function(){},render:function(){var e=this;this.$el.append(i({module:this.ModuleModel.toJSON()})),this.slotView.$container.prepend(this.$el),this.$el.attr("data-kba-mid",this.ModuleModel.get("mid")),_.defer(function(){e.setupElements()})},setupElements:function(){this.$inner=this.$(".kbsm-inner")},openForm:function(){KB.EditModalModules?this.handleFrontend():this.handleBackend()},handleBackend:function(){if(this.formLoaded)this.open();else{var e={action:"getModuleBackendForm",_ajax_nonce:s.getNonce("read"),module:this.ModuleModel.toJSON()};o.send(e,this.success,this)}},handleFrontend:function(){var e=KB.Modules.get(this.model.get("mid"));console.log(e),KB.EditModalModules.openView(e.View,!1,!0)},success:function(e){this.$inner.hide().append(e.data.html);var t=KB.ObjectProxy.add(KB.Modules.add(this.ModuleModel.toJSON()));_.defer(function(){r.parseAdditionalJSON(e.data.json)}),this.formLoaded=!0,l.addEditor(this.$el),this.ModuleModel=t,this.open()},open:function(){s.get("frontend")||(this.fsControl||(this.fsControl=new a({model:this.ModuleModel})),this.fsControl.open()),this.listenToOnce(this.fsControl,"close",this.getDirty),d.repaint(this.fsControl.$el)},saveModule:function(){if(!this.formLoaded)return!1;this.ModuleModel.sync(),this.getClean()},getDirty:function(){this.$el.addClass("is-dirty")},getClean:function(){this.$el.removeClass("is-dirty")},removeModule:function(e){this.slotView.removeModuleView(e)}})},{"backend/Views/FullscreenView":22,"common/Ajax":50,"common/Config":53,"common/Payload":58,"common/TinyMCE":59,"common/UI":60,"fields/controls/subarea/templates/module-view.hbs":111}],108:[function(e,t,n){var i=e("fields/controls/subarea/ModuleBrowser"),o=e("fields/controls/subarea/ModuleView"),s=e("common/Ajax"),l=e("common/Config"),r=e("fields/controls/subarea/templates/empty.hbs");t.exports=Backbone.View.extend({hasModule:!1,events:{click:"click"},initialize:function(e){this.controller=e.controller,this.slotId=e.slotId,this.ModuleView=null,this.ModuleModel=null,this.setup(),this.render(),this.listenTo(this.model,"change",this.updateInput)},setModule:function(e){_.isNull(e)||(this.ModuleModel=new Backbone.Model(e))},updateInputValue:function(e){this.$input.val(e)},updateInput:function(){this.$container.empty(),this.ModuleModel&&this.ModuleModel.get("submodule")?(this.ModuleView=new o({slotView:this,model:this.model,ModuleModel:this.ModuleModel,parentModel:this.controller.model.ModuleModel}),this.ModuleView.render(),this.$(".kbsm-empty").remove()):this.$container.prepend(r({})),this.updateInputValue(this.model.get("mid"))},setup:function(){var e=this.controller.model;this.basename=e.get("baseId"),e.get("arrayKey")&&(this.basename=this.basename+"["+e.get("arrayKey")+"]"),this.basename=this.basename+"["+e.get("fieldkey")+"][slots]["+this.slotId+"][mid]",this.$input=jQuery("<input type='hidden' name='"+this.basename+"'>"),this.$container=jQuery("<div></div>")},render:function(){this.$el.append(this.$container),this.$el.append(this.$input)},click:function(){this.ModuleBrowser||(this.ModuleBrowser=new i({area:this.controller.subarea.View,subarea:this.controller.subarea.View}),this.listenTo(this.ModuleBrowser,"browser.module.created",this.moduleCreated)),this.ModuleView||this.ModuleBrowser.render()},dispose:function(){},moduleCreated:function(e){var t=this,n=e.res.data.module;_.defer(function(){t.setModule(n),t.model.set("mid",""),t.model.set("mid",n.mid),t.trigger("module.created"),t.listenToOnce(t.controller.model.ModuleModel.View,"modal.after.nodeupdate",function(){_.defer(function(){KB.ObjectProxy.add(KB.Modules.add(n)),t.controller.setupViewConnections()})}),KB.Events.trigger("modal.preview")})},removeModuleView:function(e){e.stopPropagation(),s.send({action:"removeModules",_ajax_nonce:l.getNonce("delete"),module:this.model.get("mid")},this.removeSuccess,this)},removeSuccess:function(e){var t=this;e.success&&(this.ModuleView.stopListening(),this.ModuleView.remove(),this.ModuleView=null,delete this.ModuleView,this.ModuleModel=null,_.defer(function(){t.model.set({mid:""})}),this.trigger("module.removed"))}})},{"common/Ajax":50,"common/Config":53,"fields/controls/subarea/ModuleBrowser":106,"fields/controls/subarea/ModuleView":107,"fields/controls/subarea/templates/empty.hbs":110}],109:[function(e,t,n){var r=e("fields/controls/subarea/SlotView"),i=e("common/Logger"),o=e("frontend/Views/ModuleView");e("common/Config");t.exports=Backbone.View.extend({initialize:function(e){this.area=e.area,this.subarea=e.subarea,this.parentView=e.parentView,this.listenTo(this.model.ModuleModel.View,"modal.before.nodeupdate",this.disposeSubviews),this.listenTo(this.model.ModuleModel.View,"modal.after.nodeupdate",this.updateSubviews),this.listenTo(this.model.ModuleModel,"modal.serialize.before",this.unbindFields),this.listenTo(this.model.ModuleModel,"modal.serialize",this.rebindFields),i.Debug.log("Fields: SubareaController created")},unbindFields:function(){_.each(this.subViews,function(e){e.model.trigger("modal.serialize.before")})},rebindFields:function(){_.each(this.subViews,function(e){e.model.trigger("modal.serialize")})},setupViewConnections:function(){var n={};return _.each(this.slotViews,function(e){if(""!==e.model.get("mid")){var t=KB.Modules.get(e.model.get("mid"));t&&t.View?n[e.model.get("mid")]=t.View:t&&_.defer(function(){KB.Views.Modules.add(t.get("mid"),new o({model:t,el:"#"+t.get("mid")}))})}}),n},updateSubviews:function(){this.setupViewConnections(),_.each(this.subViews,function(e){e.rerender()})},disposeSubviews:function(){_.each(this.subViews,function(e){e.derender()})},derender:function(){i.Debug.log("Fields: SubareaController derender")},render:function(){var e=this;i.Debug.log("Fields: SubareaController render"),this.convertDom(),this.slotViews={},this.$slotContainers=this.setupSlotContainers(),this.slotViews=this.setupViews(),_.defer(function(){e.subViews=e.setupViewConnections(),e.draggable()})},setupSlotContainers:function(){return this.$("[data-kbml-slot]")},draggable:function(){var n,i,o,s,l=this;this.$(".kbml-slot").draggable({revert:"invalid",helper:"clone",revertDuration:200,start:function(){n=jQuery(this).find(".kb-submodule"),o=jQuery(this),jQuery(this).addClass("being-dragged")},stop:function(){n=null,jQuery(this).removeClass("being-dragged")}}),this.$(".kbml-slot").droppable({hoverClass:"drop-hover",over:function(e,t){i=jQuery(e.target).find(".kb-submodule"),s=jQuery(this)},drop:function(e,t){return n.detach(),i.detach(),o.append(i),s.append(n),l.reindex(),!1}})},reindex:function(){_.each(this.slotViews,function(e){var t=e.$("[data-kba-mid]");if(1===t.length){var n=t.data("kba-mid");n&&e.updateInputValue(n)}else e.updateInputValue("")})},convertDom:function(){this.$el.find("*").each(function(e,t){t.removeAttribute("style"),t.removeAttribute("class");var n=t.dataset;n.kbaEl&&(t.className=n.kbaEl)})},setupViews:function(){var s=this,l={};return _.each(this.$slotContainers,function(e){var t=jQuery(e),n=t.data("kbml-slot"),i=this.createSlotId(n),o=new r({el:t,model:new Backbone.Model({}),controller:this,slotId:i});(l[i]=o).setModule(this.getSlotModule(i)),_.defer(function(){o.model.set(s.getSlotData(i))}),this.listenTo(o,"module.created",this.updateParent),this.listenTo(o,"module.removed",this.updateParent)},this),l},createSlotId:function(e){return"slot-"+e},getSlotModule:function(e){var t=(this.model.get("value").modules||{})[e];return t&&t.mid&&""!==t.mid?t:null},getSlotData:function(e){var t=this.model.get("value").slots||{};return _.isObject(t)||(t={}),t[e]?t[e]:{mid:""}},updateParent:function(){this.model.ModuleModel.sync()}})},{"common/Config":53,"common/Logger":56,"fields/controls/subarea/SlotView":108,"frontend/Views/ModuleView":144}],110:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="kb-submodule">\n    <div class="kbsm-empty add-modules">\n        <div>Modul auswhlen</div>\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":265}],111:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kbsm-details">\n    <div class="kbsm--name">'+r(l(null!=(s=null!=(s=null!=t?a(t,"module"):t)?a(s,"settings"):s)?a(s,"name"):s,t))+'</div>\n    <div class="kbsm--name">'+r(l(null!=(s=null!=t?a(t,"module"):t)?a(s,"mid"):s,t))+'</div>\n</div>\n<div class="kbsm-actions">\n    <div class="kbsm-action kbms-action--open" data-kbtooltip="open form"><span\n            class="dashicons dashicons-admin-generic"></span></div>\n    <div class="kbsm-action kbms-action--delete" data-kbtooltip="delete"><span\n            class="dashicons dashicons-welcome-comments"></span></div>\n    <div class="kbsm-action kbms-action--update" data-kbtooltip="update"><span\n            class="dashicons dashicons-update"></span></div>\n</div>\n<div class="kbsm-inner">\n    <div class="kbsm-button kbms-action--open">Bearbeiten</div>\n</div>'},useData:!0})},{"hbsfy/runtime":265}],112:[function(e,t,n){var i=e("../FieldControlBaseView");t.exports=i.extend({initialize:function(){this.render()},render:function(){jQuery(".kb-tags-input").length&&window.tagBox&&window.tagBox.init()},toString:function(){return""}})},{"../FieldControlBaseView":63}],113:[function(e,t,n){var i=e("../FieldControlBaseView"),o=e("fields/controls/text-multiple/TextMultipleController");t.exports=i.extend({initialize:function(){this.createController(),this.render()},render:function(){var e=this;this.$stage=this.$('[data-kftype="text-multiple"]'),this.TextMultipleController.setElement(this.$stage.get(0)),_.defer(function(){e.TextMultipleController.render()})},derender:function(){this.FlexFieldsController.derender()},rerender:function(){this.render()},createController:function(){if(!this.TextMultipleController)return this.TextMultipleController=new o({el:this.$('[data-kftype="text-multiple"]'),model:this.model,parentView:this})}})},{"../FieldControlBaseView":63,"fields/controls/text-multiple/TextMultipleController":114}],114:[function(e,t,n){var i=e("fields/MultipleControllerBase");t.exports=i.extend({type:"text-multiple"})},{"fields/MultipleControllerBase":68}],115:[function(e,t,n){var i=e("../FieldControlBaseView");t.exports=i.extend({initialize:function(){this.render()},render:function(){var e=this,t=this.model.get("attributes");this.$input=this.$(".kb-field--text input"),this.$input.on("change",function(){e.update(e.$input.val())}),t&&t.maxlength&&(this.$count=jQuery("<span class='charcount kb-field--bubble'></span>").insertAfter(this.$input),this.$input.on("keyup change",function(){e.charcount(e.$input.val(),e.$count,t.maxlength)}).trigger("keyup"))},derender:function(){this.$input.off(),this.$count&&this.$count.off().remove()},update:function(e){this.model.set("value",e)},toString:function(){return this.$input.val()},charcount:function(e,t,n){var i=n-e.length;t.html(i+" chars left")}})},{"../FieldControlBaseView":63}],116:[function(e,t,n){var i=e("../FieldControlBaseView");t.exports=i.extend({initialize:function(){this.render()},render:function(){var e=this,t=this.model.get("attributes");this.$textarea=this.$("textarea"),this.$textarea.on("change",function(){e.update(e.$textarea.val())}),t&&t.maxlength&&(this.$count=jQuery("<span class='charcount kb-field--bubble'></span>").insertAfter(this.$textarea),this.$textarea.on("keyup change",function(){e.charcount(e.$textarea.val(),e.$count,t.maxlength)}).trigger("keyup"))},derender:function(){this.$textarea.off(),this.$count&&this.$count.off().remove()},update:function(e){this.model.set("value",e)},toString:function(){return this.$textarea.val()},charcount:function(e,t,n){var i=n-e.length;t.html(i+" chars left")}})},{"../FieldControlBaseView":63}],117:[function(e,t,n){t.exports={fields:{},register:function(e){var t=e.prototype.type;this.fields[t]=e},get:function(e){return new(this.fields[e.model.get("type")])({model:new Backbone.Model(e.model.toJSON())})},getRefByType:function(e,t){return new this.fields[e]({model:new Backbone.Model(t)})}}},{}],118:[function(e,t,n){e("fieldsAPI/hbsHelpers");var i=e("fieldsAPI/FieldsAPICollection");KB.FieldsAPI=i,KB.FieldsAPI.register(e("fieldsAPI/definitions/editor")),KB.FieldsAPI.register(e("fieldsAPI/definitions/image")),KB.FieldsAPI.register(e("fieldsAPI/definitions/link")),KB.FieldsAPI.register(e("fieldsAPI/definitions/text")),KB.FieldsAPI.register(e("fieldsAPI/definitions/file")),KB.FieldsAPI.register(e("fieldsAPI/definitions/file-multiple")),KB.FieldsAPI.register(e("fieldsAPI/definitions/select")),KB.FieldsAPI.register(e("fieldsAPI/definitions/checkbox")),KB.FieldsAPI.register(e("fieldsAPI/definitions/text-multiple")),KB.FieldsAPI.register(e("fieldsAPI/definitions/date-multiple")),KB.FieldsAPI.register(e("fieldsAPI/definitions/textarea")),KB.FieldsAPI.register(e("fieldsAPI/definitions/medium")),KB.FieldsAPI.register(e("fieldsAPI/definitions/color")),KB.FieldsAPI.register(e("fieldsAPI/definitions/oembed")),KB.FieldsAPI.register(e("fieldsAPI/definitions/datetime")),KB.FieldsAPI.register(e("fieldsAPI/definitions/radioset"))},{"fieldsAPI/FieldsAPICollection":117,"fieldsAPI/definitions/checkbox":120,"fieldsAPI/definitions/color":121,"fieldsAPI/definitions/date-multiple":122,"fieldsAPI/definitions/datetime":123,"fieldsAPI/definitions/editor":124,"fieldsAPI/definitions/file":126,"fieldsAPI/definitions/file-multiple":125,"fieldsAPI/definitions/image":127,"fieldsAPI/definitions/link":128,"fieldsAPI/definitions/medium":129,"fieldsAPI/definitions/oembed":130,"fieldsAPI/definitions/radioset":131,"fieldsAPI/definitions/select":132,"fieldsAPI/definitions/text":134,"fieldsAPI/definitions/text-multiple":133,"fieldsAPI/definitions/textarea":135,"fieldsAPI/hbsHelpers":136}],119:[function(e,t,n){t.exports=Backbone.View.extend({tagName:"div",className:"kb-dyn-field",initialize:function(){this.defaults=this.getDefaults()||{},this.extendModel()},getDefaults:function(){return""},setDefaults:function(){this.setValue(this.getDefaults())},setValue:function(e){this.model.set("value",e)},derender:function(){this.model.destroy(),this.stopListening(),this.remove()},prepareBaseId:function(){return _.isEmpty(this.model.get("arrayKey"))?this.model.get("fieldId")+"["+this.model.get("fieldkey")+"]":this.model.get("fieldId")+"["+this.model.get("arrayKey")+"]["+this.model.get("fieldkey")+"]"},extendModel:function(){this.model.set("baseId",this.prepareBaseId()),this.model.set("uid",this.kbfuid()),this.model.set("kpath",this.prepareKpath())},prepareKpath:function(){var e=[];return this.model.get("arrayKey")&&e.push(this.model.get("arrayKey")),this.model.get("fieldkey")&&e.push(this.model.get("fieldkey")),this.model.get("index")&&e.push(this.model.get("index")),this.model.get("primeKey")&&e.push(this.model.get("primeKey")),e.join(".")},kbfuid:function(){return(this.model.get("index")||"")+this.model.get("fieldId")+this.model.get("primeKey")+this.model.get("type")}})},{}],120:[function(e,t,n){var i=e("fieldsAPI/definitions/baseView");t.exports=i.extend({templatePath:"fields/Checkbox",template:e("templates/fields/Checkbox.hbs"),type:"checkbox",render:function(){return this.template({model:this.model.toJSON()})}})},{"fieldsAPI/definitions/baseView":119,"templates/fields/Checkbox.hbs":195}],121:[function(e,t,n){var i=e("fieldsAPI/definitions/baseView");t.exports=i.extend({templatePath:"fields/Color",template:e("templates/fields/Color.hbs"),type:"color",render:function(){return this.template({model:this.model.toJSON()})},getDefaults:function(){return""}})},{"fieldsAPI/definitions/baseView":119,"templates/fields/Color.hbs":196}],122:[function(e,t,n){var i=e("fieldsAPI/definitions/baseView");t.exports=i.extend({templatePath:"fields/DateMultiple",template:e("templates/fields/DateMultiple.hbs"),type:"date-multiple",render:function(){var e=this.template({model:this.model.toJSON()});return this.setElement(e),this.$el},postRender:function(){var n=this;this.defaults={format:"d.m.Y H:i",inline:!1,mask:!0,lang:"de",allowBlank:!0,onChangeDateTime:function(e,t){n.$unixIn.val(e.dateFormat("unixtime")),n.$sqlIn.val(e.dateFormat("Y-m-d H:i:s"))}},this.settings=this.model.get("settings")||{},this.$unixIn=this.$(".kb-datetimepicker--js-unix"),this.$sqlIn=this.$(".kb-datetimepicker--js-sql"),this.$(".kb-datetimepicker").datetimepicker(_.extend(this.defaults,this.settings))}})},{"fieldsAPI/definitions/baseView":119,"templates/fields/DateMultiple.hbs":197}],123:[function(e,t,n){var i=e("fieldsAPI/definitions/baseView");t.exports=i.extend({templatePath:"fields/DateTime",template:e("templates/fields/Datetime.hbs"),type:"datetime",render:function(){var e=this.template({model:this.model.toJSON()});return this.setElement(e),this.$el},postRender:function(){var n=this;this.defaults={format:"d.m.Y H:i",inline:!1,mask:!0,lang:"de",allowBlank:!0,onChangeDateTime:function(e,t){n.$unixIn.val(e.dateFormat("unixtime")),n.$sqlIn.val(e.dateFormat("Y-m-d H:i:s"))}},this.settings=this.model.get("settings")||{},this.$unixIn=this.$(".kb-datetimepicker--js-unix"),this.$sqlIn=this.$(".kb-datetimepicker--js-sql"),this.$(".kb-datetimepicker").datetimepicker(_.extend(this.defaults,this.settings))}})},{"fieldsAPI/definitions/baseView":119,"templates/fields/Datetime.hbs":198}],124:[function(e,t,n){var i=e("common/TinyMCE"),o=e("fieldsAPI/definitions/baseView");t.exports=o.extend({$editorWrap:null,templatePath:"fields/Editor",template:e("templates/fields/Editor.hbs"),type:"editor",initialize:function(e){o.prototype.initialize.call(this,e)},setValue:function(e){this.model.set("value",e)},render:function(e){return this.index=e,this.template({config:this.config,baseId:this.baseId,index:e,model:this.model.toJSON()})},postRender:function(){var e=this,t=this.model.get("baseId")+"["+this.model.get("index")+"]["+this.model.get("primeKey")+"]",n=this.model.get("fieldId")+"_"+this.model.get("key")+"_editor_"+this.model.get("index");this.$editorWrap=jQuery(".kb-ff-editor-wrapper-"+this.model.get("index")+"-"+this.model.get("key"),this.$el);try{this.fieldModel.getEntityModel().View.isOpen()?i.remoteGetEditor(this.$editorWrap,t,n,this.model.get("value"),null,this.model.get("media")):this.listenToOnce(this.fieldModel.getEntityModel(),"kb.module.view.open",function(){i.remoteGetEditor(this.$editorWrap,t,n,e.model.get("value"),null,e.model.get("media"))})}catch(e){i.remoteGetEditor(this.$editorWrap,t,n,this.model.get("value"),null,this.model.get("media"))}}})},{"common/TinyMCE":59,"fieldsAPI/definitions/baseView":119,"templates/fields/Editor.hbs":199}],125:[function(e,t,n){var i=e("fieldsAPI/definitions/baseView");t.exports=i.extend({templatePath:"fields/FileMultiple",template:e("templates/fields/FileMultiple.hbs"),type:"file-multiple",className:"kb-dyn-file-field",render:function(){return this.$el.append(this.template({model:this.model.toJSON(),i18n:_.extend(KB.i18n.Refields.file,KB.i18n.Refields.common)})),this.$el},events:{"click .kb-js-add-file":"openFrame","click .kb-js-reset-file":"reset"},postRender:function(){this.model.get("value");var e={},t=this;this.$container=this.$(".kb-field-file-wrapper"),this.$IdIn=this.$(".kb-file-attachment-id"),this.$resetIn=this.$(".kb-js-reset-file"),_.isEmpty(this.model.get("value").id)||(e.post__in=[this.model.get("value").id],wp.media.query(e).more().done(function(){var e=this.first();e&&(e.set("attachment_id",e.get("id")),t.handleAttachment(e))}))},derender:function(){this.frame&&(this.frame.dispose(),this.frame=null)},openFrame:function(){var e=this;if(this.frame)return this.frame.open();var t={title:KB.i18n.Refields.file.modalTitle,button:{text:KB.i18n.Refields.common.select},multiple:!1,library:{type:""}};return!0===e.model.get("uploadedTo")&&(t.library.uploadedTo=KB.Environment.postId||0),this.frame=wp.media(t),this.frame.on("ready",function(){e.ready(this)}),this.frame.state("library").on("select",function(){e.select(this)}),this.frame.open()},ready:function(e){this.$(".media-modal").addClass(" smaller no-sidebar");var t=this.model.get("settings");t&&t.uploadFolder&&(this.frame.uploader.options.uploader.params.upload_folder=t.uploadFolder)},select:function(e){var t=e.get("selection").first();this.handleAttachment(t)},handleAttachment:function(e){this.$(".kb-file-filename",this.$container).html(e.get("filename")),this.$(".kb-file-attachment-id",this.$container).val(e.get("id")),this.$(".kb-file-title",this.$container).html(e.get("title")),this.$(".kb-file-id",this.$container).html(e.get("id")),this.$(".kb-file-editLink",this.$container).attr("href",e.get("editLink")),this.$resetIn.show(),this.$container.show(450,function(){KB.Events.trigger("modal.recalibrate")})},reset:function(){this.$IdIn.val(""),this.$container.hide(450),this.$resetIn.hide()}})},{"fieldsAPI/definitions/baseView":119,"templates/fields/FileMultiple.hbs":201}],126:[function(e,t,n){var i=e("fieldsAPI/definitions/baseView");t.exports=i.extend({templatePath:"fields/File",template:e("templates/fields/File.hbs"),type:"file",render:function(){return this.template({model:this.model.toJSON(),i18n:_.extend(KB.i18n.Refields.file,KB.i18n.Refields.common)})},postRender:function(){this.model.get("value");var e={},t=this;_.isEmpty(this.model.get("value").id)||(e.post__in=[this.model.get("value").id],wp.media.query(e).more().done(function(){var e=this.first();e&&(e.set("attachment_id",e.get("id")),t.fieldModel&&t.fieldModel.FieldControlView&&t.fieldModel.FieldControlView.handleAttachment(e))}))}})},{"fieldsAPI/definitions/baseView":119,"templates/fields/File.hbs":200}],127:[function(e,t,n){var i=e("fieldsAPI/definitions/baseView");e("common/Utilities"),e("common/Config");t.exports=i.extend({$currentWrapper:null,$currentFrame:null,templatePath:"fields/Image",template:e("templates/fields/Image.hbs"),type:"image",render:function(e){return this.template({model:this.model.toJSON(),i18n:_.extend(KB.i18n.Refields.image,KB.i18n.Refields.common)})},postRender:function(){this.model.get("value");var e={},t=this,n=this.model.get("value").id;if("number"==typeof n&&(n=n.toString()),n){e.post__in=[this.model.get("value").id];wp.media.query(e).more().done(function(){var e=this.first();e&&(e.set("attachment_id",e.get("id")),t.fieldModel&&t.fieldModel.FieldControlView&&t.fieldModel.FieldControlView.handleAttachment(e))})}}})},{"common/Config":53,"common/Utilities":61,"fieldsAPI/definitions/baseView":119,"templates/fields/Image.hbs":208}],128:[function(e,t,n){var i=e("fieldsAPI/definitions/baseView");t.exports=i.extend({templatePath:"fields/Link",template:e("templates/fields/Link.hbs"),type:"link",render:function(){return this.template({i18n:_.extend(KB.i18n.Refields.link,KB.i18n.Refields.common),model:this.model.toJSON()})},getDefaults:function(){return{link:"",linktext:"",linktitle:""}}})},{"fieldsAPI/definitions/baseView":119,"templates/fields/Link.hbs":209}],129:[function(e,t,n){var i=e("fieldsAPI/definitions/baseView");t.exports=i.extend({templatePath:"fields/Medium",template:e("templates/fields/Medium.hbs"),type:"medium",render:function(){return this.template({model:this.model.toJSON()})},postRender:function(){},getDefaults:function(){return""}})},{"fieldsAPI/definitions/baseView":119,"templates/fields/Medium.hbs":210}],130:[function(e,t,n){var i=e("fieldsAPI/definitions/baseView");t.exports=i.extend({templatePath:"fields/Oembed",template:e("templates/fields/Oembed.hbs"),type:"oembed",render:function(){return this.template({model:this.model.toJSON()})},getDefaults:function(){return""}})},{"fieldsAPI/definitions/baseView":119,"templates/fields/Oembed.hbs":211}],131:[function(e,t,n){var i=e("fieldsAPI/definitions/baseView");t.exports=i.extend({templatePath:"fields/Radioset",template:e("templates/fields/Radioset.hbs"),type:"radioset",render:function(){return this.template({model:this.model.toJSON()})}})},{"fieldsAPI/definitions/baseView":119,"templates/fields/Radioset.hbs":212}],132:[function(e,t,n){var i=e("fieldsAPI/definitions/baseView");t.exports=i.extend({templatePath:"fields/Text",template:e("templates/fields/Select.hbs"),type:"select",render:function(){return this.template({model:this.model.toJSON()})}})},{"fieldsAPI/definitions/baseView":119,"templates/fields/Select.hbs":213}],133:[function(e,t,n){var i=e("fieldsAPI/definitions/baseView");t.exports=i.extend({templatePath:"fields/TextMultiple",template:e("templates/fields/TextMultiple.hbs"),type:"text-multiple",render:function(){var e=this.template({model:this.model.toJSON()});return this.setElement(e),this.$el}})},{"fieldsAPI/definitions/baseView":119,"templates/fields/TextMultiple.hbs":215}],134:[function(e,t,n){var i=e("fieldsAPI/definitions/baseView");t.exports=i.extend({templatePath:"fields/Text",template:e("templates/fields/Text.hbs"),type:"text",render:function(){return this.template({model:this.model.toJSON()})},getDefaults:function(){return""},charcount:function(e,t,n){var i=n-e.length;t.html(i+" chars left")}})},{"fieldsAPI/definitions/baseView":119,"templates/fields/Text.hbs":214}],135:[function(e,t,n){var i=e("fieldsAPI/definitions/baseView");t.exports=i.extend({type:"textarea",templatePath:"fields/Textarea",template:e("templates/fields/Textarea.hbs"),render:function(){return this.template({model:this.model.toJSON()})},getDefaults:function(){return""}})},{"fieldsAPI/definitions/baseView":119,"templates/fields/Textarea.hbs":216}],136:[function(e,t,n){var o=e("hbsfy/runtime");o.registerHelper("debug",function(e){console.log("Current Context"),console.log("===================="),console.log(this),e&&(console.log("Value"),console.log("===================="),console.log(e))}),o.registerHelper("fieldName",function(e,t,n){return e+"["+t+"]["+n+"]"}),o.registerHelper("ifCond",function(e,t,n,i){switch(t){case"==":return e==n?i.fn(this):i.inverse(this);case"===":return e===n?i.fn(this):i.inverse(this);case"<":return e<n?i.fn(this):i.inverse(this);case"<=":return e<=n?i.fn(this):i.inverse(this);case">":return n<e?i.fn(this):i.inverse(this);case">=":return n<=e?i.fn(this):i.inverse(this);case"&&":return e&&n?i.fn(this):i.inverse(this);case"||":return e||n?i.fn(this):i.inverse(this);default:return i.inverse(this)}}),o.registerHelper("trimString",function(e,t){t=t||50;var n=e.length>t,i=e.substring(0,t);return n&&(i+=""),new o.SafeString(i)})},{"hbsfy/runtime":265}],137:[function(e,t,n){var i=e("./modulecontrols/EditControl"),o=e("./modulecontrols/UpdateControl"),s=e("./modulecontrols/DeleteControl"),l=e("./modulecontrols/MoveControl"),r=e("./modulecontrols/DraftControl"),a=e("templates/frontend/module-controls.hbs");t.exports=Backbone.View.extend({ModuleView:null,$menuList:null,initialize:function(e){this.ModuleView=e.ModuleView},derender:function(){this.$el.detach()},rerender:function(){var e=this;this.ModuleView.$el.append(this.$el),_.defer(function(){e.reposition()})},render:function(){this.ModuleView.$el.append(a({model:this.ModuleView.model.toJSON(),i18n:KB.i18n.jsFrontend})),this.$el=jQuery('[data-kb-mcontrols="'+this.model.get("mid")+'"]',this.ModuleView.$el),this.$menuList=this.$(".kb-controls-wrap"),this.EditControl=this.addItem(new i({model:this.ModuleView.model,parent:this.ModuleView})),this.UpdateControl=this.addItem(new o({model:this.ModuleView.model,parent:this.ModuleView})),this.DeleteControl=this.addItem(new s({model:this.ModuleView.model,parent:this.ModuleView})),this.MoveControl=this.addItem(new l({model:this.ModuleView.model,parent:this.ModuleView})),this.DraftControl=this.addItem(new r({model:this.ModuleView.model,parent:this.ModuleView}))},addItem:function(e){if(e.isValid&&!0===e.isValid())return this.$menuList.append(e.render()),e.listenToOnce(this,"controls.remove",e.remove),e},dispose:function(){this.trigger("controls.remove"),this.remove()},reposition:function(){var e,t,n,i,o,s;t=e=0,n=this.model.get("settings"),i=this.model.get("submodule"),o=this.ModuleView.$el.offset(),s=this.ModuleView.$el.height(),n.controls&&n.controls.toolbar&&(o.top=n.controls.toolbar.top,o.left=n.controls.toolbar.left),"hidden"!==this.ModuleView.$el.css("overflow")&&60<o.top&&s<119&&(e=-25),"hidden"!==this.ModuleView.$el.css("overflow")&&100<o.left&&120<s&&this.ModuleView.$el.class&&(e=0,t=-30,this.ModuleView.$el.addClass("kb-module-nav__vertical")),o.top<20&&(e=10),0==e&&(e=20),0==t&&(t=20),i&&(e+=50),this.$el.css({top:e+"px",left:t})}})},{"./modulecontrols/DeleteControl":139,"./modulecontrols/DraftControl":140,"./modulecontrols/EditControl":141,"./modulecontrols/MoveControl":142,"./modulecontrols/UpdateControl":143,"templates/frontend/module-controls.hbs":218}],138:[function(e,t,n){t.exports=Backbone.View.extend({tagName:"div",isValid:function(){return!0},render:function(){return this.el},dispose:function(){this.remove()}})},{}],139:[function(e,t,n){var i=e("frontend/Views/ModuleControls/modulecontrols/ControlsBaseView"),o=e("common/Checks"),s=e("common/Config"),l=e("common/Notice"),r=e("common/Ajax");t.exports=i.extend({initialize:function(e){this.options=e||{},this.Parent=e.parent},className:"kb-module-control kb-module-control--delete",events:{click:"confirmRemoval"},confirmRemoval:function(){l.confirm("Remove",KB.i18n.EditScreen.notices.confirmDeleteMsg,this.removeModule,this.cancelRemoval,this)},removeModule:function(){r.send({action:"removeModules",_ajax_nonce:s.getNonce("delete"),module:this.model.get("mid"),postId:this.model.get("postId")},this.afterRemoval,this)},afterRemoval:function(){this.Parent.$el.parent(".kb-wrap").remove(),this.trigger("remove"),KB.Modules.remove(this.model)},cancelRemoval:function(){return!1},isValid:function(){return o.userCan("delete_kontentblocks")}})},{"common/Ajax":50,"common/Checks":52,"common/Config":53,"common/Notice":57,"frontend/Views/ModuleControls/modulecontrols/ControlsBaseView":138}],140:[function(e,t,n){var i=e("frontend/Views/ModuleControls/modulecontrols/ControlsBaseView");t.exports=i.extend({initialize:function(e){this.options=e||{},this.Parent=e.parent,this.$el.append("<div>Draft! Only visible while logged in</div>"),this.listenTo(this.Parent.model,"change:state",this.recheck),this.recheck(this.Parent.model.get("state"))},className:"kb-module-control kb-module-control--draft",isValid:function(){return!0},recheck:function(e){e.draft?this.$el.show():this.$el.hide()}})},{"frontend/Views/ModuleControls/modulecontrols/ControlsBaseView":138}],141:[function(e,t,n){var i=e("frontend/Views/ModuleControls/modulecontrols/ControlsBaseView"),o=e("common/Checks");t.exports=i.extend({initialize:function(e){this.options=e||{},this.parent=e.parent},className:"kb-module-control kb-module-control--edit",events:{click:"openForm"},openForm:function(){return KB.EditModalModules.openView(this.parent,!1,!1),KB.focusedModule=this.model,this},isValid:function(){return o.userCan("edit_kontentblocks")}})},{"common/Checks":52,"frontend/Views/ModuleControls/modulecontrols/ControlsBaseView":138}],142:[function(e,t,n){var i=e("frontend/Views/ModuleControls/modulecontrols/ControlsBaseView"),o=e("common/Checks");t.exports=i.extend({initialize:function(e){this.options=e||{},this.Parent=e.parent},className:"kb-module-control kb-module-control--move",isValid:function(){return!!this.Parent.model.Area&&(o.userCan("edit_kontentblocks")&&this.Parent.model.Area.get("sortable")&&!this.model.get("submodule"))}})},{"common/Checks":52,"frontend/Views/ModuleControls/modulecontrols/ControlsBaseView":138}],143:[function(e,t,n){var i=e("frontend/Views/ModuleControls/modulecontrols/ControlsBaseView"),o=e("common/Checks"),s=e("common/Config"),l=e("common/Notice");t.exports=i.extend({initialize:function(e){this.options=e||{},this.Parent=e.parent},className:"kb-module-control kb-module-control--update",events:{click:"update"},update:function(){var t=this;jQuery.ajax({url:ajaxurl,data:{action:"updateModule",data:t.model.get("entityData"),module:t.model.toJSON(),editmode:"update",refresh:!1,_ajax_nonce:s.getNonce("update")},type:"POST",dataType:"json",success:function(e){tinymce.triggerSave(),t.model.set("entityData",e.data.newModuleData),t.Parent.render(),t.Parent.trigger("kb.frontend.module.inline.saved"),t.model.trigger("module.model.updated",t.model),l.notice("Module saved successfully","success"),t.Parent.$el.removeClass("isDirty")},error:function(){l.notice("There went something wrong","error")}})},isValid:function(){return o.userCan("edit_kontentblocks")}})},{"common/Checks":52,"common/Config":53,"common/Notice":57,"frontend/Views/ModuleControls/modulecontrols/ControlsBaseView":138}],144:[function(e,t,n){var i=e("frontend/Views/ModuleControls/ModuleControls"),o=e("common/Checks"),s=e("shared/ModuleStatusBar/ModuleStatusBarView"),l=e("shared/ModuleStatusBar/status/TemplateStatus"),r=e("shared/ModuleStatusBar/status/PublishStatus"),a=e("templates/frontend/module-placeholder.hbs");t.exports=Backbone.View.extend({focus:!1,attachedFields:{},initialize:function(){this.Controls=new i({ModuleView:this,model:this.model}),0!==this.$el.length&&o.userCan("edit_kontentblocks")&&((this.model.View=this).model.trigger("module.model.view.attached",this),this.bindHandlers(),this.render(),KB.Events.on("reposition",this.setControlsPosition,this))},bindHandlers:function(){this.listenTo(this.model,"change",this.getDirty),this.listenTo(this.model,"module.model.updated",this.getClean),this.listenTo(this.model,"module.model.clean",this.getClean)},events:{"click .kb-module__placeholder":"openOptions","click .editable":"reloadModal","mouseenter.first":"setActive"},renderStatusBar:function(e){this.ModuleStatusBar=new s({el:e,parent:this}),this.ModuleStatusBar.addItem(new l({model:this.model,parent:this})),this.ModuleStatusBar.addItem(new r({model:this.model,parent:this}))},openOptions:function(){this.Controls.EditControl.openForm()},setActive:function(){KB.currentModule=this},rerender:function(){var e=this;this.setElement(jQuery("#"+this.model.get("mid"))),_.defer(function(){e.Controls.rerender()})},derender:function(){this.Controls.derender(),this.$el.remove()},render:function(){var e;this.$el.hasClass("draft")&&""==this.$el.html()&&this.renderPlaceholder(),this.$el.attr("rel",this.model.get("mid")+"_"+_.uniqueId()),(e=this.model.get("settings")).controls&&e.controls.hide||(this.Controls.render(),this.setControlsPosition())},setControlsPosition:function(){this.Controls.reposition()},reloadModal:function(e){return KB.EditModalModules&&KB.EditModalModules.reload(this,e),KB.focusedModule=this.model,this},renderPlaceholder:function(){this.$el.append(a({model:this.model.toJSON()}))},addField:function(e){this.attachedFields[e.cid]=e},hasField:function(e,t){return _.isEmpty(t)?e in this.attachedFields:(this.attachedFields[t]||(this.attachedFields[t]={}),e in this.attachedFields[t])},getField:function(e,t){return _.isEmpty(t)?this.attachedFields[e]:this.attachedFields[t][e]},clearFields:function(){this.attachedFields={}},getDirty:function(){this.$el.addClass("isDirty"),this.trigger("view.became.dirty",this)},getClean:function(){this.$el.removeClass("isDirty"),this.trigger("view.became.clean",this)},modelChange:function(){this.getDirty()},dispose:function(){this.Controls.dispose(),delete this.model.View,this.stopListening(),this.remove()}})},{"common/Checks":52,"frontend/Views/ModuleControls/ModuleControls":137,"shared/ModuleStatusBar/ModuleStatusBarView":156,"shared/ModuleStatusBar/status/PublishStatus":160,"shared/ModuleStatusBar/status/TemplateStatus":169,"templates/frontend/module-placeholder.hbs":219}],145:[function(e,t,n){var i=e("templates/backend/batch-delete.hbs"),o=e("common/Ajax"),s=e("common/Config"),l=e("common/TinyMCE"),r=e("common/I18n"),a=Backbone.View.extend({collection:{},visible:!1,className:"kb-batch-delete-wrap",events:{"click .kb-batch-delete--action-delete":"process","click .kb-batch-delete--action-reset":"reset"},initialize:function(){this.render()},render:function(){this.$el.append(i({i18n:r.getString("EditScreen.batchdelete")})),jQuery("body").append(this.$el)},add:function(e){this.collection[e.model.id]=e,this.refresh()},remove:function(e){this.collection[e.model.id]&&delete this.collection[e.model.id],this.refresh()},refresh:function(){0<_.size(this.collection)?this.show():this.hide()},reset:function(){_.each(this.collection,function(e){e.unmark(),this.remove(e)},this)},process:function(){var i=[];_.each(this.collection,function(e,t,n){i.push(t)}),o.send({action:"batchRemoveModules",_ajax_nonce:s.getNonce("delete"),modules:i},this.success,this)},success:function(e){var i=this;e.data.modules&&_.each(e.data.modules,function(e,t){if(e){var n=this.collection[t];l.removeEditors(n.model.View.$el),KB.Modules.remove(n.model),wp.heartbeat.interval("fast",2),n.model.destroy(),i.hide()}},this)},show:function(){this.$el.addClass("visible")},hide:function(){this.$el.removeClass("visible")}});t.exports=new a},{"common/Ajax":50,"common/Config":53,"common/I18n":54,"common/TinyMCE":59,"templates/backend/batch-delete.hbs":173}],146:[function(e,t,n){var i=e("common/Notice"),o=e("templates/frontend/change-observer.hbs"),s=e("common/I18n"),l=e("common/Config");t.exports=Backbone.View.extend({models:new Backbone.Collection,className:"kb-change-observer",initialize:function(){this.listenTo(KB.Modules,"add",this.attachHandler),this.render()},events:{"click .kb-button":"saveAll"},render:function(){this.$el.append(o({strings:s.getString("UI.changeObserver")})),this.$el.appendTo("body")},attachHandler:function(e){this.listenTo(e,"change:entityData",this.add),this.listenTo(e,"module.model.updated",this.remove),this.listenTo(e,"module.model.clean",this.remove)},add:function(e){this.models.add(e),this.trigger("change"),this.handleState()},remove:function(e){this.models.remove(e,{silent:!0}),this.trigger("change"),this.handleState()},getModels:function(){return this.models},saveAll:function(){tinyMCE.triggerSave(),_.each(this.models.models,function(e){e.sync(!0)}),l.isAdmin()||i.notice("Data is safe.","success"),this.trigger("change")},handleState:function(){0<this.models.models.length?this.$el.addClass("show"):this.$el.removeClass("show")}})},{"common/Config":53,"common/I18n":54,"common/Notice":57,"templates/frontend/change-observer.hbs":217}],147:[function(e,t,n){t.exports=Backbone.Collection.extend({initialize:function(){this.listenTo(this,"add",this.attachHandler)},attachHandler:function(e){this.listenTo(e,"remove",this.removeModel)},removeModel:function(e){this.remove(e,{silent:!0})}})},{}],148:[function(e,t,n){var i=e("shared/ModuleBrowser/ModuleBrowserDefinitions"),o=e("shared/ModuleBrowser/ModuleDefinitionModel"),s=e("shared/ModuleBrowser/ModuleBrowserDescriptions"),l=e("shared/ModuleBrowser/ModuleBrowserNavigation"),r=e("common/Checks"),a=e("common/Notice"),d=e("common/Payload"),u=e("common/Ajax"),c=e("common/TinyMCE"),h=e("common/Config"),p=e("templates/backend/modulebrowser/module-browser.hbs");t.exports=Backbone.View.extend({initialize:function(e){this.options=e||{},this.isOpen=!1,this.area=this.options.area,this.viewMode=this.getViewMode(),this.modulesDefinitions=new i(this.prepareAssignedModules(),{model:o,area:this.options.area}).setup(),this.$el.append(p({viewMode:this.getViewModeClass()})),this.$backdrop=jQuery('<div class="kb-module-browser--backdrop"></div>'),this.$list=jQuery(".modules-list",this.$el),this.subviews.ModuleDescription=new s({el:jQuery(".module-description",this.$el),browser:this}),this.subviews.Navigation=new l({el:jQuery(".module-categories",this.$el),cats:this.modulesDefinitions.categories,browser:this}),this.listenTo(this.subviews.Navigation,"browser:change",this.update),this.bindHandlers()},tagName:"div",id:"module-browser",className:"kb-overlay",events:{"click .close-browser":"close","click .module-browser--switch__list-view":"toggleViewMode","click .module-browser--switch__grid-view":"toggleViewMode"},subviews:{},toggleViewMode:function(){jQuery(".module-browser-wrapper",this.$el).toggleClass("module-browser--list-view module-browser--grid-view");var e="mdb_"+this.area.model.get("id")+"_state";"list"==store.get(e)?(this.viewMode="grid",store.set(e,"grid")):(this.viewMode="list",store.set(e,"list"))},render:function(){this.open()},getViewMode:function(){var e="mdb_"+this.area.model.get("id")+"_state";return store.get(e)?store.get(e):(store.set(e,"list"),"list")},getViewModeClass:function(){return"list"===this.viewMode?"module-browser--list-view":"module-browser--grid-view"},bindHandlers:function(){var t=this;jQuery("body").on("click",function(e){t.isOpen&&jQuery(e.target).is(".kb-module-browser--backdrop")&&t.close()}),jQuery(document).keydown(function(e){if(t.isOpen){switch(e.which){case 27:t.close();break;default:return}e.preventDefault()}})},open:function(){this.$el.appendTo("body"),this.$backdrop.appendTo("body"),jQuery("#wpwrap").addClass("module-browser-open"),jQuery(".kb-nano").nanoScroller({flash:!0,contentClass:"kb-nano-content"}),this.isOpen=!0},close:function(){jQuery("#wpwrap").removeClass("module-browser-open"),this.trigger("browser:close"),this.$backdrop.detach(),this.$el.detach(),this.isOpen=!1},update:function(e){var t=e.model.get("id");this.modulesDefinitions.getModules(t);e.renderList()},loadDetails:function(e){this.subviews.ModuleDescription.model=e,this.subviews.ModuleDescription.update()},createModule:function(e){var t,n;if(r.userCan("create_kontentblocks")||a.notice("You're not allowed to do this","error"),t=KB.Areas.get(this.options.area.model.get("id")),!r.blockLimit(t))return a.notice("Limit for this area reached","error"),!1;n={action:"createNewModule",class:e.get("settings").class,globalModule:e.get("globalModule"),parentObject:e.get("parentObject"),parentObjectId:e.get("parentObjectId"),areaContext:this.options.area.model.get("context"),area:this.options.area.model.get("id"),_ajax_nonce:h.getNonce("create"),frontend:KB.appData.config.frontend,submodule:!1},this.options.area.model.get("parent_id")&&(n.postId=this.options.area.model.get("parent_id")),this.close(),u.send(n,this.success,this)},success:function(e){var t,n;n=e.data,this.options.area.$modulesList.append(n.html),t=KB.ObjectProxy.add(KB.Modules.add(n.module)),this.options.area.attachModule(t),this.parseAdditionalJSON(n.json),t.View.trigger("toggle.open"),setTimeout(function(){KB.Fields.trigger("newModule",t.View),c.addEditor(t.View.$el)},150),this.trigger("browser.module.created",{res:e})},parseAdditionalJSON:function(e){KB.payload.Fields||(KB.payload.Fields={}),_.extend(KB.payload.Fields,e.Fields),d.parseAdditionalJSON(e)},prepareAssignedModules:function(){var t=this.area.model.get("assignedModules"),n=[];return _.each(d.getPayload("ModuleDefinitions"),function(e){-1!==_.indexOf(t,e.settings.class)&&n.push(e)}),KB.Events.trigger("module.browser.setup.defs",this,n),n}})},{"common/Ajax":50,"common/Checks":52,"common/Config":53,"common/Notice":57,"common/Payload":58,"common/TinyMCE":59,"shared/ModuleBrowser/ModuleBrowserDefinitions":149,"shared/ModuleBrowser/ModuleBrowserDescriptions":150,"shared/ModuleBrowser/ModuleBrowserNavigation":153,"shared/ModuleBrowser/ModuleDefinitionModel":155,"templates/backend/modulebrowser/module-browser.hbs":179}],149:[function(e,t,n){var i=e("common/Payload"),o=e("common/Checks");t.exports=Backbone.Collection.extend({initialize:function(e,t){this.area=t.area},setup:function(){return this.categories=this.prepareCategories(),this.sortToCategories(),this},getModules:function(e){if(this.categories[e])return this.categories[e].modules},getCategories:function(){return this.categories},sortToCategories:function(){var n=this;_.each(this.models,function(e){if(n.validateVisibility(e)){var t=_.isUndefined(e.get("settings").category)?"standard":e.get("settings").category;n.categories[t].modules.push(e)}})},validateVisibility:function(e){return!!o.userCan(e.get("settings").cap)&&(!e.get("settings").hidden&&(!e.get("settings").disabled&&!(!e.get("settings").globalModule&&this.area.model.get("dynamic"))))},prepareCategories:function(){var n={},e=i.getPayload("ModuleCategories");return _.each(e,function(e,t){n[t]={id:t,name:e,modules:[]}}),KB.Events.trigger("module.browser.setup.cats",n),n}})},{"common/Checks":52,"common/Payload":58}],150:[function(e,t,n){var i=e("templates/backend/modulebrowser/module-template-description.hbs"),o=e("templates/backend/modulebrowser/module-description.hbs");t.exports=Backbone.View.extend({initialize:function(e){this.options=e||{},this.Browser=e.browser,this.Browser.on("browser:close",this.close,this)},events:{"click .kb-js-create-module":"createModule"},update:function(){this.$el.empty(),this.model.get("template")?this.$el.html(i({module:this.model.toJSON(),i18n:KB.i18n})):this.$el.html(o({module:this.model.toJSON(),i18n:KB.i18n})),!1!==this.model.get("settings").helptext&&this.$el.append(this.model.get("settings").helptext)},close:function(){},createModule:function(){this.Browser.createModule(this.model)}})},{"templates/backend/modulebrowser/module-description.hbs":180,"templates/backend/modulebrowser/module-template-description.hbs":182}],151:[function(e,t,n){var i=e("shared/ModuleBrowser/ModuleBrowserListItem");t.exports=Backbone.View.extend({initialize:function(e){this.options=e||{},this.cat=e.cat},modules:{},subviews:{},setModules:function(e){return this.modules=e,this},update:function(){var t=this,n=!1;this.$el.empty();var e=this.cat.model.get("modules");e.sort(function(e,t){return e.get("settings").name>t.get("settings").name?1:t.get("settings").name>e.get("settings").name?-1:0}),_.each(e,function(e){t.subviews[e.cid]=new i({model:e,parent:t,browser:t.options.browser}),!1===n&&(t.options.browser.loadDetails(e),n=!n),t.$el.append(t.subviews[e.cid].render(t.$el))})},render:function(){}})},{"shared/ModuleBrowser/ModuleBrowserListItem":152}],152:[function(e,t,n){var i=e("templates/backend/modulebrowser/module-template-list-item.hbs"),o=e("templates/backend/modulebrowser/module-list-item.hbs"),s=e("templates/backend/modulebrowser/poster.hbs");t.exports=Backbone.View.extend({tagName:"div",className:"modules-list-item",initialize:function(e){this.options=e||{},this.Browser=e.browser,this.area=e.browser.area},render:function(e){this.model.get("globalModule")?this.$el.html(i({module:this.model.toJSON(),i18n:KB.i18n})):this.$el.html(o({module:this.model.toJSON(),i18n:KB.i18n})),e.append(this.$el),!1!==this.model.get("settings").poster&&this.$el.qtip({content:{text:s({module:this.model.toJSON()})},style:{classes:"kb-qtip"},position:{my:"top left",at:"bottom right",target:"mouse",adjust:{x:80,y:20}}})},events:{click:"handleClick","click .kb-js-create-module":"handlePlusClick"},handleClick:function(){"list"===this.Browser.viewMode?this.createModule():this.Browser.loadDetails(this.model)},handlePlusClick:function(){if("list"===this.Browser.viewMode)return this.handleClick(),!1;this.createModule()},createModule:function(){this.Browser.createModule(this.model)},close:function(){this.remove()}})},{"templates/backend/modulebrowser/module-list-item.hbs":181,"templates/backend/modulebrowser/module-template-list-item.hbs":183,"templates/backend/modulebrowser/poster.hbs":184}],153:[function(e,t,n){var i=e("shared/ModuleBrowser/ModuleBrowserTabItemView");t.exports=Backbone.View.extend({catSet:!1,initialize:function(e){var n=this;this.options=e||{},this.$list=jQuery("<div></div>").appendTo(this.$el),_.each(this.options.cats,function(e){var t=new Backbone.Model(e);new i({parent:n,model:t,browser:n.options.browser}).render()})}})},{"shared/ModuleBrowser/ModuleBrowserTabItemView":154}],154:[function(e,t,n){var i=e("shared/ModuleBrowser/ModuleBrowserList");t.exports=Backbone.View.extend({initialize:function(e){if(this.options=e||{},this.model.get("listRenderer")){var t=this.model.get("listRenderer");this.listRenderer=new t({cat:this,el:e.browser.$list,browser:e.browser})}else this.listRenderer=new i({cat:this,el:e.browser.$list,browser:e.browser})},tagName:"div",className:"cat-item",events:{click:"change"},change:function(){this.options.parent.trigger("browser:change",this),this.$el.addClass("active"),jQuery(".cat-item").not(this.$el).removeClass("active")},render:function(){var e=_.keys(this.model.get("modules")).length,t=" ("+e+")";if(0===e)return!1;!1===this.options.parent.catSet&&(this.options.parent.catSet=!0,this.options.browser.update(this),this.$el.addClass("active")),this.options.parent.$list.append(this.$el.html(this.model.get("name")+'<span class="module-count">'+t+"</span>"))},renderList:function(){this.listRenderer.update()}})},{"shared/ModuleBrowser/ModuleBrowserList":151}],155:[function(e,t,n){t.exports=Backbone.Model.extend({initialize:function(){var e=this;this.id="template"===e.get("settings").category?e.get("mid"):e.get("settings").class}})},{}],156:[function(e,t,n){var i=e("backend/Views/ModuleControls/ControlsView");t.exports=i.extend({tagName:"div",className:"kb-module--status-bar-list",initialize:function(e){this.$menuWrap=jQuery(".kb-module--status-bar",this.$el),this.$menuWrap.append("<div class='kb-module--status-bar-list'></div>"),this.$menuList=jQuery(".kb-module--status-bar-list",this.$menuWrap)}})},{"backend/Views/ModuleControls/ControlsView":23}],157:[function(e,t,n){var i=e("backend/Views/BaseControlView"),o=e("templates/backend/status/draft.hbs"),s=e("common/Ajax"),l=e("common/Config"),r=e("common/I18n"),a=e("common/Notice"),d=e("common/Checks");t.exports=i.extend({className:"kb-status-draft",id:"status",events:{click:"toggleDraft"},isValid:function(){return!!d.userCan(this.model.get("settings").cap)&&(!KB.Environment||"kb-gmd"!==KB.Environment.postType)},render:function(){var e=this.model.get("state").draft,t=this.model.View.$el;this.$el.append(o({draft:this.model.get("state").draft,strings:r.getString("Modules.tooltips")})),e?t.addClass("kb-module-draft"):t.removeClass("kb-module-draft")},toggleDraft:function(){var e=this;s.send({action:"undraftModule",module:this.model.toJSON(),_ajax_nonce:l.getNonce("update")}).done(function(){e.model.get("state").draft=!e.model.get("state").draft,e.$el.empty(),e.render(),a.notice("Status changed","success")})}})},{"backend/Views/BaseControlView":13,"common/Ajax":50,"common/Checks":52,"common/Config":53,"common/I18n":54,"common/Notice":57,"templates/backend/status/draft.hbs":185}],158:[function(e,t,n){var i=e("backend/Views/BaseControlView"),o=e("templates/backend/status/loggedin.hbs"),s=e("common/Checks");t.exports=i.extend({id:"loggedIn",controller:null,className:"kb-status-loggedin",initialize:function(e){this.moduleView=e.parent,this.listenTo(this.model,"override:loggedinonly",this.rerender)},isValid:function(){return!!s.userCan(this.model.get("settings").cap)&&(!KB.Environment||"kb-gmd"!==KB.Environment.postType)},render:function(){this.$el.append(o({model:this.model.toJSON(),i18n:KB.i18n}))},rerender:function(){this.$el.empty(),this.render()}})},{"backend/Views/BaseControlView":13,"common/Checks":52,"templates/backend/status/loggedin.hbs":186}],159:[function(e,t,n){var i=e("backend/Views/BaseControlView");t.exports=i.extend({id:"name",className:"kb-status-name  ",isValid:function(){return!0},render:function(){this.$el.append('<span class="kb-module--status-label">Original Module Name<br></span>'+this.model.get("settings").publicName)}})},{"backend/Views/BaseControlView":13}],160:[function(e,t,n){var i=e("backend/Views/BaseControlView"),o=e("templates/backend/status/publish.hbs"),s=e("common/Ajax"),l=e("common/Config"),r=e("common/I18n"),a=e("common/Checks");t.exports=i.extend({id:"publish",className:"kb-status-draft",events:{click:"toggleDraft"},isValid:function(){return!!a.userCan(this.model.get("settings").cap)&&(!KB.Environment||"kb-gmd"!==KB.Environment.postType)},render:function(){var e=this.model.get("state").draft,t=this.model.View.$el;this.$el.append(o({draft:this.model.get("state").draft,strings:r.getString("Modules.tooltips")})),e?t.addClass("kb-module-draft"):t.removeClass("kb-module-draft")},toggleDraft:function(){var e=this;s.send({action:"undraftModule",module:this.model.toJSON(),_ajax_nonce:l.getNonce("update")}).done(function(){e.model.get("state").draft=!e.model.get("state").draft,e.$el.empty(),e.render(),e.model.trigger("change:state",e.model.get("state"))})}})},{"backend/Views/BaseControlView":13,"common/Ajax":50,"common/Checks":52,"common/Config":53,"common/I18n":54,"templates/backend/status/publish.hbs":187}],161:[function(e,t,n){var i=e("templates/backend/status/settings/modal-inner.hbs"),o=e("./SettingsTabsController"),s=e("./controls/LoggedInOnly"),l=e("./controls/WrapperClasses");t.exports=Backbone.View.extend({tagName:"div",className:"kb-status-settings-modal kb-hide",events:{"click .kb-modal-close":"close"},rendered:!1,initialize:function(e){this.listenTo(this.model,"remove",this.dispose),this.moduleView=e.moduleView,this.$el.attr("id",this.model.get("mid")+"-settings-modal"),this.$el.append(i({model:this.model.toJSON(),i18n:KB.i18n})),this.tabController=new o({controller:this,model:this.model,el:this.$(".kb-status-settings--tab-nav")}),this.setupTabItems()},setupTabItems:function(){this.tabController.addItem({id:"visibility",label:KB.i18n.Modules.settings.label.visibility},new s({model:this.model,controller:this,bindId:"loggedinonly"})),this.tabController.addItem({id:"details",label:KB.i18n.Modules.settings.label.details},new l({model:this.model,controller:this,bindId:"wrapperclasses"}))},open:function(){return this.rendered?(this.$el.detach(),this.$el.appendTo("body"),this.$el.removeClass("kb-hide"),this.tabController.$el.tabs("enable")):(this.$el.appendTo("body").removeClass("kb-hide"),this.rendered=!0,this.bindHandlers(),this.tabController.$el.tabs()),jQuery("#wpwrap").addClass("module-browser-open"),this},close:function(){return this.$el.detach(),this.$el.appendTo(this.moduleView.$el),this.$el.addClass("kb-hide"),jQuery("#wpwrap").removeClass("module-browser-open"),this.tabController.$el.tabs("disable"),this},dispose:function(){delete this.model,delete this.moduleView,this.remove()},bindHandlers:function(){var i=this;i.$inputs=i.$("input"),i.$inputs.on("change",function(){var e=jQuery(this),t=e.data("kbms-key"),n=e.val();switch(e.attr("type")){case"checkbox":i.moduleView.model.get("overrides")[t]=e.is(":checked");break;default:i.moduleView.model.get("overrides")[t]=n}i.moduleView.trigger("kb::module.input.changed"),i.model.trigger("override:"+t)})}})},{"./SettingsTabsController":162,"./controls/LoggedInOnly":165,"./controls/WrapperClasses":166,"templates/backend/status/settings/modal-inner.hbs":189}],162:[function(e,t,n){var i=e("./TabSection");t.exports=Backbone.View.extend({initialize:function(e){this.controller=e.controller,this.$navList=this.$(".kb-status-settings--tab-nav-list"),this.sections={}},addItem:function(e,t){this.createSection(e).addField(t)},render:function(){},createSection:function(e){if(!this.sections[e.id]){var t=this.model.get("mid")+"_tab_"+e.id,n=new i({model:this.model,sectionId:e.id,containerId:t,id:t});this.$el.append(n.$el),this.$navList.append('<li><a href="#'+t+'">'+e.label+"</a></li>"),this.sections[e.id]=n}return this.sections[e.id]}})},{"./TabSection":163}],163:[function(e,t,n){t.exports=Backbone.View.extend({initialize:function(e){this.sectionId=e.sectionId,this.containerId=e.containerId,this.fields={}},addField:function(e){this.fields[e.bindId]||(this.fields[e.bindId]=e),this.$el.append(e.render())}})},{}],164:[function(e,t,n){t.exports=Backbone.View.extend({className:"kbms-field-wrap",initialize:function(e){this.bindId=e.bindId},events:{"change input":"propagateChange"},propagateChange:function(e){var t=this.model.get("overrides");t[this.bindId]=this.getOverrideValue(e),this.model.set("overrides",t)},getOverrideValue:function(e){return null}})},{}],165:[function(e,t,n){var i=e("templates/backend/status/settings/loggedInOnly.hbs"),o=e("./ControlView");t.exports=o.extend({render:function(){return this.$el.append(i({model:this.model.toJSON(),i18n:KB.i18n})),this.$el},getOverrideValue:function(e){return this.$("input").is(":checked")}})},{"./ControlView":164,"templates/backend/status/settings/loggedInOnly.hbs":188}],166:[function(e,t,n){var i=e("templates/backend/status/settings/wrapperClasses.hbs"),o=e("./ControlView");t.exports=o.extend({render:function(){return this.$el.append(i({model:this.model.toJSON(),i18n:KB.i18n})),this.$el},getOverrideValue:function(e){return this.$("input").val()}})},{"./ControlView":164,"templates/backend/status/settings/wrapperClasses.hbs":190}],167:[function(e,t,n){var i=e("backend/Views/BaseControlView"),o=e("shared/ModuleStatusBar/status/Settings/SettingsStatusController"),s=e("common/Checks");t.exports=i.extend({id:"settings",controller:null,className:"kb-status-settings",events:{click:"openController"},initialize:function(e){this.moduleView=e.parent},isValid:function(){return!!s.userCan(this.model.get("settings").cap)&&(!KB.Environment||"kb-gmd"!==KB.Environment.postType)},render:function(){this.$el.append('<span class="kb-module--status-label kb-cursor-pointer">Settings</span><br><span class="dashicons dashicons-admin-generic kb-cursor-pointer"></span>')},openController:function(){this.getController().open()},getController:function(){return this.controller||(this.controller=new o({moduleView:this.moduleView,model:this.moduleView.model})),this.controller}})},{"backend/Views/BaseControlView":13,"common/Checks":52,"shared/ModuleStatusBar/status/Settings/SettingsStatusController":161}],168:[function(e,t,n){var i=e("backend/Views/BaseControlView"),o=e("backend/Views/TemplateEditor/CodemirrorOverlay"),s=e("common/Config"),l=e("common/Checks");t.exports=i.extend({id:"templateEditor",controller:null,className:"kb-status-settings",events:{click:"openController"},initialize:function(e){this.moduleView=e.parent},isValid:function(){return!!l.userCan(this.model.get("settings").cap)&&("ModuleGlobalModuleProxy"!==this.model.get("class")&&s.get("moduleTemplateEditor"))},render:function(){this.$el.append('<span class="kb-module--status-label kb-cursor-pointer">Template Editor</span><br><span class="dashicons dashicons-editor-code kb-cursor-pointer"></span>')},openController:function(){new o({module:this.model,moduleView:this.moduleView})}})},{"backend/Views/BaseControlView":13,"backend/Views/TemplateEditor/CodemirrorOverlay":38,"common/Checks":52,"common/Config":53}],169:[function(e,t,n){var i=e("backend/Views/BaseControlView"),o=e("templates/backend/status/templates.hbs"),s=e("backend/Views/TemplateEditor/CodemirrorOverlay"),l=e("common/Checks");t.exports=i.extend({id:"templates",controller:null,className:"kb-status-templates",initialize:function(e){this.moduleView=e.parent,this.views=this.prepareViews(this.model.get("views"))},attributes:{"aria-label":"Modultemplate Auswahl"},events:{dblclick:"openEditor"},isValid:function(){return!!l.userCan(this.model.get("settings").cap)},render:function(e){var t=e||this.views,n=1<_.size(t);this.$el.empty().append(o({show:n,module:this.model.toJSON(),views:t}))},openEditor:function(){new s({views:this.views,module:this.model})},prepareViews:function(e){return _.map(e,function(e){return e.selected=e.filename===this.model.get("viewfile")?'selected="selected"':"",e.isActive=e.filename===this.model.get("viewfile"),e},this)}})},{"backend/Views/BaseControlView":13,"backend/Views/TemplateEditor/CodemirrorOverlay":38,"common/Checks":52,"templates/backend/status/templates.hbs":191}],170:[function(e,t,n){KB.ViewsCollection=function(){this.views={},this.lastViewAdded=null,this.add=function(e,t){return this.views[e]||(this.views[e]=t,KB.trigger("kb:"+t.model.get("class")+":added",t),this.trigger("view:add",t),this.lastViewAdded=t),t},this.ready=function(){_.each(this.views,function(e){e.trigger("kb:"+e.model.get("class"),e),KB.trigger("kb:"+e.model.get("class")+":loaded",e)}),KB.trigger("kb:ready")},this.readyOnFront=function(){_.each(this.views,function(e){e.trigger("kb:"+e.model.get("class"),e),KB.trigger("kb:"+e.model.get("class")+":loadedOnFront",e)}),KB.trigger("kb:ready")},this.remove=function(e){var t=this.get(e);t.model.Area.View.trigger("kb.module.deleted",t),this.trigger("kb.modules.view.deleted",t),delete this.views[e],t.dispose()},this.get=function(e){if(this.views[e])return this.views[e]},this.filterByModelAttr=function(t,n){return _.filter(this.views,function(e){return e.model.get(t)===n})}},_.extend(KB.ViewsCollection.prototype,Backbone.Events),t.exports=KB.ViewsCollection},{}],171:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({1:function(e,t,n,i,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <span class='kb-area-block_limit'>Mgliche Anzahl Module: "+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"model"):t)?l(s,"limit"):s,t))+"</span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div class='add-modules cantsort'>\n"+(null!=(s=l(n,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"showLimit"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:4},end:{line:4,column:11}}}))?s:"")+'    <a class="modal modules-link" href="">\n        '+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=(s=null!=t?l(t,"i18n"):t)?l(s,"Areas"):s)?l(s,"ui"):s)?l(s,"addNewModule"):s,t))+"\n    </a>\n</div>"},useData:!0})},{"hbsfy/runtime":265}],172:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-area__item-placeholder modules-link">\n    '+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=(s=null!=t?l(t,"i18n"):t)?l(s,"Areas"):s)?l(s,"ui"):s)?l(s,"clickToAdd"):s,t))+"\n</div>"},useData:!0})},{"hbsfy/runtime":265}],173:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<p>"+r(l(null!=(s=null!=t?a(t,"i18n"):t)?a(s,"notice"):s,t))+'</p>\n<div class="kb-button kb-batch-delete--action-delete">'+r(l(null!=(s=null!=t?a(t,"i18n"):t)?a(s,"deleteAll"):s,t))+'</div>\n<div class="kb-button kb-batch-delete--action-reset">'+r(l(null!=(s=null!=t?a(t,"i18n"):t)?a(s,"deselectAll"):s,t))+"</div>"},useData:!0})},{"hbsfy/runtime":265}],174:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="dashicons dashicons-plus"></div>\n<div class="kb-global-area-item">\n    <h4>'+r(l(null!=(s=null!=t?a(t,"item"):t)?a(s,"name"):s,t))+" <span>("+r(l(null!=(s=null!=(s=null!=t?a(t,"item"):t)?a(s,"meta"):s)?a(s,"modules"):s,t))+" "+r(l(null!=(s=null!=(s=null!=t?a(t,"i18n"):t)?a(s,"Common"):s)?a(s,"modules"):s,t))+")</span></h4>\n    <p>"+r(l(null!=(s=null!=t?a(t,"item"):t)?a(s,"description"):s,t))+'</p>\n    <a target="_blank" class="kb-button-small" href="'+r(l(null!=(s=null!=(s=null!=t?a(t,"item"):t)?a(s,"meta"):s)?a(s,"editLink"):s,t))+'">'+r(l(null!=(s=null!=(s=null!=t?a(t,"i18n"):t)?a(s,"Common"):s)?a(s,"view"):s,t))+"</a>\n</div>"},useData:!0})},{"hbsfy/runtime":265}],175:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="kb-context-bar grid__col grid__col--12-of-12" aria-hidden="true">\n    <div class="kb-context-bar--actions">\n\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":265}],176:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-context-browser-inner">\n    <div class="kb-context-browser--header">\n        <h3>'+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=(s=null!=t?l(t,"i18n"):t)?l(s,"EditScreen"):s)?l(s,"context"):s)?l(s,"headline"):s,t))+'</h3>\n        <a class="genericon genericon-close-alt close-browser kb-button"></a>\n    </div>\n    <div class="kb-context-browser--body">\n        <ul class="kb-global-areas-list"></ul>\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":265}],177:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-button-small kb-js-add-global-area">'+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=(s=null!=t?l(t,"i18n"):t)?l(s,"EditScreen"):s)?l(s,"context"):s)?l(s,"addGlobal"):s,t))+"</div>"},useData:!0})},{"hbsfy/runtime":265}],178:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="kb-fullscreen--holder-wrap">\n    <div class="kb-fullscreen--controls">\n        <div class="kb-fullscreen-js-close"><span class="dashicons dashicons-no-alt"></span></div>\n    </div>\n    <div class="kb-nano">\n        <div class="kb-fullscreen--inner kb-nano-content">\n\n        </div>\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":265}],179:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="module-browser-wrapper '+e.escapeExpression("function"==typeof(s=null!=(s=l(n,"viewMode")||(null!=t?l(t,"viewMode"):t))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"viewMode",hash:{},data:o,loc:{start:{line:1,column:35},end:{line:1,column:49}}}):s)+'">\n\n    <div class="module-browser-header module-categories">\n        <div class="genericon genericon-close-alt close-browser kb-button"></div>\n        <div class="dashicons dashicons-list-view module-browser--switch__list-view kb-hide"></div>\n        <div class="dashicons dashicons-exerpt-view module-browser--switch__excerpt-view kb-hide"></div>\n        <div class="dashicons dashicons-grid-view module-browser--switch__grid-view kb-hide"></div>\n    </div>\n\n    <div class="module-browser__left-column kb-nano">\n        <div class="modules-list kb-nano-content">\n\n        </div>\n    </div>\n\n    <div class="module-browser__right-column kb-nano">\n        <div class="module-description kb-nano-content">\n\n        </div>\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":265}],180:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<h3>"+r(l(null!=(s=null!=(s=null!=t?a(t,"module"):t)?a(s,"settings"):s)?a(s,"publicName"):s,t))+' <div class="kb-button-small kb-js-create-module">'+r(l(null!=(s=null!=(s=null!=(s=null!=t?a(t,"i18n"):t)?a(s,"EditScreen"):s)?a(s,"moduleBrowser"):s)?a(s,"addModule"):s,t))+"</div>\n</h3>\n"},useData:!0})},{"hbsfy/runtime":265}],181:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kbmb-icon '+r(l(null!=(s=null!=(s=null!=t?a(t,"module"):t)?a(s,"settings"):s)?a(s,"iconclass"):s,t))+'"></div>\n<div class="kbmb-hl">'+r(l(null!=(s=null!=(s=null!=t?a(t,"module"):t)?a(s,"settings"):s)?a(s,"name"):s,t))+'</div>\n<div class="kbmb-description">'+r(l(null!=(s=null!=(s=null!=t?a(t,"module"):t)?a(s,"settings"):s)?a(s,"description"):s,t))+"</div>"},useData:!0})},{"hbsfy/runtime":265}],182:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<h3>"+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=t?l(t,"module"):t)?l(s,"parentObject"):s)?l(s,"post_title"):s,t))+"</h3>"},useData:!0})},{"hbsfy/runtime":265}],183:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="dashicons dashicons-plus kb-js-create-module"></div>\n<div class="kbmb-hl">'+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=t?l(t,"module"):t)?l(s,"parentObject"):s)?l(s,"post_title"):s,t))+"</div>"},useData:!0})},{"hbsfy/runtime":265}],184:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="module-browser--poster-wrap">\n    <img src="'+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=t?l(t,"module"):t)?l(s,"settings"):s)?l(s,"poster"):s,t))+'" >\n</div>'},useData:!0})},{"hbsfy/runtime":265}],185:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({1:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div data-kbtooltip="'+r(l(null!=(s=null!=t?a(t,"strings"):t)?a(s,"tooltipUndraft"):s,t))+'"><span class="kbu-color-red kb-module--status-label">Status</span><br><span>'+r(l(null!=(s=null!=t?a(t,"strings"):t)?a(s,"draft"):s,t))+"</span></div>\n"},3:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'   <div data-kbtooltip="'+r(l(null!=(s=null!=t?a(t,"strings"):t)?a(s,"tooltipDraft"):s,t))+'"><span class="kbu-color-green kb-module--status-label">Status</span><br><span>'+r(l(null!=(s=null!=t?a(t,"strings"):t)?a(s,"published"):s,t))+"</span></div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(n,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"draft"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:0},end:{line:5,column:7}}}))?s:""},useData:!0})},{"hbsfy/runtime":265}],186:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({1:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <span class="kb-module--status-label">'+r(l(null!=(s=null!=(s=null!=(s=null!=t?a(t,"i18n"):t)?a(s,"Modules"):s)?a(s,"status"):s)?a(s,"visibleFor"):s,t))+"</span><br><span>"+r(l(null!=(s=null!=(s=null!=(s=null!=t?a(t,"i18n"):t)?a(s,"Modules"):s)?a(s,"status"):s)?a(s,"loggedIn"):s,t))+"</span>\n"},3:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <span class="kb-module--status-label">'+r(l(null!=(s=null!=(s=null!=(s=null!=t?a(t,"i18n"):t)?a(s,"Modules"):s)?a(s,"status"):s)?a(s,"visibleFor"):s,t))+"</span><br><span>"+r(l(null!=(s=null!=(s=null!=(s=null!=t?a(t,"i18n"):t)?a(s,"Modules"):s)?a(s,"status"):s)?a(s,"anyone"):s,t))+"</span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(n,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=(s=null!=t?l(t,"model"):t)?l(s,"overrides"):s)?l(s,"loggedinonly"):s,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:0},end:{line:5,column:7}}}))?s:""},useData:!0})},{"hbsfy/runtime":265}],187:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({1:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="kb-status-draft kb-button-small" data-kbtooltip="'+r(l(null!=(s=null!=t?a(t,"strings"):t)?a(s,"tooltipUndraft"):s,t))+'">'+r(l(null!=(s=null!=t?a(t,"strings"):t)?a(s,"draft"):s,t))+"</div>\n"},3:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'   <div class="kb-status-public kb-button-small" data-kbtooltip="'+r(l(null!=(s=null!=t?a(t,"strings"):t)?a(s,"tooltipDraft"):s,t))+'">'+r(l(null!=(s=null!=t?a(t,"strings"):t)?a(s,"published"):s,t))+"</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(n,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"draft"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:0},end:{line:5,column:7}}}))?s:""},useData:!0})},{"hbsfy/runtime":265}],188:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({1:function(e,t,n,i,o){return'           checked="checked"\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  <label>"+r(l(null!=(s=null!=(s=null!=(s=null!=t?a(t,"i18n"):t)?a(s,"Modules"):s)?a(s,"settings"):s)?a(s,"forLoggedInOnly"):s,t))+'\n    <input type="checkbox" data-kbms-key="loggedinonly" name="'+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"mid"):s,t))+'[overrides][loggedinonly]"\n'+(null!=(s=a(n,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=(s=null!=t?a(t,"model"):t)?a(s,"validator"):s)?a(s,"loggedInOnly"):s,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:6},end:{line:5,column:13}}}))?s:"")+'           value="true">\n  </label>\n'},useData:!0})},{"hbsfy/runtime":265}],189:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="kb-status-settings-header">\n    <span class="kb-modal-title">Individual Module Settings</span>\n    <div class="kb-modal-close dashicons dashicons-no-alt"></div>\n</div>\n<div class="kb-status-settings-inner">\n    <div class="kb-status-settings--tab-nav">\n        <ul class="kb-status-settings--tab-nav-list"></ul>\n    </div>\n</div>\n\n'},useData:!0})},{"hbsfy/runtime":265}],190:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<label>"+r(l(null!=(s=null!=(s=null!=(s=null!=t?a(t,"i18n"):t)?a(s,"Modules"):s)?a(s,"settings"):s)?a(s,"addClasses"):s,t))+'\n    <input type="text" data-kbms-key="wrapperclasses" name="'+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"mid"):s,t))+'[overrides][wrapperclasses]"\n           value="'+r(l(null!=(s=null!=(s=null!=t?a(t,"model"):t)?a(s,"overrides"):s)?a(s,"wrapperclasses"):s,t))+'">\n</label>\n'},useData:!0})},{"hbsfy/runtime":265}],191:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({1:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="kb-template-selector--wrapper">\n        <div class="kb-selectbox">\n            <select class="kb-template-select" data-kb-rel="'+r(l(null!=(s=null!=t?a(t,"module"):t)?a(s,"mid"):s,t))+'" name="'+r(l(null!=(s=null!=t?a(t,"module"):t)?a(s,"mid"):s,t))+'[viewfile]">\n'+(null!=(s=a(n,"each").call(null!=t?t:e.nullContext||{},null!=t?a(t,"views"):t,{name:"each",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:16},end:{line:8,column:25}}}))?s:"")+"            </select>\n        </div>\n    </div>\n"},2:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                    <option "+(null!=(s=l(null!=t?a(t,"selected"):t,t))?s:"")+' value="'+r(l(null!=t?a(t,"filename"):t,t))+'"\n                                                data-tpldesc="'+r(l(null!=t?a(t,"description"):t,t))+'">'+r(l(null!=t?a(t,"name"):t,t))+"</option>\n"},4:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <input name="'+r(l(null!=(s=null!=t?a(t,"module"):t)?a(s,"mid"):s,t))+'[viewfile]" type="hidden" value="'+r(l(null!=(s=null!=t?a(t,"module"):t)?a(s,"viewfile"):s,t))+'">\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(n,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"show"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(4,o,0),data:o,loc:{start:{line:1,column:0},end:{line:14,column:7}}}))?s:"")+"\n"},useData:!0})},{"hbsfy/runtime":265}],192:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-tpled--field-item">\n    <div><strong>Label:</strong>'+r(l(null!=(s=null!=(s=null!=t?a(t,"data"):t)?a(s,"args"):s)?a(s,"label"):s,t))+'</div>\n    <div class="kb-tpled--details">\n        <div><strong>Type:</strong>'+r(l(null!=(s=null!=t?a(t,"data"):t)?a(s,"type"):s,t))+"</div>\n        <div><strong>Key:</strong>"+r(l(null!=(s=null!=t?a(t,"data"):t)?a(s,"key"):s,t))+"</div>\n        <div><strong>Access:</strong>Model."+r(l(null!=(s=null!=t?a(t,"data"):t)?a(s,"kpath"):s,t))+"</div>\n        <div><strong>Value:</strong>Model."+r(l(null!=(s=null!=t?a(t,"data"):t)?a(s,"value"):s,t))+"</div>\n    </div>\n</div>"},useData:!0})},{"hbsfy/runtime":265}],193:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-template-edditor--file-item">\n    '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"data"):t)?l(s,"name"):s,t))+"\n</div>"},useData:!0})},{"hbsfy/runtime":265}],194:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){return'<div class="kb-tpled--wrap">\n\n    <div class="kb-tpled--header">\n        <div class="kb-fullscreen--controls">\n            <div class="kb-tpled--close"><span class="dashicons dashicons-no-alt"></span></div>\n        </div>\n    </div>\n    <div class="kb-tpled--inner kbflexwrap">\n        <div class="kb-tpled--sidebar kbflex">\n            <div class="kb-tpled--views">\n                <h5>Templates</h5>\n                <div data-views></div>\n            </div>\n            <div class="kb-tpled--actions">\n                <h5>Actions</h5>\n                <div data-controls></div>\n            </div>\n        </div>\n        <div class="kb-tpled--content kbflex">\n            <div id="codemirror"></div>\n\n        </div>\n        <div class="kb-tpled--sidebar kb-tpled--sidebar-right kbflex">\n            <div class="kb-tpled--fields">\n                <h5>Available Datafields</h5>\n                <div data-fields></div>\n            </div>\n        </div>\n    </div>\n    <div class="kb-tpled--footer">\n\n    </div>\n\n</div>'},useData:!0})},{"hbsfy/runtime":265}],195:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({1:function(e,t,n,i,o){return'checked="checked"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field field-api-checkbox kb-field--checkbox">\n    <label class="heading">'+r(l(null!=(s=null!=t?u(t,"model"):t)?u(s,"label"):s,t))+'\n        <input type="checkbox"'+(null!=(s=(u(n,"ifCond")||t&&u(t,"ifCond")||d).call(a,null!=(s=null!=t?u(t,"model"):t)?u(s,"value"):s,"==",!0,{name:"ifCond",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:30},end:{line:3,column:92}}}))?s:"")+'\n               name="'+r((u(n,"fieldName")||t&&u(t,"fieldName")||d).call(a,null!=(s=null!=t?u(t,"model"):t)?u(s,"baseId"):s,null!=(s=null!=t?u(t,"model"):t)?u(s,"index"):s,null!=(s=null!=t?u(t,"model"):t)?u(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:4,column:21},end:{line:4,column:76}}}))+'">\n    </label>\n    <p class="description">'+r(l(null!=(s=null!=t?u(t,"model"):t)?u(s,"description"):s,t))+"</p>\n</div>\n"},useData:!0})},{"hbsfy/runtime":265}],196:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field field-api-text kb-field--text">\n    <label class="heading">'+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"label"):s,t))+"</label>\n    <input class='kb-color-picker' data-alpha=\"true\" type='text' name='"+r((a(n,"fieldName")||t&&a(t,"fieldName")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:3,column:71},end:{line:3,column:126}}}))+"' }}'\n    value='"+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s,t))+"' size='7'/>\n    <p class=\"description\">"+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"description"):s,t))+"</p>\n</div>\n"},useData:!0})},{"hbsfy/runtime":265}],197:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field--date-multiple-item">\n    <div class="kb-field--date-multiple-control kbf-sort"><span class="dashicons dashicons-menu hide"></span></div>\n    <input type=\'text\'  name=\''+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,t))+"["+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"uniqueId"):s,t))+"][human]'\n           value='"+r(l(null!=(s=null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s)?a(s,"human"):s,t))+"' class='kb-datetimepicker'>\n    <input type='hidden' name='"+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,t))+"["+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"uniqueId"):s,t))+"][unix]' value='"+r(l(null!=(s=null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s)?a(s,"unix"):s,t))+"'\n           class='kb-datetimepicker--js-unix'>\n    <input type='hidden' name='"+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,t))+"["+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"uniqueId"):s,t))+"][sql]' value='"+r(l(null!=(s=null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s)?a(s,"sql"):s,t))+'\'\n           class=\'kb-datetimepicker--js-sql\'>\n    <div data-kbfaction="delete" class="kb-field--text-multiple-control kbf-delete"><span class="dashicons dashicons-trash" ></span></div>\n</div>'},useData:!0})},{"hbsfy/runtime":265}],198:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field kb-field--datetime field-api-datetime">\n<label class="heading">'+r(l(null!=(s=null!=t?u(t,"model"):t)?u(s,"label"):s,t))+'</label>\n<div class="kb-field--datetime-item">\n\n    <input type="text" name=\''+r((u(n,"fieldName")||t&&u(t,"fieldName")||d).call(a,null!=(s=null!=t?u(t,"model"):t)?u(s,"baseId"):s,null!=(s=null!=t?u(t,"model"):t)?u(s,"index"):s,null!=(s=null!=t?u(t,"model"):t)?u(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:5,column:29},end:{line:5,column:84}}}))+"[human]'\n           value='"+r(l(null!=(s=null!=(s=null!=t?u(t,"model"):t)?u(s,"value"):s)?u(s,"human"):s,t))+"' class='kb-datetimepicker'>\n    <input type='hidden' name='"+r((u(n,"fieldName")||t&&u(t,"fieldName")||d).call(a,null!=(s=null!=t?u(t,"model"):t)?u(s,"baseId"):s,null!=(s=null!=t?u(t,"model"):t)?u(s,"index"):s,null!=(s=null!=t?u(t,"model"):t)?u(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:7,column:31},end:{line:7,column:86}}}))+"[unix]' value='"+r(l(null!=(s=null!=(s=null!=t?u(t,"model"):t)?u(s,"value"):s)?u(s,"unix"):s,t))+"'\n           class='kb-datetimepicker--js-unix'>\n    <input type='hidden' name='"+r((u(n,"fieldName")||t&&u(t,"fieldName")||d).call(a,null!=(s=null!=t?u(t,"model"):t)?u(s,"baseId"):s,null!=(s=null!=t?u(t,"model"):t)?u(s,"index"):s,null!=(s=null!=t?u(t,"model"):t)?u(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:9,column:31},end:{line:9,column:86}}}))+"[sql]' value='"+r(l(null!=(s=null!=(s=null!=t?u(t,"model"):t)?u(s,"value"):s)?u(s,"sql"):s,t))+"'\n           class='kb-datetimepicker--js-sql'>\n</div>\n<p class=\"description\">"+r(l(null!=(s=null!=t?u(t,"model"):t)?u(s,"description"):s,t))+"</p>\n</div>"},useData:!0})},{"hbsfy/runtime":265}],199:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field field-api-editor">\n    <label class="heading">'+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"label"):s,t))+'</label>\n    <div class="kb-ff-editor-wrapper-'+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,t))+"-"+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"key"):s,t))+'">\n    </div>\n    <p class="description">'+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"description"):s,t))+"</p>\n</div>"},useData:!0})},{"hbsfy/runtime":265}],200:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l,r=e.lambda,a=e.escapeExpression,d=null!=t?t:e.nullContext||{},u=e.hooks.helperMissing,c="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<label class="heading">'+a(r(null!=(s=null!=t?h(t,"model"):t)?h(s,"label"):s,t))+"</label>\n<div class='kb-field-file-wrapper "+a(typeof(l=null!=(l=h(n,"isEmpty")||(null!=t?h(t,"isEmpty"):t))?l:u)===c?l.call(d,{name:"isEmpty",hash:{},data:o,loc:{start:{line:2,column:34},end:{line:2,column:47}}}):l)+'\'>\n    <table>\n        <tbody>\n        <tr>\n            <td>ID:</td>\n            <td><span class="kb-file-id">'+a(r(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"id"):s,t))+"</span></td>\n        </tr>\n        <tr>\n            <td>"+a(r(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"title"):s,t))+'</td>\n            <td><span class="kb-file-title">'+a(r(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"title"):s,t))+"</span></td>\n        </tr>\n        <tr>\n            <td>"+a(r(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"filename"):s,t))+'</td>\n            <td><span class="kb-file-filename">'+a(r(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"filename"):s,t))+"</span></td>\n        </tr>\n        <tr>\n            <td>"+a(r(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"editLink"):s,t))+'</td>\n            <td><a class="kb-file-editLink" href="'+a(r(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"editLink"):s,t))+'">edit</a></td>\n        </tr>\n        </tbody>\n    </table>\n    <input type="hidden" class="kb-file-attachment-id" value="'+a(r(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"id"):s,t))+'"\n           name="'+a((h(n,"fieldName")||t&&h(t,"fieldName")||u).call(d,null!=(s=null!=t?h(t,"model"):t)?h(s,"baseId"):s,null!=(s=null!=t?h(t,"model"):t)?h(s,"index"):s,null!=(s=null!=t?h(t,"model"):t)?h(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:24,column:17},end:{line:24,column:72}}}))+'[id]">\n</div>\n<a class="button primary kb-js-add-file">'+a(r(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"selectFile"):s,t))+'</a>\n<a class="kb-js-reset-file '+a(typeof(l=null!=(l=h(n,"isEmpty")||(null!=t?h(t,"isEmpty"):t))?l:u)===c?l.call(d,{name:"isEmpty",hash:{},data:o,loc:{start:{line:27,column:27},end:{line:27,column:40}}}):l)+'">'+a(r(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"remove"):s,t))+'</a>\n<p class="description">'+a(r(null!=(s=null!=t?h(t,"model"):t)?h(s,"description"):s,t))+"</p>\n"},useData:!0})},{"hbsfy/runtime":265}],201:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l,r=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,d="function",u=e.escapeExpression,c=e.lambda,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field--file-multiple-item">\n    <div class="kb-field--file-multiple-control kbf-sort"><span class="dashicons dashicons-menu"></span></div>\n    <div class=\'kb-field-file-wrapper '+u(typeof(l=null!=(l=h(n,"isEmpty")||(null!=t?h(t,"isEmpty"):t))?l:a)===d?l.call(r,{name:"isEmpty",hash:{},data:o,loc:{start:{line:3,column:38},end:{line:3,column:51}}}):l)+"'>\n        <table>\n            <tbody>\n            <tr>\n                <td>"+u(c(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"customtitle"):s,t))+'</td>\n                <td><input class="kb-file-input" name="'+u(c(null!=(s=null!=t?h(t,"model"):t)?h(s,"baseId"):s,t))+"["+u(c(null!=(s=null!=t?h(t,"model"):t)?h(s,"uniqueId"):s,t))+'][title]" value="'+(null!=(s=c(null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"title"):s,t))?s:"")+'"></td>\n            </tr>\n            <tr>\n                <td>ID:</td>\n                <td><span class="kb-file-id">'+u(c(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"id"):s,t))+"</span></td>\n            </tr>\n            <tr>\n                <td>"+u(c(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"filetitle"):s,t))+'</td>\n                <td><span class="kb-file-title">'+u(c(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"title"):s,t))+"</span></td>\n            </tr>\n            <tr>\n                <td>"+u(c(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"filename"):s,t))+'</td>\n                <td><span class="kb-file-filename">'+u(c(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"filename"):s,t))+"</span></td>\n            </tr>\n            <tr>\n                <td>"+u(c(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"editLink"):s,t))+'</td>\n                <td><a class="kb-file-editLink" href="'+u(c(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"editLink"):s,t))+'">edit</a></td>\n            </tr>\n            <tr>\n                <td>'+u(c(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"comment"):s,t))+'</td>\n                <td><textarea class="kb-file-input" name="'+u(c(null!=(s=null!=t?h(t,"model"):t)?h(s,"baseId"):s,t))+"["+u(c(null!=(s=null!=t?h(t,"model"):t)?h(s,"uniqueId"):s,t))+'][comment]">'+(null!=(s=c(null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"comment"):s,t))?s:"")+'</textarea></td>\n            </tr>\n            </tbody>\n        </table>\n        <input type="hidden" class="kb-file-attachment-id" value="'+u(c(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"id"):s,t))+'"\n               name="'+u(c(null!=(s=null!=t?h(t,"model"):t)?h(s,"baseId"):s,t))+"["+u(c(null!=(s=null!=t?h(t,"model"):t)?h(s,"uniqueId"):s,t))+'][id]">\n    </div>\n    <a class="button primary kb-js-add-file">'+u(c(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"selectFile"):s,t))+'</a>\n    <a class="kb-js-reset-file '+u(typeof(l=null!=(l=h(n,"isEmpty")||(null!=t?h(t,"isEmpty"):t))?l:a)===d?l.call(r,{name:"isEmpty",hash:{},data:o,loc:{start:{line:36,column:31},end:{line:36,column:44}}}):l)+'">'+u(c(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"reset"):s,t))+'</a>\n    <div data-kbfaction="delete" class="kb-field--file-multiple-control kbf-delete"><span class="dashicons dashicons-trash" ></span></div>\n</div>'},useData:!0})},{"hbsfy/runtime":265}],202:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l,r=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,d="function",u=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<input type="hidden" name="'+u(typeof(l=null!=(l=c(n,"inputName")||(null!=t?c(t,"inputName"):t))?l:a)===d?l.call(r,{name:"inputName",hash:{},data:o,loc:{start:{line:1,column:27},end:{line:1,column:42}}}):l)+'[_meta][uid]" value="'+u(typeof(l=null!=(l=c(n,"uid")||(null!=t?c(t,"uid"):t))?l:a)===d?l.call(r,{name:"uid",hash:{},data:o,loc:{start:{line:1,column:63},end:{line:1,column:72}}}):l)+'">\n<input type="hidden" name="'+u(typeof(l=null!=(l=c(n,"inputName")||(null!=t?c(t,"inputName"):t))?l:a)===d?l.call(r,{name:"inputName",hash:{},data:o,loc:{start:{line:2,column:27},end:{line:2,column:42}}}):l)+'[_meta][type]" value="'+u(typeof(l=null!=(l=c(n,"fftype")||(null!=t?c(t,"fftype"):t))?l:a)===d?l.call(r,{name:"fftype",hash:{},data:o,loc:{start:{line:2,column:64},end:{line:2,column:76}}}):l)+'">\n<input data-flexfield-visible type="hidden" name="'+u(typeof(l=null!=(l=c(n,"inputName")||(null!=t?c(t,"inputName"):t))?l:a)===d?l.call(r,{name:"inputName",hash:{},data:o,loc:{start:{line:3,column:50},end:{line:3,column:65}}}):l)+'[_meta][status]" value="'+u(typeof(l=null!=(l=c(n,"status")||(null!=t?c(t,"status"):t))?l:a)===d?l.call(r,{name:"status",hash:{},data:o,loc:{start:{line:3,column:89},end:{line:3,column:101}}}):l)+'">\n\n<div class="flexible-fields--section-box">\n    <div class="flexible-fields--section-title">\n        <span class="genericon genericon-draggable flexible-fields--js-drag-handle"></span>\n        <span class="dashicons dashicons-trash flexible-fields--js-trash"></span>\n        <input type="text" value="'+u(e.lambda(null!=(s=null!=t?c(t,"item"):t)?c(s,"title"):s,t))+'" name="'+u(typeof(l=null!=(l=c(n,"inputName")||(null!=t?c(t,"inputName"):t))?l:a)===d?l.call(r,{name:"inputName",hash:{},data:o,loc:{start:{line:9,column:58},end:{line:9,column:73}}}):l)+'[_meta][title] ">\n    </div>\n    <div class="flexible-fields--section-box-inner">\n\n    </div>\n    <div class="kb-field--tabs">\n        <ul class="flexible-field--tab-nav">\n        </ul>\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":265}],203:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l,r=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,d="function",u=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<input type="hidden" name="'+u(typeof(l=null!=(l=c(n,"inputName")||(null!=t?c(t,"inputName"):t))?l:a)===d?l.call(r,{name:"inputName",hash:{},data:o,loc:{start:{line:1,column:27},end:{line:1,column:42}}}):l)+'[_meta][uid]" value="'+u(typeof(l=null!=(l=c(n,"uid")||(null!=t?c(t,"uid"):t))?l:a)===d?l.call(r,{name:"uid",hash:{},data:o,loc:{start:{line:1,column:63},end:{line:1,column:72}}}):l)+'">\n<input type="hidden" name="'+u(typeof(l=null!=(l=c(n,"inputName")||(null!=t?c(t,"inputName"):t))?l:a)===d?l.call(r,{name:"inputName",hash:{},data:o,loc:{start:{line:2,column:27},end:{line:2,column:42}}}):l)+'[_meta][type]" value="'+u(typeof(l=null!=(l=c(n,"fftype")||(null!=t?c(t,"fftype"):t))?l:a)===d?l.call(r,{name:"fftype",hash:{},data:o,loc:{start:{line:2,column:64},end:{line:2,column:76}}}):l)+'">\n<input data-flexfield-visible type="hidden" name="'+u(typeof(l=null!=(l=c(n,"inputName")||(null!=t?c(t,"inputName"):t))?l:a)===d?l.call(r,{name:"inputName",hash:{},data:o,loc:{start:{line:3,column:50},end:{line:3,column:65}}}):l)+'[_meta][status]" value="'+u(typeof(l=null!=(l=c(n,"status")||(null!=t?c(t,"status"):t))?l:a)===d?l.call(r,{name:"status",hash:{},data:o,loc:{start:{line:3,column:89},end:{line:3,column:101}}}):l)+'">\n<div class="flexible-fields--toggle-title">\n    <h3>\n        <span class="genericon genericon-draggable flexible-fields--js-drag-handle"></span>\n        <span class="genericon genericon-expand flexible-fields--js-toggle" data-flexfields-toggle></span>\n        <span class="dashicons dashicons-trash flexible-fields--js-duplicate"></span>\n        <span class="dashicons dashicons-trash flexible-fields--js-trash"></span>\n        <span class="dashicons dashicons-trash flexible-fields--js-visibility"></span>\n        <input type="text" value="'+u(e.lambda(null!=(s=null!=t?c(t,"item"):t)?c(s,"title"):s,t))+'" name="'+u(typeof(l=null!=(l=c(n,"inputName")||(null!=t?c(t,"inputName"):t))?l:a)===d?l.call(r,{name:"inputName",hash:{},data:o,loc:{start:{line:11,column:58},end:{line:11,column:73}}}):l)+'[_meta][title]">\n    </h3>\n</div>\n<div class="flexible-fields--toggle-box kb-hide">\n    <div class="kb-field--tabs">\n        <ul class="flexible-field--tab-nav">\n\n        </ul>\n    </div>\n\n</div>'},useData:!0})},{"hbsfy/runtime":265}],204:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({1:function(e,t,n,i,o){var s,l,r=e.escapeExpression,a=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <a class="button button-primary kb-flexible-fields--js-add-item"\n           data-kbf-addtype="'+r("function"==typeof(l=null!=(l=d(n,"key")||o&&d(o,"key"))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"key",hash:{},data:o,loc:{start:{line:5,column:29},end:{line:5,column:37}}}):l)+'">'+r(a(null!=(s=null!=t?d(t,"i18n"):t)?d(s,"addNewItem"):s,t))+r(a(null!=(s=null!=t?d(t,"args"):t)?d(s,"buttontext"):s,t))+"</a>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<ul class="flexible-fields--item-list"></ul>\n<div class="flexible-fields--header">\n'+(null!=(s=l(n,"each").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"model"):t)?l(s,"fields"):s,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:4},end:{line:6,column:13}}}))?s:"")+"</div>"},useData:!0})},{"hbsfy/runtime":265}],205:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l,r=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,d="function",u=e.escapeExpression,c=e.lambda,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-gallery--header">\n    <h3>Image Details</h3>\n</div>\n<div class="kb-gallery--left-column">\n    <div class="kb-gallery--image-meta" style="display: none;">\n        <span class="genericon genericon-close-alt kb-gallery--js-meta-close"></span>\n\n        <div class="kb-field--tabs">\n            <ul class="kb-gallery--tabs-nav">\n                <li><a href="#tab'+u(typeof(l=null!=(l=h(n,"uid")||(null!=t?h(t,"uid"):t))?l:a)===d?l.call(r,{name:"uid",hash:{},data:o,loc:{start:{line:10,column:33},end:{line:10,column:42}}}):l)+'-1">Details</a></li>\n                <li><a href="#tab'+u(typeof(l=null!=(l=h(n,"uid")||(null!=t?h(t,"uid"):t))?l:a)===d?l.call(r,{name:"uid",hash:{},data:o,loc:{start:{line:11,column:33},end:{line:11,column:42}}}):l)+'-2">Beschreibung</a></li>\n            </ul>\n            <div id="tab'+u(typeof(l=null!=(l=h(n,"uid")||(null!=t?h(t,"uid"):t))?l:a)===d?l.call(r,{name:"uid",hash:{},data:o,loc:{start:{line:13,column:24},end:{line:13,column:33}}}):l)+'-1">\n                <div class="kb-gallery--meta-field kb-field">\n                    <label class="heading">Titel</label>\n                    <input class="large" type="text" name="'+u(typeof(l=null!=(l=h(n,"inputName")||(null!=t?h(t,"inputName"):t))?l:a)===d?l.call(r,{name:"inputName",hash:{},data:o,loc:{start:{line:16,column:59},end:{line:16,column:74}}}):l)+'[details][title]" value="'+u(c(null!=(s=null!=(s=null!=t?h(t,"image"):t)?h(s,"details"):s)?h(s,"title"):s,t))+'">\n                </div>\n                <div class="kb-gallery--meta-field kb-field">\n                    <label class="heading">Alt</label>\n                    <input class="large" type="text" name="'+u(typeof(l=null!=(l=h(n,"inputName")||(null!=t?h(t,"inputName"):t))?l:a)===d?l.call(r,{name:"inputName",hash:{},data:o,loc:{start:{line:20,column:59},end:{line:20,column:74}}}):l)+'[details][alt]" value="'+u(c(null!=(s=null!=(s=null!=t?h(t,"image"):t)?h(s,"details"):s)?h(s,"alt"):s,t))+'">\n                </div>\n            </div>\n\n            <div id="tab'+u(typeof(l=null!=(l=h(n,"uid")||(null!=t?h(t,"uid"):t))?l:a)===d?l.call(r,{name:"uid",hash:{},data:o,loc:{start:{line:24,column:24},end:{line:24,column:33}}}):l)+'-2">\n                <div class="kb-js--remote-editor" data-uid="'+u(typeof(l=null!=(l=h(n,"uid")||(null!=t?h(t,"uid"):t))?l:a)===d?l.call(r,{name:"uid",hash:{},data:o,loc:{start:{line:25,column:60},end:{line:25,column:69}}}):l)+'">\n                    <textarea name="'+u(typeof(l=null!=(l=h(n,"inputName")||(null!=t?h(t,"inputName"):t))?l:a)===d?l.call(r,{name:"inputName",hash:{},data:o,loc:{start:{line:26,column:36},end:{line:26,column:51}}}):l)+'[details][description]">'+u(c(null!=(s=null!=(s=null!=t?h(t,"image"):t)?h(s,"details"):s)?h(s,"description"):s,t))+'</textarea>\n                </div>\n\n            </div>\n        </div>\n    </div>\n</div>\n<div class="kb-gallery--right-column">\n    <div class="kb-gallery--image-holder">\n        <img src="'+u(c(null!=(s=null!=(s=null!=(s=null!=(s=null!=t?h(t,"image"):t)?h(s,"file"):s)?h(s,"sizes"):s)?h(s,"thumbnail"):s)?h(s,"url"):s,t))+'">\n        <span class="genericon genericon-edit kb-gallery--js-edit"></span>\n        <span class="genericon genericon-close-alt kb-gallery--js-delete"></span>\n        <input type="hidden" name="'+u(typeof(l=null!=(l=h(n,"inputName")||(null!=t?h(t,"inputName"):t))?l:a)===d?l.call(r,{name:"inputName",hash:{},data:o,loc:{start:{line:38,column:35},end:{line:38,column:50}}}):l)+'[id]" value="'+u(c(null!=(s=null!=t?h(t,"image"):t)?h(s,"id"):s,t))+'">\n        <input type="hidden" class="kb-gallery--image-remove" name="'+u(typeof(l=null!=(l=h(n,"inputName")||(null!=t?h(t,"inputName"):t))?l:a)===d?l.call(r,{name:"inputName",hash:{},data:o,loc:{start:{line:39,column:68},end:{line:39,column:83}}}):l)+'[remove]" value="">\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":265}],206:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l,r=e.lambda,a=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-gallery--right-column">\n    <div class="kb-gallery--image-holder">\n        <img src="'+a(r(null!=(s=null!=t?d(t,"image"):t)?d(s,"previewUrl"):s,t))+'">\n        <input type="hidden" name="'+a("function"==typeof(l=null!=(l=d(n,"inputName")||(null!=t?d(t,"inputName"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"inputName",hash:{},data:o,loc:{start:{line:4,column:35},end:{line:4,column:50}}}):l)+'" value="'+a(r(null!=(s=null!=t?d(t,"image"):t)?d(s,"id"):s,t))+'">\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":265}],207:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l,r=e.lambda,a=e.escapeExpression,d=null!=t?t:e.nullContext||{},u=e.hooks.helperMissing,c="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-gallery--image-holder">\n    <img src="'+a(r(null!=(s=null!=t?h(t,"image"):t)?h(s,"previewUrl"):s,t))+'">\n    <div class="kb-gallery--meta-info">\n        <label> Vimeo\n            <textarea type="hidden" name="'+a(typeof(l=null!=(l=h(n,"inputName")||(null!=t?h(t,"inputName"):t))?l:u)===c?l.call(d,{name:"inputName",hash:{},data:o,loc:{start:{line:5,column:42},end:{line:5,column:57}}}):l)+'[meta]" rows="2">'+a(r(null!=(s=null!=t?h(t,"image"):t)?h(s,"meta"):s,t))+'</textarea>\n        </label>\n        <label> Beschreibung\n            <textarea type="hidden" name="'+a(typeof(l=null!=(l=h(n,"inputName")||(null!=t?h(t,"inputName"):t))?l:u)===c?l.call(d,{name:"inputName",hash:{},data:o,loc:{start:{line:8,column:42},end:{line:8,column:57}}}):l)+'[caption]" rows="2">'+a(r(null!=(s=null!=t?h(t,"image"):t)?h(s,"caption"):s,t))+'</textarea>\n        </label>\n        <input type="hidden" name="'+a(typeof(l=null!=(l=h(n,"inputName")||(null!=t?h(t,"inputName"):t))?l:u)===c?l.call(d,{name:"inputName",hash:{},data:o,loc:{start:{line:10,column:35},end:{line:10,column:50}}}):l)+'[id]" value="'+a(r(null!=(s=null!=t?h(t,"image"):t)?h(s,"id"):s,t))+'">\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":265}],208:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({1:function(e,t,n,i,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <img src="'+(null!=(s=e.lambda(null!=(s=null!=(s=null!=t?l(t,"model"):t)?l(s,"value"):s)?l(s,"url"):s,t))?s:"")+'">\n'},3:function(e,t,n,i,o){return" kb-hide "},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=null!=t?t:e.nullContext||{},r=e.lambda,a=e.escapeExpression,d=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-field kb-field--image kb-fieldapi-field">\n    <div class=\'kb-field-image-wrapper\' data-kbfield="image">\n        <div role="button" aria-label="Datei auswhlen" tabindex="0" class=\'kb-js-add-image kb-field-image-container\'>\n'+(null!=(s=u(n,"if").call(l,null!=(s=null!=(s=null!=t?u(t,"model"):t)?u(s,"value"):s)?u(s,"url"):s,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:12},end:{line:6,column:19}}}))?s:"")+'        </div>\n        <div class="kb-field-image-meta '+(null!=(s=u(n,"if").call(l,null!=(s=null!=t?u(t,"model"):t)?u(s,"hideMeta"):s,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:8,column:40},end:{line:8,column:79}}}))?s:"")+' ">\n            <div class="kb-field-image-title">\n                <label>'+a(r(null!=(s=null!=t?u(t,"i18n"):t)?u(s,"title"):s,t))+"</label>\n                <input class='kb-js-image-title kb-observe' type=\"text\"\n                       name='"+a((u(n,"fieldName")||t&&u(t,"fieldName")||d).call(l,null!=(s=null!=t?u(t,"model"):t)?u(s,"baseId"):s,null!=(s=null!=t?u(t,"model"):t)?u(s,"index"):s,null!=(s=null!=t?u(t,"model"):t)?u(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:12,column:29},end:{line:12,column:83}}}))+"[title]'\n                       value='"+(null!=(s=r(null!=(s=null!=(s=null!=t?u(t,"model"):t)?u(s,"value"):s)?u(s,"title"):s,t))?s:"")+'\'>\n            </div>\n            <div class="kb-field-image-description">\n                <label>'+a(r(null!=(s=null!=t?u(t,"i18n"):t)?u(s,"description"):s,t))+"</label>\n        <textarea class='kb-js-image-description kb-observe'\n                  name='"+a((u(n,"fieldName")||t&&u(t,"fieldName")||d).call(l,null!=(s=null!=t?u(t,"model"):t)?u(s,"baseId"):s,null!=(s=null!=t?u(t,"model"):t)?u(s,"index"):s,null!=(s=null!=t?u(t,"model"):t)?u(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:18,column:24},end:{line:18,column:79}}}))+"[caption]'>"+(null!=(s=r(null!=(s=null!=(s=null!=t?u(t,"model"):t)?u(s,"value"):s)?u(s,"caption"):s,t))?s:"")+"\n        </textarea>\n            </div>\n        </div>\n        <input class='kb-js-image-id' type='hidden'\n               name='"+a((u(n,"fieldName")||t&&u(t,"fieldName")||d).call(l,null!=(s=null!=t?u(t,"model"):t)?u(s,"baseId"):s,null!=(s=null!=t?u(t,"model"):t)?u(s,"index"):s,null!=(s=null!=t?u(t,"model"):t)?u(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:23,column:21},end:{line:23,column:76}}}))+"[id]'\n               value='"+(null!=(s=r(null!=(s=null!=(s=null!=t?u(t,"model"):t)?u(s,"value"):s)?u(s,"id"):s,t))?s:"")+'\'>\n    </div>\n    <div class="kb-field-image--footer">\n        <a class="button kb-js-reset-image">Reset</a>\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":265}],209:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({1:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <div class='kb-field--link-meta'><label for='"+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,t))+"-linktext'>"+r(l(null!=(s=null!=t?a(t,"i18n"):t)?a(s,"linktext"):s,t))+"</label><br>\n            <input\n                    type='text' data-kbf-link-linktext\n                    name=\""+r((a(n,"fieldName")||t&&a(t,"fieldName")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:13,column:26},end:{line:13,column:81}}}))+"[linktext]\"\n                    class='kb-field--link-linktext'\n                    id='"+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,t))+"-linktext'\n                    value='"+r(l(null!=(s=null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s)?a(s,"linktext"):s,t))+"'>\n        </div>\n"},3:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <div class='kb-field--link-meta'><label for='"+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,t))+"-linktitle'>"+r(l(null!=(s=null!=t?a(t,"i18n"):t)?a(s,"linktitle"):s,t))+"</label><br>\n            <input\n                    type='text'\n                    name=\""+r((a(n,"fieldName")||t&&a(t,"fieldName")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:24,column:26},end:{line:24,column:81}}}))+"[linktitle]\"\n                    class='kb-field--link-linktitle'\n                    id='"+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,t))+"-linktitle'\n                    value='"+r(l(null!=(s=null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s)?a(s,"linktitle"):s,t))+"'>\n        </div>\n"},5:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=null!=t?t:e.nullContext||{},d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <div class='kb-field--link-meta'>\n            <label for='"+r(l(null!=(s=null!=t?d(t,"model"):t)?d(s,"index"):s,t))+"-linktarget'>\n                <input data-kbf-link-target type='checkbox' class='kb-field--link-target'\n                       id='"+r(l(null!=(s=null!=t?d(t,"model"):t)?d(s,"index"):s,t))+"-linktarget'\n"+(null!=(s=d(n,"if").call(a,null!=(s=null!=(s=null!=t?d(t,"model"):t)?d(s,"value"):s)?d(s,"target"):s,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:36,column:20},end:{line:38,column:27}}}))?s:"")+"                       value='"+r(l(null!=(s=null!=(s=null!=t?d(t,"model"):t)?d(s,"value"):s)?d(s,"target"):s,t))+"'\n                       name='"+r((d(n,"fieldname")||t&&d(t,"fieldname")||e.hooks.helperMissing).call(a,null!=(s=null!=t?d(t,"model"):t)?d(s,"baseId"):s,null!=(s=null!=t?d(t,"model"):t)?d(s,"index"):s,null!=(s=null!=t?d(t,"model"):t)?d(s,"primeKey"):s,{name:"fieldname",hash:{},data:o,loc:{start:{line:40,column:29},end:{line:40,column:84}}}))+"[linktarget]'>\n                "+r(l(null!=(s=null!=t?d(t,"i18n"):t)?d(s,"linktarget"):s,t))+" </label>\n        </div>\n\n"},6:function(e,t,n,i,o){return'                       checked="checked"\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=null!=t?t:e.nullContext||{},d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field kb-field--link field-api-link">\n    <label class="heading">'+r(l(null!=(s=null!=t?d(t,"model"):t)?d(s,"label"):s,t))+'</label>\n    <input class="kb-js-link-input" data-kbf-link-url\n           id="'+r(l(null!=(s=null!=t?d(t,"model"):t)?d(s,"index"):s,t))+'_link_input"\n           type="text"\n           name="'+r((d(n,"fieldName")||t&&d(t,"fieldName")||e.hooks.helperMissing).call(a,null!=(s=null!=t?d(t,"model"):t)?d(s,"baseId"):s,null!=(s=null!=t?d(t,"model"):t)?d(s,"index"):s,null!=(s=null!=t?d(t,"model"):t)?d(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:6,column:17},end:{line:6,column:72}}}))+'[link]"\n           value="'+r(l(null!=(s=null!=(s=null!=t?d(t,"model"):t)?d(s,"value"):s)?d(s,"link"):s,t))+"\">\n    <a class='button kb-js-add-link'>Add internal link</a>\n"+(null!=(s=d(n,"if").call(a,null!=(s=null!=t?d(t,"model"):t)?d(s,"linktext"):s,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:9,column:4},end:{line:18,column:11}}}))?s:"")+"\n"+(null!=(s=d(n,"if").call(a,null!=(s=null!=t?d(t,"model"):t)?d(s,"linktitle"):s,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:20,column:4},end:{line:29,column:11}}}))?s:"")+"\n"+(null!=(s=d(n,"if").call(a,null!=(s=null!=t?d(t,"model"):t)?d(s,"showtarget"):s,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:31,column:4},end:{line:44,column:11}}}))?s:"")+'    <p class="description">'+r(l(null!=(s=null!=t?d(t,"model"):t)?d(s,"description"):s,t))+"</p>\n\n</div>"},useData:!0})},{"hbsfy/runtime":265}],210:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field field-api-medium">\n    <label class="heading">'+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"label"):s,t))+'</label>\n    <textarea class="kb-medium-editable" id="random" name=\''+r((a(n,"fieldName")||t&&a(t,"fieldName")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:3,column:59},end:{line:3,column:114}}}))+"'>"+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s,t))+'</textarea>\n    <p class="description">'+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"description"):s,t))+"</p>\n</div>\n\n"},useData:!0})},{"hbsfy/runtime":265}],211:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field--oembed kb-field kb-js-field field-api-oembed">\n    <label class="heading">'+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"label"):s,t))+"</label>\n    <input data-kbf-link-url\n    name='"+r((a(n,"fieldName")||t&&a(t,"fieldName")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:4,column:10},end:{line:4,column:65}}}))+"'\n    value='"+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s,t))+'\' />\n    <div class="kb-oembed-preview" data-kb-oembed-preview>\n\n    </div>\n    <p class="description">'+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"description"):s,t))+"</p>\n</div>"},useData:!0})},{"hbsfy/runtime":265}],212:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({1:function(e,t,n,i,o,s,l){var r,a=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,u=e.escapeExpression,c=e.lambda,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    <div class='kb-radioset-item'>\n        <label>\n        <input type='radio' name='"+u((h(n,"fieldName")||t&&h(t,"fieldName")||d).call(a,null!=(r=null!=l[1]?h(l[1],"model"):l[1])?h(r,"baseId"):r,null!=(r=null!=l[1]?h(l[1],"model"):l[1])?h(r,"index"):r,null!=(r=null!=l[1]?h(l[1],"model"):l[1])?h(r,"primeKey"):r,{name:"fieldName",hash:{},data:o,loc:{start:{line:6,column:34},end:{line:6,column:98}}}))+"'\n               value='"+u(c(null!=t?h(t,"value"):t,t))+"'\n               "+(null!=(r=(h(n,"ifCond")||t&&h(t,"ifCond")||d).call(a,null!=t?h(t,"value"):t,"==",null!=(r=null!=l[1]?h(l[1],"model"):l[1])?h(r,"value"):r,{name:"ifCond",hash:{},fn:e.program(2,o,0,s,l),inverse:e.noop,data:o,loc:{start:{line:8,column:15},end:{line:8,column:86}}}))?r:"")+"/>"+(null!=(r=c(null!=t?h(t,"name"):t,t))?r:"")+"</label>\n    </div>\n"},2:function(e,t,n,i,o){return'checked="checked"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o,s,l){var r,a=e.lambda,d=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field field-api-radioset kb-field--radioset">\n    <label class="heading">'+d(a(null!=(r=null!=t?u(t,"model"):t)?u(r,"label"):r,t))+"</label>\n"+(null!=(r=u(n,"each").call(null!=t?t:e.nullContext||{},null!=(r=null!=t?u(t,"model"):t)?u(r,"options"):r,{name:"each",hash:{},fn:e.program(1,o,0,s,l),inverse:e.noop,data:o,loc:{start:{line:3,column:4},end:{line:10,column:13}}}))?r:"")+'    <p class="description">'+d(a(null!=(r=null!=t?u(t,"model"):t)?u(r,"description"):r,t))+"</p>\n</div>"},useData:!0,useDepths:!0})},{"hbsfy/runtime":265}],213:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({1:function(e,t,n,i,o){return'            data-kbselect2="true"\n'},3:function(e,t,n,i,o){return'            multiple="multiple"\n'},5:function(e,t,n,i,o){return'            <option value="">Auswhlen</option>\n'},7:function(e,t,n,i,o,s,l){var r,a=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            <option "+(null!=(r=(d(n,"ifCond")||t&&d(t,"ifCond")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?d(t,"value"):t,"==",null!=(r=null!=l[1]?d(l[1],"model"):l[1])?d(r,"value"):r,{name:"ifCond",hash:{},fn:e.program(8,o,0,s,l),inverse:e.noop,data:o,loc:{start:{line:16,column:20},end:{line:16,column:93}}}))?r:"")+'\n                    value="'+e.escapeExpression(a(null!=t?d(t,"value"):t,t))+'">'+(null!=(r=a(null!=t?d(t,"name"):t,t))?r:"")+"</option>\n"},8:function(e,t,n,i,o){return'selected="selected"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o,s,l){var r,a=e.lambda,d=e.escapeExpression,u=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field field-api-text kb-field--select">\n    <label class="heading">'+d(a(null!=(r=null!=t?h(t,"model"):t)?h(r,"label"):r,t))+'</label>\n    <select\n            name="'+d((h(n,"fieldName")||t&&h(t,"fieldName")||c).call(u,null!=(r=null!=t?h(t,"model"):t)?h(r,"baseId"):r,null!=(r=null!=t?h(t,"model"):t)?h(r,"index"):r,null!=(r=null!=t?h(t,"model"):t)?h(r,"primeKey"):r,{name:"fieldName",hash:{},data:o,loc:{start:{line:4,column:18},end:{line:4,column:73}}}))+'"\n'+(null!=(r=(h(n,"ifCond")||t&&h(t,"ifCond")||c).call(u,null!=(r=null!=t?h(t,"model"):t)?h(r,"select2"):r,"===",!0,{name:"ifCond",hash:{},fn:e.program(1,o,0,s,l),inverse:e.noop,data:o,loc:{start:{line:5,column:8},end:{line:7,column:19}}}))?r:"")+(null!=(r=(h(n,"ifCond")||t&&h(t,"ifCond")||c).call(u,null!=(r=null!=t?h(t,"model"):t)?h(r,"multiple"):r,"===",!0,{name:"ifCond",hash:{},fn:e.program(3,o,0,s,l),inverse:e.noop,data:o,loc:{start:{line:8,column:8},end:{line:10,column:19}}}))?r:"")+"    >\n"+(null!=(r=h(n,"if").call(u,null!=(r=null!=t?h(t,"model"):t)?h(r,"showempty"):r,{name:"if",hash:{},fn:e.program(5,o,0,s,l),inverse:e.noop,data:o,loc:{start:{line:12,column:8},end:{line:14,column:15}}}))?r:"")+(null!=(r=h(n,"each").call(u,null!=(r=null!=t?h(t,"model"):t)?h(r,"options"):r,{name:"each",hash:{},fn:e.program(7,o,0,s,l),inverse:e.noop,data:o,loc:{start:{line:15,column:8},end:{line:18,column:17}}}))?r:"")+'    </select>\n    <p class="description">'+d(a(null!=(r=null!=t?h(t,"model"):t)?h(r,"description"):r,t))+"</p>\n</div>"},useData:!0,useDepths:!0})},{"hbsfy/runtime":265}],214:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({1:function(e,t,n,i,o){var s,l=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+l("function"==typeof(s=null!=(s=r(n,"key")||o&&r(o,"key"))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"key",hash:{},data:o,loc:{start:{line:5,column:8},end:{line:5,column:16}}}):s)+'="'+l(e.lambda(t,t))+'"\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=null!=t?t:e.nullContext||{},d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field field-api-text kb-field--text kb-field--reset">\n    <label class="heading">'+r(l(null!=(s=null!=t?d(t,"model"):t)?d(s,"label"):s,t))+'</label>\n    <input type="text"\n'+(null!=(s=d(n,"each").call(a,null!=(s=null!=t?d(t,"model"):t)?d(s,"attributes"):s,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:4},end:{line:6,column:13}}}))?s:"")+'    name="'+r((d(n,"fieldName")||t&&d(t,"fieldName")||e.hooks.helperMissing).call(a,null!=(s=null!=t?d(t,"model"):t)?d(s,"baseId"):s,null!=(s=null!=t?d(t,"model"):t)?d(s,"index"):s,null!=(s=null!=t?d(t,"model"):t)?d(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:7,column:10},end:{line:7,column:65}}}))+'" value="'+r(l(null!=(s=null!=t?d(t,"model"):t)?d(s,"value"):s,t))+'" >\n    <p class="description">'+r(l(null!=(s=null!=t?d(t,"model"):t)?d(s,"description"):s,t))+"</p>\n</div>"},useData:!0})},{"hbsfy/runtime":265}],215:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field--text-multiple-item">\n    <div class="kb-field--text-multiple-control kbf-sort"><span class="dashicons dashicons-menu"></span></div>\n    <input type="text" name="'+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,t))+'[]" value="'+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s,t))+'">\n    <div data-kbfaction="delete" class="kb-field--text-multiple-control kbf-delete"><span class="dashicons dashicons-trash" ></span></div>\n</div>'},useData:!0})},{"hbsfy/runtime":265}],216:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lambda,r=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field field-api-textarea">\n    <label class="heading">'+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"label"):s,t))+'</label>\n    <textarea name="'+r((a(n,"fieldName")||t&&a(t,"fieldName")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:3,column:20},end:{line:3,column:75}}}))+'">'+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s,t))+'</textarea>\n    <p class="description">'+r(l(null!=(s=null!=t?a(t,"model"):t)?a(s,"description"):s,t))+"</p>\n</div>"},useData:!0})},{"hbsfy/runtime":265}],217:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div>"+(null!=(s=e.lambda(null!=(s=null!=t?l(t,"strings"):t)?l(s,"feedback"):s,t))?s:"")+"</div>"},useData:!0})},{"hbsfy/runtime":265}],218:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({1:function(e,t,n,i,o){return" kb-dynamic-module "},3:function(e,t,n,i,o){return" global-module "},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div data-kb-mcontrols="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"model"):t)?r(s,"mid"):s,t))+"\" class='kb-module-controls "+(null!=(s=r(n,"if").call(l,null!=(s=null!=t?r(t,"model"):t)?r(s,"inDynamic"):s,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:65},end:{line:1,column:115}}}))?s:"")+" "+(null!=(s=r(n,"if").call(l,null!=(s=null!=t?r(t,"model"):t)?r(s,"globalModule"):s,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:116},end:{line:1,column:165}}}))?s:"")+'\'>\n    <div class="kb-controls-wrap"></div>\n</div>'},useData:!0})},{"hbsfy/runtime":265}],219:[function(e,t,n){var i=e("hbsfy/runtime");t.exports=i.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-module__placeholder">\n    <p>'+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=t?l(t,"model"):t)?l(s,"settings"):s)?l(s,"name"):s,t))+"\n    <span>Start here.</span>\n    </p>\n</div>"},useData:!0})},{"hbsfy/runtime":265}],220:[function(e,t,n){},{}],221:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var o=i(e("./handlebars.runtime")),s=i(e("./handlebars/compiler/ast")),l=e("./handlebars/compiler/base"),r=e("./handlebars/compiler/compiler"),a=i(e("./handlebars/compiler/javascript-compiler")),d=i(e("./handlebars/compiler/visitor")),u=i(e("./handlebars/no-conflict")),c=o.default.create;function h(){var n=c();return n.compile=function(e,t){return r.compile(e,t,n)},n.precompile=function(e,t){return r.precompile(e,t,n)},n.AST=s.default,n.Compiler=r.Compiler,n.JavaScriptCompiler=a.default,n.Parser=l.parser,n.parse=l.parse,n.parseWithoutProcessing=l.parseWithoutProcessing,n}var p=h();p.create=h,u.default(p),p.Visitor=d.default,p.default=p,n.default=p,t.exports=n.default},{"./handlebars.runtime":222,"./handlebars/compiler/ast":224,"./handlebars/compiler/base":225,"./handlebars/compiler/compiler":227,"./handlebars/compiler/javascript-compiler":229,"./handlebars/compiler/visitor":232,"./handlebars/no-conflict":249}],222:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}n.__esModule=!0;var s=o(e("./handlebars/base")),l=i(e("./handlebars/safe-string")),r=i(e("./handlebars/exception")),a=o(e("./handlebars/utils")),d=o(e("./handlebars/runtime")),u=i(e("./handlebars/no-conflict"));function c(){var t=new s.HandlebarsEnvironment;return a.extend(t,s),t.SafeString=l.default,t.Exception=r.default,t.Utils=a,t.escapeExpression=a.escapeExpression,t.VM=d,t.template=function(e){return d.template(e,t)},t}var h=c();h.create=c,u.default(h),h.default=h,n.default=h,t.exports=n.default},{"./handlebars/base":223,"./handlebars/exception":236,"./handlebars/no-conflict":249,"./handlebars/runtime":250,"./handlebars/safe-string":251,"./handlebars/utils":252}],223:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0,n.HandlebarsEnvironment=c;var o=e("./utils"),s=i(e("./exception")),l=e("./helpers"),r=e("./decorators"),a=i(e("./logger")),d=e("./internal/proto-access");n.VERSION="4.7.7";n.COMPILER_REVISION=8;n.LAST_COMPATIBLE_COMPILER_REVISION=7;n.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var u="[object Object]";function c(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},l.registerDefaultHelpers(this),r.registerDefaultDecorators(this)}c.prototype={constructor:c,logger:a.default,log:a.default.log,registerHelper:function(e,t){if(o.toString.call(e)===u){if(t)throw new s.default("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(o.toString.call(e)===u)o.extend(this.partials,e);else{if(void 0===t)throw new s.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(o.toString.call(e)===u){if(t)throw new s.default("Arg not supported with multiple decorators");o.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){d.resetLoggedProperties()}};var h=a.default.log;n.log=h,n.createFrame=o.createFrame,n.logger=a.default},{"./decorators":234,"./exception":236,"./helpers":237,"./internal/proto-access":246,"./logger":248,"./utils":252}],224:[function(e,t,n){"use strict";n.__esModule=!0;var i={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!i.helpers.scopedId(e)&&!e.depth}}};n.default=i,t.exports=n.default},{}],225:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0,n.parseWithoutProcessing=d,n.parse=function(e,t){var n=d(e,t);return new s.default(t).accept(n)};var o=i(e("./parser")),s=i(e("./whitespace-control")),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./helpers")),r=e("../utils");n.parser=o.default;var a={};function d(e,t){return"Program"===e.type?e:((o.default.yy=a).locInfo=function(e){return new a.SourceLocation(t&&t.srcName,e)},o.default.parse(e))}r.extend(a,l)},{"../utils":252,"./helpers":228,"./parser":230,"./whitespace-control":233}],226:[function(e,t,n){"use strict";n.__esModule=!0;var l=e("../utils"),i=void 0;try{if("function"!=typeof define||!define.amd){var o=e("source-map");i=o.SourceNode}}catch(e){}function s(e,t,n){if(l.isArray(e)){for(var i=[],o=0,s=e.length;o<s;o++)i.push(t.wrap(e[o],n));return i}return"boolean"==typeof e||"number"==typeof e?e+"":e}function r(e){this.srcFile=e,this.source=[]}i||((i=function(e,t,n,i){this.src="",i&&this.add(i)}).prototype={add:function(e){l.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){l.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),r.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var t=this.empty();return this.each(function(e){t.add(["  ",e,"\n"])}),t},each:function(e){for(var t=0,n=this.source.length;t<n;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new i(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof i?e:(e=s(e,this,t),new i(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,n){return n=this.generateList(n),this.wrap([e,t?"."+t+"(":"(",n,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(n){var i=this,o=[];Object.keys(n).forEach(function(e){var t=s(n[e],i);"undefined"!==t&&o.push([i.quotedString(e),":",t])});var e=this.generateList(o);return e.prepend("{"),e.add("}"),e},generateList:function(e){for(var t=this.empty(),n=0,i=e.length;n<i;n++)n&&t.add(","),t.add(s(e[n],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},n.default=r,t.exports=n.default},{"../utils":252,"source-map":264}],227:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0,n.Compiler=s,n.precompile=function(e,t,n){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new a.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0);t.compat&&(t.useDepths=!0);var i=n.parse(e,t),o=(new n.Compiler).compile(i,t);return(new n.JavaScriptCompiler).compile(o,t)},n.compile=function(i,o,s){void 0===o&&(o={});if(null==i||"string"!=typeof i&&"Program"!==i.type)throw new a.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+i);"data"in(o=d.extend({},o))||(o.data=!0);o.compat&&(o.useDepths=!0);var l=void 0;function r(){var e=s.parse(i,o),t=(new s.Compiler).compile(e,o),n=(new s.JavaScriptCompiler).compile(t,o,void 0,!0);return s.template(n)}function e(e,t){return l||(l=r()),l.call(this,e,t)}return e._setup=function(e){return l||(l=r()),l._setup(e)},e._child=function(e,t,n,i){return l||(l=r()),l._child(e,t,n,i)},e};var a=i(e("../exception")),d=e("../utils"),r=i(e("./ast")),o=[].slice;function s(){}function l(e,t){if(e===t)return!0;if(d.isArray(e)&&d.isArray(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!l(e[n],t[n]))return!1;return!0}}function u(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}s.prototype={compiler:s,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var i=this.opcodes[n],o=e.opcodes[n];if(i.opcode!==o.opcode||!l(i.args,o.args))return!1}t=this.children.length;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],t.knownHelpers=d.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t.knownHelpers),this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[n]=t,this.useDepths=this.useDepths||t.useDepths,n},accept:function(e){if(!this[e.type])throw new a.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,n=t.length,i=0;i<n;i++)this.accept(t[i]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){u(e);var t=e.program,n=e.inverse;t=t&&this.compileProgram(t),n=n&&this.compileProgram(n);var i=this.classifySexpr(e);"helper"===i?this.helperSexpr(e,t,n):"simple"===i?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,n),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),n=this.setupFullMustacheParams(e,t,void 0),i=e.path;this.useDecorators=!0,this.opcode("registerDecorator",n.length,i.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var n=e.params;if(1<n.length)throw new a.default("Unsupported number of partial arguments: "+n.length,e);n.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):n.push({type:"PathExpression",parts:[],depth:0}));var i=e.name.original,o="SubExpression"===e.name.type;o&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var s=e.indent||"";this.options.preventIndent&&s&&(this.opcode("appendContent",s),s=""),this.opcode("invokePartial",o,i,s),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){u(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,n){var i=e.path,o=i.parts[0],s=null!=t||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),i.strict=!0,this.accept(i),this.opcode("invokeAmbiguous",o,s)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var i=this.setupFullMustacheParams(e,t,n),o=e.path,s=o.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",i.length,s);else{if(this.options.knownHelpersOnly)throw new a.default("You specified knownHelpersOnly, but used the unknown helper "+s,e);o.strict=!0,o.falsy=!0,this.accept(o),this.opcode("invokeHelper",i.length,o.original,r.default.helpers.simpleId(o))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],n=r.default.helpers.scopedId(e),i=!e.depth&&!n&&this.blockParamIndex(t);i?this.opcode("lookupBlockParam",i,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,n):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,n=0,i=t.length;for(this.opcode("pushHash");n<i;n++)this.pushParam(t[n].value);for(;n--;)this.opcode("assignToHash",t[n].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:o.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=r.default.helpers.simpleId(e.path),n=t&&!!this.blockParamIndex(e.path.parts[0]),i=!n&&r.default.helpers.helperExpression(e),o=!n&&(i||t);if(o&&!i){var s=e.path.parts[0],l=this.options;l.knownHelpers[s]?i=!0:l.knownHelpersOnly&&(o=!1)}return i?"helper":o?"ambiguous":"simple"},pushParams:function(e){for(var t=0,n=e.length;t<n;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var n=void 0;if(!e.parts||r.default.helpers.scopedId(e)||e.depth||(n=this.blockParamIndex(e.parts[0])),n){var i=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,i)}else(t=e.original||t).replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,n,i){var o=e.params;return this.pushParams(o),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.accept(e.hash):this.opcode("emptyHash",i),o},blockParamIndex:function(e){for(var t=0,n=this.options.blockParams.length;t<n;t++){var i=this.options.blockParams[t],o=i&&d.indexOf(i,e);if(i&&0<=o)return[t,o]}}}},{"../exception":236,"../utils":252,"./ast":224}],228:[function(e,t,n){"use strict";n.__esModule=!0,n.SourceLocation=function(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}},n.id=function(e){return/^\[.*\]$/.test(e)?e.substring(1,e.length-1):e},n.stripFlags=function(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}},n.stripComment=function(e){return e.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},n.preparePath=function(e,t,n){n=this.locInfo(n);for(var i=e?"@":"",o=[],s=0,l=0,r=t.length;l<r;l++){var a=t[l].part,d=t[l].original!==a;if(i+=(t[l].separator||"")+a,d||".."!==a&&"."!==a&&"this"!==a)o.push(a);else{if(0<o.length)throw new u.default("Invalid path: "+i,{loc:n});".."===a&&s++}}return{type:"PathExpression",data:e,depth:s,parts:o,original:i,loc:n}},n.prepareMustache=function(e,t,n,i,o,s){var l=i.charAt(3)||i.charAt(2),r="{"!==l&&"&"!==l;return{type:/\*/.test(i)?"Decorator":"MustacheStatement",path:e,params:t,hash:n,escaped:r,strip:o,loc:this.locInfo(s)}},n.prepareRawBlock=function(e,t,n,i){d(e,n),i=this.locInfo(i);var o={type:"Program",body:t,strip:{},loc:i};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:o,openStrip:{},inverseStrip:{},closeStrip:{},loc:i}},n.prepareBlock=function(e,t,n,i,o,s){i&&i.path&&d(e,i);var l=/\*/.test(e.open);t.blockParams=e.blockParams;var r=void 0,a=void 0;if(n){if(l)throw new u.default("Unexpected inverse block on decorator",n);n.chain&&(n.program.body[0].closeStrip=i.strip),a=n.strip,r=n.program}o&&(o=r,r=t,t=o);return{type:l?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:r,openStrip:e.strip,inverseStrip:a,closeStrip:i&&i.strip,loc:this.locInfo(s)}},n.prepareProgram=function(e,t){if(!t&&e.length){var n=e[0].loc,i=e[e.length-1].loc;n&&i&&(t={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:i.end.line,column:i.end.column}})}return{type:"Program",body:e,strip:{},loc:t}},n.preparePartialBlock=function(e,t,n,i){return d(e,n),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:n&&n.strip,loc:this.locInfo(i)}};var i,o=e("../exception"),u=(i=o)&&i.__esModule?i:{default:i};function d(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var n={loc:e.path.loc};throw new u.default(e.path.original+" doesn't match "+t,n)}}},{"../exception":236}],229:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var o=e("../base"),m=i(e("../exception")),s=e("../utils"),l=i(e("./code-gen"));function a(e){this.value=e}function r(){}r.prototype={nameLookup:function(e,t){return this.internalNameLookup(e,t)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=o.COMPILER_REVISION;return[e,o.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,n){return s.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:n?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,t){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(t),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,t,n,i){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!i,this.name=this.environment.name,this.isChild=!!n,this.context=n||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var o=e.opcodes,s=void 0,l=void 0,r=void 0,a=void 0;for(r=0,a=o.length;r<a;r++)s=o[r],this.source.currentLocation=s.loc,l=l||s.loc,this[s.opcode].apply(this,s.args);if(this.source.currentLocation=l,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new m.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),i?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var d=this.createFunctionContext(i);if(this.isChild)return d;var u={compiler:this.compilerInfo(),main:d};this.decorators&&(u.main_d=this.decorators,u.useDecorators=!0);var c=this.context,h=c.programs,p=c.decorators;for(r=0,a=h.length;r<a;r++)h[r]&&(u[r]=h[r],p[r]&&(u[r+"_d"]=p[r],u.useDecorators=!0));return this.environment.usePartial&&(u.usePartial=!0),this.options.data&&(u.useData=!0),this.useDepths&&(u.useDepths=!0),this.useBlockParams&&(u.useBlockParams=!0),this.options.compat&&(u.compat=!0),i?u.compilerOptions=this.options:(u.compiler=JSON.stringify(u.compiler),this.source.currentLocation={start:{line:1,column:0}},u=this.objectLiteral(u),t.srcName?(u=u.toStringWithSourceMap({file:t.destName})).map=u.map&&u.map.toString():u=u.toString()),u},preamble:function(){this.lastContext=0,this.source=new l.default(this.options.srcName),this.decorators=new l.default(this.options.srcName)},createFunctionContext:function(e){var n=this,i="",t=this.stackVars.concat(this.registers.list);0<t.length&&(i+=", "+t.join(", "));var o=0;Object.keys(this.aliases).forEach(function(e){var t=n.aliases[e];t.children&&1<t.referenceCount&&(i+=", alias"+ ++o+"="+e,t.children[0]="alias"+o)}),this.lookupPropertyFunctionIsUsed&&(i+=", "+this.lookupPropertyFunctionVarDeclaration());var s=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&s.push("blockParams"),this.useDepths&&s.push("depths");var l=this.mergeSource(i);return e?(s.push(l),Function.apply(this,s)):this.source.wrap(["function(",s.join(","),") {\n  ",l,"}"])},mergeSource:function(e){var t=this.environment.isSimple,n=!this.forceBuffer,i=void 0,o=void 0,s=void 0,l=void 0;return this.source.each(function(e){e.appendToBuffer?(s?e.prepend("  + "):s=e,l=e):(s&&(o?s.prepend("buffer += "):i=!0,l.add(";"),s=l=void 0),o=!0,t||(n=!1))}),n?s?(s.prepend("return "),l.add(";")):o||this.source.push('return "";'):(e+=", buffer = "+(i?"":this.initializeBuffer()),s?(s.prepend("return buffer + "),l.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(i?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(e){var t=this.aliasable("container.hooks.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(e,0,n);var i=this.popStack();n.splice(1,0,i),this.push(this.source.functionCall(t,"call",n))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var n=this.topStack();t.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,n,i){var o=0;i||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[o++])),this.resolvePath("context",e,o,t,n)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,n){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,n)},resolvePath:function(n,i,o,s,e){var l=this;if(this.options.strict||this.options.assumeObjects)this.push(function(e,t,n,i){var o=t.popStack(),s=0,l=n.length;e&&l--;for(;s<l;s++)o=t.nameLookup(o,n[s],i);return e?[t.aliasable("container.strict"),"(",o,", ",t.quotedString(n[s]),", ",JSON.stringify(t.source.currentLocation)," )"]:o}(this.options.strict&&e,this,i,n));else for(var t=i.length;o<t;o++)this.replaceStack(function(e){var t=l.nameLookup(e,i[o],n);return s?[" && ",t]:[" != null ? ",t," : ",e]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var n=this.nameLookup("decorators",t,"decorator"),i=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(n,"",["fn","props","container",i])," || fn;"])},invokeHelper:function(e,t,n){var i=this.popStack(),o=this.setupHelper(e,t),s=[];n&&s.push(o.name),s.push(i),this.options.strict||s.push(this.aliasable("container.hooks.helperMissing"));var l=["(",this.itemsSeparatedBy(s,"||"),")"],r=this.source.functionCall(l,"call",o.callParams);this.push(r)},itemsSeparatedBy:function(e,t){var n=[];n.push(e[0]);for(var i=1;i<e.length;i++)n.push(t,e[i]);return n},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var n=this.popStack();this.emptyHash();var i=this.setupHelper(0,e,t),o=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",n,")"];this.options.strict||(o[0]="(helper = ",o.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",o,i.paramsInit?["),(",i.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",i.callParams)," : helper))"])},invokePartial:function(e,t,n){var i=[],o=this.setupParams(t,1,i);e&&(t=this.popStack(),delete o.name),n&&(o.indent=JSON.stringify(n)),o.helpers="helpers",o.partials="partials",o.decorators="container.decorators",e?i.unshift(t):i.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(o.depths="depths"),o=this.objectLiteral(o),i.push(o),this.push(this.source.functionCall("container.invokePartial","",i))},assignToHash:function(e){var t=this.popStack(),n=void 0,i=void 0,o=void 0;this.trackIds&&(o=this.popStack()),this.stringParams&&(i=this.popStack(),n=this.popStack());var s=this.hash;n&&(s.contexts[e]=n),i&&(s.types[e]=i),o&&(s.ids[e]=o),s.values[e]=t},pushId:function(e,t,n){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:r,compileChildren:function(e,t){for(var n=e.children,i=void 0,o=void 0,s=0,l=n.length;s<l;s++){i=n[s],o=new this.compiler;var r=this.matchExistingProgram(i);if(null==r){this.context.programs.push("");var a=this.context.programs.length;i.index=a,i.name="program"+a,this.context.programs[a]=o.compile(i,t,this.context,!this.precompile),this.context.decorators[a]=o.decorators,this.context.environments[a]=i,this.useDepths=this.useDepths||o.useDepths,this.useBlockParams=this.useBlockParams||o.useBlockParams,i.useDepths=this.useDepths,i.useBlockParams=this.useBlockParams}else i.index=r.index,i.name="program"+r.index,this.useDepths=this.useDepths||r.useDepths,this.useBlockParams=this.useBlockParams||r.useBlockParams}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var i=this.context.environments[t];if(i&&i.equals(e))return i}},programExpression:function(e){var t=this.environment.children[e],n=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"container.program("+n.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof a||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new a(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],n=void 0,i=void 0,o=void 0;if(!this.isInline())throw new m.default("replaceStack on non-inline");var s=this.popStack(!0);if(s instanceof a)t=["(",n=[s.value]],o=!0;else{i=!0;var l=this.incrStack();t=["((",this.push(l)," = ",s,")"],n=this.topStack()}var r=e.call(this,n);o||this.popStack(),i&&this.stackSlot--,this.push(t.concat(r,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];if(i instanceof a)this.compileStack.push(i);else{var o=this.incrStack();this.pushSource([o," = ",i,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof a)return n.value;if(!t){if(!this.stackSlot)throw new m.default("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof a?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?t.referenceCount++:((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1),t},setupHelper:function(e,t,n){var i=[];return{params:i,paramsInit:this.setupHelperArgs(t,e,i,n),name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(i)}},setupParams:function(e,t,n){var i={},o=[],s=[],l=[],r=!n,a=void 0;r&&(n=[]),i.name=this.quotedString(e),i.hash=this.popStack(),this.trackIds&&(i.hashIds=this.popStack()),this.stringParams&&(i.hashTypes=this.popStack(),i.hashContexts=this.popStack());var d=this.popStack(),u=this.popStack();(u||d)&&(i.fn=u||"container.noop",i.inverse=d||"container.noop");for(var c=t;c--;)a=this.popStack(),n[c]=a,this.trackIds&&(l[c]=this.popStack()),this.stringParams&&(s[c]=this.popStack(),o[c]=this.popStack());return r&&(i.args=this.source.generateArray(n)),this.trackIds&&(i.ids=this.source.generateArray(l)),this.stringParams&&(i.types=this.source.generateArray(s),i.contexts=this.source.generateArray(o)),this.options.data&&(i.data="data"),this.useBlockParams&&(i.blockParams="blockParams"),i},setupHelperArgs:function(e,t,n,i){var o=this.setupParams(e,t,n);return o.loc=JSON.stringify(this.source.currentLocation),o=this.objectLiteral(o),i?(this.useRegister("options"),n.push("options"),["options=",o]):n?(n.push(o),""):o}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=r.RESERVED_WORDS={},n=0,i=e.length;n<i;n++)t[e[n]]=!0}(),r.isValidJavaScriptVariableName=function(e){return!r.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},n.default=r,t.exports=n.default},{"../base":223,"../exception":236,"../utils":252,"./code-gen":226}],230:[function(e,t,n){"use strict";n.__esModule=!0;var i=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,n,i,o,s,l){var r=s.length-1;switch(o){case 1:return s[r-1];case 2:this.$=i.prepareProgram(s[r]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=s[r];break;case 9:this.$={type:"CommentStatement",value:i.stripComment(s[r]),strip:i.stripFlags(s[r],s[r]),loc:i.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:s[r],value:s[r],loc:i.locInfo(this._$)};break;case 11:this.$=i.prepareRawBlock(s[r-2],s[r-1],s[r],this._$);break;case 12:this.$={path:s[r-3],params:s[r-2],hash:s[r-1]};break;case 13:this.$=i.prepareBlock(s[r-3],s[r-2],s[r-1],s[r],!1,this._$);break;case 14:this.$=i.prepareBlock(s[r-3],s[r-2],s[r-1],s[r],!0,this._$);break;case 15:this.$={open:s[r-5],path:s[r-4],params:s[r-3],hash:s[r-2],blockParams:s[r-1],strip:i.stripFlags(s[r-5],s[r])};break;case 16:case 17:this.$={path:s[r-4],params:s[r-3],hash:s[r-2],blockParams:s[r-1],strip:i.stripFlags(s[r-5],s[r])};break;case 18:this.$={strip:i.stripFlags(s[r-1],s[r-1]),program:s[r]};break;case 19:var a=i.prepareBlock(s[r-2],s[r-1],s[r],s[r],!1,this._$),d=i.prepareProgram([a],s[r-1].loc);d.chained=!0,this.$={strip:s[r-2].strip,program:d,chain:!0};break;case 20:this.$=s[r];break;case 21:this.$={path:s[r-1],strip:i.stripFlags(s[r-2],s[r])};break;case 22:case 23:this.$=i.prepareMustache(s[r-3],s[r-2],s[r-1],s[r-4],i.stripFlags(s[r-4],s[r]),this._$);break;case 24:this.$={type:"PartialStatement",name:s[r-3],params:s[r-2],hash:s[r-1],indent:"",strip:i.stripFlags(s[r-4],s[r]),loc:i.locInfo(this._$)};break;case 25:this.$=i.preparePartialBlock(s[r-2],s[r-1],s[r],this._$);break;case 26:this.$={path:s[r-3],params:s[r-2],hash:s[r-1],strip:i.stripFlags(s[r-4],s[r])};break;case 27:case 28:this.$=s[r];break;case 29:this.$={type:"SubExpression",path:s[r-3],params:s[r-2],hash:s[r-1],loc:i.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:s[r],loc:i.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:i.id(s[r-2]),value:s[r],loc:i.locInfo(this._$)};break;case 32:this.$=i.id(s[r-1]);break;case 33:case 34:this.$=s[r];break;case 35:this.$={type:"StringLiteral",value:s[r],original:s[r],loc:i.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(s[r]),original:Number(s[r]),loc:i.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===s[r],original:"true"===s[r],loc:i.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:i.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:i.locInfo(this._$)};break;case 40:case 41:this.$=s[r];break;case 42:this.$=i.preparePath(!0,s[r],this._$);break;case 43:this.$=i.preparePath(!1,s[r],this._$);break;case 44:s[r-2].push({part:i.id(s[r]),original:s[r],separator:s[r-1]}),this.$=s[r-2];break;case 45:this.$=[{part:i.id(s[r]),original:s[r]}];break;case 46:this.$=[];break;case 47:s[r-1].push(s[r]);break;case 48:this.$=[];break;case 49:s[r-1].push(s[r]);break;case 50:this.$=[];break;case 51:s[r-1].push(s[r]);break;case 58:this.$=[];break;case 59:s[r-1].push(s[r]);break;case 64:this.$=[];break;case 65:s[r-1].push(s[r]);break;case 70:this.$=[];break;case 71:s[r-1].push(s[r]);break;case 78:this.$=[];break;case 79:s[r-1].push(s[r]);break;case 82:this.$=[];break;case 83:s[r-1].push(s[r]);break;case 86:this.$=[];break;case 87:s[r-1].push(s[r]);break;case 90:this.$=[];break;case 91:s[r-1].push(s[r]);break;case 94:this.$=[];break;case 95:s[r-1].push(s[r]);break;case 98:this.$=[s[r]];break;case 99:s[r-1].push(s[r]);break;case 100:this.$=[s[r]];break;case 101:s[r-1].push(s[r])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,n=[0],i=[null],o=[],s=this.table,l="",r=0,a=0,d=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===(this.yy.parser=this).lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;o.push(u);var c=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var h,p,m,f,g,b,v,k,y,w,x={};;){if(m=n[n.length-1],void 0===(f=this.defaultActions[m]?this.defaultActions[m]:(null==h&&(w=void 0,"number"!=typeof(w=t.lexer.lex()||1)&&(w=t.symbols_[w]||w),h=w),s[m]&&s[m][h]))||!f.length||!f[0]){var C="";if(!d){for(b in y=[],s[m])this.terminals_[b]&&2<b&&y.push("'"+this.terminals_[b]+"'");C=this.lexer.showPosition?"Parse error on line "+(r+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+y.join(", ")+", got '"+(this.terminals_[h]||h)+"'":"Parse error on line "+(r+1)+": Unexpected "+(1==h?"end of input":"'"+(this.terminals_[h]||h)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[h]||h,line:this.lexer.yylineno,loc:u,expected:y})}}if(f[0]instanceof Array&&1<f.length)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+h);switch(f[0]){case 1:n.push(h),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(f[1]),h=null,p?(h=p,p=null):(a=this.lexer.yyleng,l=this.lexer.yytext,r=this.lexer.yylineno,u=this.lexer.yylloc,0<d&&d--);break;case 2:if(v=this.productions_[f[1]][1],x.$=i[i.length-v],x._$={first_line:o[o.length-(v||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(v||1)].first_column,last_column:o[o.length-1].last_column},c&&(x._$.range=[o[o.length-(v||1)].range[0],o[o.length-1].range[1]]),void 0!==(g=this.performAction.call(x,l,a,r,this.yy,f[1],i,o)))return g;v&&(n=n.slice(0,-1*v*2),i=i.slice(0,-1*v),o=o.slice(0,-1*v)),n.push(this.productions_[f[1]][0]),i.push(x.$),o.push(x._$),k=s[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}},t={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(20<e.length?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(20<e.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,n,i,o;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),l=0;l<s.length&&(!(n=this._input.match(this.rules[s[l]]))||t&&!(n[0].length>t[0].length)||(t=n,i=l,this.options.flex));l++);return t?((o=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,s[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,n,t,i){function o(e,t){return n.yytext=n.yytext.substring(e,n.yyleng-t+e)}switch(t){case 0:if("\\\\"===n.yytext.slice(-2)?(o(0,1),this.begin("mu")):"\\"===n.yytext.slice(-1)?(o(0,1),this.begin("emu")):this.begin("mu"),n.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(o(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(n.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return n.yytext=o(1,2).replace(/\\"/g,'"'),80;case 32:return n.yytext=o(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return n.yytext=n.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};function n(){this.yy={}}return e.lexer=t,new((n.prototype=e).Parser=n)}();n.default=i,t.exports=n.default},{}],231:[function(e,t,n){"use strict";n.__esModule=!0,n.print=function(e){return(new l).accept(e)},n.PrintVisitor=l;var i,o=e("./visitor"),s=(i=o)&&i.__esModule?i:{default:i};function l(){this.padding=0}(l.prototype=new s.default).pad=function(e){for(var t="",n=0,i=this.padding;n<i;n++)t+="  ";return t+=e+"\n"},l.prototype.Program=function(e){var t="",n=e.body,i=void 0,o=void 0;if(e.blockParams){var s="BLOCK PARAMS: [";for(i=0,o=e.blockParams.length;i<o;i++)s+=" "+e.blockParams[i];s+=" ]",t+=this.pad(s)}for(i=0,o=n.length;i<o;i++)t+=this.accept(n[i]);return this.padding--,t},l.prototype.MustacheStatement=function(e){return this.pad("{{ "+this.SubExpression(e)+" }}")},l.prototype.Decorator=function(e){return this.pad("{{ DIRECTIVE "+this.SubExpression(e)+" }}")},l.prototype.BlockStatement=l.prototype.DecoratorBlock=function(e){var t="";return t+=this.pad(("DecoratorBlock"===e.type?"DIRECTIVE ":"")+"BLOCK:"),this.padding++,t+=this.pad(this.SubExpression(e)),e.program&&(t+=this.pad("PROGRAM:"),this.padding++,t+=this.accept(e.program),this.padding--),e.inverse&&(e.program&&this.padding++,t+=this.pad("{{^}}"),this.padding++,t+=this.accept(e.inverse),this.padding--,e.program&&this.padding--),this.padding--,t},l.prototype.PartialStatement=function(e){var t="PARTIAL:"+e.name.original;return e.params[0]&&(t+=" "+this.accept(e.params[0])),e.hash&&(t+=" "+this.accept(e.hash)),this.pad("{{> "+t+" }}")},l.prototype.PartialBlockStatement=function(e){var t="PARTIAL BLOCK:"+e.name.original;return e.params[0]&&(t+=" "+this.accept(e.params[0])),e.hash&&(t+=" "+this.accept(e.hash)),t+=" "+this.pad("PROGRAM:"),this.padding++,t+=this.accept(e.program),this.padding--,this.pad("{{> "+t+" }}")},l.prototype.ContentStatement=function(e){return this.pad("CONTENT[ '"+e.value+"' ]")},l.prototype.CommentStatement=function(e){return this.pad("{{! '"+e.value+"' }}")},l.prototype.SubExpression=function(e){for(var t,n=e.params,i=[],o=0,s=n.length;o<s;o++)i.push(this.accept(n[o]));return n="["+i.join(", ")+"]",t=e.hash?" "+this.accept(e.hash):"",this.accept(e.path)+" "+n+t},l.prototype.PathExpression=function(e){var t=e.parts.join("/");return(e.data?"@":"")+"PATH:"+t},l.prototype.StringLiteral=function(e){return'"'+e.value+'"'},l.prototype.NumberLiteral=function(e){return"NUMBER{"+e.value+"}"},l.prototype.BooleanLiteral=function(e){return"BOOLEAN{"+e.value+"}"},l.prototype.UndefinedLiteral=function(){return"UNDEFINED"},l.prototype.NullLiteral=function(){return"NULL"},l.prototype.Hash=function(e){for(var t=e.pairs,n=[],i=0,o=t.length;i<o;i++)n.push(this.accept(t[i]));return"HASH{"+n.join(", ")+"}"},l.prototype.HashPair=function(e){return e.key+"="+this.accept(e.value)}},{"./visitor":232}],232:[function(e,t,n){"use strict";n.__esModule=!0;var i,o=e("../exception"),s=(i=o)&&i.__esModule?i:{default:i};function l(){this.parents=[]}function r(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function a(e){r.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function d(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}l.prototype={constructor:l,mutating:!1,acceptKey:function(e,t){var n=this.accept(e[t]);if(this.mutating){if(n&&!l.prototype[n.type])throw new s.default('Unexpected node type "'+n.type+'" found when accepting '+t+" on "+e.type);e[t]=n}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new s.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,n=e.length;t<n;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,n--)},accept:function(e){if(e){if(!this[e.type])throw new s.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:r,Decorator:r,BlockStatement:a,DecoratorBlock:a,PartialStatement:d,PartialBlockStatement:function(e){d.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:r,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},n.default=l,t.exports=n.default},{"../exception":236}],233:[function(e,t,n){"use strict";n.__esModule=!0;var i,o=e("./visitor"),s=(i=o)&&i.__esModule?i:{default:i};function l(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function p(e,t,n){void 0===t&&(t=e.length);var i=e[t-1],o=e[t-2];return i?"ContentStatement"===i.type?(o||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(i.original):void 0:n}function m(e,t,n){void 0===t&&(t=-1);var i=e[t+1],o=e[t+2];return i?"ContentStatement"===i.type?(o||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(i.original):void 0:n}function f(e,t,n){var i=e[null==t?0:t+1];if(i&&"ContentStatement"===i.type&&(n||!i.rightStripped)){var o=i.value;i.value=i.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),i.rightStripped=i.value!==o}}function g(e,t,n){var i=e[null==t?e.length-1:t-1];if(i&&"ContentStatement"===i.type&&(n||!i.leftStripped)){var o=i.value;return i.value=i.value.replace(n?/\s+$/:/[ \t]+$/,""),i.leftStripped=i.value!==o,i.leftStripped}}(l.prototype=new s.default).Program=function(e){var t=!this.options.ignoreStandalone,n=!this.isRootSeen;this.isRootSeen=!0;for(var i=e.body,o=0,s=i.length;o<s;o++){var l=i[o],r=this.accept(l);if(r){var a=p(i,o,n),d=m(i,o,n),u=r.openStandalone&&a,c=r.closeStandalone&&d,h=r.inlineStandalone&&a&&d;r.close&&f(i,o,!0),r.open&&g(i,o,!0),t&&h&&(f(i,o),g(i,o)&&"PartialStatement"===l.type&&(l.indent=/([ \t]+$)/.exec(i[o-1].original)[1])),t&&u&&(f((l.program||l.inverse).body),g(i,o)),t&&c&&(f(i,o),g((l.inverse||l.program).body))}}return e},l.prototype.BlockStatement=l.prototype.DecoratorBlock=l.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,n=e.program&&e.inverse,i=n,o=n;if(n&&n.chained)for(i=n.body[0].program;o.chained;)o=o.body[o.body.length-1].program;var s={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:m(t.body),closeStandalone:p((i||t).body)};if(e.openStrip.close&&f(t.body,null,!0),n){var l=e.inverseStrip;l.open&&g(t.body,null,!0),l.close&&f(i.body,null,!0),e.closeStrip.open&&g(o.body,null,!0),!this.options.ignoreStandalone&&p(t.body)&&m(i.body)&&(g(t.body),f(i.body))}else e.closeStrip.open&&g(t.body,null,!0);return s},l.prototype.Decorator=l.prototype.MustacheStatement=function(e){return e.strip},l.prototype.PartialStatement=l.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},n.default=l,t.exports=n.default},{"./visitor":232}],234:[function(e,t,n){"use strict";n.__esModule=!0,n.registerDefaultDecorators=function(e){s.default(e)};var i,o=e("./decorators/inline"),s=(i=o)&&i.__esModule?i:{default:i}},{"./decorators/inline":235}],235:[function(e,t,n){"use strict";n.__esModule=!0;var r=e("../utils");n.default=function(e){e.registerDecorator("inline",function(o,s,l,e){var t=o;return s.partials||(s.partials={},t=function(e,t){var n=l.partials;l.partials=r.extend({},n,s.partials);var i=o(e,t);return l.partials=n,i}),s.partials[e.args[0]]=e.fn,t})},t.exports=n.default},{"../utils":252}],236:[function(e,t,n){"use strict";n.__esModule=!0;var d=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function u(e,t){var n=t&&t.loc,i=void 0,o=void 0,s=void 0,l=void 0;n&&(i=n.start.line,o=n.end.line,s=n.start.column,l=n.end.column,e+=" - "+i+":"+s);for(var r=Error.prototype.constructor.call(this,e),a=0;a<d.length;a++)this[d[a]]=r[d[a]];Error.captureStackTrace&&Error.captureStackTrace(this,u);try{n&&(this.lineNumber=i,this.endLineNumber=o,Object.defineProperty?(Object.defineProperty(this,"column",{value:s,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:l,enumerable:!0})):(this.column=s,this.endColumn=l))}catch(e){}}u.prototype=new Error,n.default=u,t.exports=n.default},{}],237:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0,n.registerDefaultHelpers=function(e){o.default(e),s.default(e),l.default(e),r.default(e),a.default(e),d.default(e),u.default(e)},n.moveHelperToHooks=function(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])};var o=i(e("./helpers/block-helper-missing")),s=i(e("./helpers/each")),l=i(e("./helpers/helper-missing")),r=i(e("./helpers/if")),a=i(e("./helpers/log")),d=i(e("./helpers/lookup")),u=i(e("./helpers/with"))},{"./helpers/block-helper-missing":238,"./helpers/each":239,"./helpers/helper-missing":240,"./helpers/if":241,"./helpers/log":242,"./helpers/lookup":243,"./helpers/with":244}],238:[function(e,t,n){"use strict";n.__esModule=!0;var l=e("../utils");n.default=function(s){s.registerHelper("blockHelperMissing",function(e,t){var n=t.inverse,i=t.fn;if(!0===e)return i(this);if(!1===e||null==e)return n(this);if(l.isArray(e))return 0<e.length?(t.ids&&(t.ids=[t.name]),s.helpers.each(e,t)):n(this);if(t.data&&t.ids){var o=l.createFrame(t.data);o.contextPath=l.appendContextPath(t.data.contextPath,t.name),t={data:o}}return i(e,t)})},t.exports=n.default},{"../utils":252}],239:[function(e,t,n){"use strict";n.__esModule=!0;var i,m=e("../utils"),o=e("../exception"),f=(i=o)&&i.__esModule?i:{default:i};n.default=function(e){e.registerHelper("each",function(i,e){if(!e)throw new f.default("Must pass iterator to #each");var t,o=e.fn,n=e.inverse,s=0,l="",r=void 0,a=void 0;function d(e,t,n){r&&(r.key=e,r.index=t,r.first=0===t,r.last=!!n,a&&(r.contextPath=a+e)),l+=o(i[e],{data:r,blockParams:m.blockParams([i[e],e],[a+e,null])})}if(e.data&&e.ids&&(a=m.appendContextPath(e.data.contextPath,e.ids[0])+"."),m.isFunction(i)&&(i=i.call(this)),e.data&&(r=m.createFrame(e.data)),i&&"object"==typeof i)if(m.isArray(i))for(var u=i.length;s<u;s++)s in i&&d(s,s,s===i.length-1);else if(global.Symbol&&i[global.Symbol.iterator]){for(var c=[],h=i[global.Symbol.iterator](),p=h.next();!p.done;p=h.next())c.push(p.value);for(u=(i=c).length;s<u;s++)d(s,s,s===i.length-1)}else t=void 0,Object.keys(i).forEach(function(e){void 0!==t&&d(t,s-1),t=e,s++}),void 0!==t&&d(t,s-1,!0);return 0===s&&(l=n(this)),l})},t.exports=n.default},{"../exception":236,"../utils":252}],240:[function(e,t,n){"use strict";n.__esModule=!0;var i,o=e("../exception"),s=(i=o)&&i.__esModule?i:{default:i};n.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new s.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=n.default},{"../exception":236}],241:[function(e,t,n){"use strict";n.__esModule=!0;var i,o=e("../utils"),s=e("../exception"),l=(i=s)&&i.__esModule?i:{default:i};n.default=function(n){n.registerHelper("if",function(e,t){if(2!=arguments.length)throw new l.default("#if requires exactly one argument");return o.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)}),n.registerHelper("unless",function(e,t){if(2!=arguments.length)throw new l.default("#unless requires exactly one argument");return n.helpers.if.call(this,e,{fn:t.inverse,inverse:t.fn,hash:t.hash})})},t.exports=n.default},{"../exception":236,"../utils":252}],242:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(o){o.registerHelper("log",function(){for(var e=[void 0],t=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)e.push(arguments[n]);var i=1;null!=t.hash.level?i=t.hash.level:t.data&&null!=t.data.level&&(i=t.data.level),e[0]=i,o.log.apply(o,e)})},t.exports=n.default},{}],243:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){e.registerHelper("lookup",function(e,t,n){return e?n.lookupProperty(e,t):e})},t.exports=n.default},{}],244:[function(e,t,n){"use strict";n.__esModule=!0;var i,o=e("../utils"),s=e("../exception"),l=(i=s)&&i.__esModule?i:{default:i};n.default=function(e){e.registerHelper("with",function(e,t){if(2!=arguments.length)throw new l.default("#with requires exactly one argument");o.isFunction(e)&&(e=e.call(this));var n=t.fn;if(o.isEmpty(e))return t.inverse(this);var i=t.data;return t.data&&t.ids&&((i=o.createFrame(t.data)).contextPath=o.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:i,blockParams:o.blockParams([e],[i&&i.contextPath])})})},t.exports=n.default},{"../exception":236,"../utils":252}],245:[function(e,t,n){"use strict";n.__esModule=!0,n.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.extend.apply(void 0,[Object.create(null)].concat(t))};var i=e("../utils")},{"../utils":252}],246:[function(e,t,n){"use strict";n.__esModule=!0,n.createProtoAccessControl=function(e){var t=Object.create(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var n=Object.create(null);return n.__proto__=!1,{properties:{whitelist:i.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:i.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},n.resultIsAllowed=function(e,t,n){return l("function"==typeof e?t.methods:t.properties,n)},n.resetLoggedProperties=function(){Object.keys(s).forEach(function(e){delete s[e]})};var i=e("./create-new-lookup-object"),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../logger")),s=Object.create(null);function l(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(!0!==s[n=t]&&(s[n]=!0,o.log("error",'Handlebars: Access has been denied to resolve the property "'+n+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details')),!1);var n}},{"../logger":248,"./create-new-lookup-object":245}],247:[function(e,t,n){"use strict";n.__esModule=!0,n.wrapHelper=function(t,n){return"function"==typeof t?function(){var e=arguments[arguments.length-1];return arguments[arguments.length-1]=n(e),t.apply(this,arguments)}:t}},{}],248:[function(e,t,n){"use strict";n.__esModule=!0;var i=e("./utils"),s={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=i.indexOf(s.methodMap,e.toLowerCase());e=0<=t?t:parseInt(e,10)}return e},log:function(e){if(e=s.lookupLevel(e),"undefined"!=typeof console&&s.lookupLevel(s.level)<=e){var t=s.methodMap[e];console[t]||(t="log");for(var n=arguments.length,i=Array(1<n?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];console[t].apply(console,i)}}};n.default=s,t.exports=n.default},{"./utils":252}],249:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){var t="undefined"!=typeof global?global:window,n=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=n),e}},t.exports=n.default},{}],250:[function(e,t,n){"use strict";n.__esModule=!0,n.checkRevision=function(e){var t=e&&e[0]||1,n=h.COMPILER_REVISION;if(t>=h.LAST_COMPATIBLE_COMPILER_REVISION&&t<=h.COMPILER_REVISION)return;{if(t<h.LAST_COMPATIBLE_COMPILER_REVISION){var i=h.REVISION_CHANGES[n],o=h.REVISION_CHANGES[t];throw new c.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+o+").")}throw new c.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},n.template=function(a,d){if(!d)throw new c.default("No environment passed to template");if(!a||!a.main)throw new c.default("Unknown template object: "+typeof a);a.main.decorator=a.main_d,d.VM.checkRevision(a.compiler);var i=a.compiler&&7===a.compiler[0];var l={strict:function(e,t,n){if(!(e&&t in e))throw new c.default('"'+t+'" not defined in '+e,{loc:n});return l.lookupProperty(e,t)},lookupProperty:function(e,t){var n=e[t];return null==n?n:Object.prototype.hasOwnProperty.call(e,t)?n:f.resultIsAllowed(n,l.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,i=0;i<n;i++){var o=e[i]&&l.lookupProperty(e[i],t);if(null!=o)return e[i][t]}},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:u.escapeExpression,invokePartial:function(e,t,n){n.hash&&(t=u.extend({},t,n.hash),n.ids&&(n.ids[0]=!0));e=d.VM.resolvePartial.call(this,e,t,n);var i=u.extend({},n,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),o=d.VM.invokePartial.call(this,e,t,i);null==o&&d.compile&&(n.partials[n.name]=d.compile(e,a.compilerOptions,d),o=n.partials[n.name](t,i));{if(null==o)throw new c.default("The partial "+n.name+" could not be compiled when running in runtime-only mode");if(n.indent){for(var s=o.split("\n"),l=0,r=s.length;l<r&&(s[l]||l+1!==r);l++)s[l]=n.indent+s[l];o=s.join("\n")}return o}},fn:function(e){var t=a[e];return t.decorator=a[e+"_d"],t},programs:[],program:function(e,t,n,i,o){var s=this.programs[e],l=this.fn(e);return t||o||i||n?s=g(this,e,l,t,n,i,o):s||(s=this.programs[e]=g(this,e,l)),s},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=u.extend({},t,e)),n},nullContext:Object.seal({}),noop:d.VM.noop,compilerInfo:a.compiler};function r(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=t.data;r._setup(t),!t.partial&&a.useData&&(n=function(e,t){t&&"root"in t||((t=t?h.createFrame(t):{}).root=e);return t}(e,n));var i=void 0,o=a.useBlockParams?[]:void 0;function s(e){return""+a.main(l,e,l.helpers,l.partials,n,o,i)}return a.useDepths&&(i=t.depths?e!=t.depths[0]?[e].concat(t.depths):t.depths:[e]),(s=b(a.main,s,l,t.depths||[],n,o))(e,t)}return r.isTop=!0,r._setup=function(e){if(e.partial)l.protoAccessControl=e.protoAccessControl,l.helpers=e.helpers,l.partials=e.partials,l.decorators=e.decorators,l.hooks=e.hooks;else{var t=u.extend({},d.helpers,e.helpers);o=t,s=l,Object.keys(o).forEach(function(e){var t,n,i=o[e];o[e]=(t=i,n=s.lookupProperty,m.wrapHelper(t,function(e){return u.extend({lookupProperty:n},e)}))}),l.helpers=t,a.usePartial&&(l.partials=l.mergeIfNeeded(e.partials,d.partials)),(a.usePartial||a.useDecorators)&&(l.decorators=u.extend({},d.decorators,e.decorators)),l.hooks={},l.protoAccessControl=f.createProtoAccessControl(e);var n=e.allowCallsToHelperMissing||i;p.moveHelperToHooks(l,"helperMissing",n),p.moveHelperToHooks(l,"blockHelperMissing",n)}var o,s},r._child=function(e,t,n,i){if(a.useBlockParams&&!n)throw new c.default("must pass block params");if(a.useDepths&&!i)throw new c.default("must pass parent depths");return g(l,e,a[e],t,0,n,i)},r},n.wrapProgram=g,n.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return e},n.invokePartial=function(e,t,i){var o=i.data&&i.data["partial-block"];i.partial=!0,i.ids&&(i.data.contextPath=i.ids[0]||i.data.contextPath);var s=void 0;i.fn&&i.fn!==l&&function(){i.data=h.createFrame(i.data);var n=i.fn;s=i.data["partial-block"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.data=h.createFrame(t.data),t.data["partial-block"]=o,n(e,t)},n.partials&&(i.partials=u.extend({},i.partials,n.partials))}();void 0===e&&s&&(e=s);{if(void 0===e)throw new c.default("The partial "+i.name+" could not be found");if(e instanceof Function)return e(t,i)}},n.noop=l;var i,u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./utils")),o=e("./exception"),c=(i=o)&&i.__esModule?i:{default:i},h=e("./base"),p=e("./helpers"),m=e("./internal/wrapHelper"),f=e("./internal/proto-access");function g(i,e,o,s,t,l,r){function n(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=r;return!r||e==r[0]||e===i.nullContext&&null===r[0]||(n=[e].concat(r)),o(i,e,i.helpers,i.partials,t.data||s,l&&[t.blockParams].concat(l),n)}return(n=b(o,n,i,r,s,l)).program=e,n.depth=r?r.length:0,n.blockParams=t||0,n}function l(){return""}function b(e,t,n,i,o,s){if(e.decorator){var l={};t=e.decorator(t,l,n,i&&i[0],o,s,i),u.extend(t,l)}return t}},{"./base":223,"./exception":236,"./helpers":237,"./internal/proto-access":246,"./internal/wrapHelper":247,"./utils":252}],251:[function(e,t,n){"use strict";function i(e){this.string=e}n.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},n.default=i,t.exports=n.default},{}],252:[function(e,t,n){"use strict";n.__esModule=!0,n.extend=r,n.indexOf=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},n.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return s.test(e)?e.replace(o,l):e},n.isEmpty=function(e){return!e&&0!==e||!(!u(e)||0!==e.length)},n.createFrame=function(e){var t=r({},e);return t._parent=e,t},n.blockParams=function(e,t){return e.path=t,e},n.appendContextPath=function(e,t){return(e?e+".":"")+t};var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},o=/[&<>"'`=]/g,s=/[&<>"'`=]/;function l(e){return i[e]}function r(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var a=Object.prototype.toString;n.toString=a;var d=function(e){return"function"==typeof e};d(/x/)&&(n.isFunction=d=function(e){return"function"==typeof e&&"[object Function]"===a.call(e)}),n.isFunction=d;var u=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===a.call(e)};n.isArray=u},{}],253:[function(i,e,t){var o=i("../dist/cjs/handlebars").default,n=i("../dist/cjs/handlebars/compiler/printer");function s(e,t){var n=i("fs").readFileSync(t,"utf8");e.exports=o.compile(n)}o.PrintVisitor=n.PrintVisitor,o.print=n.print,e.exports=o,void 0!==i&&i.extensions&&(i.extensions[".handlebars"]=s,i.extensions[".hbs"]=s)},{"../dist/cjs/handlebars":221,"../dist/cjs/handlebars/compiler/printer":231,fs:220}],254:[function(e,t,n){var s=e("./util"),l=Object.prototype.hasOwnProperty,r="undefined"!=typeof Map;function a(){this._array=[],this._set=r?new Map:Object.create(null)}a.fromArray=function(e,t){for(var n=new a,i=0,o=e.length;i<o;i++)n.add(e[i],t);return n},a.prototype.size=function(){return r?this._set.size:Object.getOwnPropertyNames(this._set).length},a.prototype.add=function(e,t){var n=r?e:s.toSetString(e),i=r?this.has(e):l.call(this._set,n),o=this._array.length;i&&!t||this._array.push(e),i||(r?this._set.set(e,o):this._set[n]=o)},a.prototype.has=function(e){if(r)return this._set.has(e);var t=s.toSetString(e);return l.call(this._set,t)},a.prototype.indexOf=function(e){if(r){var t=this._set.get(e);if(0<=t)return t}else{var n=s.toSetString(e);if(l.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},a.prototype.at=function(e){if(0<=e&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},a.prototype.toArray=function(){return this._array.slice()},n.ArraySet=a},{"./util":263}],255:[function(e,t,n){var u=e("./base64");n.encode=function(e){for(var t,n,i="",o=(n=e)<0?1+(-n<<1):0+(n<<1);t=31&o,0<(o>>>=5)&&(t|=32),i+=u.encode(t),0<o;);return i},n.decode=function(e,t,n){var i,o,s,l,r=e.length,a=0,d=0;do{if(r<=t)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(o=u.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));i=!!(32&o),a+=(o&=31)<<d,d+=5}while(i);n.value=(l=(s=a)>>1,1==(1&s)?-l:l),n.rest=t}},{"./base64":256}],256:[function(e,t,n){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");n.encode=function(e){if(0<=e&&e<i.length)return i[e];throw new TypeError("Must be between 0 and 63: "+e)},n.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},{}],257:[function(e,t,d){d.GREATEST_LOWER_BOUND=1,d.LEAST_UPPER_BOUND=2,d.search=function(e,t,n,i){if(0===t.length)return-1;var o=function e(t,n,i,o,s,l){var r=Math.floor((n-t)/2)+t,a=s(i,o[r],!0);return 0===a?r:0<a?1<n-r?e(r,n,i,o,s,l):l==d.LEAST_UPPER_BOUND?n<o.length?n:-1:r:1<r-t?e(t,r,i,o,s,l):l==d.LEAST_UPPER_BOUND?r:t<0?-1:t}(-1,t.length,e,t,n,i||d.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;0<=o-1&&0===n(t[o],t[o-1],!0);)--o;return o}},{}],258:[function(e,t,n){var r=e("./util");function i(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}i.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},i.prototype.add=function(e){var t,n,i,o,s,l;t=this._last,n=e,i=t.generatedLine,o=n.generatedLine,s=t.generatedColumn,l=n.generatedColumn,i<o||o==i&&s<=l||r.compareByGeneratedPositionsInflated(t,n)<=0?this._last=e:this._sorted=!1,this._array.push(e)},i.prototype.toArray=function(){return this._sorted||(this._array.sort(r.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},n.MappingList=i},{"./util":263}],259:[function(e,t,n){function u(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function c(e,t,n,i){if(n<i){var o=n-1;u(e,(a=n,d=i,Math.round(a+Math.random()*(d-a))),i);for(var s=e[i],l=n;l<i;l++)t(e[l],s)<=0&&u(e,o+=1,l);u(e,o+1,l);var r=o+1;c(e,t,n,r-1),c(e,t,r+1,i)}var a,d}n.quickSort=function(e,t){c(e,t,0,e.length-1)}},{}],260:[function(e,t,n){var k=e("./util"),a=e("./binary-search"),h=e("./array-set").ArraySet,y=e("./base64-vlq"),w=e("./quick-sort").quickSort;function l(e,t){var n=e;return"string"==typeof e&&(n=k.parseSourceMapInput(e)),null!=n.sections?new i(n,t):new p(n,t)}function p(e,t){var n=e;"string"==typeof e&&(n=k.parseSourceMapInput(e));var i=k.getArg(n,"version"),o=k.getArg(n,"sources"),s=k.getArg(n,"names",[]),l=k.getArg(n,"sourceRoot",null),r=k.getArg(n,"sourcesContent",null),a=k.getArg(n,"mappings"),d=k.getArg(n,"file",null);if(i!=this._version)throw new Error("Unsupported version: "+i);l&&(l=k.normalize(l)),o=o.map(String).map(k.normalize).map(function(e){return l&&k.isAbsolute(l)&&k.isAbsolute(e)?k.relative(l,e):e}),this._names=h.fromArray(s.map(String),!0),this._sources=h.fromArray(o,!0),this._absoluteSources=this._sources.toArray().map(function(e){return k.computeSourceURL(l,e,t)}),this.sourceRoot=l,this.sourcesContent=r,this._mappings=a,this._sourceMapURL=t,this.file=d}function x(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function i(e,o){var t=e;"string"==typeof e&&(t=k.parseSourceMapInput(e));var n=k.getArg(t,"version"),i=k.getArg(t,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new h,this._names=new h;var s={line:-1,column:0};this._sections=i.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=k.getArg(e,"offset"),n=k.getArg(t,"line"),i=k.getArg(t,"column");if(n<s.line||n===s.line&&i<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=t,{generatedOffset:{generatedLine:n+1,generatedColumn:i+1},consumer:new l(k.getArg(e,"map"),o)}})}l.fromSourceMap=function(e,t){return p.fromSourceMap(e,t)},l.prototype._version=3,l.prototype.__generatedMappings=null,Object.defineProperty(l.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),l.prototype.__originalMappings=null,Object.defineProperty(l.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),l.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return";"===n||","===n},l.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},l.GENERATED_ORDER=1,l.ORIGINAL_ORDER=2,l.GREATEST_LOWER_BOUND=1,l.LEAST_UPPER_BOUND=2,l.prototype.eachMapping=function(e,t,n){var i,o=t||null;switch(n||l.GENERATED_ORDER){case l.GENERATED_ORDER:i=this._generatedMappings;break;case l.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;i.map(function(e){var t=null===e.source?null:this._sources.at(e.source);return{source:t=k.computeSourceURL(s,t,this._sourceMapURL),generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,o)},l.prototype.allGeneratedPositionsFor=function(e){var t=k.getArg(e,"line"),n={source:k.getArg(e,"source"),originalLine:t,originalColumn:k.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",k.compareByOriginalPositions,a.LEAST_UPPER_BOUND);if(0<=o){var s=this._originalMappings[o];if(void 0===e.column)for(var l=s.originalLine;s&&s.originalLine===l;)i.push({line:k.getArg(s,"generatedLine",null),column:k.getArg(s,"generatedColumn",null),lastColumn:k.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o];else for(var r=s.originalColumn;s&&s.originalLine===t&&s.originalColumn==r;)i.push({line:k.getArg(s,"generatedLine",null),column:k.getArg(s,"generatedColumn",null),lastColumn:k.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o]}return i},n.SourceMapConsumer=l,(p.prototype=Object.create(l.prototype)).consumer=l,p.prototype._findSourceIndex=function(e){var t,n=e;if(null!=this.sourceRoot&&(n=k.relative(this.sourceRoot,n)),this._sources.has(n))return this._sources.indexOf(n);for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==e)return t;return-1},p.fromSourceMap=function(e,t){var n=Object.create(p.prototype),i=n._names=h.fromArray(e._names.toArray(),!0),o=n._sources=h.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=t,n._absoluteSources=n._sources.toArray().map(function(e){return k.computeSourceURL(n.sourceRoot,e,t)});for(var s=e._mappings.toArray().slice(),l=n.__generatedMappings=[],r=n.__originalMappings=[],a=0,d=s.length;a<d;a++){var u=s[a],c=new x;c.generatedLine=u.generatedLine,c.generatedColumn=u.generatedColumn,u.source&&(c.source=o.indexOf(u.source),c.originalLine=u.originalLine,c.originalColumn=u.originalColumn,u.name&&(c.name=i.indexOf(u.name)),r.push(c)),l.push(c)}return w(n.__originalMappings,k.compareByOriginalPositions),n},p.prototype._version=3,Object.defineProperty(p.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),p.prototype._parseMappings=function(e,t){for(var n,i,o,s,l,r=1,a=0,d=0,u=0,c=0,h=0,p=e.length,m=0,f={},g={},b=[],v=[];m<p;)if(";"===e.charAt(m))r++,m++,a=0;else if(","===e.charAt(m))m++;else{for((n=new x).generatedLine=r,s=m;s<p&&!this._charIsMappingSeparator(e,s);s++);if(o=f[i=e.slice(m,s)])m+=i.length;else{for(o=[];m<s;)y.decode(e,m,g),l=g.value,m=g.rest,o.push(l);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");f[i]=o}n.generatedColumn=a+o[0],a=n.generatedColumn,1<o.length&&(n.source=c+o[1],c+=o[1],n.originalLine=d+o[2],d=n.originalLine,n.originalLine+=1,n.originalColumn=u+o[3],u=n.originalColumn,4<o.length&&(n.name=h+o[4],h+=o[4])),v.push(n),"number"==typeof n.originalLine&&b.push(n)}w(v,k.compareByGeneratedPositionsDeflated),this.__generatedMappings=v,w(b,k.compareByOriginalPositions),this.__originalMappings=b},p.prototype._findMapping=function(e,t,n,i,o,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return a.search(e,t,o,s)},p.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},p.prototype.originalPositionFor=function(e){var t={generatedLine:k.getArg(e,"line"),generatedColumn:k.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",k.compareByGeneratedPositionsDeflated,k.getArg(e,"bias",l.GREATEST_LOWER_BOUND));if(0<=n){var i=this._generatedMappings[n];if(i.generatedLine===t.generatedLine){var o=k.getArg(i,"source",null);null!==o&&(o=this._sources.at(o),o=k.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var s=k.getArg(i,"name",null);return null!==s&&(s=this._names.at(s)),{source:o,line:k.getArg(i,"originalLine",null),column:k.getArg(i,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},p.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))},p.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(0<=n)return this.sourcesContent[n];var i,o=e;if(null!=this.sourceRoot&&(o=k.relative(this.sourceRoot,o)),null!=this.sourceRoot&&(i=k.urlParse(this.sourceRoot))){var s=o.replace(/^file:\/\//,"");if("file"==i.scheme&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!i.path||"/"==i.path)&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(t)return null;throw new Error('"'+o+'" is not in the SourceMap.')},p.prototype.generatedPositionFor=function(e){var t=k.getArg(e,"source");if((t=this._findSourceIndex(t))<0)return{line:null,column:null,lastColumn:null};var n={source:t,originalLine:k.getArg(e,"line"),originalColumn:k.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",k.compareByOriginalPositions,k.getArg(e,"bias",l.GREATEST_LOWER_BOUND));if(0<=i){var o=this._originalMappings[i];if(o.source===n.source)return{line:k.getArg(o,"generatedLine",null),column:k.getArg(o,"generatedColumn",null),lastColumn:k.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},n.BasicSourceMapConsumer=p,(i.prototype=Object.create(l.prototype)).constructor=l,i.prototype._version=3,Object.defineProperty(i.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),i.prototype.originalPositionFor=function(e){var t={generatedLine:k.getArg(e,"line"),generatedColumn:k.getArg(e,"column")},n=a.search(t,this._sections,function(e,t){var n=e.generatedLine-t.generatedOffset.generatedLine;return n||e.generatedColumn-t.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:t.generatedLine-(i.generatedOffset.generatedLine-1),column:t.generatedColumn-(i.generatedOffset.generatedLine===t.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},i.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},i.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var i=this._sections[n].consumer.sourceContentFor(e,!0);if(i)return i}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},i.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var n=this._sections[t];if(-1!==n.consumer._findSourceIndex(k.getArg(e,"source"))){var i=n.consumer.generatedPositionFor(e);if(i)return{line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},i.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,s=0;s<o.length;s++){var l=o[s],r=i.consumer._sources.at(l.source);r=k.computeSourceURL(i.consumer.sourceRoot,r,this._sourceMapURL),this._sources.add(r),r=this._sources.indexOf(r);var a=null;l.name&&(a=i.consumer._names.at(l.name),this._names.add(a),a=this._names.indexOf(a));var d={source:r,generatedLine:l.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(i.generatedOffset.generatedLine===l.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:a};this.__generatedMappings.push(d),"number"==typeof d.originalLine&&this.__originalMappings.push(d)}w(this.__generatedMappings,k.compareByGeneratedPositionsDeflated),w(this.__originalMappings,k.compareByOriginalPositions)},n.IndexedSourceMapConsumer=i},{"./array-set":254,"./base64-vlq":255,"./binary-search":257,"./quick-sort":259,"./util":263}],261:[function(e,t,n){var m=e("./base64-vlq"),f=e("./util"),i=e("./array-set").ArraySet,o=e("./mapping-list").MappingList;function l(e){e||(e={}),this._file=f.getArg(e,"file",null),this._sourceRoot=f.getArg(e,"sourceRoot",null),this._skipValidation=f.getArg(e,"skipValidation",!1),this._sources=new i,this._names=new i,this._mappings=new o,this._sourcesContents=null}l.prototype._version=3,l.fromSourceMap=function(i){var o=i.sourceRoot,s=new l({file:i.file,sourceRoot:o});return i.eachMapping(function(e){var t={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(t.source=e.source,null!=o&&(t.source=f.relative(o,t.source)),t.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(t.name=e.name)),s.addMapping(t)}),i.sources.forEach(function(e){var t=e;null!==o&&(t=f.relative(o,e)),s._sources.has(t)||s._sources.add(t);var n=i.sourceContentFor(e);null!=n&&s.setSourceContent(e,n)}),s},l.prototype.addMapping=function(e){var t=f.getArg(e,"generated"),n=f.getArg(e,"original",null),i=f.getArg(e,"source",null),o=f.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,i,o),null!=i&&(i=String(i),this._sources.has(i)||this._sources.add(i)),null!=o&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:i,name:o})},l.prototype.setSourceContent=function(e,t){var n=e;null!=this._sourceRoot&&(n=f.relative(this._sourceRoot,n)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[f.toSetString(n)]=t):this._sourcesContents&&(delete this._sourcesContents[f.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},l.prototype.applySourceMap=function(o,e,s){var l=e;if(null==e){if(null==o.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');l=o.file}var r=this._sourceRoot;null!=r&&(l=f.relative(r,l));var a=new i,d=new i;this._mappings.unsortedForEach(function(e){if(e.source===l&&null!=e.originalLine){var t=o.originalPositionFor({line:e.originalLine,column:e.originalColumn});null!=t.source&&(e.source=t.source,null!=s&&(e.source=f.join(s,e.source)),null!=r&&(e.source=f.relative(r,e.source)),e.originalLine=t.line,e.originalColumn=t.column,null!=t.name&&(e.name=t.name))}var n=e.source;null==n||a.has(n)||a.add(n);var i=e.name;null==i||d.has(i)||d.add(i)},this),this._sources=a,this._names=d,o.sources.forEach(function(e){var t=o.sourceContentFor(e);null!=t&&(null!=s&&(e=f.join(s,e)),null!=r&&(e=f.relative(r,e)),this.setSourceContent(e,t))},this)},l.prototype._validateMapping=function(e,t,n,i){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&0<e.line&&0<=e.column)||t||n||i)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&0<e.line&&0<=e.column&&0<t.line&&0<=t.column&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:i}))},l.prototype._serializeMappings=function(){for(var e,t,n,i,o=0,s=1,l=0,r=0,a=0,d=0,u="",c=this._mappings.toArray(),h=0,p=c.length;h<p;h++){if(e="",(t=c[h]).generatedLine!==s)for(o=0;t.generatedLine!==s;)e+=";",s++;else if(0<h){if(!f.compareByGeneratedPositionsInflated(t,c[h-1]))continue;e+=","}e+=m.encode(t.generatedColumn-o),o=t.generatedColumn,null!=t.source&&(i=this._sources.indexOf(t.source),e+=m.encode(i-d),d=i,e+=m.encode(t.originalLine-1-r),r=t.originalLine-1,e+=m.encode(t.originalColumn-l),l=t.originalColumn,null!=t.name&&(n=this._names.indexOf(t.name),e+=m.encode(n-a),a=n)),u+=e}return u},l.prototype._generateSourcesContent=function(e,n){return e.map(function(e){if(!this._sourcesContents)return null;null!=n&&(e=f.relative(n,e));var t=f.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,t)?this._sourcesContents[t]:null},this)},l.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},l.prototype.toString=function(){return JSON.stringify(this.toJSON())},n.SourceMapGenerator=l},{"./array-set":254,"./base64-vlq":255,"./mapping-list":258,"./util":263}],262:[function(e,t,n){var i=e("./source-map-generator").SourceMapGenerator,h=e("./util"),p=/(\r?\n)/,s="$$$isSourceNode$$$";function m(e,t,n,i,o){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==o?null:o,this[s]=!0,null!=i&&this.add(i)}m.fromStringWithSourceMap=function(e,n,i){var o=new m,s=e.split(p),l=0,r=function(){return e()+(e()||"");function e(){return l<s.length?s[l++]:void 0}},a=1,d=0,u=null;return n.eachMapping(function(e){if(null!==u){if(!(a<e.generatedLine)){var t=(n=s[l]||"").substr(0,e.generatedColumn-d);return s[l]=n.substr(e.generatedColumn-d),d=e.generatedColumn,c(u,t),void(u=e)}c(u,r()),a++,d=0}for(;a<e.generatedLine;)o.add(r()),a++;if(d<e.generatedColumn){var n=s[l]||"";o.add(n.substr(0,e.generatedColumn)),s[l]=n.substr(e.generatedColumn),d=e.generatedColumn}u=e},this),l<s.length&&(u&&c(u,r()),o.add(s.splice(l).join(""))),n.sources.forEach(function(e){var t=n.sourceContentFor(e);null!=t&&(null!=i&&(e=h.join(i,e)),o.setSourceContent(e,t))}),o;function c(e,t){if(null===e||void 0===e.source)o.add(t);else{var n=i?h.join(i,e.source):e.source;o.add(new m(e.originalLine,e.originalColumn,n,t,e.name))}}},m.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},m.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;0<=t;t--)this.prepend(e[t]);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},m.prototype.walk=function(e){for(var t,n=0,i=this.children.length;n<i;n++)(t=this.children[n])[s]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},m.prototype.join=function(e){var t,n,i=this.children.length;if(0<i){for(t=[],n=0;n<i-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},m.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[s]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},m.prototype.setSourceContent=function(e,t){this.sourceContents[h.toSetString(e)]=t},m.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;t<n;t++)this.children[t][s]&&this.children[t].walkSourceContents(e);var i=Object.keys(this.sourceContents);for(t=0,n=i.length;t<n;t++)e(h.fromSetString(i[t]),this.sourceContents[i[t]])},m.prototype.toString=function(){var t="";return this.walk(function(e){t+=e}),t},m.prototype.toStringWithSourceMap=function(e){var o={code:"",line:1,column:0},s=new i(e),l=!1,r=null,a=null,d=null,u=null;return this.walk(function(e,t){o.code+=e,null!==t.source&&null!==t.line&&null!==t.column?(r===t.source&&a===t.line&&d===t.column&&u===t.name||s.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:o.line,column:o.column},name:t.name}),r=t.source,a=t.line,d=t.column,u=t.name,l=!0):l&&(s.addMapping({generated:{line:o.line,column:o.column}}),r=null,l=!1);for(var n=0,i=e.length;n<i;n++)10===e.charCodeAt(n)?(o.line++,o.column=0,n+1===i?(r=null,l=!1):l&&s.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:o.line,column:o.column},name:t.name})):o.column++}),this.walkSourceContents(function(e,t){s.setSourceContent(e,t)}),{code:o.code,map:s}},n.SourceNode=m},{"./source-map-generator":261,"./util":263}],263:[function(e,t,a){a.getArg=function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')};var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,s=/^data:.+\,.+$/;function d(e){var t=e.match(n);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function u(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function l(e){var t=e,n=d(e);if(n){if(!n.path)return e;t=n.path}for(var i,o=a.isAbsolute(t),s=t.split(/\/+/),l=0,r=s.length-1;0<=r;r--)"."===(i=s[r])?s.splice(r,1):".."===i?l++:0<l&&(""===i?(s.splice(r+1,l),l=0):(s.splice(r,2),l--));return""===(t=s.join("/"))&&(t=o?"/":"."),n?(n.path=t,u(n)):t}function r(e,t){""===e&&(e="."),""===t&&(t=".");var n=d(t),i=d(e);if(i&&(e=i.path||"/"),n&&!n.scheme)return i&&(n.scheme=i.scheme),u(n);if(n||t.match(s))return t;if(i&&!i.host&&!i.path)return i.host=t,u(i);var o="/"===t.charAt(0)?t:l(e.replace(/\/+$/,"")+"/"+t);return i?(i.path=o,u(i)):o}a.urlParse=d,a.urlGenerate=u,a.normalize=l,a.join=r,a.isAbsolute=function(e){return"/"===e.charAt(0)||n.test(e)},a.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var i=e.lastIndexOf("/");if(i<0)return t;if((e=e.slice(0,i)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)};var i=!("__proto__"in Object.create(null));function o(e){return e}function c(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var n=t-10;0<=n;n--)if(36!==e.charCodeAt(n))return!1;return!0}function h(e,t){return e===t?0:null===e?1:null===t?-1:t<e?1:-1}a.toSetString=i?o:function(e){return c(e)?"$"+e:e},a.fromSetString=i?o:function(e){return c(e)?e.slice(1):e},a.compareByOriginalPositions=function(e,t,n){var i=h(e.source,t.source);return 0!==i?i:0!=(i=e.originalLine-t.originalLine)?i:0!=(i=e.originalColumn-t.originalColumn)||n?i:0!=(i=e.generatedColumn-t.generatedColumn)?i:0!=(i=e.generatedLine-t.generatedLine)?i:h(e.name,t.name)},a.compareByGeneratedPositionsDeflated=function(e,t,n){var i=e.generatedLine-t.generatedLine;return 0!==i?i:0!=(i=e.generatedColumn-t.generatedColumn)||n?i:0!==(i=h(e.source,t.source))?i:0!=(i=e.originalLine-t.originalLine)?i:0!=(i=e.originalColumn-t.originalColumn)?i:h(e.name,t.name)},a.compareByGeneratedPositionsInflated=function(e,t){var n=e.generatedLine-t.generatedLine;return 0!==n?n:0!=(n=e.generatedColumn-t.generatedColumn)?n:0!==(n=h(e.source,t.source))?n:0!=(n=e.originalLine-t.originalLine)?n:0!=(n=e.originalColumn-t.originalColumn)?n:h(e.name,t.name)},a.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},a.computeSourceURL=function(e,t,n){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),n){var i=d(n);if(!i)throw new Error("sourceMapURL could not be parsed");if(i.path){var o=i.path.lastIndexOf("/");0<=o&&(i.path=i.path.substring(0,o+1))}t=r(u(i),t)}return l(t)}},{}],264:[function(e,t,n){n.SourceMapGenerator=e("./lib/source-map-generator").SourceMapGenerator,n.SourceMapConsumer=e("./lib/source-map-consumer").SourceMapConsumer,n.SourceNode=e("./lib/source-node").SourceNode},{"./lib/source-map-consumer":260,"./lib/source-map-generator":261,"./lib/source-node":262}],265:[function(e,t,n){t.exports=e("handlebars/runtime").default},{"handlebars/runtime":222}]},{},[1]);