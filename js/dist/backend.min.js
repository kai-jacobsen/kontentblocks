/*! kontentblocks 2013-10-11 */
var KB=KB||{};KB.AreasCollection=Backbone.Collection.extend({});var KB=KB||{};KB.ModulesCollection=Backbone.Collection.extend({});var KB=KB||{};KB.ModuleModel=Backbone.Model.extend({idAttribute:"instance_id"});var KB=KB||{};KB.ModuleView=Backbone.View.extend({initialize:function(){this.render()},events:{"click a.os-edit-block":"openVex",dblclick:"openVex","click .slider-controls":"openSlider"},render:function(){this.$el.append(KB.Templates.render("module-controls",{model:this.model.toJSON()}))},openVex:function(){target=this.model.get("editURL"),height=jQuery(window).height(),jQuery("#osframe").attr("src",target).attr("height",height-200),KB.openedModal=vex.open({content:jQuery("#onsite-modal").html(),contentClassName:"onsite",afterOpen:function(){jQuery(".nano").nanoScroller()}})},openSlider:function(){KB.OpenSlider&&KB.OpenSlider.destroy(),KB.OpenSlider=new KB.SliderView({tagName:"div",id:"slider-unique",className:"slider-controls-wrapper",model:this.model,parent:this})}});var KBK=KBK||{};KBK.App=function(){function a(){console.log(this),b()}function b(){_.each(KBK.Areas,function(a){console.log(a.modules),c.add(a.modules)})}var c=new KB.AreasCollection({model:KB.ModuleModel});return{Areas:c,init:a}}(jQuery),KBK.App.init();