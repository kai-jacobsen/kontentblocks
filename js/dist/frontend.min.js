/*! Kontentblocks ProdVersion 2021-11-26 08:11 */

!function s(r,l,a){function d(i,e){if(!l[i]){if(!r[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(c)return c(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var o=l[i]={exports:{}};r[i][0].call(o.exports,function(e){var t=r[i][1][e];return d(t||e)},o,o.exports,s,r,l,a)}return l[i].exports}for(var c="function"==typeof require&&require,e=0;e<a.length;e++)d(a[e]);return d}({1:[function(e,t,i){t.exports=Backbone.View.extend({tagName:"div",className:"",isValid:function(){return!0}})},{}],2:[function(e,t,i){t.exports=Backbone.View.extend({initialize:function(e){this.Controller=e.Controller,this.ContextsViews=this.setupContextsViews(),this.isVisible=!0,this.listenTo(this.Controller,"columns.rendered",this.columnActivated),this.listenTo(this.Controller,"columns.reset",this.reset)},setupContextsViews:function(){var o={},s=this,e=this.$(".kb-context-container");return _.each(e,function(e,t){var i=e.dataset.kbcontext,n=KB.Contexts.get(i);o[n.View.cid]=n.View,n.View.isVisible=!0,(n.View.ColumnView=s).listenTo(n.View,"context.activated",s.activateColumn)}),o},activateColumn:function(){this.trigger("column.activate",this)},columnActivated:function(e){e.cid!==this.cid?_.each(this.ContextsViews,function(e){e.renderProxy()}):_.each(this.ContextsViews,function(e){e.removeProxy()})},reset:function(){_.each(this.ContextsViews,function(e){e.removeProxy()})}})},{}],3:[function(e,t,i){var n=e("templates/backend/context-bar.hbs"),o=e("backend/Views/ContextUi/ContextUiView"),s=e("backend/Views/ContextUi/ContextColumnView"),r=e("backend/Views/ContextUi/controls/ResetControl"),l=e("backend/Views/ContextUi/controls/ColumnControl");t.exports=Backbone.View.extend({initialize:function(){var e=this;this.columns=this.setupColumns(),this.layoutBackup=this.createLayoutBackup(),this.cols=_.toArray(this.columns).length,this.render(),jQuery(window).resize(function(){e.resetLayout()})},setupColumns:function(){var i=this,e=this.$(".kb-context-col");return _.map(e,function(e){var t=new s({el:e,Controller:i});return i.listenTo(t,"column.activate",i.evalLayout),t})},render:function(){var e=jQuery(n({}));this.$el.before(e),this.BarView=new o({el:e}),this.setupMenuItems()},setupMenuItems:function(){var t=this;this.BarView.addItem(new r({model:this.model,parent:this})),_.each(this.columns,function(e){t.BarView.addItem(new l({model:t.model,parent:t,ColumnView:e}))})},createLayoutBackup:function(){var i={};return _.each(this.columns,function(e,t){i[t]=e.$el.attr("class")}),i},resetLayout:function(){var t=this;_.each(this.columns,function(e){e.isVisible||e.Control.switch(),e.$el.attr("class",t.layoutBackup[e.cid]),e.$el.width("")}),this.trigger("columns.reset")},evalLayout:function(t){var i=this.$el.width()-20*this.cols,n=this.findProportion(this.cols);if(i<1100)return!1;_.each(this.columns,function(e){e.cid===t.cid?e.$el.width(Math.floor(i*n.large)):e.$el.width(Math.floor(i*n.small))}),this.trigger("columns.rendered",t)},renderLayout:function(){var e=_.filter(this.columns,function(e){return e.isVisible}),t=e.length,i=this.$el.width()-20*t;_.each(e,function(e){e.$el.width(Math.floor(i*(100/t/100)))})},findProportion:function(e){switch(e){case 3:return{small:.1,large:.8};case 2:return{small:.3333,large:.6666};default:return{small:1,large:1}}}})},{"backend/Views/ContextUi/ContextColumnView":2,"backend/Views/ContextUi/ContextUiView":4,"backend/Views/ContextUi/controls/ColumnControl":5,"backend/Views/ContextUi/controls/ResetControl":6,"templates/backend/context-bar.hbs":164}],4:[function(e,t,i){var n=e("backend/Views/ModuleControls/ControlsView");t.exports=n.extend({initialize:function(){this.$menuList=jQuery(".kb-context-bar--actions",this.$el)}})},{"backend/Views/ModuleControls/ControlsView":8}],5:[function(e,t,i){var n=e("backend/Views/BaseControlView");t.exports=n.extend({initialize:function(e){this.options=e||{},this.Controller=e.parent,this.ColumnView=e.ColumnView,this.ColumnView.Control=this},className:"context-visibility",events:{click:"switch"},render:function(){this.$el.append('<span class="kb-button-small">'+this.ColumnView.$el.data("kbcolname")+"</span>")},isValid:function(){return!0},switch:function(){this.$el.toggleClass("kb-context-hidden"),this.ColumnView.$el.toggle(),this.ColumnView.isVisible=!this.ColumnView.isVisible,this.Controller.renderLayout()}})},{"backend/Views/BaseControlView":1}],6:[function(e,t,i){var n=e("backend/Views/BaseControlView");t.exports=n.extend({initialize:function(e){this.options=e||{},this.Controller=e.parent},className:"context-reset-layout",events:{click:"resetLayout"},render:function(){this.$el.append('<span class="kb-button-small">Reset</span>')},isValid:function(){return!0},resetLayout:function(){this.Controller.resetLayout()}})},{"backend/Views/BaseControlView":1}],7:[function(e,t,i){var n=e("templates/backend/fullscreen-inner.hbs"),o=e("common/TinyMCE"),s=e("common/UI");t.exports=Backbone.View.extend({className:"kb-fullscreen--holder",initialize:function(){return this.$parent=this.model.View.$el,this.$body=jQuery(".kb-module__body",this.$parent),this},events:{"click .kb-fullscreen-js-close":"close","change .kb-template-select":"viewfileChange"},viewfileChange:function(e){var t=this;this.model.View.viewfileChange(e),this.listenToOnce(this.model.View,"kb:backend::viewUpdated",function(){s.repaint(t.$body)})},open:function(){var e=this;e.model.View.open=!0,o.removeEditors(),this.$backdrop=jQuery('<div class="kb-fullscreen-backdrop"></div>').appendTo("body"),this.$fswrap=jQuery(n()).appendTo(this.$el),this.$el.width(.7*jQuery(window).width()),jQuery("#wpwrap").addClass("module-browser-open"),this.$body.detach().appendTo(this.$fswrap.find(".kb-fullscreen--inner")).show().addClass("kb-module--fullscreen"),jQuery(window).resize(function(){e.$fswrap.width(.7*jQuery(window).width())}),this.$el.appendTo("body"),o.restoreEditors(),this.trigger("open"),this.reposition();var t=jQuery(window).height();jQuery(".kb-nano",this.$el).height(t-100),jQuery(".kb-nano").nanoScroller({preventPageScrolling:!0,contentClass:"kb-nano-content"})},reposition:function(){var e=jQuery(window).scrollTop();this.$el.css("top",e+30+"px")},close:function(){o.removeEditors(),jQuery("#wpwrap").removeClass("module-browser-open"),this.$body.detach().appendTo(this.$parent),this.$backdrop.remove(),this.$fswrap.remove(),this.$el.detach(),jQuery(window).off("scroll",jQuery.proxy(this.reposition,this)),this.model.View.open=!1,setTimeout(function(){o.restoreEditors()},250),this.trigger("close")}})},{"common/TinyMCE":28,"common/UI":29,"templates/backend/fullscreen-inner.hbs":165}],8:[function(e,t,i){t.exports=Backbone.View.extend({id:"",$menuWrap:{},$menuList:{},initialize:function(e){this.parent=e.parent,this.$menuWrap=jQuery(".menu-wrap",this.$el),this.$menuWrap.append("<div class='module-actions'></div>"),this.$menuList=jQuery(".module-actions",this.$menuWrap)},addItem:function(e){if(this.controls=this.controls||{},e.isValid&&!0===e.isValid()){var t=jQuery('<div class="kb-controls-item"></div>').appendTo(this.$menuList).append(e.el);this.$menuList.append(t),e.render.call(e),this.controls[e.id]=e}},getView:function(e){return!!this.controls[e]&&this.controls[e]}})},{}],9:[function(e,t,i){var n=e("common/Ajax"),o=e("common/Config"),s=e("./ViewsList"),r=e("./Controls"),l=e("./FieldsList"),a=e("templates/backend/template-editor/wrap.hbs");t.exports=Backbone.View.extend({className:"kb-codemirror-overlay",currentView:null,initialize:function(e){this.viewfile=e.viewfile,this.moduleView=e.moduleView,this.$wrap=jQuery(a()).appendTo(this.$el),this.$sidebar=this.$(".kb-tpled--sidebar"),this.$content=this.$(".kb-tpled--content"),this.moduleModel=e.module,this.views=this.prepareViews(this.moduleModel.get("views")),this.open()},events:{"click .kb-tpled--close":"close"},open:function(){this.$backdrop=jQuery('<div class="kb-fullscreen-backdrop"></div>').appendTo("body"),jQuery("#wpwrap").addClass("module-browser-open"),this.$el.appendTo("body"),this.trigger("open"),this.editor=CodeMirror(document.getElementById("codemirror"),{mode:"twig",theme:"dracula",lineNumbers:!0,lineWrapping:!0,tabMode:"indent",indentUnit:4}),this.render()},close:function(){this.$backdrop.remove(),jQuery("#wpwrap").removeClass("module-browser-open"),this.$el.detach(),this.trigger("close")},render:function(){this.List=new s({$container:this.$("[data-views]"),views:this.views,controller:this}).render(),this.Controls=new r({$container:this.$("[data-controls]"),controller:this}).render(),this.Fields=new l({$container:this.$("[data-fields]"),controller:this}),this.load(this.List.getActiveView())},load:function(t){var i=this;this.currentView&&this.currentView.deselect(),n.send({viewfile:t.model.toJSON(),action:"getTemplateString",module:this.moduleModel.toJSON(),_ajax_nonce:o.getNonce("read")},function(e){i.editor.setValue(e.data.string),i.currentView=t,i.currentView.select(),i.Fields.setFields(e.data.fields).render()},this)},getCurrentView:function(){return this.currentView},prepareViews:function(e){return _.map(e,function(e){return e.selected=e.filename===this.moduleModel.get("viewfile")?'selected="selected"':"",e.isActive=e.filename===this.moduleModel.get("viewfile"),e},this)}})},{"./Controls":10,"./FieldsList":12,"./ViewsList":14,"common/Ajax":20,"common/Config":22,"templates/backend/template-editor/wrap.hbs":176}],10:[function(e,t,i){var n=e("backend/Views/TemplateEditor/controls/UpdateControl"),o=e("backend/Views/TemplateEditor/controls/CreateControl"),s=e("backend/Views/TemplateEditor/controls/DuplicateControl"),r=e("backend/Views/TemplateEditor/controls/FeedbackControl"),l=e("backend/Views/TemplateEditor/controls/DeleteControl");t.exports=Backbone.View.extend({tagName:"ul",className:"kb-tpl-editor-controls",initialize:function(e){this.$container=e.$container,this.controller=e.controller},render:function(){return this.$container.empty().append(this.$el),this.createControls(),this},createControls:function(){this.$el.append(new n({controller:this.controller,controls:this}).render()),this.$el.append(new o({controller:this.controller,controls:this}).render()),this.$el.append(new s({controller:this.controller,controls:this}).render()),this.$el.append(new l({controller:this.controller,controls:this}).render()),this.$el.append(new r({controller:this.controller,controls:this}).render())}})},{"backend/Views/TemplateEditor/controls/CreateControl":15,"backend/Views/TemplateEditor/controls/DeleteControl":16,"backend/Views/TemplateEditor/controls/DuplicateControl":17,"backend/Views/TemplateEditor/controls/FeedbackControl":18,"backend/Views/TemplateEditor/controls/UpdateControl":19}],11:[function(e,t,i){var n=e("templates/backend/template-editor/field-item.hbs");t.exports=Backbone.View.extend({tagName:"li",initialize:function(e){this.controller=e.controller,this.$list=e.$list},render:function(){console.log(this.model.toJSON()),this.$el.append(n({data:this.model.toJSON()})),this.$list.append(this.$el)}})},{"templates/backend/template-editor/field-item.hbs":174}],12:[function(e,t,i){var n=e("backend/Views/TemplateEditor/FieldItem");t.exports=Backbone.View.extend({tagName:"ul",initialize:function(e){this.$container=e.$container,this.controller=e.controller},render:function(){return this.$container.empty().append(this.$el),this.$el.empty(),_.each(this.fields,function(e){e.render()}),this},setFields:function(e){return this.fields=this.createViews(e),this},createViews:function(e){return _.map(e,function(e){return new n({controller:this.controller,$list:this.$el,model:new Backbone.Model(e)})},this)}})},{"backend/Views/TemplateEditor/FieldItem":11}],13:[function(e,t,i){var n=e("templates/backend/template-editor/list-item.hbs");t.exports=Backbone.View.extend({tagName:"li",initialize:function(e){this.controller=e.controller,this.$list=e.$list},events:{click:"loadView"},render:function(){this.$el.append(n({data:this.model.toJSON()})),this.$list.append(this.$el)},loadView:function(){this.controller.load(this)},select:function(){this.$el.addClass("kb-active-template")},deselect:function(){this.$el.removeClass("kb-active-template")}})},{"templates/backend/template-editor/list-item.hbs":175}],14:[function(e,t,i){var n=e("backend/Views/TemplateEditor/ListItem");t.exports=Backbone.View.extend({tagName:"ul",initialize:function(e){this.$container=e.$container,this.controller=e.controller,this.views=this.createViews(e.views)},render:function(){return this.$container.empty().append(this.$el),_.each(this.views,function(e){e.render()}),this},updateViews:function(e){var t=this.controller.prepareViews(e);this.views=this.createViews(t),this.$el.empty(),this.render(),this.controller.moduleView.ModuleStatusBar.getView("templates").render(t)},getActiveView:function(){return _.find(this.views,function(e){return e.model.get("isActive")})},createViews:function(e){return _.map(e,function(e){return new n({controller:this.controller,$list:this.$el,model:new Backbone.Model(e)})},this)}})},{"backend/Views/TemplateEditor/ListItem":13}],15:[function(e,t,i){var n=e("common/Ajax"),o=e("common/Config"),s=e("common/Notice");t.exports=Backbone.View.extend({tagName:"li",initialize:function(e){this.controller=e.controller,this.controls=e.controls},events:{click:"ask"},render:function(){return this.$el.html('<span class="dashicons dashicons-welcome-add-page"></span> Create new template')},ask:function(){var i;s.prompt("Template Name","Please provide a unique template name",".twig",function(e,t){i=t,this.create(i)},function(e,t){},this)},create:function(e){this.controller.getCurrentView();n.send({action:"createModuleViewTemplate",_ajax_nonce:o.getNonce("update"),module:this.controller.moduleModel.toJSON(),tplstring:"",filename:e},this.success,this)},success:function(e){!1!==e.success?(this.controller.List.updateViews(e.data.views),this.controller.trigger("broadcast",e.message)):s.notice(e.message,"error",8)}})},{"common/Ajax":20,"common/Config":22,"common/Notice":25}],16:[function(e,t,i){var n=e("common/Ajax"),o=e("common/Config"),s=e("common/Notice");t.exports=Backbone.View.extend({tagName:"li",initialize:function(e){this.controller=e.controller,this.controls=e.controls},events:{click:"ask"},render:function(){return this.$el.html('<span class="dashicons dashicons-trash"></span> Delete loaded template')},ask:function(){s.confirm("Template Name","Delete template?",function(e,t){this.delete()},function(e,t){},this)},delete:function(){var e=this.controller.getCurrentView();n.send({action:"deleteModuleViewTemplate",_ajax_nonce:o.getNonce("update"),module:this.controller.moduleModel.toJSON(),view:e.model.toJSON()},this.success,this)},success:function(e){if(!1===e.success)return s.notice(e.message,"error",8),void this.controller.trigger("broadcast",e.message);this.controller.List.updateViews(e.data.views),this.controller.trigger("broadcast",e.message)}})},{"common/Ajax":20,"common/Config":22,"common/Notice":25}],17:[function(e,t,i){var n=e("common/Ajax"),o=e("common/Config"),s=e("common/Notice");t.exports=Backbone.View.extend({tagName:"li",initialize:function(e){this.controller=e.controller,this.controls=e.controls},events:{click:"ask"},render:function(){return this.$el.html('<span class="dashicons dashicons-admin-page"></span> Copy')},ask:function(){var i;s.prompt("Template Name","Please provide a unique template name",".twig",function(e,t){i=t,this.create(i)},function(e,t){},this)},create:function(e){this.controller.getCurrentView();n.send({action:"createModuleViewTemplate",_ajax_nonce:o.getNonce("update"),module:this.controller.moduleModel.toJSON(),filename:e,tplstring:this.controller.editor.getValue()},this.success,this)},success:function(e){!1!==e.success?(this.controller.List.updateViews(e.data.views),this.controller.trigger("broadcast",e.message)):s.notice(e.message,"error",8)}})},{"common/Ajax":20,"common/Config":22,"common/Notice":25}],18:[function(e,t,i){e("common/Ajax"),e("common/Config"),e("common/Notice");t.exports=Backbone.View.extend({tagName:"li",className:"kb-tpled--notice",initialize:function(e){this.controller=e.controller,this.controls=e.controls,this.listenTo(this.controller,"broadcast",this.setMessage)},events:{click:"update"},render:function(){return this.$el.html('<span class="dashicons dashicons-warning"></span><div class="" data-message></div>')},setMessage:function(e){var t=this.$("[data-message]");t.hide().html(e).fadeIn(1500),setTimeout(function(){t.fadeOut(2e3)},5e3)}})},{"common/Ajax":20,"common/Config":22,"common/Notice":25}],19:[function(e,t,i){var n=e("common/Ajax"),o=e("common/Config"),s=e("common/Notice");t.exports=Backbone.View.extend({tagName:"li",initialize:function(e){this.controller=e.controller,this.controls=e.controls},events:{click:"update"},render:function(){return this.$el.html('<span class="dashicons dashicons-update"></span> Update')},update:function(){var e=this.controller.getCurrentView();n.send({action:"updateModuleViewTemplate",_ajax_nonce:o.getNonce("update"),view:e.model.toJSON(),tplstring:this.controller.editor.getValue(),module:this.controller.moduleModel.toJSON()},this.success,this)},success:function(e){!1===e.success&&(s.notice(e.message,"error",8),this.controller.trigger("broadcast",e.message)),this.controller.trigger("broadcast",e.message)}})},{"common/Ajax":20,"common/Config":22,"common/Notice":25}],20:[function(e,t,i){var l=e("common/Notice");t.exports={send:function(e,t,i,n){var o,s=n||{};o=e.postId?e.postId:!(!KB.Environment||!KB.Environment.postId)&&KB.Environment.postId;var r=_.extend({supplemental:e.supplemental||{},nonce:jQuery("#_kontentblocks_ajax_nonce").val(),post_id:o,postId:o,kbajax:!0},e);return jQuery("#publish").attr("disabled","disabled"),jQuery.ajax({url:ajaxurl,data:r,type:"POST",dataType:"json",success:function(e){e&&(i&&t?t.call(i,e,s):t&&t(e,s))},error:function(){l.notice("<p>Generic Ajax Error</p>","error")},complete:function(){jQuery("#publish").removeAttr("disabled")}})}}},{"common/Notice":25}],21:[function(e,t,i){e("common/Config");t.exports={blockLimit:function(e){var t=e.get("limit"),i=jQuery("#"+e.get("id")+" li.kb-module").length;return!(0!==t&&i===t)},userCan:function(e){return!0}}},{"common/Config":22}],22:[function(e,t,i){var n,o=(jQuery,n=KB.appData.config||{},{get:function(e){return e?n[e]?n[e]:null:n},getNonce:function(e){return-1!==_.indexOf(["update","create","delete","read"],e)?n.nonces[e]:(console.error("Invalid nonce requested in kb.cm.Config.js"),null)},isAdmin:function(){return!n.frontend},inDevMode:function(){return n.env.dev},getRootURL:function(){return n.env.rootUrl},getFieldJsUrl:function(){return n.env.fieldJsUrl},getHash:function(){return n.env.hash},getLayoutMode:function(){return n.layoutMode||"default-boxes"}});t.exports=o},{}],23:[function(e,t,i){var n=e("common/Utilities");t.exports={getString:function(e){return e&&KB&&KB.i18n?n.getIndex(KB.i18n,e):null}}},{"common/Utilities":30}],24:[function(e,t,i){var n=e("common/Config");Function.prototype.bind&&window.console&&"object"==typeof console.log&&["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.bind(console[e],console)},Function.prototype.call),Logger.useDefaults();var o=Logger.get("_K"),s=Logger.get("_KS");o.setLevel(o.INFO),s.setLevel(s.INFO),n.inDevMode()||o.setLevel(Logger.OFF),Logger.setHandler(function(e,t){if(KB.Menubar&&2===t.level.value&&"_KS"===t.name)e[0]&&KB.Menubar.StatusBar.setMsg(e[0]);else{var i=window.console,n=i.log;t.name&&(e[0]="["+t.name+"] "+e[0]),t.level===Logger.WARN&&i.warn?n=i.warn:t.level===Logger.ERROR&&i.error?n=i.error:t.level===Logger.INFO&&i.info&&(n=i.info),n.apply(i,e)}}),t.exports={Debug:o,User:s}},{"common/Config":22}],25:[function(e,t,i){"use strict";t.exports={notice:function(e,t,i){var n=i||3;window.alertify.notify(e,t,n)},confirm:function(e,t,i,n,o){var s=e||"Title";window.alertify.confirm(s,t,function(){i.call(o)},function(){n.call(o)})},prompt:function(e,t,i,n,o,s){var r=e||"Title";window.alertify.prompt(r,t,i,function(e,t){n.call(s,e,t)},function(e,t){o.call(s,e,t)})}}},{}],26:[function(e,t,i){t.exports={getFieldData:function(e,t,i,n){var o;return this._typeExists(e)&&(o=KB.payload.fieldData[e])[t]?_.isEmpty(n)?o[t][i]?o[t][i]:[]:o[t][n]&&o[t][n][i]?o[t][n][i]:[]:[]},_typeExists:function(e){return!_.isUndefined(KB.payload.fieldData[e])},getFieldArgs:function(e,t){return KB.payload.Fields&&KB.payload.Fields[e]?t&&KB.payload.Fields[e][t]?KB.payload.Fields[e][t]:KB.payload.Fields[e]:null},parseAdditionalJSON:function(e){var t;return t={Fields:[]},e&&e.Areas&&_.each(e.Areas,function(e){KB.ObjectProxy.add(KB.Areas.add(e))}),e&&e.Fields&&(t.Fields=KB.FieldControls.add(_.toArray(e.Fields))),t},getPayload:function(e){return KB&&KB.payload&&KB.payload[e]?KB.payload[e]:{}}}},{}],27:[function(e,t,i){function n(){this.items=[]}n.prototype.append=function(e){this.items.push(e)},n.prototype.prepend=function(e){this.items.unshift(e)},n.prototype.reset=function(){this.items=[]},n.prototype.length=function(){return this.items.length},n.prototype.hasItems=function(){return 0<this.items.length},n.prototype.first=function(){return 0<this.items.length?this.items.shift():null},n.prototype.last=function(){return 0<this.items.length?this.items.pop():null},t.exports=n},{}],28:[function(e,t,i){var d=e("common/Ajax"),c=e("common/Logger"),u=e("common/Config");t.exports={removeEditors:function(e){e||(e=jQuery("body")),jQuery(".wp-editor-area",e).each(function(){if("wp-content-wrap"===jQuery(this).attr("id")||"ghosteditor"===jQuery(this).attr("id")||"replycontent"===jQuery(this).attr("id"));else{var e=this.id;tinyMCE.execCommand("mceRemoveEditor",!0,e)}})},restoreEditors:function(e){e||(e=jQuery("body")),jQuery(".wp-editor-wrap",e).each(function(){var e=jQuery(this).find("textarea").attr("id"),t=jQuery(this).find("textarea");"ghosteditor"!==e&&"replycontent"!==e&&(t.val(switchEditors.wpautop(t.val())),tinyMCE.execCommand("mceAddEditor",!0,e),switchEditors.go(e,"tmce"))})},addEditor:function(e,t,i,n){if(!e)return c.Debug.error("No scope element ($el) provided"),!1;if(_.isUndefined(tinyMCEPreInit))return!1;var o=i||350,s=!!_.isUndefined(n);jQuery(".wp-editor-area",e).each(function(){var e=this.id;window.tinyMCE.get(e)&&tinyMCE.execCommand("mceRemoveEditor",null,e);var t=tinyMCEPreInit&&tinyMCEPreInit.mceInit&&tinyMCEPreInit.mceInit.ghosteditor?"ghosteditor":"content",i=_.clone(tinyMCEPreInit.mceInit[t]);i.elements=e,i.selector="#"+e,i.id=e,i.kblive=s,i.height=o,i.remove_linebreaks=!1,i.setup=function(e){e.on("init",function(){KB.Events.trigger("kb.tinymce.new-editor",e)}),e.on("change",function(){})},tinymce.init(i),tinyMCEPreInit.mceInit[e]||(tinyMCEPreInit.mceInit[e]=i);var n={buttons:"",disabled_buttons:"",id:e};window.quicktags(n)}),setTimeout(function(){jQuery(".wp-editor-wrap",e).removeClass("html-active").addClass("tmce-active"),window.QTags._buttonsInit()},1500)},remoteGetEditor:function(t,e,i,n,o,s,r){var l=o||KB.appData.config.post.ID;i=i||t.attr("id");if(!s)s=!1;var a=n||"";return d.send({action:"getRemoteEditor",editorId:i+"_ed",editorName:e,post_id:l,postId:l,editorContent:a,_ajax_nonce:u.getNonce("read"),args:{media_buttons:s}},function(e){e.success?(t.empty().append(e.data.html),this.addEditor(t,null,250,r)):c.Debug.info("Editor markup could not be retrieved from the server")},this)}}},{"common/Ajax":20,"common/Config":22,"common/Logger":24}],29:[function(e,t,i){var l=jQuery,a=e("common/Config"),n=e("common/Ajax"),d=e("common/TinyMCE"),c=e("common/Notice"),o=e("backend/Views/ContextUi/ContextRowGrid"),s={isSorting:!1,init:function(){var n=this,e=l("body");this.initTabs(),this.initSortable(),this.initSortableAreas(),this.initToggleBoxes(),this.flexContext(),this.flushLocalStorage(),this.initTipsy(),e.on("mousedown",".kb-field",function(e){activeField=this}),e.on("mousedown",".kb-module",function(e){activeBlock=this.id}),e.on("mouseenter","[data-kbfield]",function(){KB.currentFieldId=this.id}),e.on("mouseenter",".kb-area__list-item li",function(){KB.currentModuleId=this.id}),jQuery(document).ajaxComplete(function(e,t,i){n.metaBoxReorder(e,t,i,"restore")}),jQuery(document).ajaxSend(function(e,t,i){n.metaBoxReorder(e,t,i,"remove")})},flexContext:function(){jQuery(".kb-context-row").each(function(e,t){jQuery(t).data("KB.ContextRow",new o({el:t}))})},repaint:function(e){this.initTabs(e),this.initToggleBoxes(),d.addEditor(e)},initTabs:function(e){var t=e||jQuery("body"),i=l(".kb-field--tabs",t);l(window);i.tabs({activate:function(e,t){_.defer(function(){l(".kb-nano").nanoScroller({contentClass:"kb-nano-content"}),KB.Events.trigger("modal.recalibrate")})}}),i.each(function(){1===l(".ui-tabs-nav li",l(this)).length&&l(this).find(".ui-tabs-nav").css("display","none")});l("[data-kbfsubtabs]",t).tabs({activate:function(){KB.Events.trigger("modal.recalibrate")}})},initToggleBoxes:function(){l(".kb-togglebox-header").on("click",function(){l(this).next("div").slideToggle()}),l(".kb_fieldtoggles div:first-child").trigger("click")},initSortable:function(e){var n,o,t=e||jQuery("body"),i=this;function s(){var e,t=o.get("limit"),i=(e=o.get("id"),l("#"+e+" li.kb-module").length);return-1!==_.indexOf(o.get("assignedModules"),n.get("settings").class)&&(!(0!==t&&t<=i-1)||(c.notice("Not allowed here","error"),!1))}var r="parent";"default-tabs"===a.getLayoutMode()&&(r="#kb-contexts-tabs"),l(".kb-module-ui__sortable",t).sortable({placeholder:"ui-state-highlight",ghost:!0,connectWith:".kb-module-ui__sortable--connect",helper:"clone",handle:".kb-move",cancel:"li.disabled, li.cantsort",tolerance:"pointer",delay:150,revert:350,appendTo:r,start:function(e,t){i.isSorting=!0,l("body").addClass("kb-is-sorting"),n=KB.Modules.get(t.item.attr("id")),o=KB.currentArea,l(KB).trigger("kb:sortable::start"),l(".kb-open").toggleClass("kb-open"),l(".kb-module__body").hide(),o.View&&o.View.$el?d.removeEditors(o.View.$el):d.removeEditors(),l(document).trigger("kb_sortable_start",[e,t])},stop:function(e,t){i.isSorting=!1,l("body").removeClass("kb-is-sorting"),d.restoreEditors(),l(document).trigger("kb_sortable_stop",[e,t]),n.get("open")&&n.View.toggleBody(155)},over:function(e,t){o=KB.Areas.get(this.id)},receive:function(e,t){s()||(c.notice("Module not allowed in this area","error"),l(t.sender).sortable("cancel"))},update:function(e,t){if(!s())return!1;if(this!==t.item.parent("ul")[0]||t.sender){if(t.sender){if(t.item.parent("ul")[0].id===t.sender.attr("id"))return!1;l.when(i.changeArea(o,n)).then(function(e){if(!e.success)return!1;i.resort(t.sender)}).done(function(){i.triggerAreaChange(o,n),l(KB).trigger("kb:sortable::update"),n.View.clearFields(),c.notice("Area change and order were updated successfully","success")})}}else l.when(i.resort(t.sender)).done(function(e){if(!e.success)return c.notice(e.message,"error"),!1;l(KB).trigger("kb:sortable::update"),c.notice(e.message,"success")})}})},flushLocalStorage:function(){var e=a.get("env").hash;store.get("kbhash")!==e&&store.set("kbhash",e)},resort:function(e){var t={};return l(".kb-module-ui__sortable").each(function(){t[this.id]=l("#"+this.id).sortable("serialize",{attribute:"rel"})}),n.send({action:"resortModules",data:t,_ajax_nonce:a.getNonce("update")})},changeArea:function(e,t){return n.send({action:"changeArea",_ajax_nonce:a.getNonce("update"),mid:t.get("mid"),area_id:e.get("id"),context:e.get("context")})},triggerAreaChange:function(e,t){t.unsubscribeFromArea(),t.setArea(e)},toggleModule:function(){l("body").on("click",".kb-toggle",function(){KB.isLocked()&&!KB.userCan("lock_kontentblocks")?c.notice(kontentblocks.l18n.gen_no_permission,"alert"):(l(this).parent().nextAll(".kb-module__body:first").slideToggle("fast",function(){l("body").trigger("module::opened")}),l("#"+activeBlock).toggleClass("kb-open",1e3))})},initSortableAreas:function(){jQuery(".kb-context__inner").sortable({items:".kb-area__wrap",handle:".kb-area-move-handle",start:function(e,t){d.removeEditors()},stop:function(e,t){var i=jQuery("#post").serializeJSON().kbcontext;i&&n.send({action:"updateContextAreaOrder",_ajax_nonce:a.getNonce("update"),data:i},function(e){e.success?c.notice(e.message,"success"):c.notice(e.message,"error"),d.restoreEditors()},this)}})},initTipsy:function(){jQuery("body").on("mouseenter","[data-kbtooltip]",function(e){jQuery(this).qtip({content:{attr:"data-kbtooltip"},style:"qtip-dark qtip-shadow",show:{event:e.type,effect:!0,delay:180,solo:!0,ready:!0}})})},metaBoxReorder:function(e,t,i,n){if(i.data){var o=i.data;if(o&&o.split){var s=o.split("&"),r={};l.each(s,function(e,t){var i=t.split("=");r[i[0]]=i[1]}),"meta-box-order"===r.action&&("restore"===n?d.restoreEditors():"remove"===n&&d.removeEditors())}}}};t.exports=s},{"backend/Views/ContextUi/ContextRowGrid":3,"common/Ajax":20,"common/Config":22,"common/Notice":25,"common/TinyMCE":28}],30:[function(e,t,i){var n=(jQuery,{stex:{set:function(e,t,i){store.set(e,{val:t,exp:i,time:(new Date).getTime()})},get:function(e){var t=store.get(e);return t?(new Date).getTime()-t.time>t.exp?null:t.val:null}},store:{set:function(e,t){store.set(e,t)},get:function(e){return store.get(e)}},setIndex:function(e,t,i){return _.isObject(e)||(e={}),"string"==typeof t?this.setIndex(e,t.split("."),i):1==t.length&&void 0!==i?e[t[0]]=i:0==t.length?e:this.setIndex(e[t[0]],t.slice(1),i)},getIndex:function(e,t){for(var i=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".");i.length;){var n=i.shift();if(!(_.isObject(e)&&n in e))return{};e=e[n]}return e},hashString:function(e){var t,i,n=0;if(0==e)return n;for(t=0,i=e.length;t<i;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return Math.abs(n)},sleep:function(e){for(var t=(new Date).getTime(),i=0;i<1e7&&!((new Date).getTime()-t>e);i++);}});t.exports=n},{}],31:[function(e,t,i){t.exports=Backbone.View.extend({rerender:function(){this.render()},gone:function(){this.trigger("field.view.gone",this)},toString:function(){return""}})},{}],32:[function(e,t,i){var n=e("common/Checks"),l=e("common/Utilities"),a=e("common/Payload"),s=e("common/Config"),r=e("common/Logger");t.exports=Backbone.Model.extend({initialize:function(){this.cleanUp();var e=this.get("relId");e&&(this.ModuleModel=KB.ObjectProxy.get(e))&&this.getType()&&(this.set("ModuleModel",this.ModuleModel),this.setData(),this.bindHandlers(),this.setupType(),this.ModuleModel.attachField(this))},cleanUp:function(){var e=this.get("linkedFields")||{};e.hasOwnProperty(this.get("uid"))&&delete e[this.get("uid")]},bindHandlers:function(){this.listenTo(this,"field.model.settings",this.updateLinkedFields),this.listenTo(this.ModuleModel,"remove",this.remove),this.listenTo(this.ModuleModel,"change:entityData",this.setData),this.listenTo(this.ModuleModel,"module.model.updated",this.getClean),this.listenTo(this,"change:value",this.upstreamData),this.listenTo(this.ModuleModel,"modal.serialize.before",this.unbind),this.listenTo(this.ModuleModel,"modal.serialize",this.rebind),this.listenTo(this.ModuleModel,"change:area",this.unbind),this.listenTo(this.ModuleModel,"change:viewfile",this.unbind),this.listenTo(this.ModuleModel,"after.change.area",this.rebind)},setupType:function(){var e;(e=this.getType())&&(this.FieldControlView=new e({el:this.getElement(),model:this}))},updateLinkedFields:function(e){var t=this;e.linkedFields&&(this.set("linkedFields",e.linkedFields),this.cleanUp(),this.unbind(),_.defer(function(){t.rebind()}))},getElement:function(){return jQuery('*[data-kbfuid="'+this.get("uid")+'"]')[0]},getType:function(){var e=this.get("type");if(!n.userCan("edit_kontentblocks"))return!1;var t=KB.Fields.get(e);return!(!t||!t.prototype.hasOwnProperty("initialize"))&&t},getClean:function(){this.trigger("field.model.clean",this)},setData:function(e){var t,i,n,o,s,r={};t=e||this.get("ModuleModel"),(i=a.getPayload("fieldData"))[this.get("type")]&&(n=i[this.get("type")])[this.get("fieldId")]&&(o=n[this.get("fieldId")],r=l.getIndex(o,this.get("kpath"))),s=_.clone(l.getIndex(t.get("entityData"),this.get("kpath"))),this.set("value",_.extend(s,r))},upstreamData:function(){var e;if(e=this.get("ModuleModel")){var t=_.clone(this.get("ModuleModel").get("entityData"));l.setIndex(t,this.get("kpath"),this.get("value")),e.set("entityData",t,{silent:!1})}},externalUpdate:function(e){this.FieldControlView.synchronize(e)},remove:function(){this.stopListening(),KB.FieldControls.remove(this)},rebind:function(){var e=this;_.defer(function(){_.isUndefined(e.getElement())?_.defer(_.bind(e.FieldControlView.gone,e.FieldControlView)):e.FieldControlView&&(e.FieldControlView.setElement(e.getElement()),_.defer(_.bind(e.FieldControlView.rerender,e.FieldControlView)))},!0)},unbind:function(){this.FieldControlView&&this.FieldControlView.derender&&this.FieldControlView.derender()},sync:function(e){var t=this;KB.Events.trigger("field.before.sync",this.model);var i=t.toJSON(),n=i.ModuleModel.type,o=i.ModuleModel.toJSON();return delete i.ModuleModel,delete i.linkedFields,jQuery.ajax({url:ajaxurl,data:{action:"updateFieldModel",data:t.get("value"),field:i,module:o,type:n,_ajax_nonce:s.getNonce("update")},context:e||t,type:"POST",dataType:"json",success:function(e){t.trigger("field.model.updated",t)},error:function(){r.Debug.error("serialize | FrontendModal | Ajax error")}})},getEntityModel:function(){return!!this.ModuleModel&&this.ModuleModel}})},{"common/Checks":21,"common/Config":22,"common/Logger":24,"common/Payload":26,"common/Utilities":30}],33:[function(e,t,i){var n=e("./FieldControlModel");t.exports=n.extend({bindHandlers:function(){this.listenToOnce(this.ModuleModel,"remove",this.remove),this.listenTo(this.ModuleModel,"change:entityData",this.setData),this.listenTo(KB.Events,"modal.reload",this.rebind),this.listenTo(KB.Events,"modal.close",this.remove)},rebind:function(){this.FieldControlView&&(this.FieldControlView.setElement(this.getElement()),this.FieldControlView.rerender())},getElement:function(){return jQuery('*[data-kbfuid="'+this.get("uid")+'"]')}})},{"./FieldControlModel":32}],34:[function(e,t,i){var n=e("./FieldControlModel");t.exports=Backbone.Collection.extend({initialize:function(){this._byModule={},this._byArea={},this._linkedFields=[],this.listenTo(this,"add",this.addToModules),this.listenTo(this,"add",this.bindLinkedFields)},model:n,addToModules:function(e){if(e.ModuleModel){var t=e.ModuleModel.id;if(this._byModule[t]||(this._byModule[t]={}),e.ModuleModel.Area){var i=e.ModuleModel.Area.id;this._byArea[i]||(this._byArea[i]={}),this._byArea[i][e.id]=e}this._byModule[t][e.id]=e}},getFieldsforModule:function(e){return this._byModule[e]?this._byModule[e]:{}},bindLinkedFields:function(n){var o=n.get("linkedFields");_.each(o,function(e,t){if(_.isNull(e)){var i=this.get(t);i&&(o[t]=i,n.listenTo(i,"external.change",n.externalUpdate),this.bindLinkedFields(i))}},this)},updateModels:function(e){e&&_.each(e,function(e){var t=this.get(e.uid);t?t.trigger("field.model.settings",e):this.add(e)},this)}})},{"./FieldControlModel":32}],35:[function(e,t,i){var n={};e("common/Logger");_.extend(n,Backbone.Events),_.extend(n,{fields:{},registerObject:function(e,t){_.extend(t,Backbone.Events),this.fields[e]=t},get:function(e){return this.fields[e]?this.fields[e]:null}}),t.exports=n},{"common/Logger":24}],36:[function(e,t,i){t.exports=Backbone.View.extend({type:"",render:function(){this.setupElements(),this.bindHandlers(),this.initialSetup()},initialSetup:function(){var e=this.setupData();_.isArray(e)?(_.each(e,function(e,t){this.model.get("limit");this.createElement(e)},this),this.handleLimit()):this.createElement()},setupData:function(){return this.model.get("value")},createElement:function(e){var t=e||"",i=this,n=_.extend(this.model.toJSON(),{value:t,uniqueId:_.uniqueId("mdate"),arrayKey:this.model.get("arrayKey"),fieldkey:this.model.get("fieldkey"),primeKey:this.model.get("fieldkey"),fieldId:this.model.get("fieldId"),type:this.type}),o=KB.FieldsAPI.getRefByType(this.type,n);this.$list.append(o.render()),_.defer(function(){o.postRender&&o.postRender.call(o)}),o.$el.on("click",'[data-kbfaction="delete"]',function(){o.$el.off(),o.remove(),i.handleLimit(),i.handleEmptyList()}),this.handleLimit()},setupElements:function(){this.$list=this.$('[data-kfel="list"]'),this.$button=this.$('[data-kfui="add-entry"]'),this.$list.sortable()},bindHandlers:function(){var e=this;this.$button.on("click",function(){e.createElement()})},handleLimit:function(){var e=this.model.get("limit");e&&(e<=jQuery(".kb-field--"+this.type+"-item",this.$list).length?this.$button.hide():this.$button.show())},handleEmptyList:function(){0===jQuery(".kb-field--"+this.type+"-item",this.$list).length&&this.createElement("")}})},{}],37:[function(e,t,i){var n=e("./Fields");(window.KB.Fields=n).registerObject("color",e("./controls/color")),n.registerObject("datetime",e("./controls/datetime")),n.registerObject("file",e("./controls/file")),n.registerObject("file-multiple",e("./controls/file-multiple")),n.registerObject("flexfields",e("./controls/flexfields")),n.registerObject("gallery",e("./controls/gallery")),n.registerObject("gallery2",e("./controls/gallery2")),n.registerObject("gallery-ext",e("./controls/gallery-ext")),n.registerObject("image",e("./controls/image")),n.registerObject("cropimage",e("./controls/cropimage")),n.registerObject("link",e("./controls/link")),n.registerObject("textarea",e("./controls/textarea")),n.registerObject("code",e("./controls/code")),n.registerObject("text",e("./controls/text")),n.registerObject("checkbox",e("./controls/checkbox")),n.registerObject("text-multiple",e("./controls/text-multiple")),n.registerObject("multitext",e("./controls/text-multiple")),n.registerObject("date-multiple",e("./controls/date-multiple")),n.registerObject("tagsinput",e("./controls/tagsinput")),n.registerObject("multiselect",e("./controls/multiselect")),n.registerObject("select",e("./controls/select")),n.registerObject("editor",e("./controls/editor")),n.registerObject("otimes",e("./controls/otimes")),n.registerObject("oembed",e("./controls/oembed")),n.registerObject("subarea",e("./controls/subarea")),n.registerObject("medium",e("./controls/medium")),n.registerObject("imageselect",e("./controls/imageselect")),n.registerObject("osm",e("./controls/osm"))},{"./Fields":35,"./controls/checkbox":38,"./controls/code":39,"./controls/color":40,"./controls/cropimage":41,"./controls/date-multiple":42,"./controls/datetime":44,"./controls/editor":45,"./controls/file":48,"./controls/file-multiple":46,"./controls/flexfields":49,"./controls/gallery":58,"./controls/gallery-ext":55,"./controls/gallery2":61,"./controls/image":64,"./controls/imageselect":65,"./controls/link":66,"./controls/medium":67,"./controls/multiselect":68,"./controls/oembed":69,"./controls/osm":70,"./controls/otimes":71,"./controls/select":72,"./controls/subarea":73,"./controls/tagsinput":80,"./controls/text":83,"./controls/text-multiple":81,"./controls/textarea":84}],38:[function(e,t,i){var n=e("../FieldControlBaseView");t.exports=n.extend({initialize:function(){this.render()},render:function(){var e=this;this.$input=this.$(".kb-field--checkbox input"),this.$input.on("change",function(){e.update(e.$input.prop("checked"))})},derender:function(){this.$input.off()},update:function(e){this.model.set("value",e)},toString:function(){return this.$input.val()}})},{"../FieldControlBaseView":31}],39:[function(e,t,i){var n=e("../FieldControlBaseView");t.exports=n.extend({initialize:function(){this.defaults={mode:"htmlmixed",theme:"dracula",lineNumbers:!0,lineWrapping:!0,tabMode:"indent",indentUnit:4,autoCloseBrackets:!0,autoCloseTags:!0},this.settings=this.model.get("settings")||{},this.render()},render:function(){var t=this;this.$textarea=this.$("textarea"),this.editor=this.getEditor(),this.editor.on("change",function(e){e.save(),t.update(e.getTextArea().value)})},derender:function(){this.editor&&(this.editor.save(),this.editor.toTextArea()),this.editor=null,delete this.editor},getEditor:function(){if(this.editor)return this.editor;var e=_.extend(this.defaults,this.settings);return this.editor=CodeMirror.fromTextArea(this.$textarea.get(0),e),this.editor},update:function(e){this.model.set("value",e)},toString:function(){return this.editor?this.editor.getTextArea().value:this.$textarea.val()}})},{"../FieldControlBaseView":31}],40:[function(e,t,i){var n=e("../FieldControlBaseView");t.exports=n.extend({initialize:function(){this.render()},events:{"mouseup .kb-field--color":"recalibrate"},render:function(){this.$(".kb-color-picker").wpColorPicker({}),jQuery("body").on("click.wpcolorpicker",this.update)},derender:function(){jQuery("body").off("click.wpcolorpicker",this.update)},update:function(){},recalibrate:function(){_.delay(function(){KB.Events.trigger("modal.recalibrate")},150)}})},{"../FieldControlBaseView":31}],41:[function(e,t,i){var n=e("../FieldControlBaseView"),d=e("common/Utilities"),o=e("common/Config");t.exports=n.extend({initialize:function(){this.render()},events:{"click .kb-js-add-image":"openFrame","click .kb-js-reset-image":"resetImage"},render:function(){this.$reset=this.$(".kb-js-reset-image"),this.$container=this.$(".kb-field-image-container"),this.$saveId=this.$(".kb-js-image-id"),this.$description=this.$(".kb-js-image-description"),this.$title=this.$(".kb-js-image-title")},editImage:function(){this.openFrame(!0)},derender:function(){this.frame&&this.frame.dispose()},openFrame:function(e){var t,i=this;this.frame&&this.frame.dispose();var n={};void 0!==this.model.get("value").id&&(n.post__in=[this.model.get("value").id]),console.log(n),wp.media.query(n).more().done(function(){var e=this.first();i.attachment=e,e?(e.set("attachment_id",e.get("id")),i.attachment.toJSON()):{},t={cropOptions:{maxWidth:i.model.get("width")||300,maxHeight:i.model.get("height")||300},croppedCallback:i.handleAttachment,parentController:i,library:{type:"image",cache:!1}},!0===i.model.get("uploadedTo")&&(t.library.uploadedTo=KB.Environment.postId||0),i.frame=new wp.media.view.KBCropperFrame(t).on("update",function(e){i.update(e)}).on("close",function(e){i.frame.image&&i.frame.image.attachment&&(i.$description.val(i.frame.image.attachment.get("caption")),i.$title.val(i.frame.image.attachment.get("title")))}).on("ready",function(){i.ready()}).on("replace",function(){}).on("select",function(e){}).on("cropped",function(e){}).open()})},ready:function(){jQuery(".media-modal").addClass("smaller kb-image-frame")},replace:function(e){this.attachment=e,this.handleAttachment(e)},update:function(e){this.attachment.set(e),this.attachment.sync("update",this.attachment)},prepareArgs:function(){return{width:this.model.get("previewWidth")||null,height:this.model.get("previewHeight")||null,crop:!0,upscale:this.model.get("upscale")||!1}},handleAttachment:function(e){var t=e.get("id"),i=this.prepareValue(e),n=_.clone(this.model.get("ModuleModel").get("entityData")),o=this.model.get("kpath");d.setIndex(n,o,i),this.model.get("ModuleModel").set("entityData",n);var s=this.model.get("previewWidth"),r=this.model.get("previewHeight");if(s&&r){var l=this.prepareArgs();this.retrieveImage(l,t)}else{var a=e.get("sizes").full.url;this.$container.html('<img src="'+a+' " >')}this.$saveId.val(e.get("id")),this.$description.val(e.get("caption")),this.$title.val(e.get("title")),this.model.get("ModuleModel").trigger("data.updated",{silent:!0})},retrieveImage:function(e,t){var i=this;jQuery.ajax({url:ajaxurl,data:{action:"fieldGetImage",args:e,id:t,_ajax_nonce:o.getNonce("read")},type:"POST",dataType:"json",success:function(e){i.$container.html('<img src="'+e.data.src+'" >')},error:function(){}})},prepareValue:function(e){var t={id:e.get("id"),title:e.get("title"),caption:e.get("caption"),alt:e.get("alt")},i=this.model.get("value");return _.defaults(i,t)},resetImage:function(){this.$container.html(""),this.$saveId.val(""),this.model.set("value",{id:null,caption:"",title:""}),this.$description.val(""),this.$title.val("")},toString:function(){return this.attachment?"<img src='"+(this.attachment.get("sizes").thumbnail?this.attachment.get("sizes").thumbnail:this.attachment.get("sizes").full).url+"'>":""}})},{"../FieldControlBaseView":31,"common/Config":22,"common/Utilities":30}],42:[function(e,t,i){var n=e("../FieldControlBaseView"),o=e("fields/controls/date-multiple/DateMultipleController");t.exports=n.extend({initialize:function(){this.createController(),this.render()},render:function(){var e=this;this.$stage=this.$('[data-kftype="date-multiple"]'),this.DateMultipleController.setElement(this.$stage.get(0)),_.defer(function(){e.DateMultipleController.render()})},derender:function(){this.FlexFieldsController.derender()},rerender:function(){this.render()},createController:function(){if(!this.DateMultipleController)return this.DateMultipleController=new o({el:this.$('[data-kftype="date-multiple"]'),model:this.model,parentView:this})}})},{"../FieldControlBaseView":31,"fields/controls/date-multiple/DateMultipleController":43}],43:[function(e,t,i){var n=e("fields/MultipleControllerBase");t.exports=n.extend({type:"date-multiple",setupData:function(){var e=this.model.get("value");return e.sort(function(e,t){return e.unix<t.unix?-1:1}),e}})},{"fields/MultipleControllerBase":36}],44:[function(e,t,i){var n=e("../FieldControlBaseView");t.exports=n.extend({initialize:function(){var i=this;this.defaults={format:"d.m.Y H:i",inline:!1,mask:!0,lang:"de",allowBlank:!0,onChangeDateTime:function(e,t){i.$unixIn.val(e.dateFormat("unixtime")),i.$sqlIn.val(e.dateFormat("Y-m-d H:i:s"))}},this.settings=this.model.get("settings")||{},this.render()},render:function(){this.$unixIn=this.$(".kb-datetimepicker--js-unix"),this.$sqlIn=this.$(".kb-datetimepicker--js-sql"),this.$(".kb-datetimepicker").kbdatetimepicker(_.extend(this.defaults,this.settings))},derender:function(){this.$(".kb-datetimepicker").kbdatetimepicker("destroy")}})},{"../FieldControlBaseView":31}],45:[function(e,t,i){var n=e("../FieldControlBaseView");e("common/TinyMCE");t.exports=n.extend({initialize:function(){this.render()},render:function(){var i=this;this.$textarea=this.$("textarea");var e=tinymce.get(i.$textarea.attr("id"));i.attachEvents(e),tinymce.on("AddEditor",function(e){var t=e.editor;t&&i.attachEvents(t)})},attachEvents:function(e){var t=this,i=this.model.toJSON();if(e&&e.id===t.$textarea.attr("id")&&!t.editor&&((t.editor=e).on("change",function(){t.update(e.getContent())}),i.settings&&i.settings.charlimit)){var l=i.settings.charlimit,a=t.$(".char-limit");e.on("keyDown SetContent",function(e,t){var i=this.getContent({format:"text"}),n=l,o=i.length,s=o-n;if(n<=o)a.html('<span class="text-error" style="color: red;">Zu viele Zeichen:-'+s+"</span>");else{var r=n-o;a.html(r+" Zeichen verbleiben")}})}},derender:function(){this.stopListening(),this.editor=null},update:function(e){this.model.set("value",e)},toString:function(){if(this.editor)try{return this.editor.getContent()}catch(e){return""}return""}})},{"../FieldControlBaseView":31,"common/TinyMCE":28}],46:[function(e,t,i){var n=e("../FieldControlBaseView"),o=e("fields/controls/file-multiple/FileMultipleController");t.exports=n.extend({initialize:function(){this.createController(),this.render()},render:function(){var e=this;this.$stage=this.$('[data-kftype="file-multiple"]'),this.FileMultipleController.setElement(this.$stage.get(0)),_.defer(function(){e.FileMultipleController.render()})},derender:function(){this.FileMultipleController.derender()},rerender:function(){this.render()},createController:function(){if(!this.FileMultipleController)return this.FileMultipleController=new o({el:this.$('[data-kftype="file-multiple"]'),model:this.model,parentView:this})}})},{"../FieldControlBaseView":31,"fields/controls/file-multiple/FileMultipleController":47}],47:[function(e,t,i){var n=e("fields/MultipleControllerBase");t.exports=n.extend({type:"file-multiple"})},{"fields/MultipleControllerBase":36}],48:[function(e,t,i){var n=e("../FieldControlBaseView");t.exports=n.extend({initialize:function(){this.render()},events:{"click .kb-js-add-file":"openFrame","click .kb-js-reset-file":"reset"},render:function(){this.$container=this.$(".kb-field-file-wrapper"),this.$IdIn=this.$(".kb-file-attachment-id"),this.$resetIn=this.$(".kb-js-reset-file")},derender:function(){this.frame&&(this.frame.dispose(),this.frame=null)},openFrame:function(){var e=this;if(this.frame)return this.frame.open();var t={title:KB.i18n.Refields.file.modalTitle,button:{text:KB.i18n.Refields.common.select},multiple:!1,library:{type:""}};return!0===e.model.get("uploadedTo")&&(t.library.uploadedTo=KB.Environment.postId||0),this.frame=wp.media(t),this.frame.on("ready",function(){e.ready(this)}),this.frame.state("library").on("select",function(){e.select(this)}),this.frame.open()},ready:function(e){this.$(".media-modal").addClass(" smaller no-sidebar");var t=this.model.get("settings");t&&t.uploadFolder&&(this.frame.uploader.options.uploader.params.upload_folder=t.uploadFolder)},select:function(e){var t=e.get("selection").first();this.handleAttachment(t)},handleAttachment:function(e){this.$(".kb-file-filename",this.$container).html(e.get("filename")),this.$(".kb-file-attachment-id",this.$container).val(e.get("id")),this.$(".kb-file-title",this.$container).html(e.get("title")),this.$(".kb-file-id",this.$container).html(e.get("id")),this.$(".kb-file-editLink",this.$container).attr("href",e.get("editLink")),this.$resetIn.show(),this.$container.show(450,function(){KB.Events.trigger("modal.recalibrate")})},reset:function(){this.$IdIn.val(""),this.$container.hide(450),this.$resetIn.hide()}})},{"../FieldControlBaseView":31}],49:[function(e,t,i){var n=e("../FieldControlBaseView"),o=e("fields/controls/flexfields/FlexfieldsController");t.exports=n.extend({initialize:function(){this.createController(),this.render()},render:function(){var e=this;this.$stage=this.$(".flexible-fields--stage"),this.FlexFieldsController.setElement(this.$stage.get(0)),_.defer(function(){e.FlexFieldsController.render()})},derender:function(){this.FlexFieldsController.derender()},rerender:function(){this.FlexFieldsController.derender(),this.render()},createController:function(){if(!this.FlexFieldsController)return this.FlexFieldsController=new o({el:this.$(".flexible-fields2--stage"),model:this.model,parentView:this})}})},{"../FieldControlBaseView":31,"fields/controls/flexfields/FlexfieldsController":52}],50:[function(e,t,i){var n=e("fields/FieldControlModelModal");t.exports=Backbone.Collection.extend({model:n})},{"fields/FieldControlModelModal":33}],51:[function(e,t,i){t.exports=Backbone.View.extend({initialize:function(e){this.controller=e.controller,this.types=this.model.get("fields")},factorNewItem:function(n,e){var t=e._meta.uid||null,i=e._meta.title||null,o=e._meta.type,s=e._meta.status||"visible",r=t||_.uniqueId("ff2"),l=this.model.get("newitemtext")||"Enter a title : ";i=this.model.get("requesttitle")||!1?i||prompt(l,""):i||"#"+this.controller.subviews.length;var a=this.types[o].sections||[];_.clone(this.types);return _.each(a,function(e){_.each(e.fields,function(e){var t=n&&n[e.key]?n[e.key]:e.std,i=_.extend(e,{value:t||"",arrayKey:this.model.get("arrayKey"),fieldkey:this.model.get("fieldkey"),relId:this.model.get("relId"),primeKey:e.key,fieldId:this.model.get("fieldId"),index:r,type:e.type});e.view=KB.FieldsAPI.getRefByType(e.type,i),t||e.view.setDefaults()},this)},this),{itemId:r,fftype:o,title:i,status:s,sections:a}}})},{}],52:[function(e,t,i){var n=e("fields/controls/flexfields/ToggleBoxItem"),o=e("fields/controls/flexfields/SectionBoxItem"),s=e("fields/controls/flexfields/FlexFieldsFactory"),r=e("common/TinyMCE"),l=e("common/UI"),a=e("common/Logger"),d=e("fields/controls/flexfields/FlexFieldsCollection"),c=e("templates/fields/FlexibleFields/skeleton.hbs"),u=e("common/I18n");t.exports=Backbone.View.extend({initialize:function(e){this.parentView=e.parentView,this.active=!1,this.Renderer="sections"==this.model.get("renderer")?o:n,this.Fields=new d,this.subviews=[],this.factory=new s({controller:this,model:this.model}),a.Debug.log("Fields: Flexfields2 instance created and initialized")},events:{"click .kb-flexible-fields--js-add-item":"addItem"},initialSetup:function(){var o,s;o=this.model.get("value"),s=this.model.get("fields"),_.isEmpty(o)||_.each(o,function(e,t){if(e&&(e._meta.type||(e._meta.type="default"),s[e._meta.type])){var i=this.factory.factorNewItem(o[e._meta.uid],e),n=new this.Renderer({controller:this,model:new Backbone.Model(i)});this.subviews.push(n),this.$list.append(n.render()),l.initTabs(),KB.Events.trigger("modal.recalibrate")}},this),l.initTabs(),this.$list.sortable({handle:".flexible-fields--js-drag-handle",start:function(){r.removeEditors()},stop:function(){r.restoreEditors()}}),KB.Events.trigger("modal.recalibrate"),this._initialized=!0},duplicateItem:function(e){var t=e.get("itemId"),i=e.get("title")+" (Copy)",n=this.model.get("value");if(!n[t])return!1;var o=JSON.parse(JSON.stringify(n[t]));if(!o._meta)return!1;o._meta.uid=null,o._meta.title=i;var s=this.factory.factorNewItem(o,o),r=new this.Renderer({controller:this,model:new Backbone.Model(s)});this.subviews.push(r),this.$list.append(r.render()),l.initTabs(),KB.Events.trigger("modal.recalibrate")},render:function(){if(this.active)return null;this.$el.append(c({i18n:u.getString("Refields.flexfields"),model:this.model.toJSON()})),this.setupElements(),this.initialSetup(),this.active=!0},derender:function(){this.trigger("derender"),this.subviews=[],this.active=!1},setupElements:function(){this.$list=this.$(".flexible-fields--item-list"),this.$addButton=this.$(".kb-flexible-fields--js-add-item")},addItem:function(e){var t=jQuery(e.currentTarget).data("kbf-addtype"),i=this.factory.factorNewItem(null,{_meta:{type:t}}),n=new this.Renderer({controller:this,model:new Backbone.Model(i)});this.subviews.push(n),this.$list.append(n.render()),l.initTabs(),KB.Events.trigger("modal.recalibrate")}})},{"common/I18n":23,"common/Logger":24,"common/TinyMCE":28,"common/UI":29,"fields/controls/flexfields/FlexFieldsCollection":50,"fields/controls/flexfields/FlexFieldsFactory":51,"fields/controls/flexfields/SectionBoxItem":53,"fields/controls/flexfields/ToggleBoxItem":54,"templates/fields/FlexibleFields/skeleton.hbs":186}],53:[function(e,t,i){var n=e("fields/controls/flexfields/ToggleBoxItem"),o=e("templates/fields/FlexibleFields/single-section-box.hbs");t.exports=n.extend({events:function(){return _.extend({},n.prototype.events,{mouseenter:"mousein",mouseleave:"mouseout"})},mousein:function(){},mouseout:function(){},render:function(){var e=this.createInputName(this.model.get("itemId")),t=this.model.toJSON(),i=this.$el.append(o({item:t,inputName:e,uid:this.model.get("itemId"),fftype:this.model.get("fftype"),visible:!0}));return this.renderTabs(i),i}})},{"fields/controls/flexfields/ToggleBoxItem":54,"templates/fields/FlexibleFields/single-section-box.hbs":184}],54:[function(e,t,i){var n=e("common/Notice"),o=e("templates/fields/FlexibleFields/single-toggle-box.hbs"),a=e("handlebars"),s=e("common/TinyMCE");t.exports=Backbone.View.extend({tagName:"li",className:"kb-flexible-fields--item-wrapper",initialize:function(e){this.Controller=e.controller,this.listenTo(this.Controller,"derender",this.derender),this.FieldViews={}},events:{"click .flexible-fields--js-toggle":"toggleItem","click .flexible-fields--js-trash":"deleteItem","click .flexible-fields--js-visibility":"toggleItemStatus","click .flexible-fields--js-duplicate":"duplicateItem"},toggleItem:function(){this.$(".flexible-fields--toggle-title").next().slideToggle(250,function(){jQuery(this).toggleClass("kb-togglebox-open"),jQuery(this).hasClass("kb-togglebox-open")&&(s.removeEditors(jQuery(this)),s.restoreEditors(jQuery(this))),_.defer(function(){KB.Events.trigger("modal.recalibrate")})})},deleteItem:function(){this.$el.hide(250);var e=this.createInputName(this.model.get("itemId"));this.$el.append('<input type="hidden" name="'+e+'[_meta][delete]" value="'+this.model.get("itemId")+'" >'),n.notice("Please click update to save the changes","success")},toggleItemStatus:function(){var e="visible"===this.$("[data-flexfield-visible]").val()?"hidden":"visible";this.$("[data-flexfield-visible]").val(e),this.$el.toggleClass("ff-section-invisible"),n.notice("Please click update to save the changes","success")},duplicateItem:function(){this.Controller.duplicateItem(this.model)},render:function(){var e=this.createInputName(this.model.get("itemId")),t=this.model.toJSON(),i=this.$el.append(o({item:t,inputName:e,uid:this.model.get("itemId"),fftype:this.model.get("fftype"),status:this.model.get("status")}));return this.renderTabs(i),"hidden"===this.model.get("status")&&this.$el.toggleClass("ff-section-invisible"),i},renderTabs:function(o){var s=this,r=a.compile("<li><a href='#tab-{{ uid }}-{{ index }}'>{{ section.label }}</a></li>"),l=a.compile("<div id='tab-{{ uid }}-{{ index }}'></div>");_.each(this.model.get("sections"),function(e,t){jQuery(".flexible-field--tab-nav",o).append(r({uid:s.model.get("itemId"),section:e,index:t}));var i=jQuery(".kb-field--tabs",o),n=jQuery(l({uid:s.model.get("itemId"),index:t})).appendTo(i);s.renderFields(e,n)})},renderFields:function(e,n){var o;_.each(e.fields,function(e){var t=a.compile("<div class='kb-field-wrapper' data-kbfuid='{{ kbfuid }}' id='{{ kbfuid }}'></div>");o=e.view,this.model.get("value"),o.listenTo(this,"derender",o.derender);var i=jQuery(t({kbfuid:o.model.get("uid")}));i.append(o.render()),n.append(i),this.setupFieldInstance(o,n)},this)},createInputName:function(e){return this.createBaseId()+"["+this.Controller.model.get("fieldkey")+"]["+e+"]"},createBaseId:function(){return _.isEmpty(this.Controller.model.get("arrayKey"))?this.Controller.model.get("fieldId"):this.Controller.model.get("fieldId")+"["+this.Controller.model.get("arrayKey")+"]"},derender:function(){this.stopListening(),this.remove()},setupFieldInstance:function(t,e){var i=this;i.Controller.parentView&&_.defer(function(){var e=i.Controller.Fields.findWhere({uid:t.model.get("uid")});_.isUndefined(e)?t.fieldModel=i.Controller.Fields.add(t.model.toJSON()):e.rebind()}),_.defer(function(){t.setElement(e),t.postRender&&t.postRender.call(t)})}})},{"common/Notice":25,"common/TinyMCE":28,handlebars:248,"templates/fields/FlexibleFields/single-toggle-box.hbs":185}],55:[function(e,t,i){var n=e("fields/FieldControlBaseView"),o=e("./gallery-ext/GalleryExtController");t.exports=n.extend({initialize:function(){this.selection=null,this.render()},render:function(){this.$stage=this.$(".kb-gallery-ext__stage"),this.createController(),this.$stage.append(this.GalleryController.render())},derender:function(){this.GalleryController&&this.GalleryController.$el.detach()},createController:function(){return this.GalleryController||(this.GalleryController=new o({el:this.$stage.get(0),model:this.model})),this.GalleryController}})},{"./gallery-ext/GalleryExtController":56,"fields/FieldControlBaseView":31}],56:[function(e,t,i){var n=e("common/Logger"),s=e("./ImageView");t.exports=Backbone.View.extend({initialize:function(e){this._frame=null,this.subviews={},this.ids=[],this.data={},n.Debug.log("Fields: Gallery instance created and initialized"),this.renderElements(),this.initialSetup()},render:function(){return this.trigger("render"),this.setupElements(),this.delegateEvents(),this.$el},events:{"click .kb-gallery-ext--js-add-images":"addImages"},derender:function(){},renderElements:function(){jQuery('<div class="kb-gallery-ext--item-list"></div>').appendTo(this.$el),jQuery('<a class="button button-primary kb-gallery-ext--js-add-images">'+KB.i18n.Refields.gallery.addButton+"</a>").appendTo(this.$el)},setupElements:function(){this.$list=this.$(".kb-gallery-ext--item-list"),this.$list.sortable({revert:!0,delay:300,helper:"clone",stop:_.bind(this.updateOrder,this)})},addImages:function(){this.openModal()},updateOrder:function(){this.resortSelection(),this.model.set("value",this.ids)},frame:function(){if(this._frame)return this._frame},openModal:function(){var t=this;if(!this._frame)return this._frame=new wp.media.view.KBGallery({state:"gallery-edit",multiple:!0,selection:this.selection,editing:!0}),this._frame.state("gallery-edit").on("update",function(e){t.selection=e,t.resortToSelection(),setTimeout(function(){KB.Events.trigger("modal.recalibrate")},250)}),this._frame.options.selection.on("add",function(e){t.add(e)}),this._frame.on("ready",function(e){jQuery(".media-modal").addClass("kb-gallery-frame")}),this._frame.options.selection.on("remove",function(e){t.remove(e)}),this._frame.open(),this._frame;this._frame.open()},initialSetup:function(){var t=this,e=this.model.get("value").images||{};if(e=_.filter(e,function(e){return e&&e.hasOwnProperty("id")}),_.each(e,function(e){t.data[e.id]=e}),this.setIds(e),""!=this.ids){var i={post__in:this.ids,suppress_filters:!0},n=wp.media.query(i);this.selection||(this.selection=new wp.media.model.Selection(n.models,{props:n.props.toJSON(),multiple:!0}),this.selection.more().done(function(){t.selection.props.set({query:!1}),t.selection.unmirror(),t.selection.props.unset("orderby"),t.initImages(),t.resortSelection()}))}},initImages:function(){_.each(this.ids,function(e){this.selection.get(e)&&this.add(this.selection.get(e))},this)},add:function(e){var t="",i="";this.data.hasOwnProperty(e.id)&&(t=this.data[e.id].meta),e.set("meta",t),this.data.hasOwnProperty(e.id)&&(i=this.data[e.id].caption),e.set("caption",i);var n=new s({model:e,Controller:this}),o=(this.subviews[e.get("id")]=n).render();this.ids.push(e.get("id")),this.$list.append(o)},setIds:function(e){var t=[];_.each(e,function(e){e.id=parseInt(e.id,10),_.isNumber(e.id)&&!isNaN(e.id)&&t.push(e.id)}),this.ids=t},resortSelection:function(){var t=[],e=this.getIdsFromInputs();_.each(e,function(e){t.push(this.selection.get(e))},this),this.selection.reset(t),this.setIds(e)},remove:function(e){var t=this.ids.indexOf(e.get("id"));-1!==t&&this.ids.splice(t,1);var i=this.subviews[e.get("id")];i&&i.remove&&(i.remove(),delete this.subviews[e.get("id")])},getIdsFromInputs:function(){return this.$(".kb-gallery--image-holder input").map(function(e,t){return jQuery(t).val()}).get()},resortToSelection:function(){var e=_.pluck(this.selection.models,"id");_.each(this.subviews,function(e){e.$el.detach()},this),_.each(e,function(e){this.subviews[e].$el.appendTo(this.$list)},this)}})},{"./ImageView":57,"common/Logger":24}],57:[function(e,t,i){var n=e("templates/fields/GalleryExt/single-image.hbs");t.exports=Backbone.View.extend({tagName:"div",className:"kb-gallery--image-wrapper",initialize:function(e){this.Controller=e.Controller},remove:function(){this.$el.remove(),delete this.$el},render:function(){var e=this.createInputName(this.model),t=this.model.toJSON();if(t.sizes){t.previewUrl=t.sizes.thumbnail?t.sizes.thumbnail.url:t.url;jQuery(n({image:t,id:t.id,inputName:e,model:this.Controller.model.toJSON()})).appendTo(this.$el);return this.$el}},createInputName:function(e){var t=e.get("id");return this.createBaseId()+"["+this.Controller.model.get("fieldkey")+"][images]["+t+"]"},createBaseId:function(){return this.Controller.model.get("baseId")}})},{"templates/fields/GalleryExt/single-image.hbs":189}],58:[function(e,t,i){var n=e("fields/FieldControlBaseView"),o=e("./gallery/GalleryController");t.exports=n.extend({initialize:function(){this.render()},render:function(){this.$stage=this.$(".kb-gallery--stage"),this.createController()},derender:function(){this.GalleryController.dispose()},rerender:function(){this.derender(),this.render()},createController:function(){return this.GalleryController?(this.GalleryController.setElement(this.$stage.get(0)),this.GalleryController.render()):this.GalleryController=new o({el:this.$stage.get(0),model:this.model})}})},{"./gallery/GalleryController":59,"fields/FieldControlBaseView":31}],59:[function(e,t,i){var n=e("common/Logger"),s=e("./ImageView");t.exports=Backbone.View.extend({initialize:function(e){this._frame=null,this.subviews=[],this.listenTo(KB.Events,"modal.saved",this.frontendSave),this.setupElements(),this.initialSetup(),n.Debug.log("Fields: Gallery instance created and initialized")},events:{"click .kb-gallery--js-add-images":"addImages"},setupElements:function(){this.$list=jQuery('<div class="kb-gallery--item-list"></div>').appendTo(this.$el),this.$list.sortable({revert:!0,delay:300}),this.$addButton=jQuery('<a class="button button-primary kb-gallery--js-add-images">'+KB.i18n.Refields.image.addButton+"</a>").appendTo(this.$el)},addImages:function(){this.openModal()},frame:function(){if(this._frame)return this._frame},openModal:function(){var e=this;if(!this._frame)return this._frame=wp.media({title:KB.i18n.Refields.image.modalHelpTitle,button:{text:KB.i18n.Refields.common.select},multiple:!0,library:{type:"image"}}),this._frame.state("library").on("select",function(){e.select(this)}),this._frame.open(),this._frame;this._frame.open()},select:function(e){var t=e.get("selection");0<t.length&&this.handleModalSelection(t.models)},handleModalSelection:function(e){var o=this;_.each(e,function(e){var t={file:e.toJSON(),details:{title:"",alt:"",description:""},id:e.get("id")},i=new Backbone.Model(t),n=new s({model:i,Controller:o});o.subviews.push(n),o.$list.append(n.render()),setTimeout(function(){KB.Events.trigger("modal.recalibrate")},250)})},initialSetup:function(){var n=this,e=this.model.get("value").images||{};0<_.toArray(e).length&&_.each(e,function(e){var t=new Backbone.Model(e),i=new s({model:t,Controller:n});n.subviews.push(i),n.$list.append(i.render())})},frontendSave:function(){var i=this;0<this.subviews.length&&_.each(this.subviews,function(e,t){e._remove&&(delete i.subviews[t],e.remove())})}})},{"./ImageView":60,"common/Logger":24}],60:[function(e,t,i){var n=e("common/TinyMCE"),o=e("common/UI"),s=e("templates/fields/Gallery/single-image.hbs");t.exports=Backbone.View.extend({tagName:"div",className:"kb-gallery--image-wrapper",initialize:function(e){this.Controller=e.Controller,this.uid=this.model.get("uid")||_.uniqueId("kbg"),this.editorAdded=!1,this._remove=!1},events:{"click .kb-gallery--js-edit":"edit","click .kb-gallery--js-delete":"delete","click .kb-gallery--js-meta-close":"close"},edit:function(){this.$el.wrap('<div class="kb-gallery--item-placeholder kb-gallery--image-wrapper"></div>'),this._placeholder=this.$el.parent(),this.$el.addClass("kb-gallery--active-item kb-field").appendTo("body"),jQuery("#wpwrap").addClass("module-browser-open"),this.handleEditor(),o.initTabs()},handleEditor:function(){var t=this,e=jQuery(".kb-js--remote-editor",this.$el),i=this.createInputName(this.uid)+"[details][description]";this.editorAdded?n.addEditor(e,null,150):n.remoteGetEditor(e,i,this.uid,this.model.get("details").description,null,!1,!1).done(function(e){t.editorAdded=e,o.initTabs()})},delete:function(){this._remove?(this.$el.fadeTo(450,1).css("borderColor","#ccc"),jQuery(".kb-gallery--image-remove",this.$el).val(""),this._remove=!1):(this.$el.fadeTo(450,.5).css("borderColor","red"),this._remove=!0,jQuery(".kb-gallery--image-remove",this.$el).val("true"))},remove:function(){this.$el.remove(),delete this.$el},close:function(){var e=tinymce.get(this.uid+"_ededitor");this.model.get("details").description=this.getEditorContent(e),tinymce.remove(e),this.$el.appendTo(this._placeholder).unwrap(),this.$el.removeClass("kb-gallery--active-item").removeClass("kb-field"),jQuery("#wpwrap").removeClass("module-browser-open")},getEditorContent:function(e){if(jQuery("#wp-"+this.uid+"_ededitor-wrap").hasClass("tmce-active"))return e.getContent();var t=document.getElementById(this.uid+"_ededitor").value;return t=t.replace(/<br\s*\/?>/gm,"\n"),e.setContent(t),t},render:function(){var e=this.createInputName(this.uid),t=this.model.toJSON();return this.$el.append(s({image:t,id:t.id,inputName:e,uid:this.uid}))},createInputName:function(e){return this.createBaseId()+"["+this.Controller.model.get("fieldkey")+"][images]["+e+"]"},createBaseId:function(){return _.isEmpty(this.Controller.model.get("arrayKey"))?this.Controller.model.get("baseId"):this.Controller.model.get("baseId")+"["+this.Controller.model.get("arrayKey")+"]"}})},{"common/TinyMCE":28,"common/UI":29,"templates/fields/Gallery/single-image.hbs":187}],61:[function(e,t,i){var n=e("fields/FieldControlBaseView"),o=e("./gallery2/Gallery2Controller");t.exports=n.extend({initialize:function(){this.selection=null,this.render()},render:function(){this.$stage=this.$(".kb-gallery2__stage"),this.createController(),this.$stage.append(this.GalleryController.render())},derender:function(){this.GalleryController&&this.GalleryController.$el.detach()},createController:function(){return this.GalleryController||(this.GalleryController=new o({el:this.$stage.get(0),model:this.model})),this.GalleryController}})},{"./gallery2/Gallery2Controller":62,"fields/FieldControlBaseView":31}],62:[function(e,t,i){var n=e("common/Logger"),o=e("./ImageView");t.exports=Backbone.View.extend({initialize:function(e){this._frame=null,this.subviews={},this.ids=[],n.Debug.log("Fields: Gallery instance created and initialized"),this.renderElements(),this.initialSetup()},render:function(){return this.trigger("render"),this.setupElements(),this.delegateEvents(),this.$el},events:{"click .kb-gallery2--js-add-images":"addImages"},derender:function(){},renderElements:function(){jQuery('<div class="kb-gallery2--item-list"></div>').appendTo(this.$el),jQuery('<a class="button button-primary kb-gallery2--js-add-images">'+KB.i18n.Refields.gallery.addButton+"</a>").appendTo(this.$el)},setupElements:function(){this.$list=this.$(".kb-gallery2--item-list"),this.$list.sortable({revert:!0,delay:300,helper:"clone",stop:_.bind(this.updateOrder,this)})},addImages:function(){this.openModal()},updateOrder:function(){this.resortSelection(),this.model.set("value",this.ids)},frame:function(){if(this._frame)return this._frame},openModal:function(){var t=this;if(!this._frame)return this._frame=new wp.media.view.KBGallery({state:"gallery-edit",multiple:!0,selection:this.selection,editing:!0}),this._frame.state("gallery-edit").on("update",function(e){t.selection=e,t.resortToSelection(),setTimeout(function(){KB.Events.trigger("modal.recalibrate")},250)}),this._frame.options.selection.on("add",function(e){t.add(e)}),this._frame.on("ready",function(e){jQuery(".media-modal").addClass("kb-gallery-frame")}),this._frame.options.selection.on("remove",function(e){t.remove(e)}),this._frame.open(),this._frame;this._frame.open()},initialSetup:function(){var e=this,t=this.model.get("value").images||{};if(this.setIds(t),""!=this.ids){var i={post__in:this.ids,suppress_filters:!0},n=wp.media.query(i);this.selection||(this.selection=new wp.media.model.Selection(n.models,{props:n.props.toJSON(),multiple:!0}),this.selection.more().done(function(){e.selection.props.set({query:!1}),e.selection.unmirror(),e.selection.props.unset("orderby"),e.initImages(),e.resortSelection()}))}},initImages:function(){_.each(this.ids,function(e){this.selection.get(e)&&this.add(this.selection.get(e))},this)},add:function(e){var t=new o({model:e,Controller:this}),i=(this.subviews[e.get("id")]=t).render();this.ids.push(e.get("id")),this.$list.append(i)},setIds:function(e){var t=[];_.each(e,function(e){e=parseInt(e,10),_.isNumber(e)&&!isNaN(e)&&t.push(e)}),this.ids=t},resortSelection:function(){var t=[],e=this.getIdsFromInputs();_.each(e,function(e){t.push(this.selection.get(e))},this),this.selection.reset(t),this.setIds(e)},remove:function(e){var t=this.ids.indexOf(e.get("id"));-1!==t&&this.ids.splice(t,1);var i=this.subviews[e.get("id")];i&&i.remove&&(i.remove(),delete this.subviews[e.get("id")])},getIdsFromInputs:function(){return this.$(".kb-gallery--image-holder input").map(function(e,t){return jQuery(t).val()}).get()},resortToSelection:function(){var e=_.pluck(this.selection.models,"id");_.each(this.subviews,function(e){e.$el.detach()},this),_.each(e,function(e){this.subviews[e].$el.appendTo(this.$list)},this)}})},{"./ImageView":63,"common/Logger":24}],63:[function(e,t,i){var n=e("templates/fields/Gallery2/single-image.hbs");t.exports=Backbone.View.extend({tagName:"div",className:"kb-gallery--image-wrapper",initialize:function(e){this.Controller=e.Controller},remove:function(){this.$el.remove(),delete this.$el},render:function(){var e=this.createInputName(this.uid),t=this.model.toJSON();if(t.sizes){t.previewUrl=t.sizes.thumbnail?t.sizes.thumbnail.url:t.url;jQuery(n({image:t,id:t.id,inputName:e})).appendTo(this.$el);return this.$el}},createInputName:function(e){return this.createBaseId()+"["+this.Controller.model.get("fieldkey")+"][images][]"},createBaseId:function(){return this.Controller.model.get("baseId")}})},{"templates/fields/Gallery2/single-image.hbs":188}],64:[function(e,t,i){var n=e("../FieldControlBaseView"),l=e("common/Utilities"),o=e("common/Config");t.exports=n.extend({initialize:function(){this.defaultState="replace-image",this.defaultFrame="image",this.render()},events:{"click .kb-js-add-image":"openFrame","click .kb-js-reset-image":"resetImage","change [data-kbimage-crop]":"handleCropChange"},handleCropChange:function(){var e=this.$cropSelect.val(),t=this.model.get("value");t.crop=e,this.model.set("value",t);var i=this.prepareArgs();this.retrieveImage(i,t.id)},render:function(){this.$reset=this.$(".kb-js-reset-image"),this.$container=this.$(".kb-field-image-container"),this.$saveId=this.$(".kb-js-image-id"),this.$description=this.$(".kb-js-image-description"),this.$title=this.$(".kb-js-image-title"),this.$cropSelect=this.$("[data-kbimage-crop]")},editImage:function(){this.openFrame(!0)},derender:function(){this.frame&&this.frame.dispose()},openFrame:function(e){var t,i=this;this.frame&&this.frame.dispose();var n={};void 0!==this.model.get("value").id&&(n.post__in=[this.model.get("value").id]),console.log(n),wp.media.query(n).more().done(function(){var e=this.first();i.attachment=e,t={},i.defaultFrame="select",i.defaultState="library",i.frame=wp.media({frame:i.defaultFrame,state:i.defaultState,metadata:t,imageEditView:i,uploadedTo:0,type:"image",library:{type:"image",cache:!1}}),i.frame.on("update",function(e){i.update(e)}).on("close",function(e){i.frame.image&&i.frame.image.attachment&&(i.$description.val(i.frame.image.attachment.get("caption")),i.$title.val(i.frame.image.attachment.get("title")))}).on("ready",function(){i.ready(i)}).on("replace",function(){i.replace(i.frame.image.attachment)}).on("select",function(e){var t=this.get("library").get("selection").first();i.replace(t)}).open()})},ready:function(e){jQuery(".media-modal").addClass("smaller kb-image-frame");var t=e.model.get("settings");t&&t.minDimensions&&(e.frame.uploader.options.uploader.params.mindimensions=t.minDimensions)},replace:function(e){this.attachment=e,this.handleAttachment(e)},update:function(e){this.attachment.set(e),this.attachment.sync("update",this.attachment)},getCropValue:function(){var e=this.model.get("value");return e.crop&&""!==e.crop?e.crop:this.model.get("crop")},prepareArgs:function(){return{width:this.model.get("width")||null,height:this.model.get("height")||null,crop:this.getCropValue()||!0,upscale:this.model.get("upscale")||!1}},handleAttachment:function(e){var t=e.get("id"),i=this.prepareValue(e);this.model.set("value",i);var n=_.clone(this.model.get("ModuleModel").get("entityData")),o=this.model.get("kpath");l.setIndex(n,o,i),this.model.get("ModuleModel").set("entityData",n);var s=this.prepareArgs();if(s.width)this.retrieveImage(s,t);else{var r=e.get("sizes").thumbnail?e.get("sizes").thumbnail.url:e.get("sizes").full.url;this.$container.html('<img src="'+r+'" >')}this.$saveId.val(e.get("id")),this.$description.val(i.caption),this.$title.val(i.title),this.model.get("ModuleModel").trigger("data.updated",{silent:!0})},retrieveImage:function(e,t){var i=this;jQuery.ajax({url:ajaxurl,data:{action:"fieldGetImage",args:e,id:t,_ajax_nonce:o.getNonce("read")},type:"POST",dataType:"json",success:function(e){i.$container.html('<img src="'+e.data.src+'" >')},error:function(){}})},prepareValue:function(e){var t={id:e.get("id"),alt:e.get("alt")},i=this.model.get("value");return _.isObject(i)||(i={}),_.extend(i,t)},resetImage:function(){this.$container.html(""),this.$saveId.val(""),this.model.set("value",{id:null,caption:"",title:""}),this.$description.val(""),this.$title.val("")},toString:function(){var t=this;if(!this.attachment&&!_.isEmpty(this.model.get("value").id)){var i=wp.media.query({post__in:[this.model.get("value").id]});i.more().done(function(e){t.attachment=i.first()})}return this.attachment?"<img src='"+(this.attachment.get("sizes").thumbnail?this.attachment.get("sizes").thumbnail:this.attachment.get("sizes").full).url+"'>":""}})},{"../FieldControlBaseView":31,"common/Config":22,"common/Utilities":30}],65:[function(e,t,i){var n=e("../FieldControlBaseView");t.exports=n.extend({initialize:function(){this.defaults={filter:!0},this.settings=this.model.get("settings")||{},this.render()},render:function(){this.$("[data-kftype='imageselect']").imagepicker(_.extend(this.defaults,this.settings))},rerender:function(){this.$("[data-kftype='imageselect']").imagepicker("destroy"),this.render()}})},{"../FieldControlBaseView":31}],66:[function(e,t,i){var n=e("../FieldControlBaseView");t.exports=n.extend({initialize:function(){this.render()},events:{"click .kb-js-add-link":"openModal"},render:function(){this.$input=this.$("[data-kbf-link-url]"),this.$text=this.$("[data-kbf-link-linktext]"),this.$target=this.$("[data-kbf-link-target]")},derender:function(){},openModal:function(){window._kbLink=this,wpActiveEditor=this.$input.attr("id"),jQuery("#wp-link-wrap").addClass("kb-customized"),window.kb_restore_htmlUpdate=wpLink.htmlUpdate,window.kb_restore_isMce=wpLink.isMCE,wpLink.isMCE=this.isMCE,wpLink.htmlUpdate=this.htmlUpdate,wpLink.open(),jQuery("#wp-link-text").val(this.$text.val()),jQuery("#wp-link-url").val(this.$input.val()),this.model.get("showtarget")||jQuery("#link-selector .link-target").addClass("kb-hide"),this.setTarget()},setTarget:function(){var e=jQuery("#wp-link-target");this.$target.is(":checked")?e.prop("checked",!0):e.prop("checked",!1)},setTargetFromModal:function(e){"_blank"===e?this.$target.prop("checked",!0):this.$target.prop("checked",!1)},htmlUpdate:function(){var e,t,i,n,o=wpLink.textarea;o&&(t=wpLink.getAttrs(),n=jQuery("#wp-link-text").val(),e=t.target,window._kbLink.setTargetFromModal(e),t.href&&(i=t.href,window._kbLink.$input.empty(),window._kbLink.$input.val(i),window._kbLink.trigger("update",n,i),window._kbLink.$text.val(n),wpLink.close(),window._kbLink.close(),o.focus()))},isMCE:function(){return!1},close:function(){this.model.get("showtarget")||jQuery("#link-selector .link-target").removeClass("kb-hide"),wpLink.isMCE=window.kb_restore_isMce,wpLink.htmlUpdate=window.kb_restore_htmlUpdate}})},{"../FieldControlBaseView":31}],67:[function(e,t,i){var n=e("../FieldControlBaseView");t.exports=n.extend({initialize:function(){this.render()},render:function(){this.editor=new MediumEditor(this.$(".kb-medium-editable"))},derender:function(){},update:function(e){},toString:function(){}})},{"../FieldControlBaseView":31}],68:[function(e,t,i){var n=e("../FieldControlBaseView");t.exports=n.extend({initialize:function(){this.defaults={filter:!0},this.settings=this.model.get("settings")||{},this.render()},render:function(){this.$("[data-kftype='multiselect']").multipleSelect(_.extend(this.defaults,this.settings))},rerender:function(){this.$("[data-kftype='multiselect']").multipleSelect("refresh")}})},{"../FieldControlBaseView":31}],69:[function(e,t,i){var n=e("../FieldControlBaseView"),o=e("common/Ajax"),s=e("common/Config");t.exports=n.extend({initialize:function(){this.render()},render:function(){var e=this;this.$input=this.$(".kb-field--oembed input"),this.$preview=this.$("[data-kb-oembed-preview]"),this.$input.on("change",function(){e.update(e.$input.val())}),this.$input.trigger("change")},derender:function(){},update:function(e){var t=this;this.model.set("value",e);this.sendRequest(e).done(function(e){e&&e.data&&e.data.html&&t.$preview.html(e.data.html)})},toString:function(){return""},sendRequest:function(e){return o.send({action:"getOembed",embedUrl:e,_ajax_nonce:s.getNonce("read")})}})},{"../FieldControlBaseView":31,"common/Ajax":20,"common/Config":22}],70:[function(e,t,i){var n=e("../FieldControlBaseView");e("common/Utilities"),e("common/Config");t.exports=n.extend({initialize:function(){this.uniq=_.uniqueId("map"),this.marker=null,this.render()},events:{"change input":"updateMarker"},render:function(){var e=this;this.default={road:"",postcode:"",village:"",state:"",house_number:""},this.$map=this.$("[data-kb-osm-map]").attr("id",this.uniq),this.$lat=this.$("[data-kb-osm-lat]"),this.$lng=this.$("[data-kb-osm-lng]"),this.$road=this.$("[data-kb-osm-road]"),this.$postcode=this.$("[data-kb-osm-postcode]"),this.$village=this.$("[data-kb-osm-village]"),this.$state=this.$("[data-kb-osm-state]"),this.$housenumber=this.$("[data-kb-osm-housenumber]"),_.defer(function(){e.setupMap(),_.defer(function(){e.map.invalidateSize()})}),this.$map.on("mouseenter",function(){e.map.invalidateSize()})},updateMarker:function(){var e=this.$lat.val(),t=this.$lng.val();this.setMarker(e,t,this.default,!1),this.map.setView(this.marker.getLatLng())},derender:function(){},reverseGeocode:function(e,t,i){var n=this;new L.Control.Geocoder.Nominatim({collapsed:!1,defaultMarkGeocode:!1}).reverse(L.latLng(e,t),18,function(e){i.call(n,e)})},setupMap:function(){var n=this;this.map=L.map(this.uniq).setView([53.551086,9.993682],15),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery  <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18}).addTo(this.map);var e=new L.Control.Geocoder({collapsed:!1,defaultMarkGeocode:!1});e.on("markgeocode",function(e){n.map.setView(e.geocode.center,17),n.setMarker(e.geocode.properties.lat,e.geocode.properties.lon,Object.assign({},n.default,e.geocode.properties.address),!0)}),e.addTo(this.map),this.map.on("click",function(i){n.reverseGeocode(i.latlng.lat,i.latlng.lng,function(e){var t=e[0];t&&t.properties||n.setMarker(i.latlng.lat,i.latlng.lng,n.default,!0),n.setMarker(i.latlng.lat,i.latlng.lng,Object.assign({},n.default,{road:t.properties.address.footway||t.properties.address.pedestrian||t.properties.address.road,postcode:t.properties.address.postcode,village:t.properties.address.city||t.properties.address.town,state:t.properties.address.state||t.properties.address.city,house_number:t.properties.address.house_number||""}),!0)})}),this.updateMarker(),this.$(".leaflet-control-geocoder,[data-prevent-send]").on("keydown",function(e){13===e.which&&(e.stopPropagation(),e.preventDefault())})},setMarker:function(e,t,i,n){var o=this;n=n||!1,o.marker&&o.map.removeLayer(o.marker),o.marker=L.marker([e,t]).addTo(o.map),o.$lat.val(e),o.$lng.val(t),n&&(o.$road.val(i.road),o.$village.val(i.village),o.$postcode.val(i.postcode),o.$state.val(i.state),o.$housenumber.val(i.house_number))},toString:function(){return""}})},{"../FieldControlBaseView":31,"common/Config":22,"common/Utilities":30}],71:[function(e,t,i){var n=e("../FieldControlBaseView");t.exports=n.extend({events:{"click .js-oday-activate-split":"split","click input[type=checkbox]":"toggleClosed"},initialize:function(){this.render()},toggleClosed:function(){var e=this.$("tr");jQuery.each(e,function(e,t){var i=jQuery(t);jQuery("input[type=checkbox]",i).is(":checked")?i.find("input[type=text]:not(.ot-label)").attr("disabled","disabled"):i.find("input[type=text]:not(.ot-label)").removeAttr("disabled","")})},render:function(){this.$(".kb-ot-timepicker").kbdatetimepicker({datepicker:!1,format:"H:i",validateOnBlur:!1,step:30}),this.toggleClosed()},derender:function(){this.$(".kb-ot-timepicker").kbdatetimepicker("destroy")},split:function(){this.$("table").toggleClass("split")}})},{"../FieldControlBaseView":31}],72:[function(e,t,i){var n=e("../FieldControlBaseView");t.exports=n.extend({initialize:function(){this.defaults={sortable:!1,placeholder:"Click here to add options"},this.settings=this.model.get("settings")||{},this.render()},render:function(){var e=this,t=_.extend(this.defaults,this.settings);t.sortable?(this.$el.addClass("select-sortable"),this.$("[data-kbselect2='true']").select2_sortable(t)):(this.$el.removeClass("select-sortable"),this.$("[data-kbselect2='true']").select2(t)),e.$(".select2-search__field").attr("placeholder",t.placeholder),this.$el.on("change",function(){e.$(".select2-search__field").attr("placeholder",t.placeholder)})},rerender:function(){this.render()},derender:function(){_.extend(this.defaults,this.settings).sortable?this.$("[data-kbselect2='true']").select2_sortable("destroy"):(this.$el.removeClass("select-sortable"),this.$("[data-kbselect2='true']").select2("destroy"))}})},{"../FieldControlBaseView":31}],73:[function(e,t,i){var n=e("../FieldControlBaseView"),o=e("fields/controls/subarea/SubareaController");t.exports=n.extend({initialize:function(){this.createController(),this.render()},render:function(){this.$stage=this.$(".kb-field--subarea-stage"),this.SubareaConroller.setElement(this.$stage.get(0)),this.SubareaConroller.render()},derender:function(){this.SubareaConroller.derender()},rerender:function(){this.SubareaConroller.derender(),this.model.setData(),this.render()},createController:function(){if(!this.SubareaConroller)return this.SubareaConroller=new o({el:this.$(".kb-field--subarea-stage"),model:this.model,parentView:this,subarea:KB.Areas.get(this.$(".kb-field--subarea-stage").attr("id")),area:this.model.ModuleModel.Area})}})},{"../FieldControlBaseView":31,"fields/controls/subarea/SubareaController":77}],74:[function(e,t,i){var n=e("shared/ModuleBrowser/ModuleBrowserController"),o=e("common/Checks"),s=e("common/Config"),r=e("common/Notice"),l=e("common/Ajax");t.exports=n.extend({initialize:function(e){n.prototype.initialize.apply(this,arguments),this.subarea=e.subarea,this.isSubarea=!0},createModule:function(e){var t;o.userCan("create_kontentblocks")||r.notice("You're not allowed to do this","error"),t={action:"createNewModule",class:e.get("settings").class,globalModule:e.get("globalModule"),parentObject:e.get("parentObject"),parentObjectId:e.get("parentObjectId"),areaContext:this.subarea.model.get("context"),area:this.subarea.model.get("id"),_ajax_nonce:s.getNonce("create"),frontend:KB.appData.config.frontend,submodule:!0},this.area.model.get("parent_id")&&(t.postId=this.area.model.get("parent_id")),l.send(t,this.success,this)},success:function(e){this.trigger("browser.module.created",{res:e}),this.close()}})},{"common/Ajax":20,"common/Checks":21,"common/Config":22,"common/Notice":25,"shared/ModuleBrowser/ModuleBrowserController":152}],75:[function(e,t,i){var n=e("fields/controls/subarea/templates/module-view.hbs"),o=e("common/Ajax"),s=e("common/Config"),r=e("common/TinyMCE"),l=e("common/Payload"),a=e("backend/Views/FullscreenView"),d=e("common/UI");t.exports=Backbone.View.extend({events:{"click .kbms-action--open":"openForm","click .kbms-action--delete":"removeModule","click .kbms-action--update":"saveModule"},tagName:"div",className:"kb-submodule",initialize:function(e){this.formLoaded=!1,this.slotView=e.slotView,this.controller=e.slotView.controller,this.ModuleModel=e.ModuleModel,this.parentModel=e.parentModel},draft:function(){},render:function(){var e=this;this.$el.append(n({module:this.ModuleModel.toJSON()})),this.slotView.$container.prepend(this.$el),this.$el.attr("data-kba-mid",this.ModuleModel.get("mid")),_.defer(function(){e.setupElements()})},setupElements:function(){this.$inner=this.$(".kbsm-inner")},openForm:function(){KB.EditModalModules?this.handleFrontend():this.handleBackend()},handleBackend:function(){if(this.formLoaded)this.open();else{var e={action:"getModuleBackendForm",_ajax_nonce:s.getNonce("read"),module:this.ModuleModel.toJSON()};o.send(e,this.success,this)}},handleFrontend:function(){var e=KB.Modules.get(this.model.get("mid"));console.log(e),KB.EditModalModules.openView(e.View,!1,!0)},success:function(e){this.$inner.hide().append(e.data.html);var t=KB.ObjectProxy.add(KB.Modules.add(this.ModuleModel.toJSON()));_.defer(function(){l.parseAdditionalJSON(e.data.json)}),this.formLoaded=!0,r.addEditor(this.$el),this.ModuleModel=t,this.open()},open:function(){s.get("frontend")||(this.fsControl||(this.fsControl=new a({model:this.ModuleModel})),this.fsControl.open()),this.listenToOnce(this.fsControl,"close",this.getDirty),d.repaint(this.fsControl.$el)},saveModule:function(){if(!this.formLoaded)return!1;this.ModuleModel.sync(),this.getClean()},getDirty:function(){this.$el.addClass("is-dirty")},getClean:function(){this.$el.removeClass("is-dirty")},removeModule:function(e){this.slotView.removeModuleView(e)}})},{"backend/Views/FullscreenView":7,"common/Ajax":20,"common/Config":22,"common/Payload":26,"common/TinyMCE":28,"common/UI":29,"fields/controls/subarea/templates/module-view.hbs":79}],76:[function(e,t,i){var n=e("fields/controls/subarea/ModuleBrowser"),o=e("fields/controls/subarea/ModuleView"),s=e("common/Ajax"),r=e("common/Config"),l=e("fields/controls/subarea/templates/empty.hbs");t.exports=Backbone.View.extend({hasModule:!1,events:{click:"click"},initialize:function(e){this.controller=e.controller,this.slotId=e.slotId,this.ModuleView=null,this.ModuleModel=null,this.setup(),this.render(),this.listenTo(this.model,"change",this.updateInput)},setModule:function(e){_.isNull(e)||(this.ModuleModel=new Backbone.Model(e))},updateInputValue:function(e){this.$input.val(e)},updateInput:function(){this.$container.empty(),this.ModuleModel&&this.ModuleModel.get("submodule")?(this.ModuleView=new o({slotView:this,model:this.model,ModuleModel:this.ModuleModel,parentModel:this.controller.model.ModuleModel}),this.ModuleView.render(),this.$(".kbsm-empty").remove()):this.$container.prepend(l({})),this.updateInputValue(this.model.get("mid"))},setup:function(){var e=this.controller.model;this.basename=e.get("baseId"),e.get("arrayKey")&&(this.basename=this.basename+"["+e.get("arrayKey")+"]"),this.basename=this.basename+"["+e.get("fieldkey")+"][slots]["+this.slotId+"][mid]",this.$input=jQuery("<input type='hidden' name='"+this.basename+"'>"),this.$container=jQuery("<div></div>")},render:function(){this.$el.append(this.$container),this.$el.append(this.$input)},click:function(){this.ModuleBrowser||(this.ModuleBrowser=new n({area:this.controller.subarea.View,subarea:this.controller.subarea.View}),this.listenTo(this.ModuleBrowser,"browser.module.created",this.moduleCreated)),this.ModuleView||this.ModuleBrowser.render()},dispose:function(){},moduleCreated:function(e){var t=this,i=e.res.data.module;_.defer(function(){t.setModule(i),t.model.set("mid",""),t.model.set("mid",i.mid),t.trigger("module.created"),t.listenToOnce(t.controller.model.ModuleModel.View,"modal.after.nodeupdate",function(){_.defer(function(){KB.ObjectProxy.add(KB.Modules.add(i)),t.controller.setupViewConnections()})}),KB.Events.trigger("modal.preview")})},removeModuleView:function(e){e.stopPropagation(),s.send({action:"removeModules",_ajax_nonce:r.getNonce("delete"),module:this.model.get("mid")},this.removeSuccess,this)},removeSuccess:function(e){var t=this;e.success&&(this.ModuleView.stopListening(),this.ModuleView.remove(),this.ModuleView=null,delete this.ModuleView,this.ModuleModel=null,_.defer(function(){t.model.set({mid:""})}),this.trigger("module.removed"))}})},{"common/Ajax":20,"common/Config":22,"fields/controls/subarea/ModuleBrowser":74,"fields/controls/subarea/ModuleView":75,"fields/controls/subarea/templates/empty.hbs":78}],77:[function(e,t,i){var l=e("fields/controls/subarea/SlotView"),n=e("common/Logger"),o=e("frontend/Views/ModuleView");e("common/Config");t.exports=Backbone.View.extend({initialize:function(e){this.area=e.area,this.subarea=e.subarea,this.parentView=e.parentView,this.listenTo(this.model.ModuleModel.View,"modal.before.nodeupdate",this.disposeSubviews),this.listenTo(this.model.ModuleModel.View,"modal.after.nodeupdate",this.updateSubviews),this.listenTo(this.model.ModuleModel,"modal.serialize.before",this.unbindFields),this.listenTo(this.model.ModuleModel,"modal.serialize",this.rebindFields),n.Debug.log("Fields: SubareaController created")},unbindFields:function(){_.each(this.subViews,function(e){e.model.trigger("modal.serialize.before")})},rebindFields:function(){_.each(this.subViews,function(e){e.model.trigger("modal.serialize")})},setupViewConnections:function(){var i={};return _.each(this.slotViews,function(e){if(""!==e.model.get("mid")){var t=KB.Modules.get(e.model.get("mid"));t&&t.View?i[e.model.get("mid")]=t.View:t&&_.defer(function(){KB.Views.Modules.add(t.get("mid"),new o({model:t,el:"#"+t.get("mid")}))})}}),i},updateSubviews:function(){this.setupViewConnections(),_.each(this.subViews,function(e){e.rerender()})},disposeSubviews:function(){_.each(this.subViews,function(e){e.derender()})},derender:function(){n.Debug.log("Fields: SubareaController derender")},render:function(){var e=this;n.Debug.log("Fields: SubareaController render"),this.convertDom(),this.slotViews={},this.$slotContainers=this.setupSlotContainers(),this.slotViews=this.setupViews(),_.defer(function(){e.subViews=e.setupViewConnections(),e.draggable()})},setupSlotContainers:function(){return this.$("[data-kbml-slot]")},draggable:function(){var i,n,o,s,r=this;this.$(".kbml-slot").draggable({revert:"invalid",helper:"clone",revertDuration:200,start:function(){i=jQuery(this).find(".kb-submodule"),o=jQuery(this),jQuery(this).addClass("being-dragged")},stop:function(){i=null,jQuery(this).removeClass("being-dragged")}}),this.$(".kbml-slot").droppable({hoverClass:"drop-hover",over:function(e,t){n=jQuery(e.target).find(".kb-submodule"),s=jQuery(this)},drop:function(e,t){return i.detach(),n.detach(),o.append(n),s.append(i),r.reindex(),!1}})},reindex:function(){_.each(this.slotViews,function(e){var t=e.$("[data-kba-mid]");if(1===t.length){var i=t.data("kba-mid");i&&e.updateInputValue(i)}else e.updateInputValue("")})},convertDom:function(){this.$el.find("*").each(function(e,t){t.removeAttribute("style"),t.removeAttribute("class");var i=t.dataset;i.kbaEl&&(t.className=i.kbaEl)})},setupViews:function(){var s=this,r={};return _.each(this.$slotContainers,function(e){var t=jQuery(e),i=t.data("kbml-slot"),n=this.createSlotId(i),o=new l({el:t,model:new Backbone.Model({}),controller:this,slotId:n});(r[n]=o).setModule(this.getSlotModule(n)),_.defer(function(){o.model.set(s.getSlotData(n))}),this.listenTo(o,"module.created",this.updateParent),this.listenTo(o,"module.removed",this.updateParent)},this),r},createSlotId:function(e){return"slot-"+e},getSlotModule:function(e){var t=(this.model.get("value").modules||{})[e];return t&&t.mid&&""!==t.mid?t:null},getSlotData:function(e){var t=this.model.get("value").slots||{};return _.isObject(t)||(t={}),t[e]?t[e]:{mid:""}},updateParent:function(){this.model.ModuleModel.sync()}})},{"common/Config":22,"common/Logger":24,"fields/controls/subarea/SlotView":76,"frontend/Views/ModuleView":135}],78:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){return'<div class="kb-submodule">\n    <div class="kbsm-empty add-modules">\n        <div>Modul auswhlen</div>\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":260}],79:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kbsm-details">\n    <div class="kbsm--name">'+l(r(null!=(s=null!=(s=null!=t?a(t,"module"):t)?a(s,"settings"):s)?a(s,"name"):s,t))+'</div>\n    <div class="kbsm--name">'+l(r(null!=(s=null!=t?a(t,"module"):t)?a(s,"mid"):s,t))+'</div>\n</div>\n<div class="kbsm-actions">\n    <div class="kbsm-action kbms-action--open" data-kbtooltip="open form"><span\n            class="dashicons dashicons-admin-generic"></span></div>\n    <div class="kbsm-action kbms-action--delete" data-kbtooltip="delete"><span\n            class="dashicons dashicons-welcome-comments"></span></div>\n    <div class="kbsm-action kbms-action--update" data-kbtooltip="update"><span\n            class="dashicons dashicons-update"></span></div>\n</div>\n<div class="kbsm-inner">\n    <div class="kbsm-button kbms-action--open">Bearbeiten</div>\n</div>'},useData:!0})},{"hbsfy/runtime":260}],80:[function(e,t,i){var n=e("../FieldControlBaseView");t.exports=n.extend({initialize:function(){this.render()},render:function(){jQuery(".kb-tags-input").length&&window.tagBox&&window.tagBox.init()},toString:function(){return""}})},{"../FieldControlBaseView":31}],81:[function(e,t,i){var n=e("../FieldControlBaseView"),o=e("fields/controls/text-multiple/TextMultipleController");t.exports=n.extend({initialize:function(){this.createController(),this.render()},render:function(){var e=this;this.$stage=this.$('[data-kftype="text-multiple"]'),this.TextMultipleController.setElement(this.$stage.get(0)),_.defer(function(){e.TextMultipleController.render()})},derender:function(){this.FlexFieldsController.derender()},rerender:function(){this.render()},createController:function(){if(!this.TextMultipleController)return this.TextMultipleController=new o({el:this.$('[data-kftype="text-multiple"]'),model:this.model,parentView:this})}})},{"../FieldControlBaseView":31,"fields/controls/text-multiple/TextMultipleController":82}],82:[function(e,t,i){var n=e("fields/MultipleControllerBase");t.exports=n.extend({type:"text-multiple"})},{"fields/MultipleControllerBase":36}],83:[function(e,t,i){var n=e("../FieldControlBaseView");t.exports=n.extend({initialize:function(){this.render()},render:function(){var e=this,t=this.model.get("attributes");this.$input=this.$(".kb-field--text input"),this.$input.on("change",function(){e.update(e.$input.val())}),t&&t.maxlength&&(this.$count=jQuery("<span class='charcount kb-field--bubble'></span>").insertAfter(this.$input),this.$input.on("keyup change",function(){e.charcount(e.$input.val(),e.$count,t.maxlength)}).trigger("keyup"))},derender:function(){this.$input.off(),this.$count&&this.$count.off().remove()},update:function(e){this.model.set("value",e)},toString:function(){return this.$input.val()},charcount:function(e,t,i){var n=i-e.length;t.html(n+" chars left")}})},{"../FieldControlBaseView":31}],84:[function(e,t,i){var n=e("../FieldControlBaseView");t.exports=n.extend({initialize:function(){this.render()},render:function(){var e=this,t=this.model.get("attributes");this.$textarea=this.$("textarea"),this.$textarea.on("change",function(){e.update(e.$textarea.val())}),t&&t.maxlength&&(this.$count=jQuery("<span class='charcount kb-field--bubble'></span>").insertAfter(this.$textarea),this.$textarea.on("keyup change",function(){e.charcount(e.$textarea.val(),e.$count,t.maxlength)}).trigger("keyup"))},derender:function(){this.$textarea.off(),this.$count&&this.$count.off().remove()},update:function(e){this.model.set("value",e)},toString:function(){return this.$textarea.val()},charcount:function(e,t,i){var n=i-e.length;t.html(n+" chars left")}})},{"../FieldControlBaseView":31}],85:[function(e,t,i){t.exports={fields:{},register:function(e){var t=e.prototype.type;this.fields[t]=e},get:function(e){return new(this.fields[e.model.get("type")])({model:new Backbone.Model(e.model.toJSON())})},getRefByType:function(e,t){return new this.fields[e]({model:new Backbone.Model(t)})}}},{}],86:[function(e,t,i){e("fieldsAPI/hbsHelpers");var n=e("fieldsAPI/FieldsAPICollection");KB.FieldsAPI=n,KB.FieldsAPI.register(e("fieldsAPI/definitions/editor")),KB.FieldsAPI.register(e("fieldsAPI/definitions/image")),KB.FieldsAPI.register(e("fieldsAPI/definitions/link")),KB.FieldsAPI.register(e("fieldsAPI/definitions/text")),KB.FieldsAPI.register(e("fieldsAPI/definitions/file")),KB.FieldsAPI.register(e("fieldsAPI/definitions/file-multiple")),KB.FieldsAPI.register(e("fieldsAPI/definitions/select")),KB.FieldsAPI.register(e("fieldsAPI/definitions/checkbox")),KB.FieldsAPI.register(e("fieldsAPI/definitions/text-multiple")),KB.FieldsAPI.register(e("fieldsAPI/definitions/date-multiple")),KB.FieldsAPI.register(e("fieldsAPI/definitions/textarea")),KB.FieldsAPI.register(e("fieldsAPI/definitions/medium")),KB.FieldsAPI.register(e("fieldsAPI/definitions/color")),KB.FieldsAPI.register(e("fieldsAPI/definitions/oembed")),KB.FieldsAPI.register(e("fieldsAPI/definitions/datetime")),KB.FieldsAPI.register(e("fieldsAPI/definitions/radioset"))},{"fieldsAPI/FieldsAPICollection":85,"fieldsAPI/definitions/checkbox":88,"fieldsAPI/definitions/color":89,"fieldsAPI/definitions/date-multiple":90,"fieldsAPI/definitions/datetime":91,"fieldsAPI/definitions/editor":92,"fieldsAPI/definitions/file":94,"fieldsAPI/definitions/file-multiple":93,"fieldsAPI/definitions/image":95,"fieldsAPI/definitions/link":96,"fieldsAPI/definitions/medium":97,"fieldsAPI/definitions/oembed":98,"fieldsAPI/definitions/radioset":99,"fieldsAPI/definitions/select":100,"fieldsAPI/definitions/text":102,"fieldsAPI/definitions/text-multiple":101,"fieldsAPI/definitions/textarea":103,"fieldsAPI/hbsHelpers":104}],87:[function(e,t,i){t.exports=Backbone.View.extend({tagName:"div",className:"kb-dyn-field",initialize:function(){this.defaults=this.getDefaults()||{},this.extendModel()},getDefaults:function(){return""},setDefaults:function(){this.setValue(this.getDefaults())},setValue:function(e){this.model.set("value",e)},derender:function(){this.model.destroy(),this.stopListening(),this.remove()},prepareBaseId:function(){return _.isEmpty(this.model.get("arrayKey"))?this.model.get("fieldId")+"["+this.model.get("fieldkey")+"]":this.model.get("fieldId")+"["+this.model.get("arrayKey")+"]["+this.model.get("fieldkey")+"]"},extendModel:function(){this.model.set("baseId",this.prepareBaseId()),this.model.set("uid",this.kbfuid()),this.model.set("kpath",this.prepareKpath())},prepareKpath:function(){var e=[];return this.model.get("arrayKey")&&e.push(this.model.get("arrayKey")),this.model.get("fieldkey")&&e.push(this.model.get("fieldkey")),this.model.get("index")&&e.push(this.model.get("index")),this.model.get("primeKey")&&e.push(this.model.get("primeKey")),e.join(".")},kbfuid:function(){return(this.model.get("index")||"")+this.model.get("fieldId")+this.model.get("primeKey")+this.model.get("type")}})},{}],88:[function(e,t,i){var n=e("fieldsAPI/definitions/baseView");t.exports=n.extend({templatePath:"fields/Checkbox",template:e("templates/fields/Checkbox.hbs"),type:"checkbox",render:function(){return this.template({model:this.model.toJSON()})}})},{"fieldsAPI/definitions/baseView":87,"templates/fields/Checkbox.hbs":177}],89:[function(e,t,i){var n=e("fieldsAPI/definitions/baseView");t.exports=n.extend({templatePath:"fields/Color",template:e("templates/fields/Color.hbs"),type:"color",render:function(){return this.template({model:this.model.toJSON()})},getDefaults:function(){return""}})},{"fieldsAPI/definitions/baseView":87,"templates/fields/Color.hbs":178}],90:[function(e,t,i){var n=e("fieldsAPI/definitions/baseView");t.exports=n.extend({templatePath:"fields/DateMultiple",template:e("templates/fields/DateMultiple.hbs"),type:"date-multiple",render:function(){var e=this.template({model:this.model.toJSON()});return this.setElement(e),this.$el},postRender:function(){var i=this;this.defaults={format:"d.m.Y H:i",inline:!1,mask:!0,lang:"de",allowBlank:!0,onChangeDateTime:function(e,t){i.$unixIn.val(e.dateFormat("unixtime")),i.$sqlIn.val(e.dateFormat("Y-m-d H:i:s"))}},this.settings=this.model.get("settings")||{},this.$unixIn=this.$(".kb-datetimepicker--js-unix"),this.$sqlIn=this.$(".kb-datetimepicker--js-sql"),this.$(".kb-datetimepicker").datetimepicker(_.extend(this.defaults,this.settings))}})},{"fieldsAPI/definitions/baseView":87,"templates/fields/DateMultiple.hbs":179}],91:[function(e,t,i){var n=e("fieldsAPI/definitions/baseView");t.exports=n.extend({templatePath:"fields/DateTime",template:e("templates/fields/Datetime.hbs"),type:"datetime",render:function(){var e=this.template({model:this.model.toJSON()});return this.setElement(e),this.$el},postRender:function(){var i=this;this.defaults={format:"d.m.Y H:i",inline:!1,mask:!0,lang:"de",allowBlank:!0,onChangeDateTime:function(e,t){i.$unixIn.val(e.dateFormat("unixtime")),i.$sqlIn.val(e.dateFormat("Y-m-d H:i:s"))}},this.settings=this.model.get("settings")||{},this.$unixIn=this.$(".kb-datetimepicker--js-unix"),this.$sqlIn=this.$(".kb-datetimepicker--js-sql"),this.$(".kb-datetimepicker").datetimepicker(_.extend(this.defaults,this.settings))}})},{"fieldsAPI/definitions/baseView":87,"templates/fields/Datetime.hbs":180}],92:[function(e,t,i){var n=e("common/TinyMCE"),o=e("fieldsAPI/definitions/baseView");t.exports=o.extend({$editorWrap:null,templatePath:"fields/Editor",template:e("templates/fields/Editor.hbs"),type:"editor",initialize:function(e){o.prototype.initialize.call(this,e)},setValue:function(e){this.model.set("value",e)},render:function(e){return this.index=e,this.template({config:this.config,baseId:this.baseId,index:e,model:this.model.toJSON()})},postRender:function(){var e=this,t=this.model.get("baseId")+"["+this.model.get("index")+"]["+this.model.get("primeKey")+"]",i=this.model.get("fieldId")+"_"+this.model.get("key")+"_editor_"+this.model.get("index");this.$editorWrap=jQuery(".kb-ff-editor-wrapper-"+this.model.get("index")+"-"+this.model.get("key"),this.$el);try{this.fieldModel.getEntityModel().View.isOpen()?n.remoteGetEditor(this.$editorWrap,t,i,this.model.get("value"),null,this.model.get("media")):this.listenToOnce(this.fieldModel.getEntityModel(),"kb.module.view.open",function(){n.remoteGetEditor(this.$editorWrap,t,i,e.model.get("value"),null,e.model.get("media"))})}catch(e){n.remoteGetEditor(this.$editorWrap,t,i,this.model.get("value"),null,this.model.get("media"))}}})},{"common/TinyMCE":28,"fieldsAPI/definitions/baseView":87,"templates/fields/Editor.hbs":181}],93:[function(e,t,i){var n=e("fieldsAPI/definitions/baseView");t.exports=n.extend({templatePath:"fields/FileMultiple",template:e("templates/fields/FileMultiple.hbs"),type:"file-multiple",className:"kb-dyn-file-field",render:function(){return this.$el.append(this.template({model:this.model.toJSON(),i18n:_.extend(KB.i18n.Refields.file,KB.i18n.Refields.common)})),this.$el},events:{"click .kb-js-add-file":"openFrame","click .kb-js-reset-file":"reset"},postRender:function(){this.model.get("value");var e={},t=this;this.$container=this.$(".kb-field-file-wrapper"),this.$IdIn=this.$(".kb-file-attachment-id"),this.$resetIn=this.$(".kb-js-reset-file"),_.isEmpty(this.model.get("value").id)||(e.post__in=[this.model.get("value").id],wp.media.query(e).more().done(function(){var e=this.first();e&&(e.set("attachment_id",e.get("id")),t.handleAttachment(e))}))},derender:function(){this.frame&&(this.frame.dispose(),this.frame=null)},openFrame:function(){var e=this;if(this.frame)return this.frame.open();var t={title:KB.i18n.Refields.file.modalTitle,button:{text:KB.i18n.Refields.common.select},multiple:!1,library:{type:""}};return!0===e.model.get("uploadedTo")&&(t.library.uploadedTo=KB.Environment.postId||0),this.frame=wp.media(t),this.frame.on("ready",function(){e.ready(this)}),this.frame.state("library").on("select",function(){e.select(this)}),this.frame.open()},ready:function(e){this.$(".media-modal").addClass(" smaller no-sidebar");var t=this.model.get("settings");t&&t.uploadFolder&&(this.frame.uploader.options.uploader.params.upload_folder=t.uploadFolder)},select:function(e){var t=e.get("selection").first();this.handleAttachment(t)},handleAttachment:function(e){this.$(".kb-file-filename",this.$container).html(e.get("filename")),this.$(".kb-file-attachment-id",this.$container).val(e.get("id")),this.$(".kb-file-title",this.$container).html(e.get("title")),this.$(".kb-file-id",this.$container).html(e.get("id")),this.$(".kb-file-editLink",this.$container).attr("href",e.get("editLink")),this.$resetIn.show(),this.$container.show(450,function(){KB.Events.trigger("modal.recalibrate")})},reset:function(){this.$IdIn.val(""),this.$container.hide(450),this.$resetIn.hide()}})},{"fieldsAPI/definitions/baseView":87,"templates/fields/FileMultiple.hbs":183}],94:[function(e,t,i){var n=e("fieldsAPI/definitions/baseView");t.exports=n.extend({templatePath:"fields/File",template:e("templates/fields/File.hbs"),type:"file",render:function(){return this.template({model:this.model.toJSON(),i18n:_.extend(KB.i18n.Refields.file,KB.i18n.Refields.common)})},postRender:function(){this.model.get("value");var e={},t=this;_.isEmpty(this.model.get("value").id)||(e.post__in=[this.model.get("value").id],wp.media.query(e).more().done(function(){var e=this.first();e&&(e.set("attachment_id",e.get("id")),t.fieldModel&&t.fieldModel.FieldControlView&&t.fieldModel.FieldControlView.handleAttachment(e))}))}})},{"fieldsAPI/definitions/baseView":87,"templates/fields/File.hbs":182}],95:[function(e,t,i){var n=e("fieldsAPI/definitions/baseView");e("common/Utilities"),e("common/Config");t.exports=n.extend({$currentWrapper:null,$currentFrame:null,templatePath:"fields/Image",template:e("templates/fields/Image.hbs"),type:"image",render:function(e){return this.template({model:this.model.toJSON(),i18n:_.extend(KB.i18n.Refields.image,KB.i18n.Refields.common)})},postRender:function(){this.model.get("value");var e={},t=this,i=this.model.get("value").id;if("number"==typeof i&&(i=i.toString()),i){e.post__in=[this.model.get("value").id];wp.media.query(e).more().done(function(){var e=this.first();e&&(e.set("attachment_id",e.get("id")),t.fieldModel&&t.fieldModel.FieldControlView&&t.fieldModel.FieldControlView.handleAttachment(e))})}}})},{"common/Config":22,"common/Utilities":30,"fieldsAPI/definitions/baseView":87,"templates/fields/Image.hbs":190}],96:[function(e,t,i){var n=e("fieldsAPI/definitions/baseView");t.exports=n.extend({templatePath:"fields/Link",template:e("templates/fields/Link.hbs"),type:"link",render:function(){return this.template({i18n:_.extend(KB.i18n.Refields.link,KB.i18n.Refields.common),model:this.model.toJSON()})},getDefaults:function(){return{link:"",linktext:"",linktitle:""}}})},{"fieldsAPI/definitions/baseView":87,"templates/fields/Link.hbs":191}],97:[function(e,t,i){var n=e("fieldsAPI/definitions/baseView");t.exports=n.extend({templatePath:"fields/Medium",template:e("templates/fields/Medium.hbs"),type:"medium",render:function(){return this.template({model:this.model.toJSON()})},postRender:function(){},getDefaults:function(){return""}})},{"fieldsAPI/definitions/baseView":87,"templates/fields/Medium.hbs":192}],98:[function(e,t,i){var n=e("fieldsAPI/definitions/baseView");t.exports=n.extend({templatePath:"fields/Oembed",template:e("templates/fields/Oembed.hbs"),type:"oembed",render:function(){return this.template({model:this.model.toJSON()})},getDefaults:function(){return""}})},{"fieldsAPI/definitions/baseView":87,"templates/fields/Oembed.hbs":193}],99:[function(e,t,i){var n=e("fieldsAPI/definitions/baseView");t.exports=n.extend({templatePath:"fields/Radioset",template:e("templates/fields/Radioset.hbs"),type:"radioset",render:function(){return this.template({model:this.model.toJSON()})}})},{"fieldsAPI/definitions/baseView":87,"templates/fields/Radioset.hbs":194}],100:[function(e,t,i){var n=e("fieldsAPI/definitions/baseView");t.exports=n.extend({templatePath:"fields/Text",template:e("templates/fields/Select.hbs"),type:"select",render:function(){return this.template({model:this.model.toJSON()})}})},{"fieldsAPI/definitions/baseView":87,"templates/fields/Select.hbs":195}],101:[function(e,t,i){var n=e("fieldsAPI/definitions/baseView");t.exports=n.extend({templatePath:"fields/TextMultiple",template:e("templates/fields/TextMultiple.hbs"),type:"text-multiple",render:function(){var e=this.template({model:this.model.toJSON()});return this.setElement(e),this.$el}})},{"fieldsAPI/definitions/baseView":87,"templates/fields/TextMultiple.hbs":197}],102:[function(e,t,i){var n=e("fieldsAPI/definitions/baseView");t.exports=n.extend({templatePath:"fields/Text",template:e("templates/fields/Text.hbs"),type:"text",render:function(){return this.template({model:this.model.toJSON()})},getDefaults:function(){return""},charcount:function(e,t,i){var n=i-e.length;t.html(n+" chars left")}})},{"fieldsAPI/definitions/baseView":87,"templates/fields/Text.hbs":196}],103:[function(e,t,i){var n=e("fieldsAPI/definitions/baseView");t.exports=n.extend({type:"textarea",templatePath:"fields/Textarea",template:e("templates/fields/Textarea.hbs"),render:function(){return this.template({model:this.model.toJSON()})},getDefaults:function(){return""}})},{"fieldsAPI/definitions/baseView":87,"templates/fields/Textarea.hbs":198}],104:[function(e,t,i){var o=e("hbsfy/runtime");o.registerHelper("debug",function(e){console.log("Current Context"),console.log("===================="),console.log(this),e&&(console.log("Value"),console.log("===================="),console.log(e))}),o.registerHelper("fieldName",function(e,t,i){return e+"["+t+"]["+i+"]"}),o.registerHelper("ifCond",function(e,t,i,n){switch(t){case"==":return e==i?n.fn(this):n.inverse(this);case"===":return e===i?n.fn(this):n.inverse(this);case"<":return e<i?n.fn(this):n.inverse(this);case"<=":return e<=i?n.fn(this):n.inverse(this);case">":return i<e?n.fn(this):n.inverse(this);case">=":return i<=e?n.fn(this):n.inverse(this);case"&&":return e&&i?n.fn(this):n.inverse(this);case"||":return e||i?n.fn(this):n.inverse(this);default:return n.inverse(this)}}),o.registerHelper("trimString",function(e,t){t=t||50;var i=e.length>t,n=e.substring(0,t);return i&&(n+=""),new o.SafeString(n)})},{"hbsfy/runtime":260}],105:[function(e,t,i){var n=e("common/Utilities"),o=e("common/Config");t.exports={_active:!1,init:function(){var t=this;if(jQuery("#wpadminbar").on("click","li.kb-edit-switch a",function(e){e.preventDefault()}),n.stex.get("kb.showcontrols")||o.get("editAlwaysOn")){var e=jQuery(".kb-edit-switch a");this.control(e)}var i=0;jQuery(window).keydown(function(e){17===e.which&&(3<=++i&&(t.control(),i=0),setTimeout(function(){i=0},1e3))}),jQuery(document).on("heartbeat-send",function(e,t){var i=KB.appData.config.post.ID;t.kbEditWatcher=i})},control:function(e){this._active=!this._active,jQuery(e).parent("li").toggleClass("kb-edit-on"),jQuery("body").toggleClass("kb-editcontrols-show"),n.stex.set("kb.showcontrols",this._active,144e4),KB.Events.trigger("reposition"),KB.Events.trigger("content.change"),this._active?KB.Events.trigger("editcontrols.show"):KB.Events.trigger("editcontrols.hide")},isActive:function(){return this._active}}},{"common/Config":22,"common/Utilities":30}],106:[function(e,t,i){var n=e("fields/FieldControlModelModal");t.exports=Backbone.Collection.extend({model:n})},{"fields/FieldControlModelModal":33}],107:[function(e,t,i){t.exports=Backbone.Collection.extend({filterByAttr:function(t,i){return this.filter(function(e){return e.get(t)===i},this)}})},{}],108:[function(o,e,t){var s=window.KB||{};s.Events={},_.extend(s,Backbone.Events),_.extend(s.Events,Backbone.Events),s.currentModule={},s.currentArea={},"undefined"==typeof global&&(global=window);var i=o("shared/ViewsCollection"),r=o("frontend/Views/EditModalModules"),l=o("frontend/Views/Sidebar"),a=o("fields/FieldControlsCollection"),d=o("common/Payload"),n=o("frontend/Collections/ModuleCollection"),c=o("shared/Collections/ObjectProxyCollection"),u=o("frontend/Models/ModuleModel"),h=o("./Views/ModuleView"),p=o("frontend/Models/AreaModel"),m=o("frontend/Models/PanelModel"),f=o("./Views/PanelView"),g=o("common/UI"),b=o("common/Logger"),v=o("shared/ChangeObserver"),y=o("tether"),w=o("frontend/AdminBar"),k=o("common/Checks"),x=o("common/Config");o("fields/RefieldsController"),o("fieldsAPI/FieldsAPIController");s.Views={Modules:new i,Areas:new i,Context:new i,Panels:new i},s.Modules=new n([],{model:u}),s.Areas=new Backbone.Collection([],{model:p}),s.Panels=new Backbone.Collection([],{model:m}),s.ObjectProxy=new c([]),s.App=function(){function e(e){s.Views.Modules.add(e.get("mid"),new h({model:e,el:"#"+e.get("mid")})),g.initTabs()}function t(e){s.Views.Panels.add(e.get("settings").uid,new f({model:e,el:"body"}))}function i(e){var t=o("./Views/AreaView"),i=o("./Views/LayoutAreaView");e.get("layoutArea")?s.Views.Areas.add(e.get("id"),new i({model:e,el:"#"+e.get("id")})):s.Views.Areas.add(e.get("id"),new t({model:e,el:"#"+e.get("id")}))}function n(e){e.dispose(),s.Views.Modules.remove(e.get("mid")),s.Events.trigger("content.change")}return{init:function(){x.get("initFrontend")&&(jQuery("body").addClass("wordpress-"+x.get("wpVersion")),s.appData.config.useModuleNav&&k.userCan("edit_kontentblocks")&&(s.Sidebar=new l),window.Tether=y,o("./InlineSetup"),o("./GlobalEvents"),s.EditModalModules=new r({}),s.ChangeObserver=new v,s.Modules.on("add",e),s.Modules.on("remove",n),s.Areas.on("add",i),s.Panels.on("add",t),s.appData.config.preview||(_.each(d.getPayload("Areas"),function(e){s.ObjectProxy.add(s.Areas.add(e))}),_.each(d.getPayload("Modules"),function(e){s.ObjectProxy.add(s.Modules.add(e))}),_.each(d.getPayload("Panels"),function(e){s.ObjectProxy.add(s.Panels.add(e))}),s.Events.trigger("frontend.init")),s.FieldControls=new a,s.FieldControls.add(_.toArray(d.getPayload("Fields"))),g.init())}}}(jQuery),jQuery(document).ready(function(){s.App.init();var e=jQuery("body");s.appData&&s.appData.config.frontend&&(s.Views.Modules.readyOnFront(),b.User.info("Frontend welcomes you"),e.addClass("kontentblocks-ready"),s.Events.trigger("content.change")),jQuery(window).on("scroll resize",function(){s.Events.trigger("window.change")}),setUserSetting("editor","tinymce"),e.on("click",".kb-fx-button",function(e){jQuery(this).addClass("kb-fx-button--click"),jQuery(e.currentTarget).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){e.currentTarget.classList.remove("kb-fx-button--click")})}),s.App.adminBar=w,s.App.adminBar.init()})},{"./GlobalEvents":109,"./InlineSetup":118,"./Views/AreaView":123,"./Views/LayoutAreaView":126,"./Views/ModuleView":135,"./Views/PanelView":136,"common/Checks":21,"common/Config":22,"common/Logger":24,"common/Payload":26,"common/UI":29,"fields/FieldControlsCollection":34,"fields/RefieldsController":37,"fieldsAPI/FieldsAPIController":86,"frontend/AdminBar":105,"frontend/Collections/ModuleCollection":107,"frontend/Models/AreaModel":119,"frontend/Models/ModuleModel":120,"frontend/Models/PanelModel":121,"frontend/Views/EditModalModules":125,"frontend/Views/Sidebar":137,"shared/ChangeObserver":150,"shared/Collections/ObjectProxyCollection":151,"shared/ViewsCollection":163,tether:261}],109:[function(e,t,i){var n=e("common/Logger");KB.Events.on("module.before.sync panel.before.sync",function(e){window.tinymce&&(window.tinymce.triggerSave(),n.Debug.info("tinymce.triggerSave called"))});var o=_.debounce(window.Tether.position,25);KB.Events.on("content.change",function(){o()}),jQuery("body").on("webkitTransitionEnd moztransitionend transitionend oTransitionEnd",function(){KB.Events.trigger("content.change")})},{"common/Logger":24}],110:[function(e,t,i){var r=e("common/Config"),n=(e("common/Utilities"),e("frontend/Inline/controls/EditImage")),o=e("frontend/Inline/controls/InlineUpdate"),s=e("frontend/Inline/InlineToolbar"),l=Backbone.View.extend({initialize:function(){this.mode=this.model.get("mode"),this.defaultState=this.model.get("state")||"replace-image",this.parentView=this.model.get("ModuleModel").View,this.listenTo(this.model,"field.model.settings",this.setMode),this.listenToOnce(this.model.get("ModuleModel"),"module.create",this.showPlaceholder),this.listenTo(KB.Events,"editcontrols.show",this.showPlaceholder),this.listenTo(KB.Events,"editcontrols.hide",this.removePlaceholder),this.Toolbar=new s({FieldControlView:this,model:this.model,controls:[new n({model:this.model,parent:this}),new o({model:this.model,parent:this})]}),this.render()},showPlaceholder:function(){if(this.hasData())return!1;this.$el.on("load",function(){KB.Events.trigger("content.change reposition")});var e="https://unsplash.it/g/"+this.model.get("width")+"/"+this.model.get("height")+"?random";"simple"===this.mode?this.$el.attr("src",e):"background"===this.mode&&this.$el.css("backgroundImage","url('"+e+"')")},removePlaceholder:function(){if(this.hasData())return!1;"simple"===this.mode?this.$el.attr("src",""):"background"===this.mode&&this.$el.css("backgroundImage","url('')")},hasData:function(){return _.isNumber(parseInt(this.model.get("value").id,10))},setMode:function(e){this.model.set("mode",e.mode),this.mode=e.mode},render:function(){this.delegateEvents(),this.$el.addClass("kb-inline-imageedit-attached"),this.$caption=jQuery("*[data-"+this.model.get("uid")+"-caption]"),this.$title=jQuery("*[data-"+this.model.get("uid")+"-title]")},rerender:function(){this.render(),this.trigger("field.view.rerender",this)},gone:function(){this.trigger("field.view.gone",this),this.Toolbar.hide()},derender:function(){this.frame&&(this.frame.dispose(),this.frame=null),this.$el.off(),this.trigger("field.view.derender",this)},openFrame:function(){var t=this;this.frame&&this.frame.dispose();var e={post__in:[this.model.get("value").id]};wp.media.query(e).more().done(function(){var e=t.attachment=this.first();t.attachment.set("attachment_id",e.get("id")),t.frame=wp.media({frame:"select",state:"library",metadata:e.toJSON(),imageEditView:t,library:{type:"image"}}).on("update",function(e){t.update(e)}).on("ready",function(){t.ready()}).on("replace",function(){t.replace(t.frame.image.attachment)}).on("select",function(){var e=this.get("library").get("selection").first();t.replace(e)}).open()})},ready:function(){jQuery(".media-modal").addClass("smaller kb-image-frame")},replace:function(e){this.attachment=e,this.handleAttachment(e)},update:function(e){this.attachment.set(e),this.attachment.sync("update",this.attachment),0<this.$caption.length&&this.$caption.html(this.attachment.get("caption"))},handleAttachment:function(t,i){var n=this,e=t.get("id"),o=this.prepareValue(t);this.model.attachment=t,this.model.set("value",o),KB.Events.trigger("modal.refresh"),n.model.trigger("field.model.dirty",n.model);var s={width:n.model.get("width"),height:n.model.get("height"),crop:n.model.get("crop"),upscale:n.model.get("upscale")};jQuery.ajax({url:ajaxurl,data:{action:"fieldGetImage",args:s,id:e,_ajax_nonce:r.getNonce("read")},type:"POST",dataType:"json",success:function(e){"simple"===n.mode?n.$el.attr("src",e.data.src):"background"===n.mode&&n.$el.css("backgroundImage","url('"+e.data.src+"')"),n.delegateEvents(),i||n.model.trigger("external.change",n.model),0<n.$caption.length&&n.$caption.html(t.get("caption")),0<n.$title.length&&n.$title.html(t.get("title")),KB.Events.trigger("content.change")},error:function(){}})},prepareValue:function(e){return{id:e.get("id"),title:e.get("title"),caption:e.get("caption")}},synchronize:function(e){this.handleAttachment(e.attachment,!0)}});KB.Fields.registerObject("EditableImage",l),t.exports=l},{"common/Config":22,"common/Utilities":30,"frontend/Inline/InlineToolbar":113,"frontend/Inline/controls/EditImage":114,"frontend/Inline/controls/InlineUpdate":117}],111:[function(e,t,i){e("common/Config"),e("common/Utilities");var n=e("frontend/Inline/controls/EditLink"),o=e("frontend/Inline/controls/InlineUpdate"),s=e("frontend/Inline/InlineToolbar"),r=Backbone.View.extend({initialize:function(){this.parentView=this.model.get("ModuleModel").View,this.setupDefaults(),this.Toolbar=new s({FieldControlView:this,model:this.model,controls:[new n({model:this.model,parent:this}),new o({model:this.model,parent:this})],tether:{offset:"0 -20px"}}),this.render()},render:function(){this.Toolbar.show(),this.delegateEvents(),this.$caption=jQuery("*[data-"+this.model.get("uid")+"-caption]")},rerender:function(){this.render(),this.trigger("field.view.rerender",this)},derender:function(){this.$el.off(),this.trigger("field.view.derender",this)},gone:function(){this.trigger("field.view.gone",this),this.Toolbar.hide()},openDialog:function(){var e=this;window.wpActiveEditor="ghosteditor",jQuery("#wp-link-wrap").addClass("kb-customized"),window.kb_restore_htmlUpdate=wpLink.htmlUpdate,window.kb_restore_isMce=wpLink.isMCE,wpLink.isMCE=function(){return!1},wpLink.htmlUpdate=function(){e.htmlUpdate.call(e)},wpLink.open(),jQuery("#wp-link-text").val(this.model.get("value").linktext),jQuery("#wp-link-url").val(this.model.get("value").link)},htmlUpdate:function(){var e,t,i;if(wpLink.textarea&&(e=wpLink.getAttrs(),i=jQuery("#wp-link-text").val(),e.href&&"http://"!=e.href)){t=e.href,this.$el.attr("href",t),this.$el.text(i);var n={link:t,linktext:i};this.model.set("value",n),this.model.trigger("field.model.dirty",this.model),this.model.trigger("external.change",this.model),wpLink.close(),this.close()}},close:function(){wpLink.isMCE=window.kb_restore_isMce,wpLink.htmlUpdate=window.kb_restore_htmlUpdate,KB.Events.trigger("content.change")},setupDefaults:function(){var e=this.model.get("value");e&&""!==e||(e={});var t=_.defaults(e,{link:"",linktext:""});this.model.set("value",t)},synchronize:function(e){this.$el.attr("href",e.get("value").link),this.$el.html(e.get("value").linktext),this.model.trigger("field.model.dirty",this.model),KB.Events.trigger("content.change")}});KB.Fields.registerObject("EditableLink",r),t.exports=r},{"common/Config":22,"common/Utilities":30,"frontend/Inline/InlineToolbar":113,"frontend/Inline/controls/EditLink":115,"frontend/Inline/controls/InlineUpdate":117}],112:[function(e,t,i){var n=e("common/Utilities"),o=e("common/Config"),s=e("frontend/Inline/controls/EditText"),r=e("frontend/Inline/controls/InlineUpdate"),l=e("frontend/Inline/InlineToolbar"),a=Backbone.View.extend({initialize:function(){this.settings=this.model.get("tinymce"),this.parentView=this.model.get("ModuleModel").View,this.listenToOnce(this.model.get("ModuleModel"),"remove",this.deactivate),this.listenToOnce(this.model.get("ModuleModel"),"module.create",this.showPlaceholder),this.listenTo(KB.Events,"editcontrols.show",this.showPlaceholder),this.listenTo(KB.Events,"editcontrols.hide",this.removePlaceholder),this.listenTo(this,"kn.inline.synced",this.deactivate),this.Toolbar=new l({FieldControlView:this,model:this.model,controls:[new s({model:this.model,parent:this}),new r({model:this.model,parent:this})]}),this.render()},showPlaceholder:function(){this.preValue=this.model.get("value"),_.isEmpty(this.cleanString(this.model.get("value")))&&this.$el.html("<p>Start writing here</p>")},removePlaceholder:function(){_.isEmpty(this.cleanString(this.model.get("value")))&&this.$el.html(this.preValue)},render:function(){this.el.id&&(this.id=this.el.id),this.Toolbar.show()},derender:function(){this.deactivate(),this.trigger("field.view.derender",this),this.$el.off()},gone:function(){this.trigger("field.view.gone",this),this.Toolbar.hide()},rerender:function(){this.render(),this.trigger("field.view.rerender",this)},setupEvents:function(){$("#"+this.id);KB.Events.trigger("KB::tinymce.new-inline-editor",this.editor),this.editor.kfilter=this.model.get("filter")&&"content"===this.model.get("filter"),this.editor.module=this.model.get("ModuleModel");var e=n.getIndex(this.editor.module.get("entityData"),this.model.get("kpath"));this.editor.kfilter&&this.editor.setContent(switchEditors.wpautop(e)),this.editor.previousContent=this.editor.getContent(),this.editor.module.View.$el.addClass("kb-inline-text--active"),this.editor.subscribe("editableInput",this.handleChange.bind(this))},handleChange:function(){var e=this.editor.getContent();this.editor.kfilter&&(e=switchEditors._wp_Nop(this.editor.getContent())),this.model.set("value",e),this.model.trigger("external.change",this.model),this.model.trigger("field.model.dirty",this.model),KB.Events.trigger("content.change"),this.editor.isDirty=!0},retrieveFilteredContent:function(t,e){var i=this;jQuery.ajax({url:ajaxurl,data:{action:"applyContentFilter",content:e,postId:t.module.toJSON().parentObjectId,_ajax_nonce:o.getNonce("read")},type:"POST",dataType:"json",success:function(e){$("#"+i.id).html(e.data.content);t.destroy(),setTimeout(function(){window.twttr&&window.twttr.widgets.load(),jQuery(window).off("scroll.kbmce resize.kbmce"),t.off("nodeChange ResizeEditor ResizeWindow")},500)},error:function(){}})},activate:function(e){KB.EditModalModules&&KB.EditModalModules.destroy(),e.stopPropagation(),this.editor?this.editor.setup():this.editor=new MediumEditor("#"+this.id,{toolbar:{diffTop:-50}}),this.setupEvents()},deactivate:function(){if(this.editor){this.editor.unsubscribe("editableInput",this.handleChange.bind(this));var e=n.getIndex(this.editor.module.get("entityData"),this.model.get("kpath"));this.editor.kfilter?(e=switchEditors._wp_Nop(e),this.retrieveFilteredContent(this.editor,e)):(this.editor.destroy(),KB.Events.trigger("kb.repaint"))}},cleanString:function(e){return e.replace(/\s/g,"").replace(/&nbsp;/g,"").replace(/<br>/g,"").replace(/<[^\/>][^>]*><\/[^>]+>/g,"").replace(/<p><\/p>/g,"")},synchronize:function(e){this.editor?this.editor.setContent(e.syncContent):this.$el.html(e.syncContent),this.model.trigger("field.model.dirty",this.model)}});t.exports=a},{"common/Config":22,"common/Utilities":30,"frontend/Inline/InlineToolbar":113,"frontend/Inline/controls/EditText":116,"frontend/Inline/controls/InlineUpdate":117}],113:[function(e,t,i){var n=e("tether");t.exports=Backbone.View.extend({tagName:"div",className:"kb-inline-toolbar",attributes:function(){return{"data-kbelrel":this.model.get("baseId"),hidefocus:"1",tabindex:"-1"}},initialize:function(e){this.options=e,this.FieldControlView=e.FieldControlView,this.controls=e.controls||[],this.hidden=!1,this.listenTo(this.model,"field.model.dirty",this.getDirty),this.listenTo(this.model,"field.model.clean",this.getClean),this.listenTo(this.FieldControlView,"field.view.derender",this.derender),this.listenTo(this.FieldControlView,"field.view.rerender",this.rerender),this.listenTo(this.FieldControlView,"field.view.gone",this.derender),this.create()},create:function(){var t=this;_.each(this.controls,function(e){e.isValid()&&(e.render().appendTo(t.$el),e.Toolbar=t)}),this.$el.appendTo("body"),this.createPosition()},hide:function(){this.$el.hide(),this.hidden=!0},show:function(){this.hidden&&this.$el.show()},createPosition:function(){var e=this.options.tether||{},t={element:this.$el,target:this.FieldControlView.$el,attachment:"center right",targetAttachment:"center right"};this.Tether=new n(_.defaults(t,e))},getDirty:function(){this.$el.addClass("isDirty")},getClean:function(){this.$el.removeClass("isDirty")},derender:function(){this.Tether&&(this.Tether.destroy(),delete this.Tether)},rerender:function(){this.createPosition()},getTetherDefaults:function(){var e=this.el,t=this.FieldControlView.el;return _.defaults(tether,{element:e,target:t,attachment:"center right",targetAttachment:"center right"})}})},{tether:261}],114:[function(e,t,i){var n=e("common/Checks");t.exports=Backbone.View.extend({initialize:function(e){this.visible=!1,this.options=e||{},this.Parent=e.parent,this.listenTo(KB.Events,"window.change",this.reposition)},className:"kb-inline-control kb-inline--edit-image",events:{click:"openFrame",mouseenter:"mouseenter",mouseleave:"mouseleave"},openFrame:function(){this.Parent.openFrame()},render:function(){return this.$el},isValid:function(){return n.userCan("edit_kontentblocks")},mouseenter:function(){this.Parent.$el.addClass("kb-field--outline"),_.each(this.model.get("linkedFields"),function(e){e.FieldControlView.$el.addClass("kb-field--outline-link")})},mouseleave:function(){this.Parent.$el.removeClass("kb-field--outline"),_.each(this.model.get("linkedFields"),function(e){e.FieldControlView.$el.removeClass("kb-field--outline-link")})}})},{"common/Checks":21}],115:[function(e,t,i){var n=e("common/Checks");t.exports=Backbone.View.extend({initialize:function(e){this.visible=!1,this.options=e||{},this.Parent=e.parent,this.isValid()&&this.render()},className:"kb-inline-control kb-inline--edit-link",events:{click:"openDialog",mouseenter:"mouseenter",mouseleave:"mouseleave"},openDialog:function(){this.Parent.openDialog()},render:function(){return this.$el},isValid:function(){return n.userCan("edit_kontentblocks")},mouseenter:function(){this.Parent.$el.addClass("kb-field--outline"),_.each(this.model.get("linkedFields"),function(e){e.FieldControlView.$el.addClass("kb-field--outline-link")})},mouseleave:function(){this.Parent.$el.removeClass("kb-field--outline"),_.each(this.model.get("linkedFields"),function(e){e.FieldControlView.$el.removeClass("kb-field--outline-link")})}})},{"common/Checks":21}],116:[function(e,t,i){var n=e("common/Checks");t.exports=Backbone.View.extend({initialize:function(e){this.visible=!1,this.options=e||{},this.Parent=e.parent},className:"kb-inline-control kb-inline--edit-text",events:{click:"focusEditor",mouseenter:"mouseenter",mouseleave:"mouseleave"},focusEditor:function(e){this.Parent.activate(e)},render:function(){return this.$el},isValid:function(){return n.userCan("edit_kontentblocks")},mouseenter:function(){this.Parent.$el.addClass("kb-field--outline"),_.each(this.model.get("linkedFields"),function(e){e.FieldControlView.$el.addClass("kb-field--outline-link")})},mouseleave:function(){this.Parent.$el.removeClass("kb-field--outline"),_.each(this.model.get("linkedFields"),function(e){e.FieldControlView.$el.removeClass("kb-field--outline-link")})}})},{"common/Checks":21}],117:[function(e,t,i){var n=e("common/Checks");e("common/Config"),e("common/Logger");t.exports=Backbone.View.extend({initialize:function(e){this.visible=!1,this.options=e||{},this.parent=e.parent},className:"kb-inline-control kb-inline--update",events:{click:"syncFieldModel",mouseenter:"mouseenter",mouseleave:"mouseleave"},render:function(){return this.$el},syncFieldModel:function(e){this.model.sync(this).done(function(e){e.success&&(this.model.getClean(),this.parent.trigger("kn.inline.synced"),_.each(this.model.get("linkedFields"),function(e,t){_.isNull(e)||e.getClean()}))})},syncModuleModel:function(){this.model.get("ModuleModel").sync(!0),this.Toolbar.getClean()},isValid:function(){return n.userCan("edit_kontentblocks")},mouseenter:function(){}})},{"common/Checks":21,"common/Config":22,"common/Logger":24}],118:[function(e,t,i){var n=e("frontend/Inline/EditableTextView"),o=e("frontend/Inline/EditableLinkView"),s=e("frontend/Inline/EditableImageView");KB.Fields.registerObject("EditableText",n),KB.Fields.registerObject("EditableImage",s),KB.Fields.registerObject("EditableLink",o)},{"frontend/Inline/EditableImageView":110,"frontend/Inline/EditableLinkView":111,"frontend/Inline/EditableTextView":112}],119:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{id:"generic"},idAttribute:"id"})},{}],120:[function(e,t,i){var n=e("common/Config"),o=(e("common/Notice"),e("common/Logger"));t.exports=Backbone.Model.extend({idAttribute:"mid",attachedFields:{},changedFields:{},linkedModules:{},initialize:function(){this.subscribeToArea(),this.type="module",this.get("globalModule")&&this.linkModules()},subscribeToArea:function(e){e||(e=KB.Areas.get(this.get("area"))),e.View.attachModule(this),this.Area=e},dispose:function(){this.stopListening()},attachField:function(e){this.attachedFields[e.id]=e,this.listenTo(e,"field.model.dirty",this.addChangedField),this.listenTo(e,"field.model.clean",this.removeChangedField),this.listenTo(e,"remove",this.removeAttachedField)},removeAttachedField:function(e){this.attachedFields[e.id]&&(this.stopListening(e),delete this.attachedFields[e.id]),this.changedFields[e.id]&&delete this.changedFields[e.id]},addChangedField:function(e){this.changedFields[e.id]=e},removeChangedField:function(e){this.changedFields[e.id]&&delete this.changedFields[e.id],_.isEmpty(this.changedFields)&&this.trigger("module.model.clean",this)},sync:function(t,e){var i=this;return KB.Events.trigger("module.before.sync",this),jQuery.ajax({url:ajaxurl,data:{action:"updateModule",data:i.toJSON().entityData,module:i.toJSON(),editmode:t?"update":"preview",_ajax_nonce:n.getNonce("update")},context:e||i,type:"POST",dataType:"json",success:function(e){i.set("entityData",e.data.newModuleData),t&&i.trigger("module.model.updated",i)},error:function(){o.Debug.error("serialize | FrontendModal | Ajax error")}})},getModuleView:function(){return!!this.View&&this.View},linkModules:function(){}})},{"common/Config":22,"common/Logger":24,"common/Notice":25}],121:[function(e,t,i){var n=e("common/Config"),o=e("common/Logger");t.exports=Backbone.Model.extend({idAttribute:"mid",attachedFields:{},changedFields:{},initialize:function(){this.type="panel"},attachField:function(e){this.attachedFields[e.id]=e,this.listenTo(e,"field.model.dirty",this.addChangedField),this.listenTo(e,"field.model.clean",this.removeChangedField),this.listenTo(e,"remove",this.removeAttachedField)},removeAttachedField:function(e){this.attachedFields[e.id]&&delete this.attachedFields[e.id],this.changedFields[e.id]&&delete this.changedFields[e.id]},addChangedField:function(e){this.changedFields[e.id]=e},removeChangedField:function(e){this.changedFields[e.id]&&(this.stopListening(e),delete this.changedFields[e.id]),_.isEmpty(this.changedFields)&&this.trigger("module.model.updated",this)},sync:function(e,t){var i=this;return KB.Events.trigger("panel.before.sync"),jQuery.ajax({url:ajaxurl,data:{action:"updatePostPanel",data:i.toJSON().entityData,panel:i.toJSON(),editmode:e?"update":"preview",_ajax_nonce:n.getNonce("update")},context:t||i,type:"POST",dataType:"json",success:function(e){i.set("entityData",e.data.newModuleData),i.trigger("module.model.updated",i)},error:function(){o.Debug.error("sync | FrontendModal | Ajax error")}})}})},{"common/Config":22,"common/Logger":24}],122:[function(e,t,i){var n=e("shared/ModuleBrowser/ModuleBrowserController");e("common/TinyMCE");t.exports=n.extend({success:function(e){var t;this.dropZone?(this.dropZone.$el.after(e.data.html),this.dropZone.removeDropZone()):this.options.area.$el.append(e.data.html).removeClass("kb-area__empty"),KB.ObjectProxy.add(t=KB.Modules.add(e.data.module)),this.parseAdditionalJSON(e.data.json),KB.Fields.trigger("newModule",KB.Views.Modules.lastViewAdded),this.options.area.trigger("kb.module.created"),KB.Events.trigger("content.change reposition"),t.trigger("module.created"),setTimeout(function(){t.View.openOptions()},300)},close:function(){delete this.dropZone,n.prototype.close.apply(this,arguments)}})},{"common/TinyMCE":28,"shared/ModuleBrowser/ModuleBrowserController":152}],123:[function(e,t,i){var n=e("frontend/ModuleBrowser/ModuleBrowserExt"),o=e("common/Config"),s=e("common/Notice"),r=e("common/Ajax"),l=e("templates/frontend/area-empty-placeholder.hbs");t.exports=Backbone.View.extend({isSorting:!1,events:{"click .kb-area__empty-placeholder":"openModuleBrowser"},initialize:function(){this.attachedModules={},this.renderSettings=this.model.get("renderSettings"),this.listenTo(KB.Events,"editcontrols.show",this.showPlaceholder),this.listenTo(KB.Events,"editcontrols.hide",this.removePlaceholder),this.listenToOnce(KB.Events,"frontend.init",this.setupUi),this.listenTo(this,"kb.module.deleted",this.removeModule),this.listenTo(this,"kb.module.created",this.refreshPlaceholder),(this.model.View=this).$placeholder=jQuery(l({i18n:KB.i18n}))},showPlaceholder:function(){return this.$el.append(this.$placeholder),this},removePlaceholder:function(){return this.$placeholder.detach(),this},refreshPlaceholder:function(){this.removePlaceholder().showPlaceholder()},setupUi:function(){this.model.get("sortable")&&this.setupSortables()},openModuleBrowser:function(){return this.ModuleBrowser||(this.ModuleBrowser=new n({area:this})),this.ModuleBrowser.render(),this.ModuleBrowser},attachModule:function(e){this.attachedModules[e.get("mid")]=e,this.listenTo(e,"change:area",this.removeModule),this.getNumberOfModules(),this.trigger("kb.module.created",e)},getNumberOfModules:function(){return _.size(this.attachedModules)},getAttachedModules:function(){return this.attachedModules},setupSortables:function(){var n=this;this.$el.sortable({handle:".kb-module-control--move",items:".module",helper:"clone",cursorAt:{top:5,left:5},delay:150,forceHelperSize:!0,forcePlaceholderSize:!0,placeholder:"kb-front-sortable-placeholder",start:function(e,t){n.isSorting=!0},receive:function(e,t){var i=t.item.data("module");n.isSorting=!1,i.create(t)},stop:function(){n.isSorting&&(n.isSorting=!1,n.resort(n.model),KB.Events.trigger("content.change"))},change:function(){n.applyClasses()}})},removeModule:function(e){var t=e.model.get("mid");this.attachedModules[t]&&delete this.attachedModules[t],this.getNumberOfModules()<1&&(this.$el.addClass("kb-area__empty"),this.showPlaceholder())},resort:function(e){var t={};return t[e.get("id")]=e.View.$el.sortable("serialize",{attribute:"rel"}),r.send({action:"resortModules",postId:e.get("envVars").postId,data:t,_ajax_nonce:o.getNonce("update")},function(){s.notice("Order was updated successfully","success"),e.trigger("area.resorted")},null)},applyClasses:function(){var e,t,i=this.model.View.$el.find(".module");i.removeClass("first-module last-module repeater");for(var n=0;n<i.length;n++){var o=jQuery(i[n]).data("ModuleView");_.isUndefined(o)||(0===n&&o.$el.addClass("first-module"),n===i.length-1&&o.$el.addClass("last-module"),t&&o.model.get("settings").id===t&&o.$el.addClass("repeater"),t=o.model.get("settings").id,(e=o.$el.parent()).hasClass("kb-wrap")&&e.attr("rel",o.$el.attr("rel")))}}})},{"common/Ajax":20,"common/Config":22,"common/Notice":25,"frontend/ModuleBrowser/ModuleBrowserExt":122,"templates/frontend/area-empty-placeholder.hbs":199}],124:[function(e,t,i){var n=e("common/Stack");t.exports=Backbone.View.extend({events:{click:"goBack"},initialize:function(e){this.stack=new n,this.modal=e.modal,this.setElement(this.modal.$(".kb-modal-history-back")),this.render()},append:function(e){this.stack.append(e),this.render()},prepend:function(e){this.stack.prepend(e),this.render()},reset:function(){this.stack.reset(),this.render()},render:function(){0<this.stack.length()?this.$el.show():this.$el.hide()},goBack:function(){this.modal.openView(this.stack.first(),!1,!1),this.render()}})},{"common/Stack":27}],125:[function(e,t,i){var n=e("common/Logger"),o=e("frontend/Collections/ModalFieldCollection"),l=e("frontend/Views/LoadingAnimation"),s=e("common/Config"),r=e("common/UI"),a=e("common/TinyMCE"),d=e("common/Notice"),c=e("common/Ajax"),u=e("templates/frontend/module-edit-form.hbs"),h=e("frontend/Views/EditModalHistory");t.exports=Backbone.View.extend({tagName:"div",id:"onsite-modal",timerId:null,viewStack:{},initialize:function(){return this.FieldModels=new o,this.$el.append(u({model:{},i18n:KB.i18n.jsFrontend})),this.history=new h({modal:this}),this.LoadingAnimation=new l({el:this.$el}),this.setupElements(),this.bindHandlers(),this},bindHandlers:function(){var t=this;this.listenTo(KB.Events,"modal.recalibrate",this.recalibrate),this.listenTo(KB.Events,"modal.preview",this.preview),this.listenTo(KB.Events,"modal.update",this.update),jQuery(window).on("resize",function(){t.recalibrate()}),this.listenTo(KB.Events,"kb.tinymce.new-editor",function(e){e.settings&&e.settings.kblive&&t.attachEditorEvents(e)})},setupElements:function(){this.$form=jQuery("#onsite-form",this.$el),this.$formContent=jQuery("#onsite-content",this.$el),this.$inner=jQuery(".os-content-inner",this.$formContent),this.$title=jQuery(".controls-title",this.$el),this.$draft=jQuery(".kb-modal__draft-notice",this.$el)},events:{"click .close-controls":"destroy","click .kb-save-form":"update","click .kb-preview-form":"preview","change .kb-template-select":"viewfileChange"},openView:function(e,t,i){if(this.ModuleView&&this.ModuleView.cid===e.cid)return this;i&&this.history.prepend(this.ModuleView),this.listenTo(KB.Events,"modal.refresh",this.reload),this.ModuleView=e,this.model=e.model,this.realmid=this.setupModuleId(),this.setupWindow(),this.attach(),this.render(),this.recalibrate()},setupModuleId:function(){return this.model.get("mid")},attach:function(){this.listenTo(this.ModuleView,"kb.frontend.module.inline.saved",this.frontendViewUpdated),this.listenTo(this.model,"data.updated",this.preview),this.listenTo(this.model,"remove",this.destroy)},detach:function(){this.FieldModels.reset(),this.stopListening(),KB.Events.trigger("modal.close",this)},reload:function(){this.render(!0)},destroy:function(){var e=this;this.stopListening(KB.Events,"modal.refresh",this.reload),e.detach(),e.history.reset(),jQuery(".wp-editor-area",this.$el).each(function(e,t){tinymce.remove("#"+t.id)}),e.ModuleView=null,e.initialized=!1,e.unbind(),e.$el.detach(),KB.Sidebar.visible&&KB.Sidebar.$el.css("width","")},setupWindow:function(){var i=this;KB.Sidebar.visible?(this.$el.appendTo(KB.Sidebar.$el),this.mode="sidebar",this.listenToOnce(KB.Sidebar,"sidebar.close",function(){this.mode="body",this.$el.removeClass("kb-modal-sidebar"),this.destroy()}),KB.Sidebar.clearTimer()):(this.mode="body",this.$el.appendTo("body").show()),"body"===this.mode&&this.$el.css("position","fixed").draggable({handle:"._controls-title",containment:"window",helper:"clone",stop:function(e,t){i.recalibrate(t.position)}}).resizable()},frontendViewUpdated:function(){this.$el.removeClass("isDirty"),this.reload()},preview:function(e){e&&e.hasOwnProperty("silent")&&!0===e.silent||this.serialize(!1,!1)},update:function(){this.serialize(!0,!0),this.switchDraftOff()},render:function(t){var e,i=this;n.User.info("Frontend modal retrieves data from the server"),e=this.model.toJSON(),this.applyControlsSettings(this.$el),jQuery.ajax({url:ajaxurl,data:{action:"getModuleForm",module:e,entityData:e.entityData,_ajax_nonce:s.getNonce("read")},type:"POST",dataType:"json",beforeSend:function(){i.LoadingAnimation.show()},success:function(e){i.$inner.empty(),i.ModuleView.clearFields(),i.$inner.attr("id",i.model.get("mid")),i.$inner.append(e.data.html),i.model.get("state").draft?i.$draft.show(150):i.$draft.hide();var o=window.tinymce.$;jQuery(document).on("click",function(e){var t,i,n=o(e.target);n.hasClass("wp-switch-editor")&&(t=n.attr("data-wp-editor-id"),i=n.hasClass("switch-tmce")?"tmce":"html",window.switchEditors.go(t,i))}),e.data.json&&(KB.payload=_.extend(KB.payload,e.data.json),_.defer(function(){e.data.json.Fields&&i.FieldModels.add(_.toArray(e.data.json.Fields))})),r.initTabs(),r.initToggleBoxes(),a.addEditor(i.$form),n.User.info("Frontend modal done."),i.$title.text(i.model.get("settings").name),t&&0<i.FieldModels.length&&KB.Events.trigger("modal.reload"),n.User.info("Frontend modal.reload triggered."),setTimeout(function(){i.$el.show(),i.LoadingAnimation.hide(),i.ModuleView.renderStatusBar(i.$el),i.$(".kb-template-select").select2({templateResult:function(e){if(!e.id)return e.text;var t=e.element.dataset.tpldesc;return jQuery("<span>"+e.text+'<br><span class="kb-tpl-desc">'+t+"</span></span>")}}),i.recalibrate()},550)},error:function(){d.notice("There went something wrong","error")}})},recalibrate:function(){var e,t,i,n;if(e=jQuery(window).height()-16,0<(n=(t=jQuery(".os-content-inner").height())+(i=this.$el.position()).top-e)?this.initScrollbars(t-(n+30)):t-i.top<e?this.initScrollbars(t):this.initScrollbars(e-i.top),i.top<32&&(this.$el.css("top","32px"),this.$el.css("right","20px")),"sidebar"===this.mode){var o=this.model.get("settings"),s=o.controls&&o.controls.width||600;KB.Sidebar.$el.width(s),this.$el.addClass("kb-modal-sidebar"),this.$el.width(s)}},initScrollbars:function(e){jQuery(".kb-nano",this.$el).height(e+20),jQuery(".kb-nano").nanoScroller({preventPageScrolling:!0,contentClass:"kb-nano-content"})},serialize:function(e,t){var i,n=this,o=e||!1,s=!1!==t;tinymce.triggerSave(),i=this.formdataForId(this.realmid),this.model.set("entityData",i),this.LoadingAnimation.show();var r=new l({el:this.ModuleView.$el});r.show(),this.model.sync(o,this).done(function(e,t,i){n.moduleUpdated(e,t,i,o,s),r.remove()})},moduleUpdated:function(e,t,i,n,o){var s=this;s.model.trigger("modal.serialize.before"),!1!==s.updateViewClassTo&&s.updateContainerClass(s.updateViewClassTo),s.ModuleView.trigger("modal.before.nodeupdate"),s.ModuleView.$el.html(e.data.html),s.ModuleView.trigger("modal.after.nodeupdate"),e.data.json&&e.data.json.Fields&&KB.FieldControls.updateModels(e.data.json.Fields),s.model.set("entityData",e.data.newModuleData),n&&(s.model.trigger("module.model.updated",s.model),KB.Events.trigger("modal.saved")),jQuery(document).trigger("kb.module-update",s.model.get("settings").id,s.ModuleView),jQuery(document).trigger("kb.refresh"),s.ModuleView.delegateEvents(),_.defer(function(){s.ModuleView.render(),s.model.trigger("modal.serialize"),s.recalibrate()}),n?(o&&d.notice(KB.i18n.jsFrontend.frontendModal.noticeDataSaved,"success"),s.$el.removeClass("isDirty"),s.ModuleView.getClean()):(o&&d.notice(KB.i18n.jsFrontend.frontendModal.noticePreviewUpdated,"success"),s.$el.addClass("isDirty")),s.ModuleView.trigger("kb.view.module.HTMLChanged"),s.LoadingAnimation.hide()},viewfileChange:function(e){this.updateViewClassTo={current:this.ModuleView.model.get("viewfile"),target:e.currentTarget.value},this.model.set("viewfile",e.currentTarget.value,{silent:!0}),this.preview(),this.reload()},updateContainerClass:function(e){if(!e||!e.current||!e.target)return!1;this.ModuleView.$el.removeClass(this._classifyView(e.current)),this.ModuleView.$el.addClass(this._classifyView(e.target)),this.updateViewClassTo=!1},delayInput:function(){var e=this;this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(function(){e.timerId=null,e.serialize(!1,!1)},750)},attachEditorEvents:function(e){},applyControlsSettings:function(e){var t=this.model.get("settings"),i=t.controls&&t.controls.width;i&&e.css("width",t.controls.width+"px"),"sidebar"===this.mode&&i&&KB.Sidebar.$el.width(i),t.controls&&t.controls.fullscreen?e.width("100%").height("100%").addClass("fullscreen"):e.height("").removeClass("fullscreen")},_classifyView:function(e){return"view-"+e.replace(".twig","")},switchDraftOff:function(){var e=this.model.toJSON(),t=this;this.model.get("state").draft&&c.send({action:"undraftModule",module:e,postId:this.model.get("parentObjectId"),_ajax_nonce:s.getNonce("update")},function(e){e.success&&t.$draft.hide(150)},this)},formdataForId:function(e){var t;return e&&(t=this.$form.serializeJSON())[e]?_.clone(t[e]):null}})},{"common/Ajax":20,"common/Config":22,"common/Logger":24,"common/Notice":25,"common/TinyMCE":28,"common/UI":29,"frontend/Collections/ModalFieldCollection":106,"frontend/Views/EditModalHistory":124,"frontend/Views/LoadingAnimation":127,"templates/frontend/module-edit-form.hbs":202}],126:[function(e,t,i){var n=e("frontend/Views/AreaView"),o=(e("frontend/ModuleBrowser/ModuleBrowserExt"),e("common/Config"),e("common/Notice"),e("common/Ajax"),e("templates/frontend/area-empty-placeholder.hbs"));t.exports=n.extend({isSorting:!1,events:{},initialize:function(){this.attachedModules={},this.renderSettings=this.model.get("renderSettings"),this.listenTo(KB.Events,"editcontrols.show",this.showPlaceholder),this.listenTo(KB.Events,"editcontrols.hide",this.removePlaceholder),this.listenToOnce(KB.Events,"frontend.init",this.setupUi),this.listenTo(this,"kb.module.deleted",this.removeModule),this.listenTo(this,"kb.module.created",this.refreshPlaceholder),(this.model.View=this).$placeholder=jQuery(o({i18n:KB.i18n})),this.extendElements()},extendElements:function(){var e=this.model.get("layoutData").slots;e&&_.each(e,function(e,t){if(e.mid&&""!==e.mid){var i=this.$("#"+e.mid);i.attr("data-slot",t),i.addClass("kbml-slot-ref")}},this)},initDraggable:function(){var l,a,d=this;this.$(".kbml-slot-ref").draggable({revert:"invalid",helper:"clone",revertDuration:200,start:function(){l=jQuery(this)},stop:function(){l=null,jQuery(this).removeClass("being-dragged")}}),this.$(".kbml-slot-ref").droppable({hoverClass:"drop-hover",over:function(e,t){a=jQuery(e.target)},drop:function(e,t){var i=l.data("slot"),n=l.attr("id"),o=a.data("slot"),s=a.attr("id"),r=d.model.get("layoutData").slots;return r[i].mid=s,r[o].mid=n,alert(JSON.stringify(r)),!1}})},showPlaceholder:function(){return this},removePlaceholder:function(){return this},refreshPlaceholder:function(){return this},setupUi:function(){return!1},setupSortables:function(){},resort:function(e){}})},{"common/Ajax":20,"common/Config":22,"common/Notice":25,"frontend/ModuleBrowser/ModuleBrowserExt":122,"frontend/Views/AreaView":123,"templates/frontend/area-empty-placeholder.hbs":199}],127:[function(e,t,i){t.exports=Backbone.View.extend({$overlay:jQuery('<div class="kb-loading-overlay" style="display: none;"><span>working...</span></div>'),initialize:function(){this.$el.css("position","relative").append(this.$overlay)},show:function(e){e?this.$overlay.fadeTo(150,e):this.$overlay.show()},hide:function(){this.$overlay.fadeOut(350)},remove:function(){this.$overlay.remove()}})},{}],128:[function(e,t,i){var n=e("./modulecontrols/EditControl"),o=e("./modulecontrols/UpdateControl"),s=e("./modulecontrols/DeleteControl"),r=e("./modulecontrols/MoveControl"),l=e("./modulecontrols/DraftControl"),a=e("templates/frontend/module-controls.hbs");t.exports=Backbone.View.extend({ModuleView:null,$menuList:null,initialize:function(e){this.ModuleView=e.ModuleView},derender:function(){this.$el.detach()},rerender:function(){var e=this;this.ModuleView.$el.append(this.$el),_.defer(function(){e.reposition()})},render:function(){this.ModuleView.$el.append(a({model:this.ModuleView.model.toJSON(),i18n:KB.i18n.jsFrontend})),this.$el=jQuery('[data-kb-mcontrols="'+this.model.get("mid")+'"]',this.ModuleView.$el),this.$menuList=this.$(".kb-controls-wrap"),this.EditControl=this.addItem(new n({model:this.ModuleView.model,parent:this.ModuleView})),this.UpdateControl=this.addItem(new o({model:this.ModuleView.model,parent:this.ModuleView})),this.DeleteControl=this.addItem(new s({model:this.ModuleView.model,parent:this.ModuleView})),this.MoveControl=this.addItem(new r({model:this.ModuleView.model,parent:this.ModuleView})),this.DraftControl=this.addItem(new l({model:this.ModuleView.model,parent:this.ModuleView}))},addItem:function(e){if(e.isValid&&!0===e.isValid())return this.$menuList.append(e.render()),e.listenToOnce(this,"controls.remove",e.remove),e},dispose:function(){this.trigger("controls.remove"),this.remove()},reposition:function(){var e,t,i,n,o,s;t=e=0,i=this.model.get("settings"),n=this.model.get("submodule"),o=this.ModuleView.$el.offset(),s=this.ModuleView.$el.height(),i.controls&&i.controls.toolbar&&(o.top=i.controls.toolbar.top,o.left=i.controls.toolbar.left),"hidden"!==this.ModuleView.$el.css("overflow")&&60<o.top&&s<119&&(e=-25),"hidden"!==this.ModuleView.$el.css("overflow")&&100<o.left&&120<s&&this.ModuleView.$el.class&&(e=0,t=-30,this.ModuleView.$el.addClass("kb-module-nav__vertical")),o.top<20&&(e=10),0==e&&(e=20),0==t&&(t=20),n&&(e+=50),this.$el.css({top:e+"px",left:t})}})},{"./modulecontrols/DeleteControl":130,"./modulecontrols/DraftControl":131,"./modulecontrols/EditControl":132,"./modulecontrols/MoveControl":133,"./modulecontrols/UpdateControl":134,"templates/frontend/module-controls.hbs":201}],129:[function(e,t,i){t.exports=Backbone.View.extend({tagName:"div",isValid:function(){return!0},render:function(){return this.el},dispose:function(){this.remove()}})},{}],130:[function(e,t,i){var n=e("frontend/Views/ModuleControls/modulecontrols/ControlsBaseView"),o=e("common/Checks"),s=e("common/Config"),r=e("common/Notice"),l=e("common/Ajax");t.exports=n.extend({initialize:function(e){this.options=e||{},this.Parent=e.parent},className:"kb-module-control kb-module-control--delete",events:{click:"confirmRemoval"},confirmRemoval:function(){r.confirm("Remove",KB.i18n.EditScreen.notices.confirmDeleteMsg,this.removeModule,this.cancelRemoval,this)},removeModule:function(){l.send({action:"removeModules",_ajax_nonce:s.getNonce("delete"),module:this.model.get("mid"),postId:this.model.get("postId")},this.afterRemoval,this)},afterRemoval:function(){this.Parent.$el.parent(".kb-wrap").remove(),this.trigger("remove"),KB.Modules.remove(this.model)},cancelRemoval:function(){return!1},isValid:function(){return o.userCan("delete_kontentblocks")}})},{"common/Ajax":20,"common/Checks":21,"common/Config":22,"common/Notice":25,"frontend/Views/ModuleControls/modulecontrols/ControlsBaseView":129}],131:[function(e,t,i){var n=e("frontend/Views/ModuleControls/modulecontrols/ControlsBaseView");t.exports=n.extend({initialize:function(e){this.options=e||{},this.Parent=e.parent,this.$el.append("<div>Draft! Only visible while logged in</div>"),this.listenTo(this.Parent.model,"change:state",this.recheck),this.recheck(this.Parent.model.get("state"))},className:"kb-module-control kb-module-control--draft",isValid:function(){return!0},recheck:function(e){e.draft?this.$el.show():this.$el.hide()}})},{"frontend/Views/ModuleControls/modulecontrols/ControlsBaseView":129}],132:[function(e,t,i){var n=e("frontend/Views/ModuleControls/modulecontrols/ControlsBaseView"),o=e("common/Checks");t.exports=n.extend({initialize:function(e){this.options=e||{},this.parent=e.parent},className:"kb-module-control kb-module-control--edit",events:{click:"openForm"},openForm:function(){return KB.EditModalModules.openView(this.parent,!1,!1),KB.focusedModule=this.model,this},isValid:function(){return o.userCan("edit_kontentblocks")}})},{"common/Checks":21,"frontend/Views/ModuleControls/modulecontrols/ControlsBaseView":129}],133:[function(e,t,i){var n=e("frontend/Views/ModuleControls/modulecontrols/ControlsBaseView"),o=e("common/Checks");t.exports=n.extend({initialize:function(e){this.options=e||{},this.Parent=e.parent},className:"kb-module-control kb-module-control--move",isValid:function(){return!!this.Parent.model.Area&&(o.userCan("edit_kontentblocks")&&this.Parent.model.Area.get("sortable")&&!this.model.get("submodule"))}})},{"common/Checks":21,"frontend/Views/ModuleControls/modulecontrols/ControlsBaseView":129}],134:[function(e,t,i){var n=e("frontend/Views/ModuleControls/modulecontrols/ControlsBaseView"),o=e("common/Checks"),s=e("common/Config"),r=e("common/Notice");t.exports=n.extend({initialize:function(e){this.options=e||{},this.Parent=e.parent},className:"kb-module-control kb-module-control--update",events:{click:"update"},update:function(){var t=this;jQuery.ajax({url:ajaxurl,data:{action:"updateModule",data:t.model.get("entityData"),module:t.model.toJSON(),editmode:"update",refresh:!1,_ajax_nonce:s.getNonce("update")},type:"POST",dataType:"json",success:function(e){tinymce.triggerSave(),t.model.set("entityData",e.data.newModuleData),t.Parent.render(),t.Parent.trigger("kb.frontend.module.inline.saved"),t.model.trigger("module.model.updated",t.model),r.notice("Module saved successfully","success"),t.Parent.$el.removeClass("isDirty")},error:function(){r.notice("There went something wrong","error")}})},isValid:function(){return o.userCan("edit_kontentblocks")}})},{"common/Checks":21,"common/Config":22,"common/Notice":25,"frontend/Views/ModuleControls/modulecontrols/ControlsBaseView":129}],135:[function(e,t,i){var n=e("frontend/Views/ModuleControls/ModuleControls"),o=e("common/Checks"),s=e("shared/ModuleStatusBar/ModuleStatusBarView"),r=e("shared/ModuleStatusBar/status/TemplateStatus"),l=e("shared/ModuleStatusBar/status/PublishStatus"),a=e("templates/frontend/module-placeholder.hbs");t.exports=Backbone.View.extend({focus:!1,attachedFields:{},initialize:function(){this.Controls=new n({ModuleView:this,model:this.model}),0!==this.$el.length&&o.userCan("edit_kontentblocks")&&((this.model.View=this).model.trigger("module.model.view.attached",this),this.bindHandlers(),this.render(),KB.Events.on("reposition",this.setControlsPosition,this))},bindHandlers:function(){this.listenTo(this.model,"change",this.getDirty),this.listenTo(this.model,"module.model.updated",this.getClean),this.listenTo(this.model,"module.model.clean",this.getClean)},events:{"click .kb-module__placeholder":"openOptions","click .editable":"reloadModal","mouseenter.first":"setActive"},renderStatusBar:function(e){this.ModuleStatusBar=new s({el:e,parent:this}),this.ModuleStatusBar.addItem(new r({model:this.model,parent:this})),this.ModuleStatusBar.addItem(new l({model:this.model,parent:this}))},openOptions:function(){this.Controls.EditControl.openForm()},setActive:function(){KB.currentModule=this},rerender:function(){var e=this;this.setElement(jQuery("#"+this.model.get("mid"))),_.defer(function(){e.Controls.rerender()})},derender:function(){this.Controls.derender(),this.$el.remove()},render:function(){var e;this.$el.hasClass("draft")&&""==this.$el.html()&&this.renderPlaceholder(),this.$el.attr("rel",this.model.get("mid")+"_"+_.uniqueId()),(e=this.model.get("settings")).controls&&e.controls.hide||(this.Controls.render(),this.setControlsPosition())},setControlsPosition:function(){this.Controls.reposition()},reloadModal:function(e){return KB.EditModalModules&&KB.EditModalModules.reload(this,e),KB.focusedModule=this.model,this},renderPlaceholder:function(){this.$el.append(a({model:this.model.toJSON()}))},addField:function(e){this.attachedFields[e.cid]=e},hasField:function(e,t){return _.isEmpty(t)?e in this.attachedFields:(this.attachedFields[t]||(this.attachedFields[t]={}),e in this.attachedFields[t])},getField:function(e,t){return _.isEmpty(t)?this.attachedFields[e]:this.attachedFields[t][e]},clearFields:function(){this.attachedFields={}},getDirty:function(){this.$el.addClass("isDirty"),this.trigger("view.became.dirty",this)},getClean:function(){this.$el.removeClass("isDirty"),this.trigger("view.became.clean",this)},modelChange:function(){this.getDirty()},dispose:function(){this.Controls.dispose(),delete this.model.View,this.stopListening(),this.remove()}})},{"common/Checks":21,"frontend/Views/ModuleControls/ModuleControls":128,"shared/ModuleStatusBar/ModuleStatusBarView":160,"shared/ModuleStatusBar/status/PublishStatus":161,"shared/ModuleStatusBar/status/TemplateStatus":162,"templates/frontend/module-placeholder.hbs":203}],136:[function(e,t,i){t.exports=Backbone.View.extend({initialize:function(){this.model.View=this},getDirty:function(){},getClean:function(){}})},{}],137:[function(e,t,i){var n=e("frontend/Views/Sidebar/AreaOverview/AreaOverviewController"),o=e("frontend/Views/Sidebar/AreaDetails/CategoryFilter"),s=e("frontend/Views/Sidebar/SidebarHeader"),r=e("common/Utilities"),l=e("frontend/Views/Sidebar/PanelOverview/PanelOverviewController"),a=e("templates/frontend/sidebar/sidebar-nav.hbs");t.exports=Backbone.View.extend({currentView:null,viewStack:[],timer:0,initialize:function(){this.render(),this.states={};var e=a({});this.$navControls=jQuery(e),this.bindHandlers(),this.states.AreaList=new n({controller:this}),this.states.PanelList=new l({controller:this}),this.CategoryFilter=new o,this.setView(this.states.AreaList),this.$el.addClass("ui-widget-content"),this.$el.resizable({maxWidth:900,minWidth:340,handles:"e"})},events:{"click .kb-js-sidebar-nav-back":"rootView","click [data-kb-action]":"actionHandler",mouseleave:"detectActivity",mouseenter:"clearTimer"},detectActivity:function(){var e=this;this.timer=setTimeout(function(){e.$el.addClass("kb-opaque")},15e3)},clearTimer:function(){this.timer&&(clearTimeout(this.timer),this.$el.removeClass("kb-opaque"))},render:function(){this.$el=jQuery('<div class="kb-sidebar-wrap" style="display: none;"></div>').appendTo("body"),this.$toggle=jQuery('<div class="kb-sidebar-wrap--toggle cbutton cbutto-effect--boris"></div>').appendTo("body"),this.Header=new s({}),this.$el.append(this.Header.render()),this.$container=jQuery('<div class="kb-sidebar-wrap__container"></div>').appendTo(this.$el),this.$extension=jQuery('<div class="kb-sidebar-extension" style="display: none;"></div>').appendTo(this.$el),this.setLayout(),r.stex.get("kb-sidebar-visible")&&(this.toggleSidebar(),this.detectActivity()),this.delegateEvents()},bindHandlers:function(){var e=this;jQuery(window).resize(function(){e.setLayout()}),this.$toggle.on("click",function(){e.toggleSidebar()})},setLayout:function(){var e=jQuery(window).height();this.$el.width();this.$el.height(e),this.$extension.height(e)},setExtendedView:function(e){this.currentExtendedView&&this.currentExtendedView.$el.detach(),this.currentExtendedView=e,this.$extension.html(e.render()),this.$extension.show()},closeExtendedView:function(){this.currentExtendedView.$el.detach(),this.currentExtendedView=null,this.$extension.html(""),this.$extension.hide()},setView:function(e){this.currentView&&this.currentView.$el.detach(),this.currentView=e,this.viewStack.push(e),this.$container.html(e.render()),this.handleNavigationControls()},prevView:function(){var e=this.viewStack.shift();e&&this.setView(e)},rootView:function(){this.viewStack=[],this.setView(this.states.AreaList)},handleNavigationControls:function(){2<=this.viewStack.length?this.$navControls.prependTo(this.$container):this.$navControls.detach()},toggleSidebar:function(){this.visible=!this.visible,this.$el.toggle(0),jQuery("body").toggleClass("kb-sidebar-visible"),r.stex.set("kb-sidebar-visible",this.visible,36e5),this.visible?this.trigger("sidebar.open"):this.trigger("sidebar.close")},actionHandler:function(e){var t=jQuery(e.currentTarget).data("kb-action");t&&this.states[t]&&this.setView(this.states[t])}})},{"common/Utilities":30,"frontend/Views/Sidebar/AreaDetails/CategoryFilter":140,"frontend/Views/Sidebar/AreaOverview/AreaOverviewController":143,"frontend/Views/Sidebar/PanelOverview/PanelOverviewController":147,"frontend/Views/Sidebar/SidebarHeader":149,"templates/frontend/sidebar/sidebar-nav.hbs":214}],138:[function(e,t,i){var o=e("frontend/Views/Sidebar/AreaDetails/CategoryController"),n=(e("common/Config"),e("common/Notice"),e("common/Ajax"),e("templates/frontend/sidebar/area-details-header.hbs"));t.exports=Backbone.View.extend({tagName:"div",className:"kb-sidebar__module-list",initialize:function(e){this.controller=e.controller,this.sidebarController=e.sidebarController,this.categories=this.sidebarController.CategoryFilter.filter(this.model),this.renderHeader(),this.renderCategories()},render:function(){return this.$el},renderHeader:function(){this.$el.append(n(this.model.toJSON()))},renderCategories:function(){var n=this;_.each(this.categories.toJSON(),function(e,t){var i=new o({model:new Backbone.Model(e),controller:n});n.$el.append(i.render())})}})},{"common/Ajax":20,"common/Config":22,"common/Notice":25,"frontend/Views/Sidebar/AreaDetails/CategoryController":139,"templates/frontend/sidebar/area-details-header.hbs":204}],139:[function(e,t,i){var n=e("frontend/Views/Sidebar/AreaDetails/ModuleDragItem"),o=e("templates/frontend/sidebar/category-list.hbs");t.exports=Backbone.View.extend({tagName:"div",className:"kb-sidebar__module-category",initialize:function(e){this.controller=e.controller,this.$el.append(o(this.model.toJSON())),this.$list=this.$el.find(".kb-sidebar__category-item__module-list"),this.setupModuleItems()},render:function(){return this.$el},setupModuleItems:function(){var i=this;_.each(this.model.get("modules"),function(e){var t=new n({model:new Backbone.Model(e),listController:i.controller,controller:i});i.$list.append(t.render())})}})},{"frontend/Views/Sidebar/AreaDetails/ModuleDragItem":141,"templates/frontend/sidebar/category-list.hbs":205}],140:[function(e,t,i){var n=e("common/Payload");t.exports=Backbone.View.extend({categories:n.getPayload("ModuleCategories"),definitions:n.getPayload("ModuleDefinitions"),initialize:function(){this.setupSortTable()},filter:function(e){var i=this.setupSortTable(),n=e.get("assignedModules");return _.each(this.definitions,function(e,t){-1!==_.indexOf(n,t)&&(i[e.settings.category].modules[t]=e)}),new Backbone.Model(this.removeEmptyCats(i))},setupSortTable:function(){var i={};return _.each(this.categories,function(e,t){i[t]={name:e,id:t,modules:{}}}),i},removeEmptyCats:function(i){return _.each(i,function(e,t){_.isEmpty(e.modules)&&delete i[t]}),i.core&&delete i.core,i}})},{"common/Payload":26}],141:[function(e,t,i){var n=e("common/Payload"),o=e("common/Notice"),s=e("common/Config"),r=e("common/Checks"),l=(e("frontend/Models/ModuleModel"),e("frontend/Views/AreaView")),a=e("common/Ajax"),d=e("templates/frontend/sidebar/category-module-item.hbs");t.exports=Backbone.View.extend({tagName:"div",className:"kb-sidebar-module",initialize:function(e){var t=this;this.controller=e.controller,this.listController=e.listController,this.$el.append(d(this.model.toJSON())),this.model.set("area",this.listController.model);var i=this.model.get("area").get("renderSettings").moduleElement||"div";this.$dropHelper=jQuery("<"+i+" class='kb-sidebar-drop-helper ui-sortable-helper'></"+i+">"),this.$el.draggable({appendTo:t.listController.model.View.$el.selector,revert:"invalid",refreshPositions:!0,cursorAt:{top:5,left:5},stop:function(){t.listController.model.View.$el.css("overflow","")},helper:function(){t.listController.model.View.$el.css("overflow","hidden");var e=t.findHelperSize(t.model.get("area").View);return t.$dropHelper.width(e.width).height(e.height),t.$dropHelper},drag:function(){t.$dropHelper.css("zIndex","10000")},connectToSortable:this.listController.model.View.$el.selector}).data("module",this)},render:function(){return this.$el},create:function(e){var t,i,n;if(r.userCan("create_kontentblocks")||o.notice("You're not allowed to do this","error"),t=KB.Areas.get(this.model.get("area").get("id")),!r.blockLimit(t))return o.notice("Limit for this area reached","error"),!1;i={action:"createNewModule",class:(n=this.model).get("settings").class,globalModule:n.get("globalModule"),parentObject:n.get("parentObject"),areaContext:t.get("context"),renderSettings:t.get("renderSettings"),area:t.get("id"),_ajax_nonce:s.getNonce("create"),frontend:KB.appData.config.frontend},this.model.get("area").get("parent_id")&&(i.postId=this.model.get("area").get("parent_id")),a.send(i,this.success,this,{ui:e})},success:function(e,t){var i;t.ui.helper.replaceWith(e.data.html),i=KB.Modules.add(e.data.module),KB.ObjectProxy.add(i),i.Area.View.applyClasses(),l.prototype.resort(this.model.get("area")),this.model.get("area").trigger("kb.module.created"),_.defer(function(){n.parseAdditionalJSON(e.data.json),KB.Events.trigger("content.change reposition"),KB.App.adminBar.isActive()&&i.trigger("module.create")})},findHelperSize:function(e){var t=[],i=[];return _.each(e.attachedModules,function(e){t.push(e.View.$el.width()),i.push(e.View.$el.height())}),{width:Math.max.apply(Math,t)-10,height:Math.max.apply(Math,i)-10}}})},{"common/Ajax":20,"common/Checks":21,"common/Config":22,"common/Notice":25,"common/Payload":26,"frontend/Models/ModuleModel":120,"frontend/Views/AreaView":123,"templates/frontend/sidebar/category-module-item.hbs":206}],142:[function(e,t,i){var n=e("frontend/Views/Sidebar/AreaOverview/ModuleListItem"),o=e("frontend/Views/Sidebar/AreaDetails/AreaDetailsController"),s=e("templates/frontend/sidebar/empty-area.hbs");t.exports=Backbone.View.extend({tagName:"div",className:"kb-sidebar-areaview__modules-list",ModuleViews:{},initialize:function(e){this.Modules=new Backbone.Collection,this.$parent=e.$el,this.controller=e.controller,this.sidebarController=e.sidebarController,this.$toggleHandle=this.$parent.find(".kb-sidebar-areaview__title"),this.ModuleList=new o({controller:e.controller,sidebarController:e.sidebarController,model:this.model}),this.render(),this.bindHandlers()},render:function(){this.$el.appendTo(this.$parent).hide()},bindHandlers:function(){var e=this;this.listenTo(this.Modules,"add",this.renderModuleItem),this.listenTo(this.model,"area.resorted",this.resortViews),this.$toggleHandle.on("click",function(){e.controller.setActiveList(e)}),this.$parent.on("click",".kb-js-sidebar-add-module",function(){e.sidebarController.setView(e.ModuleList)}),this.listenToOnce(KB.Events,"frontend.init",this.afterInit)},activate:function(){this.$parent.removeClass("kb-sidebar-areaview--inactive"),this.model.View.$el.addClass("kb-in-sidebar-active")},deactivate:function(){this.$parent.addClass("kb-sidebar-areaview--inactive"),this.model.View.$el.removeClass("kb-in-sidebar-active")},renderModuleItem:function(e){this.ModuleViews[e.id]=View=new n({$parent:this.$el,model:e}),View.$el.appendTo(this.$el)},attachModuleView:function(e){this.Modules.add(e.model),this.listenToOnce(e.model,"remove",this.removeModuleView)},removeModuleView:function(e){var t=this.ModuleViews[e.id];this.Modules.remove(e),delete this.ModuleViews[e.id],t.dispose()},afterInit:function(){0===this.Modules.models.length&&this.model.View.$el.is(":visible")&&this.$el.append(s({}))},moduleOrder:function(){var e=this.model.View.$el,t=jQuery("[id^=module]",e);return _.pluck(t,"id")},resortViews:function(){var i=this,e=this.moduleOrder().reverse();_.each(e,function(e){var t=i.ModuleViews[e];t.$el.detach(),t.$el.prependTo(i.$el)})}})},{"frontend/Views/Sidebar/AreaDetails/AreaDetailsController":138,"frontend/Views/Sidebar/AreaOverview/ModuleListItem":144,"templates/frontend/sidebar/empty-area.hbs":207}],143:[function(e,t,i){var n=e("frontend/Views/Sidebar/AreaOverview/AreaListItem"),o=e("templates/frontend/sidebar/sidebar-area-view.hbs"),s=e("templates/frontend/sidebar/root-item.hbs");t.exports=Backbone.View.extend({tagName:"div",className:"kb-sidebar-main-panel",Areas:new Backbone.Collection,AreaViews:{},activeList:null,events:{"click .kb-sidebar-areaview__title":"toggleList"},initialize:function(e){this.sidebarController=e.controller,this.render(),this.bindHandlers()},render:function(){return this.$el},bindHandlers:function(){this.listenTo(KB.Views.Areas,"view:add",this.attachAreaView),this.listenTo(KB.Views.Modules,"view:add",this.attachModuleView),this.listenTo(this.Areas,"add",this.createAreaItem)},attachAreaView:function(e){e.el&&this.Areas.add(e.model)},attachModuleView:function(e){var t=this.AreaViews[e.model.get("area")];t&&t.attachModuleView(e)},createAreaItem:function(e){if(!e.get("internal")){var t=jQuery(o(e.toJSON())).appendTo(this.$el);this.AreaViews[e.get("id")]=new n({$el:t,controller:this,sidebarController:this.sidebarController,model:e})}},setActiveList:function(e){return this.activeList&&this.activeList.cid?this.activeList.cid!==e.cid&&(this.activeList.$el.slideUp(),this.activeList.deactivate(),this.activeList=null,void this.setActiveList(e)):((this.activeList=e).$el.slideDown(),e.activate(),!0)},renderRootItem:function(){return this.sidebarController.$container.append(s({text:"Areas",id:"AreaList"}))}})},{"frontend/Views/Sidebar/AreaOverview/AreaListItem":142,"templates/frontend/sidebar/root-item.hbs":211,"templates/frontend/sidebar/sidebar-area-view.hbs":212}],144:[function(e,t,i){var n=e("templates/frontend/sidebar/module-view-item.hbs");t.exports=Backbone.View.extend({tagName:"div",className:"kb-sidebar-module-list-container",initialize:function(e){this.$parent=e.$parent,this.parentView=this.model.View,this.bindHandlers(),this.render()},events:{mouseenter:"over",mouseleave:"out",click:"scrollTo","click .kb-sidebar-item__edit":"openControls","click .kb-js-inline-update":"inlineUpdate","click .kb-js-inline-delete":"inlineDelete"},bindHandlers:function(){this.listenTo(this.model,"change",this.getDirty),this.listenTo(this.model,"module.model.updated",this.getClean),this.listenTo(this.model,"module.model.clean",this.getClean)},getDirty:function(){this.$el.addClass("kb-module-dirty")},getClean:function(){this.$el.removeClass("kb-module-dirty")},over:function(){this.parentView.$el.addClass("kb-in-sidebar-active")},out:function(){this.parentView.$el.removeClass("kb-in-sidebar-active")},openControls:function(e){e.stopPropagation(),this.parentView.openOptions()},inlineUpdate:function(e){e.stopPropagation(),this.parentView.Controls.UpdateControl.update(),this.parentView.getClean()},inlineDelete:function(e){e.stopPropagation(),this.parentView.Controls.DeleteControl.confirmRemoval()},scrollTo:function(){jQuery("html, body").animate({scrollTop:this.parentView.$el.offset().top-100},750)},render:function(){this.$el.append(n({view:this.model.toJSON()}))},dispose:function(){this.stopListening(),this.remove(),delete this.model,delete this.parentView}})},{"templates/frontend/sidebar/module-view-item.hbs":208}],145:[function(e,t,i){var n=e("common/Config"),o=e("common/Payload"),s=e("common/UI"),r=e("templates/frontend/sidebar/option-panel-details.hbs");t.exports=Backbone.View.extend({tagName:"div",className:"kb-sidebar__option-panel-wrap",initialize:function(e){this.Controller=e.controller,this.parentView=e.parentView,this.$el.append(r({name:this.model.get("settings").baseId})),this.$form=this.$(".kb-sidebar__form-container")},events:{"click .kb-sidebar-action--update":"save","click .kb-sidebar-action--close":"close"},render:function(){return this.loadForm(),this.$el},save:function(){jQuery.ajax({url:ajaxurl,data:{action:"saveStaticPanelForm",data:this.$form.serializeJSON(),panel:this.model.toJSON(),_ajax_nonce:n.getNonce("update")},type:"POST",dataType:"json",success:function(e){},error:function(){}})},loadForm:function(){var t=this;jQuery.ajax({url:ajaxurl,data:{action:"getStaticPanelForm",panel:t.model.toJSON(),_ajax_nonce:n.getNonce("read")},type:"POST",dataType:"json",success:function(e){t.model.trigger("modal.serialize.before"),t.$form.html(e.data.html),o.parseAdditionalJSON(e.data.json),t.model.trigger("modal.serialize"),s.initTabs(t.$el)},error:function(){}})},close:function(){this.model.trigger("modal.serialize.before"),this.parentView.closeDetails()}})},{"common/Config":22,"common/Payload":26,"common/UI":29,"templates/frontend/sidebar/option-panel-details.hbs":209}],146:[function(e,t,i){t.exports=Backbone.View.extend({tagName:"div",className:"kb-sidebar__panel-item",initialize:function(e){this.$parent=e.$parent,this.Controller=e.controller,this.render()},events:{click:"setupFormView"},render:function(){return this.$el.append(KB.Templates.render("frontend/sidebar/panel-list-item",{name:this.model.get("args").menu.name})),this.$parent.append(this.$el)},setupFormView:function(){this.FormView=new KB.Backbone.Sidebar.OptionsPanelFormView({model:this.model,controller:this.Controller,parentView:this}),this.Controller.sidebarController.setExtendedView(this.FormView)},closeDetails:function(){this.Controller.sidebarController.closeExtendedView()}})},{}],147:[function(e,t,i){var n=e("frontend/Views/Sidebar/PanelOverview/StaticPanelView"),o=e("frontend/Views/Sidebar/PanelOverview/OptionPanelView"),s=e("templates/frontend/sidebar/root-item.hbs");t.exports=Backbone.View.extend({tagName:"div",className:"kb-sidebar-main-panel panel-view",Panels:new Backbone.Collection,PanelViews:{option:{},static:{}},activeList:null,initialize:function(e){this.sidebarController=e.controller,this.render(),this.bindHandlers()},render:function(){return this.$el},bindHandlers:function(){this.listenTo(KB.Panels,"add",this.createPanelItem)},createPanelItem:function(e){e.get("settings").frontend&&(e.get("type")&&"option"===e.get("type")&&(this.PanelViews.option[e.get("baseId")]=new o({model:e,$parent:this.$el,controller:this})),e.get("type")&&"static"===e.get("type")&&(this.PanelViews.static[e.get("baseId")]=new n({model:e,$parent:this.$el,controller:this})))},renderRootItem:function(){return this.sidebarController.$container.append(s("frontend/sidebar/root-item",{text:"Panels",id:"PanelList"}))}})},{"frontend/Views/Sidebar/PanelOverview/OptionPanelView":146,"frontend/Views/Sidebar/PanelOverview/StaticPanelView":148,"templates/frontend/sidebar/root-item.hbs":211}],148:[function(e,t,i){var n=e("templates/frontend/sidebar/panel-list-item.hbs"),o=e("frontend/Views/Sidebar/PanelDetails/StaticPanelFormView");t.exports=Backbone.View.extend({tagName:"div",className:"kb-sidebar__panel-item",initialize:function(e){this.$parent=e.$parent,this.Controller=e.controller,this.render()},events:{click:"setupFormView"},render:function(){return this.$el.append(n({name:this.model.get("settings").baseId})),this.$parent.append(this.$el)},setupFormView:function(){this.FormView=new o({model:this.model,controller:this.Controller,parentView:this}),this.Controller.sidebarController.setExtendedView(this.FormView)},closeDetails:function(){this.Controller.sidebarController.closeExtendedView()}})},{"frontend/Views/Sidebar/PanelDetails/StaticPanelFormView":145,"templates/frontend/sidebar/panel-list-item.hbs":210}],149:[function(e,t,i){var n=e("templates/frontend/sidebar/sidebar-header.hbs");t.exports=Backbone.View.extend({tagName:"div",className:"kb-sidebar__header",initialize:function(){this.$el.append(n({}))},render:function(){return this.$el}})},{"templates/frontend/sidebar/sidebar-header.hbs":213}],150:[function(e,t,i){var n=e("common/Notice"),o=e("templates/frontend/change-observer.hbs"),s=e("common/I18n"),r=e("common/Config");t.exports=Backbone.View.extend({models:new Backbone.Collection,className:"kb-change-observer",initialize:function(){this.listenTo(KB.Modules,"add",this.attachHandler),this.render()},events:{"click .kb-button":"saveAll"},render:function(){this.$el.append(o({strings:s.getString("UI.changeObserver")})),this.$el.appendTo("body")},attachHandler:function(e){this.listenTo(e,"change:entityData",this.add),this.listenTo(e,"module.model.updated",this.remove),this.listenTo(e,"module.model.clean",this.remove)},add:function(e){this.models.add(e),this.trigger("change"),this.handleState()},remove:function(e){this.models.remove(e,{silent:!0}),this.trigger("change"),this.handleState()},getModels:function(){return this.models},saveAll:function(){tinyMCE.triggerSave(),_.each(this.models.models,function(e){e.sync(!0)}),r.isAdmin()||n.notice("Data is safe.","success"),this.trigger("change")},handleState:function(){0<this.models.models.length?this.$el.addClass("show"):this.$el.removeClass("show")}})},{"common/Config":22,"common/I18n":23,"common/Notice":25,"templates/frontend/change-observer.hbs":200}],151:[function(e,t,i){t.exports=Backbone.Collection.extend({initialize:function(){this.listenTo(this,"add",this.attachHandler)},attachHandler:function(e){this.listenTo(e,"remove",this.removeModel)},removeModel:function(e){this.remove(e,{silent:!0})}})},{}],152:[function(e,t,i){var n=e("shared/ModuleBrowser/ModuleBrowserDefinitions"),o=e("shared/ModuleBrowser/ModuleDefinitionModel"),s=e("shared/ModuleBrowser/ModuleBrowserDescriptions"),r=e("shared/ModuleBrowser/ModuleBrowserNavigation"),l=e("common/Checks"),a=e("common/Notice"),d=e("common/Payload"),c=e("common/Ajax"),u=e("common/TinyMCE"),h=e("common/Config"),p=e("templates/backend/modulebrowser/module-browser.hbs");t.exports=Backbone.View.extend({initialize:function(e){this.options=e||{},this.isOpen=!1,this.area=this.options.area,this.viewMode=this.getViewMode(),this.modulesDefinitions=new n(this.prepareAssignedModules(),{model:o,area:this.options.area}).setup(),this.$el.append(p({viewMode:this.getViewModeClass()})),this.$backdrop=jQuery('<div class="kb-module-browser--backdrop"></div>'),this.$list=jQuery(".modules-list",this.$el),this.subviews.ModuleDescription=new s({el:jQuery(".module-description",this.$el),browser:this}),this.subviews.Navigation=new r({el:jQuery(".module-categories",this.$el),cats:this.modulesDefinitions.categories,browser:this}),this.listenTo(this.subviews.Navigation,"browser:change",this.update),this.bindHandlers()},tagName:"div",id:"module-browser",className:"kb-overlay",events:{"click .close-browser":"close","click .module-browser--switch__list-view":"toggleViewMode","click .module-browser--switch__grid-view":"toggleViewMode"},subviews:{},toggleViewMode:function(){jQuery(".module-browser-wrapper",this.$el).toggleClass("module-browser--list-view module-browser--grid-view");var e="mdb_"+this.area.model.get("id")+"_state";"list"==store.get(e)?(this.viewMode="grid",store.set(e,"grid")):(this.viewMode="list",store.set(e,"list"))},render:function(){this.open()},getViewMode:function(){var e="mdb_"+this.area.model.get("id")+"_state";return store.get(e)?store.get(e):(store.set(e,"list"),"list")},getViewModeClass:function(){return"list"===this.viewMode?"module-browser--list-view":"module-browser--grid-view"},bindHandlers:function(){var t=this;jQuery("body").on("click",function(e){t.isOpen&&jQuery(e.target).is(".kb-module-browser--backdrop")&&t.close()}),jQuery(document).keydown(function(e){if(t.isOpen){switch(e.which){case 27:t.close();break;default:return}e.preventDefault()}})},open:function(){this.$el.appendTo("body"),this.$backdrop.appendTo("body"),jQuery("#wpwrap").addClass("module-browser-open"),jQuery(".kb-nano").nanoScroller({flash:!0,contentClass:"kb-nano-content"}),this.isOpen=!0},close:function(){jQuery("#wpwrap").removeClass("module-browser-open"),this.trigger("browser:close"),this.$backdrop.detach(),this.$el.detach(),this.isOpen=!1},update:function(e){var t=e.model.get("id");this.modulesDefinitions.getModules(t);e.renderList()},loadDetails:function(e){this.subviews.ModuleDescription.model=e,this.subviews.ModuleDescription.update()},createModule:function(e){var t,i;if(l.userCan("create_kontentblocks")||a.notice("You're not allowed to do this","error"),t=KB.Areas.get(this.options.area.model.get("id")),!l.blockLimit(t))return a.notice("Limit for this area reached","error"),!1;i={action:"createNewModule",class:e.get("settings").class,globalModule:e.get("globalModule"),parentObject:e.get("parentObject"),parentObjectId:e.get("parentObjectId"),areaContext:this.options.area.model.get("context"),area:this.options.area.model.get("id"),_ajax_nonce:h.getNonce("create"),frontend:KB.appData.config.frontend,submodule:!1},this.options.area.model.get("parent_id")&&(i.postId=this.options.area.model.get("parent_id")),this.close(),c.send(i,this.success,this)},success:function(e){var t,i;i=e.data,this.options.area.$modulesList.append(i.html),t=KB.ObjectProxy.add(KB.Modules.add(i.module)),this.options.area.attachModule(t),this.parseAdditionalJSON(i.json),t.View.trigger("toggle.open"),setTimeout(function(){KB.Fields.trigger("newModule",t.View),u.addEditor(t.View.$el)},150),this.trigger("browser.module.created",{res:e})},parseAdditionalJSON:function(e){KB.payload.Fields||(KB.payload.Fields={}),_.extend(KB.payload.Fields,e.Fields),d.parseAdditionalJSON(e)},prepareAssignedModules:function(){var t=this.area.model.get("assignedModules"),i=[];return _.each(d.getPayload("ModuleDefinitions"),function(e){-1!==_.indexOf(t,e.settings.class)&&i.push(e)}),KB.Events.trigger("module.browser.setup.defs",this,i),i}})},{"common/Ajax":20,"common/Checks":21,"common/Config":22,"common/Notice":25,"common/Payload":26,"common/TinyMCE":28,"shared/ModuleBrowser/ModuleBrowserDefinitions":153,"shared/ModuleBrowser/ModuleBrowserDescriptions":154,"shared/ModuleBrowser/ModuleBrowserNavigation":157,"shared/ModuleBrowser/ModuleDefinitionModel":159,"templates/backend/modulebrowser/module-browser.hbs":166}],153:[function(e,t,i){var n=e("common/Payload"),o=e("common/Checks");t.exports=Backbone.Collection.extend({initialize:function(e,t){this.area=t.area},setup:function(){return this.categories=this.prepareCategories(),this.sortToCategories(),this},getModules:function(e){if(this.categories[e])return this.categories[e].modules},getCategories:function(){return this.categories},sortToCategories:function(){var i=this;_.each(this.models,function(e){if(i.validateVisibility(e)){var t=_.isUndefined(e.get("settings").category)?"standard":e.get("settings").category;i.categories[t].modules.push(e)}})},validateVisibility:function(e){return!!o.userCan(e.get("settings").cap)&&(!e.get("settings").hidden&&(!e.get("settings").disabled&&!(!e.get("settings").globalModule&&this.area.model.get("dynamic"))))},prepareCategories:function(){var i={},e=n.getPayload("ModuleCategories");return _.each(e,function(e,t){i[t]={id:t,name:e,modules:[]}}),KB.Events.trigger("module.browser.setup.cats",i),i}})},{"common/Checks":21,"common/Payload":26}],154:[function(e,t,i){var n=e("templates/backend/modulebrowser/module-template-description.hbs"),o=e("templates/backend/modulebrowser/module-description.hbs");t.exports=Backbone.View.extend({initialize:function(e){this.options=e||{},this.Browser=e.browser,this.Browser.on("browser:close",this.close,this)},events:{"click .kb-js-create-module":"createModule"},update:function(){this.$el.empty(),this.model.get("template")?this.$el.html(n({module:this.model.toJSON(),i18n:KB.i18n})):this.$el.html(o({module:this.model.toJSON(),i18n:KB.i18n})),!1!==this.model.get("settings").helptext&&this.$el.append(this.model.get("settings").helptext)},close:function(){},createModule:function(){this.Browser.createModule(this.model)}})},{"templates/backend/modulebrowser/module-description.hbs":167,"templates/backend/modulebrowser/module-template-description.hbs":169}],155:[function(e,t,i){var n=e("shared/ModuleBrowser/ModuleBrowserListItem");t.exports=Backbone.View.extend({initialize:function(e){this.options=e||{},this.cat=e.cat},modules:{},subviews:{},setModules:function(e){return this.modules=e,this},update:function(){var t=this,i=!1;this.$el.empty();var e=this.cat.model.get("modules");e.sort(function(e,t){return e.get("settings").name>t.get("settings").name?1:t.get("settings").name>e.get("settings").name?-1:0}),_.each(e,function(e){t.subviews[e.cid]=new n({model:e,parent:t,browser:t.options.browser}),!1===i&&(t.options.browser.loadDetails(e),i=!i),t.$el.append(t.subviews[e.cid].render(t.$el))})},render:function(){}})},{"shared/ModuleBrowser/ModuleBrowserListItem":156}],156:[function(e,t,i){var n=e("templates/backend/modulebrowser/module-template-list-item.hbs"),o=e("templates/backend/modulebrowser/module-list-item.hbs"),s=e("templates/backend/modulebrowser/poster.hbs");t.exports=Backbone.View.extend({tagName:"div",className:"modules-list-item",initialize:function(e){this.options=e||{},this.Browser=e.browser,this.area=e.browser.area},render:function(e){this.model.get("globalModule")?this.$el.html(n({module:this.model.toJSON(),i18n:KB.i18n})):this.$el.html(o({module:this.model.toJSON(),i18n:KB.i18n})),e.append(this.$el),!1!==this.model.get("settings").poster&&this.$el.qtip({content:{text:s({module:this.model.toJSON()})},style:{classes:"kb-qtip"},position:{my:"top left",at:"bottom right",target:"mouse",adjust:{x:80,y:20}}})},events:{click:"handleClick","click .kb-js-create-module":"handlePlusClick"},handleClick:function(){"list"===this.Browser.viewMode?this.createModule():this.Browser.loadDetails(this.model)},handlePlusClick:function(){if("list"===this.Browser.viewMode)return this.handleClick(),!1;this.createModule()},createModule:function(){this.Browser.createModule(this.model)},close:function(){this.remove()}})},{"templates/backend/modulebrowser/module-list-item.hbs":168,"templates/backend/modulebrowser/module-template-list-item.hbs":170,"templates/backend/modulebrowser/poster.hbs":171}],157:[function(e,t,i){var n=e("shared/ModuleBrowser/ModuleBrowserTabItemView");t.exports=Backbone.View.extend({catSet:!1,initialize:function(e){var i=this;this.options=e||{},this.$list=jQuery("<div></div>").appendTo(this.$el),_.each(this.options.cats,function(e){var t=new Backbone.Model(e);new n({parent:i,model:t,browser:i.options.browser}).render()})}})},{"shared/ModuleBrowser/ModuleBrowserTabItemView":158}],158:[function(e,t,i){var n=e("shared/ModuleBrowser/ModuleBrowserList");t.exports=Backbone.View.extend({initialize:function(e){if(this.options=e||{},this.model.get("listRenderer")){var t=this.model.get("listRenderer");this.listRenderer=new t({cat:this,el:e.browser.$list,browser:e.browser})}else this.listRenderer=new n({cat:this,el:e.browser.$list,browser:e.browser})},tagName:"div",className:"cat-item",events:{click:"change"},change:function(){this.options.parent.trigger("browser:change",this),this.$el.addClass("active"),jQuery(".cat-item").not(this.$el).removeClass("active")},render:function(){var e=_.keys(this.model.get("modules")).length,t=" ("+e+")";if(0===e)return!1;!1===this.options.parent.catSet&&(this.options.parent.catSet=!0,this.options.browser.update(this),this.$el.addClass("active")),this.options.parent.$list.append(this.$el.html(this.model.get("name")+'<span class="module-count">'+t+"</span>"))},renderList:function(){this.listRenderer.update()}})},{"shared/ModuleBrowser/ModuleBrowserList":155}],159:[function(e,t,i){t.exports=Backbone.Model.extend({initialize:function(){var e=this;this.id="template"===e.get("settings").category?e.get("mid"):e.get("settings").class}})},{}],160:[function(e,t,i){var n=e("backend/Views/ModuleControls/ControlsView");t.exports=n.extend({tagName:"div",className:"kb-module--status-bar-list",initialize:function(e){this.$menuWrap=jQuery(".kb-module--status-bar",this.$el),this.$menuWrap.append("<div class='kb-module--status-bar-list'></div>"),this.$menuList=jQuery(".kb-module--status-bar-list",this.$menuWrap)}})},{"backend/Views/ModuleControls/ControlsView":8}],161:[function(e,t,i){var n=e("backend/Views/BaseControlView"),o=e("templates/backend/status/publish.hbs"),s=e("common/Ajax"),r=e("common/Config"),l=e("common/I18n"),a=e("common/Checks");t.exports=n.extend({id:"publish",className:"kb-status-draft",events:{click:"toggleDraft"},isValid:function(){return!!a.userCan(this.model.get("settings").cap)&&(!KB.Environment||"kb-gmd"!==KB.Environment.postType)},render:function(){var e=this.model.get("state").draft,t=this.model.View.$el;this.$el.append(o({draft:this.model.get("state").draft,strings:l.getString("Modules.tooltips")})),e?t.addClass("kb-module-draft"):t.removeClass("kb-module-draft")},toggleDraft:function(){var e=this;s.send({action:"undraftModule",module:this.model.toJSON(),_ajax_nonce:r.getNonce("update")}).done(function(){e.model.get("state").draft=!e.model.get("state").draft,e.$el.empty(),e.render(),e.model.trigger("change:state",e.model.get("state"))})}})},{"backend/Views/BaseControlView":1,"common/Ajax":20,"common/Checks":21,"common/Config":22,"common/I18n":23,"templates/backend/status/publish.hbs":172}],162:[function(e,t,i){var n=e("backend/Views/BaseControlView"),o=e("templates/backend/status/templates.hbs"),s=e("backend/Views/TemplateEditor/CodemirrorOverlay"),r=e("common/Checks");t.exports=n.extend({id:"templates",controller:null,className:"kb-status-templates",initialize:function(e){this.moduleView=e.parent,this.views=this.prepareViews(this.model.get("views"))},attributes:{"aria-label":"Modultemplate Auswahl"},events:{dblclick:"openEditor"},isValid:function(){return!!r.userCan(this.model.get("settings").cap)},render:function(e){var t=e||this.views,i=1<_.size(t);this.$el.empty().append(o({show:i,module:this.model.toJSON(),views:t}))},openEditor:function(){new s({views:this.views,module:this.model})},prepareViews:function(e){return _.map(e,function(e){return e.selected=e.filename===this.model.get("viewfile")?'selected="selected"':"",e.isActive=e.filename===this.model.get("viewfile"),e},this)}})},{"backend/Views/BaseControlView":1,"backend/Views/TemplateEditor/CodemirrorOverlay":9,"common/Checks":21,"templates/backend/status/templates.hbs":173}],163:[function(e,t,i){KB.ViewsCollection=function(){this.views={},this.lastViewAdded=null,this.add=function(e,t){return this.views[e]||(this.views[e]=t,KB.trigger("kb:"+t.model.get("class")+":added",t),this.trigger("view:add",t),this.lastViewAdded=t),t},this.ready=function(){_.each(this.views,function(e){e.trigger("kb:"+e.model.get("class"),e),KB.trigger("kb:"+e.model.get("class")+":loaded",e)}),KB.trigger("kb:ready")},this.readyOnFront=function(){_.each(this.views,function(e){e.trigger("kb:"+e.model.get("class"),e),KB.trigger("kb:"+e.model.get("class")+":loadedOnFront",e)}),KB.trigger("kb:ready")},this.remove=function(e){var t=this.get(e);t.model.Area.View.trigger("kb.module.deleted",t),this.trigger("kb.modules.view.deleted",t),delete this.views[e],t.dispose()},this.get=function(e){if(this.views[e])return this.views[e]},this.filterByModelAttr=function(t,i){return _.filter(this.views,function(e){return e.model.get(t)===i})}},_.extend(KB.ViewsCollection.prototype,Backbone.Events),t.exports=KB.ViewsCollection},{}],164:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){return'<div class="kb-context-bar grid__col grid__col--12-of-12" aria-hidden="true">\n    <div class="kb-context-bar--actions">\n\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":260}],165:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){return'<div class="kb-fullscreen--holder-wrap">\n    <div class="kb-fullscreen--controls">\n        <div class="kb-fullscreen-js-close"><span class="dashicons dashicons-no-alt"></span></div>\n    </div>\n    <div class="kb-nano">\n        <div class="kb-fullscreen--inner kb-nano-content">\n\n        </div>\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":260}],166:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="module-browser-wrapper '+e.escapeExpression("function"==typeof(s=null!=(s=r(i,"viewMode")||(null!=t?r(t,"viewMode"):t))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"viewMode",hash:{},data:o,loc:{start:{line:1,column:35},end:{line:1,column:49}}}):s)+'">\n\n    <div class="module-browser-header module-categories">\n        <div class="genericon genericon-close-alt close-browser kb-button"></div>\n        <div class="dashicons dashicons-list-view module-browser--switch__list-view kb-hide"></div>\n        <div class="dashicons dashicons-exerpt-view module-browser--switch__excerpt-view kb-hide"></div>\n        <div class="dashicons dashicons-grid-view module-browser--switch__grid-view kb-hide"></div>\n    </div>\n\n    <div class="module-browser__left-column kb-nano">\n        <div class="modules-list kb-nano-content">\n\n        </div>\n    </div>\n\n    <div class="module-browser__right-column kb-nano">\n        <div class="module-description kb-nano-content">\n\n        </div>\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":260}],167:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<h3>"+l(r(null!=(s=null!=(s=null!=t?a(t,"module"):t)?a(s,"settings"):s)?a(s,"publicName"):s,t))+' <div class="kb-button-small kb-js-create-module">'+l(r(null!=(s=null!=(s=null!=(s=null!=t?a(t,"i18n"):t)?a(s,"EditScreen"):s)?a(s,"moduleBrowser"):s)?a(s,"addModule"):s,t))+"</div>\n</h3>\n"},useData:!0})},{"hbsfy/runtime":260}],168:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kbmb-icon '+l(r(null!=(s=null!=(s=null!=t?a(t,"module"):t)?a(s,"settings"):s)?a(s,"iconclass"):s,t))+'"></div>\n<div class="kbmb-hl">'+l(r(null!=(s=null!=(s=null!=t?a(t,"module"):t)?a(s,"settings"):s)?a(s,"name"):s,t))+'</div>\n<div class="kbmb-description">'+l(r(null!=(s=null!=(s=null!=t?a(t,"module"):t)?a(s,"settings"):s)?a(s,"description"):s,t))+"</div>"},useData:!0})},{"hbsfy/runtime":260}],169:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<h3>"+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=t?r(t,"module"):t)?r(s,"parentObject"):s)?r(s,"post_title"):s,t))+"</h3>"},useData:!0})},{"hbsfy/runtime":260}],170:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="dashicons dashicons-plus kb-js-create-module"></div>\n<div class="kbmb-hl">'+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=t?r(t,"module"):t)?r(s,"parentObject"):s)?r(s,"post_title"):s,t))+"</div>"},useData:!0})},{"hbsfy/runtime":260}],171:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="module-browser--poster-wrap">\n    <img src="'+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=t?r(t,"module"):t)?r(s,"settings"):s)?r(s,"poster"):s,t))+'" >\n</div>'},useData:!0})},{"hbsfy/runtime":260}],172:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({1:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="kb-status-draft kb-button-small" data-kbtooltip="'+l(r(null!=(s=null!=t?a(t,"strings"):t)?a(s,"tooltipUndraft"):s,t))+'">'+l(r(null!=(s=null!=t?a(t,"strings"):t)?a(s,"draft"):s,t))+"</div>\n"},3:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'   <div class="kb-status-public kb-button-small" data-kbtooltip="'+l(r(null!=(s=null!=t?a(t,"strings"):t)?a(s,"tooltipDraft"):s,t))+'">'+l(r(null!=(s=null!=t?a(t,"strings"):t)?a(s,"published"):s,t))+"</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"draft"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:1,column:0},end:{line:5,column:7}}}))?s:""},useData:!0})},{"hbsfy/runtime":260}],173:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({1:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="kb-template-selector--wrapper">\n        <div class="kb-selectbox">\n            <select class="kb-template-select" data-kb-rel="'+l(r(null!=(s=null!=t?a(t,"module"):t)?a(s,"mid"):s,t))+'" name="'+l(r(null!=(s=null!=t?a(t,"module"):t)?a(s,"mid"):s,t))+'[viewfile]">\n'+(null!=(s=a(i,"each").call(null!=t?t:e.nullContext||{},null!=t?a(t,"views"):t,{name:"each",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:16},end:{line:8,column:25}}}))?s:"")+"            </select>\n        </div>\n    </div>\n"},2:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                    <option "+(null!=(s=r(null!=t?a(t,"selected"):t,t))?s:"")+' value="'+l(r(null!=t?a(t,"filename"):t,t))+'"\n                                                data-tpldesc="'+l(r(null!=t?a(t,"description"):t,t))+'">'+l(r(null!=t?a(t,"name"):t,t))+"</option>\n"},4:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <input name="'+l(r(null!=(s=null!=t?a(t,"module"):t)?a(s,"mid"):s,t))+'[viewfile]" type="hidden" value="'+l(r(null!=(s=null!=t?a(t,"module"):t)?a(s,"viewfile"):s,t))+'">\n'},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"show"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(4,o,0),data:o,loc:{start:{line:1,column:0},end:{line:14,column:7}}}))?s:"")+"\n"},useData:!0})},{"hbsfy/runtime":260}],174:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-tpled--field-item">\n    <div><strong>Label:</strong>'+l(r(null!=(s=null!=(s=null!=t?a(t,"data"):t)?a(s,"args"):s)?a(s,"label"):s,t))+'</div>\n    <div class="kb-tpled--details">\n        <div><strong>Type:</strong>'+l(r(null!=(s=null!=t?a(t,"data"):t)?a(s,"type"):s,t))+"</div>\n        <div><strong>Key:</strong>"+l(r(null!=(s=null!=t?a(t,"data"):t)?a(s,"key"):s,t))+"</div>\n        <div><strong>Access:</strong>Model."+l(r(null!=(s=null!=t?a(t,"data"):t)?a(s,"kpath"):s,t))+"</div>\n        <div><strong>Value:</strong>Model."+l(r(null!=(s=null!=t?a(t,"data"):t)?a(s,"value"):s,t))+"</div>\n    </div>\n</div>"},useData:!0})},{"hbsfy/runtime":260}],175:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-template-edditor--file-item">\n    '+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"data"):t)?r(s,"name"):s,t))+"\n</div>"},useData:!0})},{"hbsfy/runtime":260}],176:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){return'<div class="kb-tpled--wrap">\n\n    <div class="kb-tpled--header">\n        <div class="kb-fullscreen--controls">\n            <div class="kb-tpled--close"><span class="dashicons dashicons-no-alt"></span></div>\n        </div>\n    </div>\n    <div class="kb-tpled--inner kbflexwrap">\n        <div class="kb-tpled--sidebar kbflex">\n            <div class="kb-tpled--views">\n                <h5>Templates</h5>\n                <div data-views></div>\n            </div>\n            <div class="kb-tpled--actions">\n                <h5>Actions</h5>\n                <div data-controls></div>\n            </div>\n        </div>\n        <div class="kb-tpled--content kbflex">\n            <div id="codemirror"></div>\n\n        </div>\n        <div class="kb-tpled--sidebar kb-tpled--sidebar-right kbflex">\n            <div class="kb-tpled--fields">\n                <h5>Available Datafields</h5>\n                <div data-fields></div>\n            </div>\n        </div>\n    </div>\n    <div class="kb-tpled--footer">\n\n    </div>\n\n</div>'},useData:!0})},{"hbsfy/runtime":260}],177:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({1:function(e,t,i,n,o){return'checked="checked"'},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field field-api-checkbox kb-field--checkbox">\n    <label class="heading">'+l(r(null!=(s=null!=t?c(t,"model"):t)?c(s,"label"):s,t))+'\n        <input type="checkbox"'+(null!=(s=(c(i,"ifCond")||t&&c(t,"ifCond")||d).call(a,null!=(s=null!=t?c(t,"model"):t)?c(s,"value"):s,"==",!0,{name:"ifCond",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:30},end:{line:3,column:92}}}))?s:"")+'\n               name="'+l((c(i,"fieldName")||t&&c(t,"fieldName")||d).call(a,null!=(s=null!=t?c(t,"model"):t)?c(s,"baseId"):s,null!=(s=null!=t?c(t,"model"):t)?c(s,"index"):s,null!=(s=null!=t?c(t,"model"):t)?c(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:4,column:21},end:{line:4,column:76}}}))+'">\n    </label>\n    <p class="description">'+l(r(null!=(s=null!=t?c(t,"model"):t)?c(s,"description"):s,t))+"</p>\n</div>\n"},useData:!0})},{"hbsfy/runtime":260}],178:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field field-api-text kb-field--text">\n    <label class="heading">'+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"label"):s,t))+"</label>\n    <input class='kb-color-picker' data-alpha=\"true\" type='text' name='"+l((a(i,"fieldName")||t&&a(t,"fieldName")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:3,column:71},end:{line:3,column:126}}}))+"' }}'\n    value='"+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s,t))+"' size='7'/>\n    <p class=\"description\">"+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"description"):s,t))+"</p>\n</div>\n"},useData:!0})},{"hbsfy/runtime":260}],179:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field--date-multiple-item">\n    <div class="kb-field--date-multiple-control kbf-sort"><span class="dashicons dashicons-menu hide"></span></div>\n    <input type=\'text\'  name=\''+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,t))+"["+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"uniqueId"):s,t))+"][human]'\n           value='"+l(r(null!=(s=null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s)?a(s,"human"):s,t))+"' class='kb-datetimepicker'>\n    <input type='hidden' name='"+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,t))+"["+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"uniqueId"):s,t))+"][unix]' value='"+l(r(null!=(s=null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s)?a(s,"unix"):s,t))+"'\n           class='kb-datetimepicker--js-unix'>\n    <input type='hidden' name='"+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,t))+"["+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"uniqueId"):s,t))+"][sql]' value='"+l(r(null!=(s=null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s)?a(s,"sql"):s,t))+'\'\n           class=\'kb-datetimepicker--js-sql\'>\n    <div data-kbfaction="delete" class="kb-field--text-multiple-control kbf-delete"><span class="dashicons dashicons-trash" ></span></div>\n</div>'},useData:!0})},{"hbsfy/runtime":260}],180:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field kb-field--datetime field-api-datetime">\n<label class="heading">'+l(r(null!=(s=null!=t?c(t,"model"):t)?c(s,"label"):s,t))+'</label>\n<div class="kb-field--datetime-item">\n\n    <input type="text" name=\''+l((c(i,"fieldName")||t&&c(t,"fieldName")||d).call(a,null!=(s=null!=t?c(t,"model"):t)?c(s,"baseId"):s,null!=(s=null!=t?c(t,"model"):t)?c(s,"index"):s,null!=(s=null!=t?c(t,"model"):t)?c(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:5,column:29},end:{line:5,column:84}}}))+"[human]'\n           value='"+l(r(null!=(s=null!=(s=null!=t?c(t,"model"):t)?c(s,"value"):s)?c(s,"human"):s,t))+"' class='kb-datetimepicker'>\n    <input type='hidden' name='"+l((c(i,"fieldName")||t&&c(t,"fieldName")||d).call(a,null!=(s=null!=t?c(t,"model"):t)?c(s,"baseId"):s,null!=(s=null!=t?c(t,"model"):t)?c(s,"index"):s,null!=(s=null!=t?c(t,"model"):t)?c(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:7,column:31},end:{line:7,column:86}}}))+"[unix]' value='"+l(r(null!=(s=null!=(s=null!=t?c(t,"model"):t)?c(s,"value"):s)?c(s,"unix"):s,t))+"'\n           class='kb-datetimepicker--js-unix'>\n    <input type='hidden' name='"+l((c(i,"fieldName")||t&&c(t,"fieldName")||d).call(a,null!=(s=null!=t?c(t,"model"):t)?c(s,"baseId"):s,null!=(s=null!=t?c(t,"model"):t)?c(s,"index"):s,null!=(s=null!=t?c(t,"model"):t)?c(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:9,column:31},end:{line:9,column:86}}}))+"[sql]' value='"+l(r(null!=(s=null!=(s=null!=t?c(t,"model"):t)?c(s,"value"):s)?c(s,"sql"):s,t))+"'\n           class='kb-datetimepicker--js-sql'>\n</div>\n<p class=\"description\">"+l(r(null!=(s=null!=t?c(t,"model"):t)?c(s,"description"):s,t))+"</p>\n</div>"},useData:!0})},{"hbsfy/runtime":260}],181:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field field-api-editor">\n    <label class="heading">'+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"label"):s,t))+'</label>\n    <div class="kb-ff-editor-wrapper-'+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,t))+"-"+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"key"):s,t))+'">\n    </div>\n    <p class="description">'+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"description"):s,t))+"</p>\n</div>"},useData:!0})},{"hbsfy/runtime":260}],182:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r,l=e.lambda,a=e.escapeExpression,d=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<label class="heading">'+a(l(null!=(s=null!=t?h(t,"model"):t)?h(s,"label"):s,t))+"</label>\n<div class='kb-field-file-wrapper "+a(typeof(r=null!=(r=h(i,"isEmpty")||(null!=t?h(t,"isEmpty"):t))?r:c)===u?r.call(d,{name:"isEmpty",hash:{},data:o,loc:{start:{line:2,column:34},end:{line:2,column:47}}}):r)+'\'>\n    <table>\n        <tbody>\n        <tr>\n            <td>ID:</td>\n            <td><span class="kb-file-id">'+a(l(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"id"):s,t))+"</span></td>\n        </tr>\n        <tr>\n            <td>"+a(l(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"title"):s,t))+'</td>\n            <td><span class="kb-file-title">'+a(l(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"title"):s,t))+"</span></td>\n        </tr>\n        <tr>\n            <td>"+a(l(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"filename"):s,t))+'</td>\n            <td><span class="kb-file-filename">'+a(l(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"filename"):s,t))+"</span></td>\n        </tr>\n        <tr>\n            <td>"+a(l(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"editLink"):s,t))+'</td>\n            <td><a class="kb-file-editLink" href="'+a(l(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"editLink"):s,t))+'">edit</a></td>\n        </tr>\n        </tbody>\n    </table>\n    <input type="hidden" class="kb-file-attachment-id" value="'+a(l(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"id"):s,t))+'"\n           name="'+a((h(i,"fieldName")||t&&h(t,"fieldName")||c).call(d,null!=(s=null!=t?h(t,"model"):t)?h(s,"baseId"):s,null!=(s=null!=t?h(t,"model"):t)?h(s,"index"):s,null!=(s=null!=t?h(t,"model"):t)?h(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:24,column:17},end:{line:24,column:72}}}))+'[id]">\n</div>\n<a class="button primary kb-js-add-file">'+a(l(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"selectFile"):s,t))+'</a>\n<a class="kb-js-reset-file '+a(typeof(r=null!=(r=h(i,"isEmpty")||(null!=t?h(t,"isEmpty"):t))?r:c)===u?r.call(d,{name:"isEmpty",hash:{},data:o,loc:{start:{line:27,column:27},end:{line:27,column:40}}}):r)+'">'+a(l(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"remove"):s,t))+'</a>\n<p class="description">'+a(l(null!=(s=null!=t?h(t,"model"):t)?h(s,"description"):s,t))+"</p>\n"},useData:!0})},{"hbsfy/runtime":260}],183:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r,l=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,d="function",c=e.escapeExpression,u=e.lambda,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field--file-multiple-item">\n    <div class="kb-field--file-multiple-control kbf-sort"><span class="dashicons dashicons-menu"></span></div>\n    <div class=\'kb-field-file-wrapper '+c(typeof(r=null!=(r=h(i,"isEmpty")||(null!=t?h(t,"isEmpty"):t))?r:a)===d?r.call(l,{name:"isEmpty",hash:{},data:o,loc:{start:{line:3,column:38},end:{line:3,column:51}}}):r)+"'>\n        <table>\n            <tbody>\n            <tr>\n                <td>"+c(u(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"customtitle"):s,t))+'</td>\n                <td><input class="kb-file-input" name="'+c(u(null!=(s=null!=t?h(t,"model"):t)?h(s,"baseId"):s,t))+"["+c(u(null!=(s=null!=t?h(t,"model"):t)?h(s,"uniqueId"):s,t))+'][title]" value="'+(null!=(s=u(null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"title"):s,t))?s:"")+'"></td>\n            </tr>\n            <tr>\n                <td>ID:</td>\n                <td><span class="kb-file-id">'+c(u(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"id"):s,t))+"</span></td>\n            </tr>\n            <tr>\n                <td>"+c(u(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"filetitle"):s,t))+'</td>\n                <td><span class="kb-file-title">'+c(u(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"title"):s,t))+"</span></td>\n            </tr>\n            <tr>\n                <td>"+c(u(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"filename"):s,t))+'</td>\n                <td><span class="kb-file-filename">'+c(u(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"filename"):s,t))+"</span></td>\n            </tr>\n            <tr>\n                <td>"+c(u(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"editLink"):s,t))+'</td>\n                <td><a class="kb-file-editLink" href="'+c(u(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"editLink"):s,t))+'">edit</a></td>\n            </tr>\n            <tr>\n                <td>'+c(u(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"comment"):s,t))+'</td>\n                <td><textarea class="kb-file-input" name="'+c(u(null!=(s=null!=t?h(t,"model"):t)?h(s,"baseId"):s,t))+"["+c(u(null!=(s=null!=t?h(t,"model"):t)?h(s,"uniqueId"):s,t))+'][comment]">'+(null!=(s=u(null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"comment"):s,t))?s:"")+'</textarea></td>\n            </tr>\n            </tbody>\n        </table>\n        <input type="hidden" class="kb-file-attachment-id" value="'+c(u(null!=(s=null!=(s=null!=(s=null!=t?h(t,"model"):t)?h(s,"value"):s)?h(s,"file"):s)?h(s,"id"):s,t))+'"\n               name="'+c(u(null!=(s=null!=t?h(t,"model"):t)?h(s,"baseId"):s,t))+"["+c(u(null!=(s=null!=t?h(t,"model"):t)?h(s,"uniqueId"):s,t))+'][id]">\n    </div>\n    <a class="button primary kb-js-add-file">'+c(u(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"selectFile"):s,t))+'</a>\n    <a class="kb-js-reset-file '+c(typeof(r=null!=(r=h(i,"isEmpty")||(null!=t?h(t,"isEmpty"):t))?r:a)===d?r.call(l,{name:"isEmpty",hash:{},data:o,loc:{start:{line:36,column:31},end:{line:36,column:44}}}):r)+'">'+c(u(null!=(s=null!=t?h(t,"i18n"):t)?h(s,"reset"):s,t))+'</a>\n    <div data-kbfaction="delete" class="kb-field--file-multiple-control kbf-delete"><span class="dashicons dashicons-trash" ></span></div>\n</div>'},useData:!0})},{"hbsfy/runtime":260}],184:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r,l=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,d="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<input type="hidden" name="'+c(typeof(r=null!=(r=u(i,"inputName")||(null!=t?u(t,"inputName"):t))?r:a)===d?r.call(l,{name:"inputName",hash:{},data:o,loc:{start:{line:1,column:27},end:{line:1,column:42}}}):r)+'[_meta][uid]" value="'+c(typeof(r=null!=(r=u(i,"uid")||(null!=t?u(t,"uid"):t))?r:a)===d?r.call(l,{name:"uid",hash:{},data:o,loc:{start:{line:1,column:63},end:{line:1,column:72}}}):r)+'">\n<input type="hidden" name="'+c(typeof(r=null!=(r=u(i,"inputName")||(null!=t?u(t,"inputName"):t))?r:a)===d?r.call(l,{name:"inputName",hash:{},data:o,loc:{start:{line:2,column:27},end:{line:2,column:42}}}):r)+'[_meta][type]" value="'+c(typeof(r=null!=(r=u(i,"fftype")||(null!=t?u(t,"fftype"):t))?r:a)===d?r.call(l,{name:"fftype",hash:{},data:o,loc:{start:{line:2,column:64},end:{line:2,column:76}}}):r)+'">\n<input data-flexfield-visible type="hidden" name="'+c(typeof(r=null!=(r=u(i,"inputName")||(null!=t?u(t,"inputName"):t))?r:a)===d?r.call(l,{name:"inputName",hash:{},data:o,loc:{start:{line:3,column:50},end:{line:3,column:65}}}):r)+'[_meta][status]" value="'+c(typeof(r=null!=(r=u(i,"status")||(null!=t?u(t,"status"):t))?r:a)===d?r.call(l,{name:"status",hash:{},data:o,loc:{start:{line:3,column:89},end:{line:3,column:101}}}):r)+'">\n\n<div class="flexible-fields--section-box">\n    <div class="flexible-fields--section-title">\n        <span class="genericon genericon-draggable flexible-fields--js-drag-handle"></span>\n        <span class="dashicons dashicons-trash flexible-fields--js-trash"></span>\n        <input type="text" value="'+c(e.lambda(null!=(s=null!=t?u(t,"item"):t)?u(s,"title"):s,t))+'" name="'+c(typeof(r=null!=(r=u(i,"inputName")||(null!=t?u(t,"inputName"):t))?r:a)===d?r.call(l,{name:"inputName",hash:{},data:o,loc:{start:{line:9,column:58},end:{line:9,column:73}}}):r)+'[_meta][title] ">\n    </div>\n    <div class="flexible-fields--section-box-inner">\n\n    </div>\n    <div class="kb-field--tabs">\n        <ul class="flexible-field--tab-nav">\n        </ul>\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":260}],185:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r,l=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,d="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<input type="hidden" name="'+c(typeof(r=null!=(r=u(i,"inputName")||(null!=t?u(t,"inputName"):t))?r:a)===d?r.call(l,{name:"inputName",hash:{},data:o,loc:{start:{line:1,column:27},end:{line:1,column:42}}}):r)+'[_meta][uid]" value="'+c(typeof(r=null!=(r=u(i,"uid")||(null!=t?u(t,"uid"):t))?r:a)===d?r.call(l,{name:"uid",hash:{},data:o,loc:{start:{line:1,column:63},end:{line:1,column:72}}}):r)+'">\n<input type="hidden" name="'+c(typeof(r=null!=(r=u(i,"inputName")||(null!=t?u(t,"inputName"):t))?r:a)===d?r.call(l,{name:"inputName",hash:{},data:o,loc:{start:{line:2,column:27},end:{line:2,column:42}}}):r)+'[_meta][type]" value="'+c(typeof(r=null!=(r=u(i,"fftype")||(null!=t?u(t,"fftype"):t))?r:a)===d?r.call(l,{name:"fftype",hash:{},data:o,loc:{start:{line:2,column:64},end:{line:2,column:76}}}):r)+'">\n<input data-flexfield-visible type="hidden" name="'+c(typeof(r=null!=(r=u(i,"inputName")||(null!=t?u(t,"inputName"):t))?r:a)===d?r.call(l,{name:"inputName",hash:{},data:o,loc:{start:{line:3,column:50},end:{line:3,column:65}}}):r)+'[_meta][status]" value="'+c(typeof(r=null!=(r=u(i,"status")||(null!=t?u(t,"status"):t))?r:a)===d?r.call(l,{name:"status",hash:{},data:o,loc:{start:{line:3,column:89},end:{line:3,column:101}}}):r)+'">\n<div class="flexible-fields--toggle-title">\n    <h3>\n        <span class="genericon genericon-draggable flexible-fields--js-drag-handle"></span>\n        <span class="genericon genericon-expand flexible-fields--js-toggle" data-flexfields-toggle></span>\n        <span class="dashicons dashicons-trash flexible-fields--js-duplicate"></span>\n        <span class="dashicons dashicons-trash flexible-fields--js-trash"></span>\n        <span class="dashicons dashicons-trash flexible-fields--js-visibility"></span>\n        <input type="text" value="'+c(e.lambda(null!=(s=null!=t?u(t,"item"):t)?u(s,"title"):s,t))+'" name="'+c(typeof(r=null!=(r=u(i,"inputName")||(null!=t?u(t,"inputName"):t))?r:a)===d?r.call(l,{name:"inputName",hash:{},data:o,loc:{start:{line:11,column:58},end:{line:11,column:73}}}):r)+'[_meta][title]">\n    </h3>\n</div>\n<div class="flexible-fields--toggle-box kb-hide">\n    <div class="kb-field--tabs">\n        <ul class="flexible-field--tab-nav">\n\n        </ul>\n    </div>\n\n</div>'},useData:!0})},{"hbsfy/runtime":260}],186:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({1:function(e,t,i,n,o){var s,r,l=e.escapeExpression,a=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <a class="button button-primary kb-flexible-fields--js-add-item"\n           data-kbf-addtype="'+l("function"==typeof(r=null!=(r=d(i,"key")||o&&d(o,"key"))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"key",hash:{},data:o,loc:{start:{line:5,column:29},end:{line:5,column:37}}}):r)+'">'+l(a(null!=(s=null!=t?d(t,"i18n"):t)?d(s,"addNewItem"):s,t))+l(a(null!=(s=null!=t?d(t,"args"):t)?d(s,"buttontext"):s,t))+"</a>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<ul class="flexible-fields--item-list"></ul>\n<div class="flexible-fields--header">\n'+(null!=(s=r(i,"each").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?r(t,"model"):t)?r(s,"fields"):s,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:4},end:{line:6,column:13}}}))?s:"")+"</div>"},useData:!0})},{"hbsfy/runtime":260}],187:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r,l=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,d="function",c=e.escapeExpression,u=e.lambda,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-gallery--header">\n    <h3>Image Details</h3>\n</div>\n<div class="kb-gallery--left-column">\n    <div class="kb-gallery--image-meta" style="display: none;">\n        <span class="genericon genericon-close-alt kb-gallery--js-meta-close"></span>\n\n        <div class="kb-field--tabs">\n            <ul class="kb-gallery--tabs-nav">\n                <li><a href="#tab'+c(typeof(r=null!=(r=h(i,"uid")||(null!=t?h(t,"uid"):t))?r:a)===d?r.call(l,{name:"uid",hash:{},data:o,loc:{start:{line:10,column:33},end:{line:10,column:42}}}):r)+'-1">Details</a></li>\n                <li><a href="#tab'+c(typeof(r=null!=(r=h(i,"uid")||(null!=t?h(t,"uid"):t))?r:a)===d?r.call(l,{name:"uid",hash:{},data:o,loc:{start:{line:11,column:33},end:{line:11,column:42}}}):r)+'-2">Beschreibung</a></li>\n            </ul>\n            <div id="tab'+c(typeof(r=null!=(r=h(i,"uid")||(null!=t?h(t,"uid"):t))?r:a)===d?r.call(l,{name:"uid",hash:{},data:o,loc:{start:{line:13,column:24},end:{line:13,column:33}}}):r)+'-1">\n                <div class="kb-gallery--meta-field kb-field">\n                    <label class="heading">Titel</label>\n                    <input class="large" type="text" name="'+c(typeof(r=null!=(r=h(i,"inputName")||(null!=t?h(t,"inputName"):t))?r:a)===d?r.call(l,{name:"inputName",hash:{},data:o,loc:{start:{line:16,column:59},end:{line:16,column:74}}}):r)+'[details][title]" value="'+c(u(null!=(s=null!=(s=null!=t?h(t,"image"):t)?h(s,"details"):s)?h(s,"title"):s,t))+'">\n                </div>\n                <div class="kb-gallery--meta-field kb-field">\n                    <label class="heading">Alt</label>\n                    <input class="large" type="text" name="'+c(typeof(r=null!=(r=h(i,"inputName")||(null!=t?h(t,"inputName"):t))?r:a)===d?r.call(l,{name:"inputName",hash:{},data:o,loc:{start:{line:20,column:59},end:{line:20,column:74}}}):r)+'[details][alt]" value="'+c(u(null!=(s=null!=(s=null!=t?h(t,"image"):t)?h(s,"details"):s)?h(s,"alt"):s,t))+'">\n                </div>\n            </div>\n\n            <div id="tab'+c(typeof(r=null!=(r=h(i,"uid")||(null!=t?h(t,"uid"):t))?r:a)===d?r.call(l,{name:"uid",hash:{},data:o,loc:{start:{line:24,column:24},end:{line:24,column:33}}}):r)+'-2">\n                <div class="kb-js--remote-editor" data-uid="'+c(typeof(r=null!=(r=h(i,"uid")||(null!=t?h(t,"uid"):t))?r:a)===d?r.call(l,{name:"uid",hash:{},data:o,loc:{start:{line:25,column:60},end:{line:25,column:69}}}):r)+'">\n                    <textarea name="'+c(typeof(r=null!=(r=h(i,"inputName")||(null!=t?h(t,"inputName"):t))?r:a)===d?r.call(l,{name:"inputName",hash:{},data:o,loc:{start:{line:26,column:36},end:{line:26,column:51}}}):r)+'[details][description]">'+c(u(null!=(s=null!=(s=null!=t?h(t,"image"):t)?h(s,"details"):s)?h(s,"description"):s,t))+'</textarea>\n                </div>\n\n            </div>\n        </div>\n    </div>\n</div>\n<div class="kb-gallery--right-column">\n    <div class="kb-gallery--image-holder">\n        <img src="'+c(u(null!=(s=null!=(s=null!=(s=null!=(s=null!=t?h(t,"image"):t)?h(s,"file"):s)?h(s,"sizes"):s)?h(s,"thumbnail"):s)?h(s,"url"):s,t))+'">\n        <span class="genericon genericon-edit kb-gallery--js-edit"></span>\n        <span class="genericon genericon-close-alt kb-gallery--js-delete"></span>\n        <input type="hidden" name="'+c(typeof(r=null!=(r=h(i,"inputName")||(null!=t?h(t,"inputName"):t))?r:a)===d?r.call(l,{name:"inputName",hash:{},data:o,loc:{start:{line:38,column:35},end:{line:38,column:50}}}):r)+'[id]" value="'+c(u(null!=(s=null!=t?h(t,"image"):t)?h(s,"id"):s,t))+'">\n        <input type="hidden" class="kb-gallery--image-remove" name="'+c(typeof(r=null!=(r=h(i,"inputName")||(null!=t?h(t,"inputName"):t))?r:a)===d?r.call(l,{name:"inputName",hash:{},data:o,loc:{start:{line:39,column:68},end:{line:39,column:83}}}):r)+'[remove]" value="">\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":260}],188:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r,l=e.lambda,a=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-gallery--right-column">\n    <div class="kb-gallery--image-holder">\n        <img src="'+a(l(null!=(s=null!=t?d(t,"image"):t)?d(s,"previewUrl"):s,t))+'">\n        <input type="hidden" name="'+a("function"==typeof(r=null!=(r=d(i,"inputName")||(null!=t?d(t,"inputName"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"inputName",hash:{},data:o,loc:{start:{line:4,column:35},end:{line:4,column:50}}}):r)+'" value="'+a(l(null!=(s=null!=t?d(t,"image"):t)?d(s,"id"):s,t))+'">\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":260}],189:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r,l=e.lambda,a=e.escapeExpression,d=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-gallery--image-holder">\n    <img src="'+a(l(null!=(s=null!=t?h(t,"image"):t)?h(s,"previewUrl"):s,t))+'">\n    <div class="kb-gallery--meta-info">\n        <label> Vimeo\n            <textarea type="hidden" name="'+a(typeof(r=null!=(r=h(i,"inputName")||(null!=t?h(t,"inputName"):t))?r:c)===u?r.call(d,{name:"inputName",hash:{},data:o,loc:{start:{line:5,column:42},end:{line:5,column:57}}}):r)+'[meta]" rows="2">'+a(l(null!=(s=null!=t?h(t,"image"):t)?h(s,"meta"):s,t))+'</textarea>\n        </label>\n        <label> Beschreibung\n            <textarea type="hidden" name="'+a(typeof(r=null!=(r=h(i,"inputName")||(null!=t?h(t,"inputName"):t))?r:c)===u?r.call(d,{name:"inputName",hash:{},data:o,loc:{start:{line:8,column:42},end:{line:8,column:57}}}):r)+'[caption]" rows="2">'+a(l(null!=(s=null!=t?h(t,"image"):t)?h(s,"caption"):s,t))+'</textarea>\n        </label>\n        <input type="hidden" name="'+a(typeof(r=null!=(r=h(i,"inputName")||(null!=t?h(t,"inputName"):t))?r:c)===u?r.call(d,{name:"inputName",hash:{},data:o,loc:{start:{line:10,column:35},end:{line:10,column:50}}}):r)+'[id]" value="'+a(l(null!=(s=null!=t?h(t,"image"):t)?h(s,"id"):s,t))+'">\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":260}],190:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({1:function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <img src="'+(null!=(s=e.lambda(null!=(s=null!=(s=null!=t?r(t,"model"):t)?r(s,"value"):s)?r(s,"url"):s,t))?s:"")+'">\n'},3:function(e,t,i,n,o){return" kb-hide "},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=null!=t?t:e.nullContext||{},l=e.lambda,a=e.escapeExpression,d=e.hooks.helperMissing,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-field kb-field--image kb-fieldapi-field">\n    <div class=\'kb-field-image-wrapper\' data-kbfield="image">\n        <div role="button" aria-label="Datei auswhlen" tabindex="0" class=\'kb-js-add-image kb-field-image-container\'>\n'+(null!=(s=c(i,"if").call(r,null!=(s=null!=(s=null!=t?c(t,"model"):t)?c(s,"value"):s)?c(s,"url"):s,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:12},end:{line:6,column:19}}}))?s:"")+'        </div>\n        <div class="kb-field-image-meta '+(null!=(s=c(i,"if").call(r,null!=(s=null!=t?c(t,"model"):t)?c(s,"hideMeta"):s,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:8,column:40},end:{line:8,column:79}}}))?s:"")+' ">\n            <div class="kb-field-image-title">\n                <label>'+a(l(null!=(s=null!=t?c(t,"i18n"):t)?c(s,"title"):s,t))+"</label>\n                <input class='kb-js-image-title kb-observe' type=\"text\"\n                       name='"+a((c(i,"fieldName")||t&&c(t,"fieldName")||d).call(r,null!=(s=null!=t?c(t,"model"):t)?c(s,"baseId"):s,null!=(s=null!=t?c(t,"model"):t)?c(s,"index"):s,null!=(s=null!=t?c(t,"model"):t)?c(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:12,column:29},end:{line:12,column:83}}}))+"[title]'\n                       value='"+(null!=(s=l(null!=(s=null!=(s=null!=t?c(t,"model"):t)?c(s,"value"):s)?c(s,"title"):s,t))?s:"")+'\'>\n            </div>\n            <div class="kb-field-image-description">\n                <label>'+a(l(null!=(s=null!=t?c(t,"i18n"):t)?c(s,"description"):s,t))+"</label>\n        <textarea class='kb-js-image-description kb-observe'\n                  name='"+a((c(i,"fieldName")||t&&c(t,"fieldName")||d).call(r,null!=(s=null!=t?c(t,"model"):t)?c(s,"baseId"):s,null!=(s=null!=t?c(t,"model"):t)?c(s,"index"):s,null!=(s=null!=t?c(t,"model"):t)?c(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:18,column:24},end:{line:18,column:79}}}))+"[caption]'>"+(null!=(s=l(null!=(s=null!=(s=null!=t?c(t,"model"):t)?c(s,"value"):s)?c(s,"caption"):s,t))?s:"")+"\n        </textarea>\n            </div>\n        </div>\n        <input class='kb-js-image-id' type='hidden'\n               name='"+a((c(i,"fieldName")||t&&c(t,"fieldName")||d).call(r,null!=(s=null!=t?c(t,"model"):t)?c(s,"baseId"):s,null!=(s=null!=t?c(t,"model"):t)?c(s,"index"):s,null!=(s=null!=t?c(t,"model"):t)?c(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:23,column:21},end:{line:23,column:76}}}))+"[id]'\n               value='"+(null!=(s=l(null!=(s=null!=(s=null!=t?c(t,"model"):t)?c(s,"value"):s)?c(s,"id"):s,t))?s:"")+'\'>\n    </div>\n    <div class="kb-field-image--footer">\n        <a class="button kb-js-reset-image">Reset</a>\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":260}],191:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({1:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <div class='kb-field--link-meta'><label for='"+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,t))+"-linktext'>"+l(r(null!=(s=null!=t?a(t,"i18n"):t)?a(s,"linktext"):s,t))+"</label><br>\n            <input\n                    type='text' data-kbf-link-linktext\n                    name=\""+l((a(i,"fieldName")||t&&a(t,"fieldName")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:13,column:26},end:{line:13,column:81}}}))+"[linktext]\"\n                    class='kb-field--link-linktext'\n                    id='"+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,t))+"-linktext'\n                    value='"+l(r(null!=(s=null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s)?a(s,"linktext"):s,t))+"'>\n        </div>\n"},3:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <div class='kb-field--link-meta'><label for='"+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,t))+"-linktitle'>"+l(r(null!=(s=null!=t?a(t,"i18n"):t)?a(s,"linktitle"):s,t))+"</label><br>\n            <input\n                    type='text'\n                    name=\""+l((a(i,"fieldName")||t&&a(t,"fieldName")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:24,column:26},end:{line:24,column:81}}}))+"[linktitle]\"\n                    class='kb-field--link-linktitle'\n                    id='"+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,t))+"-linktitle'\n                    value='"+l(r(null!=(s=null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s)?a(s,"linktitle"):s,t))+"'>\n        </div>\n"},5:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=null!=t?t:e.nullContext||{},d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <div class='kb-field--link-meta'>\n            <label for='"+l(r(null!=(s=null!=t?d(t,"model"):t)?d(s,"index"):s,t))+"-linktarget'>\n                <input data-kbf-link-target type='checkbox' class='kb-field--link-target'\n                       id='"+l(r(null!=(s=null!=t?d(t,"model"):t)?d(s,"index"):s,t))+"-linktarget'\n"+(null!=(s=d(i,"if").call(a,null!=(s=null!=(s=null!=t?d(t,"model"):t)?d(s,"value"):s)?d(s,"target"):s,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:36,column:20},end:{line:38,column:27}}}))?s:"")+"                       value='"+l(r(null!=(s=null!=(s=null!=t?d(t,"model"):t)?d(s,"value"):s)?d(s,"target"):s,t))+"'\n                       name='"+l((d(i,"fieldname")||t&&d(t,"fieldname")||e.hooks.helperMissing).call(a,null!=(s=null!=t?d(t,"model"):t)?d(s,"baseId"):s,null!=(s=null!=t?d(t,"model"):t)?d(s,"index"):s,null!=(s=null!=t?d(t,"model"):t)?d(s,"primeKey"):s,{name:"fieldname",hash:{},data:o,loc:{start:{line:40,column:29},end:{line:40,column:84}}}))+"[linktarget]'>\n                "+l(r(null!=(s=null!=t?d(t,"i18n"):t)?d(s,"linktarget"):s,t))+" </label>\n        </div>\n\n"},6:function(e,t,i,n,o){return'                       checked="checked"\n'},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=null!=t?t:e.nullContext||{},d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field kb-field--link field-api-link">\n    <label class="heading">'+l(r(null!=(s=null!=t?d(t,"model"):t)?d(s,"label"):s,t))+'</label>\n    <input class="kb-js-link-input" data-kbf-link-url\n           id="'+l(r(null!=(s=null!=t?d(t,"model"):t)?d(s,"index"):s,t))+'_link_input"\n           type="text"\n           name="'+l((d(i,"fieldName")||t&&d(t,"fieldName")||e.hooks.helperMissing).call(a,null!=(s=null!=t?d(t,"model"):t)?d(s,"baseId"):s,null!=(s=null!=t?d(t,"model"):t)?d(s,"index"):s,null!=(s=null!=t?d(t,"model"):t)?d(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:6,column:17},end:{line:6,column:72}}}))+'[link]"\n           value="'+l(r(null!=(s=null!=(s=null!=t?d(t,"model"):t)?d(s,"value"):s)?d(s,"link"):s,t))+"\">\n    <a class='button kb-js-add-link'>Add internal link</a>\n"+(null!=(s=d(i,"if").call(a,null!=(s=null!=t?d(t,"model"):t)?d(s,"linktext"):s,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:9,column:4},end:{line:18,column:11}}}))?s:"")+"\n"+(null!=(s=d(i,"if").call(a,null!=(s=null!=t?d(t,"model"):t)?d(s,"linktitle"):s,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:20,column:4},end:{line:29,column:11}}}))?s:"")+"\n"+(null!=(s=d(i,"if").call(a,null!=(s=null!=t?d(t,"model"):t)?d(s,"showtarget"):s,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:31,column:4},end:{line:44,column:11}}}))?s:"")+'    <p class="description">'+l(r(null!=(s=null!=t?d(t,"model"):t)?d(s,"description"):s,t))+"</p>\n\n</div>"},useData:!0})},{"hbsfy/runtime":260}],192:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field field-api-medium">\n    <label class="heading">'+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"label"):s,t))+'</label>\n    <textarea class="kb-medium-editable" id="random" name=\''+l((a(i,"fieldName")||t&&a(t,"fieldName")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:3,column:59},end:{line:3,column:114}}}))+"'>"+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s,t))+'</textarea>\n    <p class="description">'+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"description"):s,t))+"</p>\n</div>\n\n"},useData:!0})},{"hbsfy/runtime":260}],193:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field--oembed kb-field kb-js-field field-api-oembed">\n    <label class="heading">'+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"label"):s,t))+"</label>\n    <input data-kbf-link-url\n    name='"+l((a(i,"fieldName")||t&&a(t,"fieldName")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:4,column:10},end:{line:4,column:65}}}))+"'\n    value='"+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s,t))+'\' />\n    <div class="kb-oembed-preview" data-kb-oembed-preview>\n\n    </div>\n    <p class="description">'+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"description"):s,t))+"</p>\n</div>"},useData:!0})},{"hbsfy/runtime":260}],194:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({1:function(e,t,i,n,o,s,r){var l,a=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,c=e.escapeExpression,u=e.lambda,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    <div class='kb-radioset-item'>\n        <label>\n        <input type='radio' name='"+c((h(i,"fieldName")||t&&h(t,"fieldName")||d).call(a,null!=(l=null!=r[1]?h(r[1],"model"):r[1])?h(l,"baseId"):l,null!=(l=null!=r[1]?h(r[1],"model"):r[1])?h(l,"index"):l,null!=(l=null!=r[1]?h(r[1],"model"):r[1])?h(l,"primeKey"):l,{name:"fieldName",hash:{},data:o,loc:{start:{line:6,column:34},end:{line:6,column:98}}}))+"'\n               value='"+c(u(null!=t?h(t,"value"):t,t))+"'\n               "+(null!=(l=(h(i,"ifCond")||t&&h(t,"ifCond")||d).call(a,null!=t?h(t,"value"):t,"==",null!=(l=null!=r[1]?h(r[1],"model"):r[1])?h(l,"value"):l,{name:"ifCond",hash:{},fn:e.program(2,o,0,s,r),inverse:e.noop,data:o,loc:{start:{line:8,column:15},end:{line:8,column:86}}}))?l:"")+"/>"+(null!=(l=u(null!=t?h(t,"name"):t,t))?l:"")+"</label>\n    </div>\n"},2:function(e,t,i,n,o){return'checked="checked"'},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o,s,r){var l,a=e.lambda,d=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field field-api-radioset kb-field--radioset">\n    <label class="heading">'+d(a(null!=(l=null!=t?c(t,"model"):t)?c(l,"label"):l,t))+"</label>\n"+(null!=(l=c(i,"each").call(null!=t?t:e.nullContext||{},null!=(l=null!=t?c(t,"model"):t)?c(l,"options"):l,{name:"each",hash:{},fn:e.program(1,o,0,s,r),inverse:e.noop,data:o,loc:{start:{line:3,column:4},end:{line:10,column:13}}}))?l:"")+'    <p class="description">'+d(a(null!=(l=null!=t?c(t,"model"):t)?c(l,"description"):l,t))+"</p>\n</div>"},useData:!0,useDepths:!0})},{"hbsfy/runtime":260}],195:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({1:function(e,t,i,n,o){return'            data-kbselect2="true"\n'},3:function(e,t,i,n,o){return'            multiple="multiple"\n'},5:function(e,t,i,n,o){return'            <option value="">Auswhlen</option>\n'},7:function(e,t,i,n,o,s,r){var l,a=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            <option "+(null!=(l=(d(i,"ifCond")||t&&d(t,"ifCond")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?d(t,"value"):t,"==",null!=(l=null!=r[1]?d(r[1],"model"):r[1])?d(l,"value"):l,{name:"ifCond",hash:{},fn:e.program(8,o,0,s,r),inverse:e.noop,data:o,loc:{start:{line:16,column:20},end:{line:16,column:93}}}))?l:"")+'\n                    value="'+e.escapeExpression(a(null!=t?d(t,"value"):t,t))+'">'+(null!=(l=a(null!=t?d(t,"name"):t,t))?l:"")+"</option>\n"},8:function(e,t,i,n,o){return'selected="selected"'},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o,s,r){var l,a=e.lambda,d=e.escapeExpression,c=null!=t?t:e.nullContext||{},u=e.hooks.helperMissing,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field field-api-text kb-field--select">\n    <label class="heading">'+d(a(null!=(l=null!=t?h(t,"model"):t)?h(l,"label"):l,t))+'</label>\n    <select\n            name="'+d((h(i,"fieldName")||t&&h(t,"fieldName")||u).call(c,null!=(l=null!=t?h(t,"model"):t)?h(l,"baseId"):l,null!=(l=null!=t?h(t,"model"):t)?h(l,"index"):l,null!=(l=null!=t?h(t,"model"):t)?h(l,"primeKey"):l,{name:"fieldName",hash:{},data:o,loc:{start:{line:4,column:18},end:{line:4,column:73}}}))+'"\n'+(null!=(l=(h(i,"ifCond")||t&&h(t,"ifCond")||u).call(c,null!=(l=null!=t?h(t,"model"):t)?h(l,"select2"):l,"===",!0,{name:"ifCond",hash:{},fn:e.program(1,o,0,s,r),inverse:e.noop,data:o,loc:{start:{line:5,column:8},end:{line:7,column:19}}}))?l:"")+(null!=(l=(h(i,"ifCond")||t&&h(t,"ifCond")||u).call(c,null!=(l=null!=t?h(t,"model"):t)?h(l,"multiple"):l,"===",!0,{name:"ifCond",hash:{},fn:e.program(3,o,0,s,r),inverse:e.noop,data:o,loc:{start:{line:8,column:8},end:{line:10,column:19}}}))?l:"")+"    >\n"+(null!=(l=h(i,"if").call(c,null!=(l=null!=t?h(t,"model"):t)?h(l,"showempty"):l,{name:"if",hash:{},fn:e.program(5,o,0,s,r),inverse:e.noop,data:o,loc:{start:{line:12,column:8},end:{line:14,column:15}}}))?l:"")+(null!=(l=h(i,"each").call(c,null!=(l=null!=t?h(t,"model"):t)?h(l,"options"):l,{name:"each",hash:{},fn:e.program(7,o,0,s,r),inverse:e.noop,data:o,loc:{start:{line:15,column:8},end:{line:18,column:17}}}))?l:"")+'    </select>\n    <p class="description">'+d(a(null!=(l=null!=t?h(t,"model"):t)?h(l,"description"):l,t))+"</p>\n</div>"},useData:!0,useDepths:!0})},{"hbsfy/runtime":260}],196:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({1:function(e,t,i,n,o){var s,r=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+r("function"==typeof(s=null!=(s=l(i,"key")||o&&l(o,"key"))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"key",hash:{},data:o,loc:{start:{line:5,column:8},end:{line:5,column:16}}}):s)+'="'+r(e.lambda(t,t))+'"\n'},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=null!=t?t:e.nullContext||{},d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field field-api-text kb-field--text kb-field--reset">\n    <label class="heading">'+l(r(null!=(s=null!=t?d(t,"model"):t)?d(s,"label"):s,t))+'</label>\n    <input type="text"\n'+(null!=(s=d(i,"each").call(a,null!=(s=null!=t?d(t,"model"):t)?d(s,"attributes"):s,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:4},end:{line:6,column:13}}}))?s:"")+'    name="'+l((d(i,"fieldName")||t&&d(t,"fieldName")||e.hooks.helperMissing).call(a,null!=(s=null!=t?d(t,"model"):t)?d(s,"baseId"):s,null!=(s=null!=t?d(t,"model"):t)?d(s,"index"):s,null!=(s=null!=t?d(t,"model"):t)?d(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:7,column:10},end:{line:7,column:65}}}))+'" value="'+l(r(null!=(s=null!=t?d(t,"model"):t)?d(s,"value"):s,t))+'" >\n    <p class="description">'+l(r(null!=(s=null!=t?d(t,"model"):t)?d(s,"description"):s,t))+"</p>\n</div>"},useData:!0})},{"hbsfy/runtime":260}],197:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field--text-multiple-item">\n    <div class="kb-field--text-multiple-control kbf-sort"><span class="dashicons dashicons-menu"></span></div>\n    <input type="text" name="'+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,t))+'[]" value="'+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s,t))+'">\n    <div data-kbfaction="delete" class="kb-field--text-multiple-control kbf-delete"><span class="dashicons dashicons-trash" ></span></div>\n</div>'},useData:!0})},{"hbsfy/runtime":260}],198:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-field kb-js-field field-api-textarea">\n    <label class="heading">'+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"label"):s,t))+'</label>\n    <textarea name="'+l((a(i,"fieldName")||t&&a(t,"fieldName")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"model"):t)?a(s,"baseId"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"index"):s,null!=(s=null!=t?a(t,"model"):t)?a(s,"primeKey"):s,{name:"fieldName",hash:{},data:o,loc:{start:{line:3,column:20},end:{line:3,column:75}}}))+'">'+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"value"):s,t))+'</textarea>\n    <p class="description">'+l(r(null!=(s=null!=t?a(t,"model"):t)?a(s,"description"):s,t))+"</p>\n</div>"},useData:!0})},{"hbsfy/runtime":260}],199:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-area__empty-placeholder">\n    <div class="kb-module-trigger">'+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=(s=null!=t?r(t,"i18n"):t)?r(s,"jsFrontend"):s)?r(s,"onpage"):s)?r(s,"placeholder"):s,t))+"</div>\n</div>"},useData:!0})},{"hbsfy/runtime":260}],200:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div>"+(null!=(s=e.lambda(null!=(s=null!=t?r(t,"strings"):t)?r(s,"feedback"):s,t))?s:"")+"</div>"},useData:!0})},{"hbsfy/runtime":260}],201:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({1:function(e,t,i,n,o){return" kb-dynamic-module "},3:function(e,t,i,n,o){return" global-module "},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div data-kb-mcontrols="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"model"):t)?l(s,"mid"):s,t))+"\" class='kb-module-controls "+(null!=(s=l(i,"if").call(r,null!=(s=null!=t?l(t,"model"):t)?l(s,"inDynamic"):s,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:65},end:{line:1,column:115}}}))?s:"")+" "+(null!=(s=l(i,"if").call(r,null!=(s=null!=t?l(t,"model"):t)?l(s,"globalModule"):s,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:116},end:{line:1,column:165}}}))?s:"")+'\'>\n    <div class="kb-controls-wrap"></div>\n</div>'},useData:!0})},{"hbsfy/runtime":260}],202:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="controls-title">Module: <span> '+l(r(null!=(s=null!=(s=null!=t?a(t,"model"):t)?a(s,"settings"):s)?a(s,"name"):s,t))+'</span></div>\n<div class="dashicons dashicons-no close-controls kb-button"></div>\n<div class="kb-controls--buttons-wrap">\n    <div class="kb-modal-history-back kb-button kb-button-secondary">&laquo; previous module</div>\n    <div class="kb-save-form kb-button kb-button-primary" title="'+l(r(null!=(s=null!=(s=null!=t?a(t,"i18n"):t)?a(s,"frontendModal"):s)?a(s,"modalSave"):s,t))+'">\n        <div class="dashicons dashicons-update"></div>'+l(r(null!=(s=null!=(s=null!=t?a(t,"i18n"):t)?a(s,"frontendModal"):s)?a(s,"modalSave"):s,t))+'<span\n            class="kb-dirty-notice">*</span></div>\n    <div class="kb-preview-form kb-button kb-button-secondary">'+l(r(null!=(s=null!=(s=null!=t?a(t,"i18n"):t)?a(s,"frontendModal"):s)?a(s,"modalPreview"):s,t))+'</div>\n\n</div>\n<form id="onsite-form" class="wp-core-ui wp-admin kb-nano">\n    <div class="kb-nano-content" id="onsite-content">\n\n        <div class="os-content-inner kb-module">\n\n        </div>\n    </div>\n</form>'},useData:!0})},{"hbsfy/runtime":260}],203:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-module__placeholder">\n    <p>'+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=t?r(t,"model"):t)?r(s,"settings"):s)?r(s,"name"):s,t))+"\n    <span>Start here.</span>\n    </p>\n</div>"},useData:!0})},{"hbsfy/runtime":260}],204:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-sidebar__subheader">\n    <span>You are editing area:</span> '+e.escapeExpression("function"==typeof(s=null!=(s=r(i,"name")||(null!=t?r(t,"name"):t))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:o,loc:{start:{line:2,column:39},end:{line:2,column:49}}}):s)+'\n</div>\n<div class="kb-sidebar-area-details__settings" style="display: none">\n\n</div>\n\x3c!--<div class="kb-sidebar-area-details__subheader">Categories</div>--\x3e'},useData:!0})},{"hbsfy/runtime":260}],205:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-sidebar__category-item">\n    <div class="kb-sidebar__category-item__title">\n        Category: '+e.escapeExpression("function"==typeof(s=null!=(s=r(i,"name")||(null!=t?r(t,"name"):t))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:o,loc:{start:{line:3,column:18},end:{line:3,column:28}}}):s)+'\n    </div>\n    <div class="kb-sidebar__category-item__module-list">\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":260}],206:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-sidebar__cat-module-item">\n    '+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"settings"):t)?r(s,"name"):s,t))+'\n    <div class="kb-sidebar__cat-module-item__actions">\n    </div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":260}],207:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){return'<li class="kb-sidebar__no-modules">No Modules attached yet</li>'},useData:!0})},{"hbsfy/runtime":260}],208:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lambda,l=e.escapeExpression,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-sidebar-item__wrapper">\n    <div class="kb-sidebar-item__name">'+(null!=(s=r(null!=(s=null!=(s=null!=t?a(t,"view"):t)?a(s,"settings"):s)?a(s,"name"):s,t))?s:"")+'</div>\n    <div class="kb-sidebar-item__id">'+(null!=(s=r(null!=(s=null!=(s=null!=t?a(t,"view"):t)?a(s,"settings"):s)?a(s,"id"):s,t))?s:"")+"</div>\n</div>\n<div class=\"kb-sidebar-item__actions\">\n    <a class='kb-sidebar-item__edit' title='edit'\n       data='"+l(r(null!=(s=null!=t?a(t,"view"):t)?a(s,"mid"):s,t))+"' data-url='"+l(r(null!=(s=null!=t?a(t,"view"):t)?a(s,"editURL"):s,t))+'\'>\n        <span class="dashicons dashicons-edit"></span>\n        <span class="os-action">'+l(r(null!=(s=null!=(s=null!=t?a(t,"i18n"):t)?a(s,"moduleControls"):s)?a(s,"controlsEdit"):s,t))+"</span></a>\n    <a class='kb-sidebar__module-delete kb-js-inline-delete'><span\n            class=\"dashicons dashicons-trash\"></span></a>\n    <a class='kb-sidebar__module-update kb-js-inline-update'><span\n            class=\"dashicons dashicons-update\"></span></a>\n\n</div>"},useData:!0})},{"hbsfy/runtime":260}],209:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-sidebar__header-wrap">\n    <div class="kb-sidebar__subheader">\n        '+e.escapeExpression("function"==typeof(s=null!=(s=r(i,"name")||(null!=t?r(t,"name"):t))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:o,loc:{start:{line:3,column:8},end:{line:3,column:18}}}):s)+'\n    </div>\n    <span class="genericon genericon-close-alt kb-sidebar-action--close"></span>\n    <div class="kb-sidebar-action--update kb-fx-button kb-fx-button--effect-boris"><span class="dashicons dashicons-update"></span></div>\n\n</div>\n<form class="kb-sidebar__form-container">\n\n</form>\n'},useData:!0})},{"hbsfy/runtime":260}],210:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-sidebar--panel-item kb-sidebar__item">\n    '+e.escapeExpression("function"==typeof(s=null!=(s=r(i,"name")||(null!=t?r(t,"name"):t))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:o,loc:{start:{line:2,column:4},end:{line:2,column:14}}}):s)+"\n</div>"},useData:!0})},{"hbsfy/runtime":260}],211:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,a="function",d=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-sidebar__item kb-sidebar__item--root" data-kb-action="'+d(typeof(s=null!=(s=c(i,"id")||(null!=t?c(t,"id"):t))?s:l)===a?s.call(r,{name:"id",hash:{},data:o,loc:{start:{line:1,column:69},end:{line:1,column:77}}}):s)+'">\n    '+d(typeof(s=null!=(s=c(i,"text")||(null!=t?c(t,"text"):t))?s:l)===a?s.call(r,{name:"text",hash:{},data:o,loc:{start:{line:2,column:4},end:{line:2,column:14}}}):s)+'\n    <span class="dashicons dashicons-arrow-right-alt2 kb-sidebar__add-module kb-js-sidebar-add-module"></span>\n\n</div>'},useData:!0})},{"hbsfy/runtime":260}],212:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="kb-sidebar-areaview kb-sidebar-areaview--inactive">\n    <div class="kb-sidebar-areaview__title"> '+e.escapeExpression("function"==typeof(s=null!=(s=r(i,"name")||(null!=t?r(t,"name"):t))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:o,loc:{start:{line:2,column:45},end:{line:2,column:55}}}):s)+'</div>\n    <span class="dashicons dashicons-arrow-right-alt2 kb-sidebar__add-module kb-js-sidebar-add-module"></span>\n</div>'},useData:!0})},{"hbsfy/runtime":260}],213:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){return'<div class="kb-sidebar__header-wrap">\n    <div class="kb-sidebar__subheader">\n        Kontentblocks\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":260}],214:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,o){return'<div class="kb-sidebar__nav-controls">\n    <div class="kb-sidebar__nav-button kb-js-sidebar-nav-back">\n        <span class="dashicons dashicons-arrow-left-alt2 cbutton cbutton--effect-boris"></span>\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":260}],215:[function(e,t,i){},{}],216:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0;var o=n(e("./handlebars.runtime")),s=n(e("./handlebars/compiler/ast")),r=e("./handlebars/compiler/base"),l=e("./handlebars/compiler/compiler"),a=n(e("./handlebars/compiler/javascript-compiler")),d=n(e("./handlebars/compiler/visitor")),c=n(e("./handlebars/no-conflict")),u=o.default.create;function h(){var i=u();return i.compile=function(e,t){return l.compile(e,t,i)},i.precompile=function(e,t){return l.precompile(e,t,i)},i.AST=s.default,i.Compiler=l.Compiler,i.JavaScriptCompiler=a.default,i.Parser=r.parser,i.parse=r.parse,i.parseWithoutProcessing=r.parseWithoutProcessing,i}var p=h();p.create=h,c.default(p),p.Visitor=d.default,p.default=p,i.default=p,t.exports=i.default},{"./handlebars.runtime":217,"./handlebars/compiler/ast":219,"./handlebars/compiler/base":220,"./handlebars/compiler/compiler":222,"./handlebars/compiler/javascript-compiler":224,"./handlebars/compiler/visitor":227,"./handlebars/no-conflict":244}],217:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}i.__esModule=!0;var s=o(e("./handlebars/base")),r=n(e("./handlebars/safe-string")),l=n(e("./handlebars/exception")),a=o(e("./handlebars/utils")),d=o(e("./handlebars/runtime")),c=n(e("./handlebars/no-conflict"));function u(){var t=new s.HandlebarsEnvironment;return a.extend(t,s),t.SafeString=r.default,t.Exception=l.default,t.Utils=a,t.escapeExpression=a.escapeExpression,t.VM=d,t.template=function(e){return d.template(e,t)},t}var h=u();h.create=u,c.default(h),h.default=h,i.default=h,t.exports=i.default},{"./handlebars/base":218,"./handlebars/exception":231,"./handlebars/no-conflict":244,"./handlebars/runtime":245,"./handlebars/safe-string":246,"./handlebars/utils":247}],218:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0,i.HandlebarsEnvironment=u;var o=e("./utils"),s=n(e("./exception")),r=e("./helpers"),l=e("./decorators"),a=n(e("./logger")),d=e("./internal/proto-access");i.VERSION="4.7.7";i.COMPILER_REVISION=8;i.LAST_COMPATIBLE_COMPILER_REVISION=7;i.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var c="[object Object]";function u(e,t,i){this.helpers=e||{},this.partials=t||{},this.decorators=i||{},r.registerDefaultHelpers(this),l.registerDefaultDecorators(this)}u.prototype={constructor:u,logger:a.default,log:a.default.log,registerHelper:function(e,t){if(o.toString.call(e)===c){if(t)throw new s.default("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(o.toString.call(e)===c)o.extend(this.partials,e);else{if(void 0===t)throw new s.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(o.toString.call(e)===c){if(t)throw new s.default("Arg not supported with multiple decorators");o.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){d.resetLoggedProperties()}};var h=a.default.log;i.log=h,i.createFrame=o.createFrame,i.logger=a.default},{"./decorators":229,"./exception":231,"./helpers":232,"./internal/proto-access":241,"./logger":243,"./utils":247}],219:[function(e,t,i){"use strict";i.__esModule=!0;var n={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!n.helpers.scopedId(e)&&!e.depth}}};i.default=n,t.exports=i.default},{}],220:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0,i.parseWithoutProcessing=d,i.parse=function(e,t){var i=d(e,t);return new s.default(t).accept(i)};var o=n(e("./parser")),s=n(e("./whitespace-control")),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("./helpers")),l=e("../utils");i.parser=o.default;var a={};function d(e,t){return"Program"===e.type?e:((o.default.yy=a).locInfo=function(e){return new a.SourceLocation(t&&t.srcName,e)},o.default.parse(e))}l.extend(a,r)},{"../utils":247,"./helpers":223,"./parser":225,"./whitespace-control":228}],221:[function(e,t,i){"use strict";i.__esModule=!0;var r=e("../utils"),n=void 0;try{if("function"!=typeof define||!define.amd){var o=e("source-map");n=o.SourceNode}}catch(e){}function s(e,t,i){if(r.isArray(e)){for(var n=[],o=0,s=e.length;o<s;o++)n.push(t.wrap(e[o],i));return n}return"boolean"==typeof e||"number"==typeof e?e+"":e}function l(e){this.srcFile=e,this.source=[]}n||((n=function(e,t,i,n){this.src="",n&&this.add(n)}).prototype={add:function(e){r.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){r.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),l.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var t=this.empty();return this.each(function(e){t.add(["  ",e,"\n"])}),t},each:function(e){for(var t=0,i=this.source.length;t<i;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new n(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof n?e:(e=s(e,this,t),new n(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,i){return i=this.generateList(i),this.wrap([e,t?"."+t+"(":"(",i,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(i){var n=this,o=[];Object.keys(i).forEach(function(e){var t=s(i[e],n);"undefined"!==t&&o.push([n.quotedString(e),":",t])});var e=this.generateList(o);return e.prepend("{"),e.add("}"),e},generateList:function(e){for(var t=this.empty(),i=0,n=e.length;i<n;i++)i&&t.add(","),t.add(s(e[i],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},i.default=l,t.exports=i.default},{"../utils":247,"source-map":259}],222:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0,i.Compiler=s,i.precompile=function(e,t,i){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new a.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0);t.compat&&(t.useDepths=!0);var n=i.parse(e,t),o=(new i.Compiler).compile(n,t);return(new i.JavaScriptCompiler).compile(o,t)},i.compile=function(n,o,s){void 0===o&&(o={});if(null==n||"string"!=typeof n&&"Program"!==n.type)throw new a.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+n);"data"in(o=d.extend({},o))||(o.data=!0);o.compat&&(o.useDepths=!0);var r=void 0;function l(){var e=s.parse(n,o),t=(new s.Compiler).compile(e,o),i=(new s.JavaScriptCompiler).compile(t,o,void 0,!0);return s.template(i)}function e(e,t){return r||(r=l()),r.call(this,e,t)}return e._setup=function(e){return r||(r=l()),r._setup(e)},e._child=function(e,t,i,n){return r||(r=l()),r._child(e,t,i,n)},e};var a=n(e("../exception")),d=e("../utils"),l=n(e("./ast")),o=[].slice;function s(){}function r(e,t){if(e===t)return!0;if(d.isArray(e)&&d.isArray(t)&&e.length===t.length){for(var i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1;return!0}}function c(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}s.prototype={compiler:s,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var i=0;i<t;i++){var n=this.opcodes[i],o=e.opcodes[i];if(n.opcode!==o.opcode||!r(n.args,o.args))return!1}t=this.children.length;for(i=0;i<t;i++)if(!this.children[i].equals(e.children[i]))return!1;return!0},guid:0,compile:function(e,t){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],t.knownHelpers=d.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t.knownHelpers),this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),i=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[i]=t,this.useDepths=this.useDepths||t.useDepths,i},accept:function(e){if(!this[e.type])throw new a.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,i=t.length,n=0;n<i;n++)this.accept(t[n]);return this.options.blockParams.shift(),this.isSimple=1===i,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){c(e);var t=e.program,i=e.inverse;t=t&&this.compileProgram(t),i=i&&this.compileProgram(i);var n=this.classifySexpr(e);"helper"===n?this.helperSexpr(e,t,i):"simple"===n?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,i),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),i=this.setupFullMustacheParams(e,t,void 0),n=e.path;this.useDecorators=!0,this.opcode("registerDecorator",i.length,n.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var i=e.params;if(1<i.length)throw new a.default("Unsupported number of partial arguments: "+i.length,e);i.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):i.push({type:"PathExpression",parts:[],depth:0}));var n=e.name.original,o="SubExpression"===e.name.type;o&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var s=e.indent||"";this.options.preventIndent&&s&&(this.opcode("appendContent",s),s=""),this.opcode("invokePartial",o,n,s),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){c(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,i){var n=e.path,o=n.parts[0],s=null!=t||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",i),n.strict=!0,this.accept(n),this.opcode("invokeAmbiguous",o,s)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,i){var n=this.setupFullMustacheParams(e,t,i),o=e.path,s=o.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",n.length,s);else{if(this.options.knownHelpersOnly)throw new a.default("You specified knownHelpersOnly, but used the unknown helper "+s,e);o.strict=!0,o.falsy=!0,this.accept(o),this.opcode("invokeHelper",n.length,o.original,l.default.helpers.simpleId(o))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],i=l.default.helpers.scopedId(e),n=!e.depth&&!i&&this.blockParamIndex(t);n?this.opcode("lookupBlockParam",n,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,i):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,i=0,n=t.length;for(this.opcode("pushHash");i<n;i++)this.pushParam(t[i].value);for(;i--;)this.opcode("assignToHash",t[i].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:o.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=l.default.helpers.simpleId(e.path),i=t&&!!this.blockParamIndex(e.path.parts[0]),n=!i&&l.default.helpers.helperExpression(e),o=!i&&(n||t);if(o&&!n){var s=e.path.parts[0],r=this.options;r.knownHelpers[s]?n=!0:r.knownHelpersOnly&&(o=!1)}return n?"helper":o?"ambiguous":"simple"},pushParams:function(e){for(var t=0,i=e.length;t<i;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var i=void 0;if(!e.parts||l.default.helpers.scopedId(e)||e.depth||(i=this.blockParamIndex(e.parts[0])),i){var n=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",i,n)}else(t=e.original||t).replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,i,n){var o=e.params;return this.pushParams(o),this.opcode("pushProgram",t),this.opcode("pushProgram",i),e.hash?this.accept(e.hash):this.opcode("emptyHash",n),o},blockParamIndex:function(e){for(var t=0,i=this.options.blockParams.length;t<i;t++){var n=this.options.blockParams[t],o=n&&d.indexOf(n,e);if(n&&0<=o)return[t,o]}}}},{"../exception":231,"../utils":247,"./ast":219}],223:[function(e,t,i){"use strict";i.__esModule=!0,i.SourceLocation=function(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}},i.id=function(e){return/^\[.*\]$/.test(e)?e.substring(1,e.length-1):e},i.stripFlags=function(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}},i.stripComment=function(e){return e.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},i.preparePath=function(e,t,i){i=this.locInfo(i);for(var n=e?"@":"",o=[],s=0,r=0,l=t.length;r<l;r++){var a=t[r].part,d=t[r].original!==a;if(n+=(t[r].separator||"")+a,d||".."!==a&&"."!==a&&"this"!==a)o.push(a);else{if(0<o.length)throw new c.default("Invalid path: "+n,{loc:i});".."===a&&s++}}return{type:"PathExpression",data:e,depth:s,parts:o,original:n,loc:i}},i.prepareMustache=function(e,t,i,n,o,s){var r=n.charAt(3)||n.charAt(2),l="{"!==r&&"&"!==r;return{type:/\*/.test(n)?"Decorator":"MustacheStatement",path:e,params:t,hash:i,escaped:l,strip:o,loc:this.locInfo(s)}},i.prepareRawBlock=function(e,t,i,n){d(e,i),n=this.locInfo(n);var o={type:"Program",body:t,strip:{},loc:n};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:o,openStrip:{},inverseStrip:{},closeStrip:{},loc:n}},i.prepareBlock=function(e,t,i,n,o,s){n&&n.path&&d(e,n);var r=/\*/.test(e.open);t.blockParams=e.blockParams;var l=void 0,a=void 0;if(i){if(r)throw new c.default("Unexpected inverse block on decorator",i);i.chain&&(i.program.body[0].closeStrip=n.strip),a=i.strip,l=i.program}o&&(o=l,l=t,t=o);return{type:r?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:l,openStrip:e.strip,inverseStrip:a,closeStrip:n&&n.strip,loc:this.locInfo(s)}},i.prepareProgram=function(e,t){if(!t&&e.length){var i=e[0].loc,n=e[e.length-1].loc;i&&n&&(t={source:i.source,start:{line:i.start.line,column:i.start.column},end:{line:n.end.line,column:n.end.column}})}return{type:"Program",body:e,strip:{},loc:t}},i.preparePartialBlock=function(e,t,i,n){return d(e,i),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:i&&i.strip,loc:this.locInfo(n)}};var n,o=e("../exception"),c=(n=o)&&n.__esModule?n:{default:n};function d(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var i={loc:e.path.loc};throw new c.default(e.path.original+" doesn't match "+t,i)}}},{"../exception":231}],224:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0;var o=e("../base"),m=n(e("../exception")),s=e("../utils"),r=n(e("./code-gen"));function a(e){this.value=e}function l(){}l.prototype={nameLookup:function(e,t){return this.internalNameLookup(e,t)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=o.COMPILER_REVISION;return[e,o.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,i){return s.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:i?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,t){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(t),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,t,i,n){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!i,this.context=i||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var o=e.opcodes,s=void 0,r=void 0,l=void 0,a=void 0;for(l=0,a=o.length;l<a;l++)s=o[l],this.source.currentLocation=s.loc,r=r||s.loc,this[s.opcode].apply(this,s.args);if(this.source.currentLocation=r,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new m.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var d=this.createFunctionContext(n);if(this.isChild)return d;var c={compiler:this.compilerInfo(),main:d};this.decorators&&(c.main_d=this.decorators,c.useDecorators=!0);var u=this.context,h=u.programs,p=u.decorators;for(l=0,a=h.length;l<a;l++)h[l]&&(c[l]=h[l],p[l]&&(c[l+"_d"]=p[l],c.useDecorators=!0));return this.environment.usePartial&&(c.usePartial=!0),this.options.data&&(c.useData=!0),this.useDepths&&(c.useDepths=!0),this.useBlockParams&&(c.useBlockParams=!0),this.options.compat&&(c.compat=!0),n?c.compilerOptions=this.options:(c.compiler=JSON.stringify(c.compiler),this.source.currentLocation={start:{line:1,column:0}},c=this.objectLiteral(c),t.srcName?(c=c.toStringWithSourceMap({file:t.destName})).map=c.map&&c.map.toString():c=c.toString()),c},preamble:function(){this.lastContext=0,this.source=new r.default(this.options.srcName),this.decorators=new r.default(this.options.srcName)},createFunctionContext:function(e){var i=this,n="",t=this.stackVars.concat(this.registers.list);0<t.length&&(n+=", "+t.join(", "));var o=0;Object.keys(this.aliases).forEach(function(e){var t=i.aliases[e];t.children&&1<t.referenceCount&&(n+=", alias"+ ++o+"="+e,t.children[0]="alias"+o)}),this.lookupPropertyFunctionIsUsed&&(n+=", "+this.lookupPropertyFunctionVarDeclaration());var s=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&s.push("blockParams"),this.useDepths&&s.push("depths");var r=this.mergeSource(n);return e?(s.push(r),Function.apply(this,s)):this.source.wrap(["function(",s.join(","),") {\n  ",r,"}"])},mergeSource:function(e){var t=this.environment.isSimple,i=!this.forceBuffer,n=void 0,o=void 0,s=void 0,r=void 0;return this.source.each(function(e){e.appendToBuffer?(s?e.prepend("  + "):s=e,r=e):(s&&(o?s.prepend("buffer += "):n=!0,r.add(";"),s=r=void 0),o=!0,t||(i=!1))}),i?s?(s.prepend("return "),r.add(";")):o||this.source.push('return "";'):(e+=", buffer = "+(n?"":this.initializeBuffer()),s?(s.prepend("return buffer + "),r.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(n?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(e){var t=this.aliasable("container.hooks.blockHelperMissing"),i=[this.contextName(0)];this.setupHelperArgs(e,0,i);var n=this.popStack();i.splice(1,0,n),this.push(this.source.functionCall(t,"call",i))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var i=this.topStack();t.splice(1,0,i),this.pushSource(["if (!",this.lastHelper,") { ",i," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,i,n){var o=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[o++])),this.resolvePath("context",e,o,t,i)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,i){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,i)},resolvePath:function(i,n,o,s,e){var r=this;if(this.options.strict||this.options.assumeObjects)this.push(function(e,t,i,n){var o=t.popStack(),s=0,r=i.length;e&&r--;for(;s<r;s++)o=t.nameLookup(o,i[s],n);return e?[t.aliasable("container.strict"),"(",o,", ",t.quotedString(i[s]),", ",JSON.stringify(t.source.currentLocation)," )"]:o}(this.options.strict&&e,this,n,i));else for(var t=n.length;o<t;o++)this.replaceStack(function(e){var t=r.nameLookup(e,n[o],i);return s?[" && ",t]:[" != null ? ",t," : ",e]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var i=this.nameLookup("decorators",t,"decorator"),n=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(i,"",["fn","props","container",n])," || fn;"])},invokeHelper:function(e,t,i){var n=this.popStack(),o=this.setupHelper(e,t),s=[];i&&s.push(o.name),s.push(n),this.options.strict||s.push(this.aliasable("container.hooks.helperMissing"));var r=["(",this.itemsSeparatedBy(s,"||"),")"],l=this.source.functionCall(r,"call",o.callParams);this.push(l)},itemsSeparatedBy:function(e,t){var i=[];i.push(e[0]);for(var n=1;n<e.length;n++)i.push(t,e[n]);return i},invokeKnownHelper:function(e,t){var i=this.setupHelper(e,t);this.push(this.source.functionCall(i.name,"call",i.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var i=this.popStack();this.emptyHash();var n=this.setupHelper(0,e,t),o=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",i,")"];this.options.strict||(o[0]="(helper = ",o.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",o,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(e,t,i){var n=[],o=this.setupParams(t,1,n);e&&(t=this.popStack(),delete o.name),i&&(o.indent=JSON.stringify(i)),o.helpers="helpers",o.partials="partials",o.decorators="container.decorators",e?n.unshift(t):n.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(o.depths="depths"),o=this.objectLiteral(o),n.push(o),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(e){var t=this.popStack(),i=void 0,n=void 0,o=void 0;this.trackIds&&(o=this.popStack()),this.stringParams&&(n=this.popStack(),i=this.popStack());var s=this.hash;i&&(s.contexts[e]=i),n&&(s.types[e]=n),o&&(s.ids[e]=o),s.values[e]=t},pushId:function(e,t,i){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(i?" + "+JSON.stringify("."+i):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:l,compileChildren:function(e,t){for(var i=e.children,n=void 0,o=void 0,s=0,r=i.length;s<r;s++){n=i[s],o=new this.compiler;var l=this.matchExistingProgram(n);if(null==l){this.context.programs.push("");var a=this.context.programs.length;n.index=a,n.name="program"+a,this.context.programs[a]=o.compile(n,t,this.context,!this.precompile),this.context.decorators[a]=o.decorators,this.context.environments[a]=n,this.useDepths=this.useDepths||o.useDepths,this.useBlockParams=this.useBlockParams||o.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams}else n.index=l.index,n.name="program"+l.index,this.useDepths=this.useDepths||l.useDepths,this.useBlockParams=this.useBlockParams||l.useBlockParams}},matchExistingProgram:function(e){for(var t=0,i=this.context.environments.length;t<i;t++){var n=this.context.environments[t];if(n&&n.equals(e))return n}},programExpression:function(e){var t=this.environment.children[e],i=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&i.push("blockParams"),this.useDepths&&i.push("depths"),"container.program("+i.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof a||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new a(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],i=void 0,n=void 0,o=void 0;if(!this.isInline())throw new m.default("replaceStack on non-inline");var s=this.popStack(!0);if(s instanceof a)t=["(",i=[s.value]],o=!0;else{n=!0;var r=this.incrStack();t=["((",this.push(r)," = ",s,")"],i=this.topStack()}var l=e.call(this,i);o||this.popStack(),n&&this.stackSlot--,this.push(t.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,i=e.length;t<i;t++){var n=e[t];if(n instanceof a)this.compileStack.push(n);else{var o=this.incrStack();this.pushSource([o," = ",n,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),i=(t?this.inlineStack:this.compileStack).pop();if(!e&&i instanceof a)return i.value;if(!t){if(!this.stackSlot)throw new m.default("Invalid stack pop");this.stackSlot--}return i},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof a?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?t.referenceCount++:((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1),t},setupHelper:function(e,t,i){var n=[];return{params:n,paramsInit:this.setupHelperArgs(t,e,n,i),name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(n)}},setupParams:function(e,t,i){var n={},o=[],s=[],r=[],l=!i,a=void 0;l&&(i=[]),n.name=this.quotedString(e),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var d=this.popStack(),c=this.popStack();(c||d)&&(n.fn=c||"container.noop",n.inverse=d||"container.noop");for(var u=t;u--;)a=this.popStack(),i[u]=a,this.trackIds&&(r[u]=this.popStack()),this.stringParams&&(s[u]=this.popStack(),o[u]=this.popStack());return l&&(n.args=this.source.generateArray(i)),this.trackIds&&(n.ids=this.source.generateArray(r)),this.stringParams&&(n.types=this.source.generateArray(s),n.contexts=this.source.generateArray(o)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(e,t,i,n){var o=this.setupParams(e,t,i);return o.loc=JSON.stringify(this.source.currentLocation),o=this.objectLiteral(o),n?(this.useRegister("options"),i.push("options"),["options=",o]):i?(i.push(o),""):o}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=l.RESERVED_WORDS={},i=0,n=e.length;i<n;i++)t[e[i]]=!0}(),l.isValidJavaScriptVariableName=function(e){return!l.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},i.default=l,t.exports=i.default},{"../base":218,"../exception":231,"../utils":247,"./code-gen":221}],225:[function(e,t,i){"use strict";i.__esModule=!0;var n=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,i,n,o,s,r){var l=s.length-1;switch(o){case 1:return s[l-1];case 2:this.$=n.prepareProgram(s[l]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=s[l];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(s[l]),strip:n.stripFlags(s[l],s[l]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:s[l],value:s[l],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(s[l-2],s[l-1],s[l],this._$);break;case 12:this.$={path:s[l-3],params:s[l-2],hash:s[l-1]};break;case 13:this.$=n.prepareBlock(s[l-3],s[l-2],s[l-1],s[l],!1,this._$);break;case 14:this.$=n.prepareBlock(s[l-3],s[l-2],s[l-1],s[l],!0,this._$);break;case 15:this.$={open:s[l-5],path:s[l-4],params:s[l-3],hash:s[l-2],blockParams:s[l-1],strip:n.stripFlags(s[l-5],s[l])};break;case 16:case 17:this.$={path:s[l-4],params:s[l-3],hash:s[l-2],blockParams:s[l-1],strip:n.stripFlags(s[l-5],s[l])};break;case 18:this.$={strip:n.stripFlags(s[l-1],s[l-1]),program:s[l]};break;case 19:var a=n.prepareBlock(s[l-2],s[l-1],s[l],s[l],!1,this._$),d=n.prepareProgram([a],s[l-1].loc);d.chained=!0,this.$={strip:s[l-2].strip,program:d,chain:!0};break;case 20:this.$=s[l];break;case 21:this.$={path:s[l-1],strip:n.stripFlags(s[l-2],s[l])};break;case 22:case 23:this.$=n.prepareMustache(s[l-3],s[l-2],s[l-1],s[l-4],n.stripFlags(s[l-4],s[l]),this._$);break;case 24:this.$={type:"PartialStatement",name:s[l-3],params:s[l-2],hash:s[l-1],indent:"",strip:n.stripFlags(s[l-4],s[l]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(s[l-2],s[l-1],s[l],this._$);break;case 26:this.$={path:s[l-3],params:s[l-2],hash:s[l-1],strip:n.stripFlags(s[l-4],s[l])};break;case 27:case 28:this.$=s[l];break;case 29:this.$={type:"SubExpression",path:s[l-3],params:s[l-2],hash:s[l-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:s[l],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(s[l-2]),value:s[l],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(s[l-1]);break;case 33:case 34:this.$=s[l];break;case 35:this.$={type:"StringLiteral",value:s[l],original:s[l],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(s[l]),original:Number(s[l]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===s[l],original:"true"===s[l],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 40:case 41:this.$=s[l];break;case 42:this.$=n.preparePath(!0,s[l],this._$);break;case 43:this.$=n.preparePath(!1,s[l],this._$);break;case 44:s[l-2].push({part:n.id(s[l]),original:s[l],separator:s[l-1]}),this.$=s[l-2];break;case 45:this.$=[{part:n.id(s[l]),original:s[l]}];break;case 46:this.$=[];break;case 47:s[l-1].push(s[l]);break;case 48:this.$=[];break;case 49:s[l-1].push(s[l]);break;case 50:this.$=[];break;case 51:s[l-1].push(s[l]);break;case 58:this.$=[];break;case 59:s[l-1].push(s[l]);break;case 64:this.$=[];break;case 65:s[l-1].push(s[l]);break;case 70:this.$=[];break;case 71:s[l-1].push(s[l]);break;case 78:this.$=[];break;case 79:s[l-1].push(s[l]);break;case 82:this.$=[];break;case 83:s[l-1].push(s[l]);break;case 86:this.$=[];break;case 87:s[l-1].push(s[l]);break;case 90:this.$=[];break;case 91:s[l-1].push(s[l]);break;case 94:this.$=[];break;case 95:s[l-1].push(s[l]);break;case 98:this.$=[s[l]];break;case 99:s[l-1].push(s[l]);break;case 100:this.$=[s[l]];break;case 101:s[l-1].push(s[l])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,i=[0],n=[null],o=[],s=this.table,r="",l=0,a=0,d=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===(this.yy.parser=this).lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;o.push(c);var u=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var h,p,m,f,g,b,v,y,w,k,x={};;){if(m=i[i.length-1],void 0===(f=this.defaultActions[m]?this.defaultActions[m]:(null==h&&(k=void 0,"number"!=typeof(k=t.lexer.lex()||1)&&(k=t.symbols_[k]||k),h=k),s[m]&&s[m][h]))||!f.length||!f[0]){var C="";if(!d){for(b in w=[],s[m])this.terminals_[b]&&2<b&&w.push("'"+this.terminals_[b]+"'");C=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[h]||h)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==h?"end of input":"'"+(this.terminals_[h]||h)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[h]||h,line:this.lexer.yylineno,loc:c,expected:w})}}if(f[0]instanceof Array&&1<f.length)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+h);switch(f[0]){case 1:i.push(h),n.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(f[1]),h=null,p?(h=p,p=null):(a=this.lexer.yyleng,r=this.lexer.yytext,l=this.lexer.yylineno,c=this.lexer.yylloc,0<d&&d--);break;case 2:if(v=this.productions_[f[1]][1],x.$=n[n.length-v],x._$={first_line:o[o.length-(v||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(v||1)].first_column,last_column:o[o.length-1].last_column},u&&(x._$.range=[o[o.length-(v||1)].range[0],o[o.length-1].range[1]]),void 0!==(g=this.performAction.call(x,r,a,l,this.yy,f[1],n,o)))return g;v&&(i=i.slice(0,-1*v*2),n=n.slice(0,-1*v),o=o.slice(0,-1*v)),i.push(this.productions_[f[1]][0]),n.push(x.$),o.push(x._$),y=s[i[i.length-2]][i[i.length-1]],i.push(y);break;case 3:return!0}}return!0}},t={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,i=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(20<e.length?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(20<e.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,i,n,o;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),r=0;r<s.length&&(!(i=this._input.match(this.rules[s[r]]))||t&&!(i[0].length>t[0].length)||(t=i,n=r,this.options.flex));r++);return t?((o=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,s[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,i,t,n){function o(e,t){return i.yytext=i.yytext.substring(e,i.yyleng-t+e)}switch(t){case 0:if("\\\\"===i.yytext.slice(-2)?(o(0,1),this.begin("mu")):"\\"===i.yytext.slice(-1)?(o(0,1),this.begin("emu")):this.begin("mu"),i.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(o(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(i.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return i.yytext=o(1,2).replace(/\\"/g,'"'),80;case 32:return i.yytext=o(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return i.yytext=i.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};function i(){this.yy={}}return e.lexer=t,new((i.prototype=e).Parser=i)}();i.default=n,t.exports=i.default},{}],226:[function(e,t,i){"use strict";i.__esModule=!0,i.print=function(e){return(new r).accept(e)},i.PrintVisitor=r;var n,o=e("./visitor"),s=(n=o)&&n.__esModule?n:{default:n};function r(){this.padding=0}(r.prototype=new s.default).pad=function(e){for(var t="",i=0,n=this.padding;i<n;i++)t+="  ";return t+=e+"\n"},r.prototype.Program=function(e){var t="",i=e.body,n=void 0,o=void 0;if(e.blockParams){var s="BLOCK PARAMS: [";for(n=0,o=e.blockParams.length;n<o;n++)s+=" "+e.blockParams[n];s+=" ]",t+=this.pad(s)}for(n=0,o=i.length;n<o;n++)t+=this.accept(i[n]);return this.padding--,t},r.prototype.MustacheStatement=function(e){return this.pad("{{ "+this.SubExpression(e)+" }}")},r.prototype.Decorator=function(e){return this.pad("{{ DIRECTIVE "+this.SubExpression(e)+" }}")},r.prototype.BlockStatement=r.prototype.DecoratorBlock=function(e){var t="";return t+=this.pad(("DecoratorBlock"===e.type?"DIRECTIVE ":"")+"BLOCK:"),this.padding++,t+=this.pad(this.SubExpression(e)),e.program&&(t+=this.pad("PROGRAM:"),this.padding++,t+=this.accept(e.program),this.padding--),e.inverse&&(e.program&&this.padding++,t+=this.pad("{{^}}"),this.padding++,t+=this.accept(e.inverse),this.padding--,e.program&&this.padding--),this.padding--,t},r.prototype.PartialStatement=function(e){var t="PARTIAL:"+e.name.original;return e.params[0]&&(t+=" "+this.accept(e.params[0])),e.hash&&(t+=" "+this.accept(e.hash)),this.pad("{{> "+t+" }}")},r.prototype.PartialBlockStatement=function(e){var t="PARTIAL BLOCK:"+e.name.original;return e.params[0]&&(t+=" "+this.accept(e.params[0])),e.hash&&(t+=" "+this.accept(e.hash)),t+=" "+this.pad("PROGRAM:"),this.padding++,t+=this.accept(e.program),this.padding--,this.pad("{{> "+t+" }}")},r.prototype.ContentStatement=function(e){return this.pad("CONTENT[ '"+e.value+"' ]")},r.prototype.CommentStatement=function(e){return this.pad("{{! '"+e.value+"' }}")},r.prototype.SubExpression=function(e){for(var t,i=e.params,n=[],o=0,s=i.length;o<s;o++)n.push(this.accept(i[o]));return i="["+n.join(", ")+"]",t=e.hash?" "+this.accept(e.hash):"",this.accept(e.path)+" "+i+t},r.prototype.PathExpression=function(e){var t=e.parts.join("/");return(e.data?"@":"")+"PATH:"+t},r.prototype.StringLiteral=function(e){return'"'+e.value+'"'},r.prototype.NumberLiteral=function(e){return"NUMBER{"+e.value+"}"},r.prototype.BooleanLiteral=function(e){return"BOOLEAN{"+e.value+"}"},r.prototype.UndefinedLiteral=function(){return"UNDEFINED"},r.prototype.NullLiteral=function(){return"NULL"},r.prototype.Hash=function(e){for(var t=e.pairs,i=[],n=0,o=t.length;n<o;n++)i.push(this.accept(t[n]));return"HASH{"+i.join(", ")+"}"},r.prototype.HashPair=function(e){return e.key+"="+this.accept(e.value)}},{"./visitor":227}],227:[function(e,t,i){"use strict";i.__esModule=!0;var n,o=e("../exception"),s=(n=o)&&n.__esModule?n:{default:n};function r(){this.parents=[]}function l(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function a(e){l.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function d(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}r.prototype={constructor:r,mutating:!1,acceptKey:function(e,t){var i=this.accept(e[t]);if(this.mutating){if(i&&!r.prototype[i.type])throw new s.default('Unexpected node type "'+i.type+'" found when accepting '+t+" on "+e.type);e[t]=i}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new s.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,i=e.length;t<i;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,i--)},accept:function(e){if(e){if(!this[e.type])throw new s.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:l,Decorator:l,BlockStatement:a,DecoratorBlock:a,PartialStatement:d,PartialBlockStatement:function(e){d.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:l,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},i.default=r,t.exports=i.default},{"../exception":231}],228:[function(e,t,i){"use strict";i.__esModule=!0;var n,o=e("./visitor"),s=(n=o)&&n.__esModule?n:{default:n};function r(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function p(e,t,i){void 0===t&&(t=e.length);var n=e[t-1],o=e[t-2];return n?"ContentStatement"===n.type?(o||!i?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:i}function m(e,t,i){void 0===t&&(t=-1);var n=e[t+1],o=e[t+2];return n?"ContentStatement"===n.type?(o||!i?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:i}function f(e,t,i){var n=e[null==t?0:t+1];if(n&&"ContentStatement"===n.type&&(i||!n.rightStripped)){var o=n.value;n.value=n.value.replace(i?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==o}}function g(e,t,i){var n=e[null==t?e.length-1:t-1];if(n&&"ContentStatement"===n.type&&(i||!n.leftStripped)){var o=n.value;return n.value=n.value.replace(i?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==o,n.leftStripped}}(r.prototype=new s.default).Program=function(e){var t=!this.options.ignoreStandalone,i=!this.isRootSeen;this.isRootSeen=!0;for(var n=e.body,o=0,s=n.length;o<s;o++){var r=n[o],l=this.accept(r);if(l){var a=p(n,o,i),d=m(n,o,i),c=l.openStandalone&&a,u=l.closeStandalone&&d,h=l.inlineStandalone&&a&&d;l.close&&f(n,o,!0),l.open&&g(n,o,!0),t&&h&&(f(n,o),g(n,o)&&"PartialStatement"===r.type&&(r.indent=/([ \t]+$)/.exec(n[o-1].original)[1])),t&&c&&(f((r.program||r.inverse).body),g(n,o)),t&&u&&(f(n,o),g((r.inverse||r.program).body))}}return e},r.prototype.BlockStatement=r.prototype.DecoratorBlock=r.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,i=e.program&&e.inverse,n=i,o=i;if(i&&i.chained)for(n=i.body[0].program;o.chained;)o=o.body[o.body.length-1].program;var s={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:m(t.body),closeStandalone:p((n||t).body)};if(e.openStrip.close&&f(t.body,null,!0),i){var r=e.inverseStrip;r.open&&g(t.body,null,!0),r.close&&f(n.body,null,!0),e.closeStrip.open&&g(o.body,null,!0),!this.options.ignoreStandalone&&p(t.body)&&m(n.body)&&(g(t.body),f(n.body))}else e.closeStrip.open&&g(t.body,null,!0);return s},r.prototype.Decorator=r.prototype.MustacheStatement=function(e){return e.strip},r.prototype.PartialStatement=r.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},i.default=r,t.exports=i.default},{"./visitor":227}],229:[function(e,t,i){"use strict";i.__esModule=!0,i.registerDefaultDecorators=function(e){s.default(e)};var n,o=e("./decorators/inline"),s=(n=o)&&n.__esModule?n:{default:n}},{"./decorators/inline":230}],230:[function(e,t,i){"use strict";i.__esModule=!0;var l=e("../utils");i.default=function(e){e.registerDecorator("inline",function(o,s,r,e){var t=o;return s.partials||(s.partials={},t=function(e,t){var i=r.partials;r.partials=l.extend({},i,s.partials);var n=o(e,t);return r.partials=i,n}),s.partials[e.args[0]]=e.fn,t})},t.exports=i.default},{"../utils":247}],231:[function(e,t,i){"use strict";i.__esModule=!0;var d=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function c(e,t){var i=t&&t.loc,n=void 0,o=void 0,s=void 0,r=void 0;i&&(n=i.start.line,o=i.end.line,s=i.start.column,r=i.end.column,e+=" - "+n+":"+s);for(var l=Error.prototype.constructor.call(this,e),a=0;a<d.length;a++)this[d[a]]=l[d[a]];Error.captureStackTrace&&Error.captureStackTrace(this,c);try{i&&(this.lineNumber=n,this.endLineNumber=o,Object.defineProperty?(Object.defineProperty(this,"column",{value:s,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:r,enumerable:!0})):(this.column=s,this.endColumn=r))}catch(e){}}c.prototype=new Error,i.default=c,t.exports=i.default},{}],232:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0,i.registerDefaultHelpers=function(e){o.default(e),s.default(e),r.default(e),l.default(e),a.default(e),d.default(e),c.default(e)},i.moveHelperToHooks=function(e,t,i){e.helpers[t]&&(e.hooks[t]=e.helpers[t],i||delete e.helpers[t])};var o=n(e("./helpers/block-helper-missing")),s=n(e("./helpers/each")),r=n(e("./helpers/helper-missing")),l=n(e("./helpers/if")),a=n(e("./helpers/log")),d=n(e("./helpers/lookup")),c=n(e("./helpers/with"))},{"./helpers/block-helper-missing":233,"./helpers/each":234,"./helpers/helper-missing":235,"./helpers/if":236,"./helpers/log":237,"./helpers/lookup":238,"./helpers/with":239}],233:[function(e,t,i){"use strict";i.__esModule=!0;var r=e("../utils");i.default=function(s){s.registerHelper("blockHelperMissing",function(e,t){var i=t.inverse,n=t.fn;if(!0===e)return n(this);if(!1===e||null==e)return i(this);if(r.isArray(e))return 0<e.length?(t.ids&&(t.ids=[t.name]),s.helpers.each(e,t)):i(this);if(t.data&&t.ids){var o=r.createFrame(t.data);o.contextPath=r.appendContextPath(t.data.contextPath,t.name),t={data:o}}return n(e,t)})},t.exports=i.default},{"../utils":247}],234:[function(e,t,i){"use strict";i.__esModule=!0;var n,m=e("../utils"),o=e("../exception"),f=(n=o)&&n.__esModule?n:{default:n};i.default=function(e){e.registerHelper("each",function(n,e){if(!e)throw new f.default("Must pass iterator to #each");var t,o=e.fn,i=e.inverse,s=0,r="",l=void 0,a=void 0;function d(e,t,i){l&&(l.key=e,l.index=t,l.first=0===t,l.last=!!i,a&&(l.contextPath=a+e)),r+=o(n[e],{data:l,blockParams:m.blockParams([n[e],e],[a+e,null])})}if(e.data&&e.ids&&(a=m.appendContextPath(e.data.contextPath,e.ids[0])+"."),m.isFunction(n)&&(n=n.call(this)),e.data&&(l=m.createFrame(e.data)),n&&"object"==typeof n)if(m.isArray(n))for(var c=n.length;s<c;s++)s in n&&d(s,s,s===n.length-1);else if(global.Symbol&&n[global.Symbol.iterator]){for(var u=[],h=n[global.Symbol.iterator](),p=h.next();!p.done;p=h.next())u.push(p.value);for(c=(n=u).length;s<c;s++)d(s,s,s===n.length-1)}else t=void 0,Object.keys(n).forEach(function(e){void 0!==t&&d(t,s-1),t=e,s++}),void 0!==t&&d(t,s-1,!0);return 0===s&&(r=i(this)),r})},t.exports=i.default},{"../exception":231,"../utils":247}],235:[function(e,t,i){"use strict";i.__esModule=!0;var n,o=e("../exception"),s=(n=o)&&n.__esModule?n:{default:n};i.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new s.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=i.default},{"../exception":231}],236:[function(e,t,i){"use strict";i.__esModule=!0;var n,o=e("../utils"),s=e("../exception"),r=(n=s)&&n.__esModule?n:{default:n};i.default=function(i){i.registerHelper("if",function(e,t){if(2!=arguments.length)throw new r.default("#if requires exactly one argument");return o.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)}),i.registerHelper("unless",function(e,t){if(2!=arguments.length)throw new r.default("#unless requires exactly one argument");return i.helpers.if.call(this,e,{fn:t.inverse,inverse:t.fn,hash:t.hash})})},t.exports=i.default},{"../exception":231,"../utils":247}],237:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(o){o.registerHelper("log",function(){for(var e=[void 0],t=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)e.push(arguments[i]);var n=1;null!=t.hash.level?n=t.hash.level:t.data&&null!=t.data.level&&(n=t.data.level),e[0]=n,o.log.apply(o,e)})},t.exports=i.default},{}],238:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(e){e.registerHelper("lookup",function(e,t,i){return e?i.lookupProperty(e,t):e})},t.exports=i.default},{}],239:[function(e,t,i){"use strict";i.__esModule=!0;var n,o=e("../utils"),s=e("../exception"),r=(n=s)&&n.__esModule?n:{default:n};i.default=function(e){e.registerHelper("with",function(e,t){if(2!=arguments.length)throw new r.default("#with requires exactly one argument");o.isFunction(e)&&(e=e.call(this));var i=t.fn;if(o.isEmpty(e))return t.inverse(this);var n=t.data;return t.data&&t.ids&&((n=o.createFrame(t.data)).contextPath=o.appendContextPath(t.data.contextPath,t.ids[0])),i(e,{data:n,blockParams:o.blockParams([e],[n&&n.contextPath])})})},t.exports=i.default},{"../exception":231,"../utils":247}],240:[function(e,t,i){"use strict";i.__esModule=!0,i.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return n.extend.apply(void 0,[Object.create(null)].concat(t))};var n=e("../utils")},{"../utils":247}],241:[function(e,t,i){"use strict";i.__esModule=!0,i.createProtoAccessControl=function(e){var t=Object.create(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var i=Object.create(null);return i.__proto__=!1,{properties:{whitelist:n.createNewLookupObject(i,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:n.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},i.resultIsAllowed=function(e,t,i){return r("function"==typeof e?t.methods:t.properties,i)},i.resetLoggedProperties=function(){Object.keys(s).forEach(function(e){delete s[e]})};var n=e("./create-new-lookup-object"),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../logger")),s=Object.create(null);function r(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(!0!==s[i=t]&&(s[i]=!0,o.log("error",'Handlebars: Access has been denied to resolve the property "'+i+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details')),!1);var i}},{"../logger":243,"./create-new-lookup-object":240}],242:[function(e,t,i){"use strict";i.__esModule=!0,i.wrapHelper=function(t,i){return"function"==typeof t?function(){var e=arguments[arguments.length-1];return arguments[arguments.length-1]=i(e),t.apply(this,arguments)}:t}},{}],243:[function(e,t,i){"use strict";i.__esModule=!0;var n=e("./utils"),s={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=n.indexOf(s.methodMap,e.toLowerCase());e=0<=t?t:parseInt(e,10)}return e},log:function(e){if(e=s.lookupLevel(e),"undefined"!=typeof console&&s.lookupLevel(s.level)<=e){var t=s.methodMap[e];console[t]||(t="log");for(var i=arguments.length,n=Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];console[t].apply(console,n)}}};i.default=s,t.exports=i.default},{"./utils":247}],244:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(e){var t="undefined"!=typeof global?global:window,i=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=i),e}},t.exports=i.default},{}],245:[function(e,t,i){"use strict";i.__esModule=!0,i.checkRevision=function(e){var t=e&&e[0]||1,i=h.COMPILER_REVISION;if(t>=h.LAST_COMPATIBLE_COMPILER_REVISION&&t<=h.COMPILER_REVISION)return;{if(t<h.LAST_COMPATIBLE_COMPILER_REVISION){var n=h.REVISION_CHANGES[i],o=h.REVISION_CHANGES[t];throw new u.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+o+").")}throw new u.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},i.template=function(a,d){if(!d)throw new u.default("No environment passed to template");if(!a||!a.main)throw new u.default("Unknown template object: "+typeof a);a.main.decorator=a.main_d,d.VM.checkRevision(a.compiler);var n=a.compiler&&7===a.compiler[0];var r={strict:function(e,t,i){if(!(e&&t in e))throw new u.default('"'+t+'" not defined in '+e,{loc:i});return r.lookupProperty(e,t)},lookupProperty:function(e,t){var i=e[t];return null==i?i:Object.prototype.hasOwnProperty.call(e,t)?i:f.resultIsAllowed(i,r.protoAccessControl,t)?i:void 0},lookup:function(e,t){for(var i=e.length,n=0;n<i;n++){var o=e[n]&&r.lookupProperty(e[n],t);if(null!=o)return e[n][t]}},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:c.escapeExpression,invokePartial:function(e,t,i){i.hash&&(t=c.extend({},t,i.hash),i.ids&&(i.ids[0]=!0));e=d.VM.resolvePartial.call(this,e,t,i);var n=c.extend({},i,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),o=d.VM.invokePartial.call(this,e,t,n);null==o&&d.compile&&(i.partials[i.name]=d.compile(e,a.compilerOptions,d),o=i.partials[i.name](t,n));{if(null==o)throw new u.default("The partial "+i.name+" could not be compiled when running in runtime-only mode");if(i.indent){for(var s=o.split("\n"),r=0,l=s.length;r<l&&(s[r]||r+1!==l);r++)s[r]=i.indent+s[r];o=s.join("\n")}return o}},fn:function(e){var t=a[e];return t.decorator=a[e+"_d"],t},programs:[],program:function(e,t,i,n,o){var s=this.programs[e],r=this.fn(e);return t||o||n||i?s=g(this,e,r,t,i,n,o):s||(s=this.programs[e]=g(this,e,r)),s},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var i=e||t;return e&&t&&e!==t&&(i=c.extend({},t,e)),i},nullContext:Object.seal({}),noop:d.VM.noop,compilerInfo:a.compiler};function l(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=t.data;l._setup(t),!t.partial&&a.useData&&(i=function(e,t){t&&"root"in t||((t=t?h.createFrame(t):{}).root=e);return t}(e,i));var n=void 0,o=a.useBlockParams?[]:void 0;function s(e){return""+a.main(r,e,r.helpers,r.partials,i,o,n)}return a.useDepths&&(n=t.depths?e!=t.depths[0]?[e].concat(t.depths):t.depths:[e]),(s=b(a.main,s,r,t.depths||[],i,o))(e,t)}return l.isTop=!0,l._setup=function(e){if(e.partial)r.protoAccessControl=e.protoAccessControl,r.helpers=e.helpers,r.partials=e.partials,r.decorators=e.decorators,r.hooks=e.hooks;else{var t=c.extend({},d.helpers,e.helpers);o=t,s=r,Object.keys(o).forEach(function(e){var t,i,n=o[e];o[e]=(t=n,i=s.lookupProperty,m.wrapHelper(t,function(e){return c.extend({lookupProperty:i},e)}))}),r.helpers=t,a.usePartial&&(r.partials=r.mergeIfNeeded(e.partials,d.partials)),(a.usePartial||a.useDecorators)&&(r.decorators=c.extend({},d.decorators,e.decorators)),r.hooks={},r.protoAccessControl=f.createProtoAccessControl(e);var i=e.allowCallsToHelperMissing||n;p.moveHelperToHooks(r,"helperMissing",i),p.moveHelperToHooks(r,"blockHelperMissing",i)}var o,s},l._child=function(e,t,i,n){if(a.useBlockParams&&!i)throw new u.default("must pass block params");if(a.useDepths&&!n)throw new u.default("must pass parent depths");return g(r,e,a[e],t,0,i,n)},l},i.wrapProgram=g,i.resolvePartial=function(e,t,i){e?e.call||i.name||(i.name=e,e=i.partials[e]):e="@partial-block"===i.name?i.data["partial-block"]:i.partials[i.name];return e},i.invokePartial=function(e,t,n){var o=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var s=void 0;n.fn&&n.fn!==r&&function(){n.data=h.createFrame(n.data);var i=n.fn;s=n.data["partial-block"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.data=h.createFrame(t.data),t.data["partial-block"]=o,i(e,t)},i.partials&&(n.partials=c.extend({},n.partials,i.partials))}();void 0===e&&s&&(e=s);{if(void 0===e)throw new u.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)}},i.noop=r;var n,c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("./utils")),o=e("./exception"),u=(n=o)&&n.__esModule?n:{default:n},h=e("./base"),p=e("./helpers"),m=e("./internal/wrapHelper"),f=e("./internal/proto-access");function g(n,e,o,s,t,r,l){function i(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=l;return!l||e==l[0]||e===n.nullContext&&null===l[0]||(i=[e].concat(l)),o(n,e,n.helpers,n.partials,t.data||s,r&&[t.blockParams].concat(r),i)}return(i=b(o,i,n,l,s,r)).program=e,i.depth=l?l.length:0,i.blockParams=t||0,i}function r(){return""}function b(e,t,i,n,o,s){if(e.decorator){var r={};t=e.decorator(t,r,i,n&&n[0],o,s,n),c.extend(t,r)}return t}},{"./base":218,"./exception":231,"./helpers":232,"./internal/proto-access":241,"./internal/wrapHelper":242,"./utils":247}],246:[function(e,t,i){"use strict";function n(e){this.string=e}i.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},i.default=n,t.exports=i.default},{}],247:[function(e,t,i){"use strict";i.__esModule=!0,i.extend=l,i.indexOf=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},i.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return s.test(e)?e.replace(o,r):e},i.isEmpty=function(e){return!e&&0!==e||!(!c(e)||0!==e.length)},i.createFrame=function(e){var t=l({},e);return t._parent=e,t},i.blockParams=function(e,t){return e.path=t,e},i.appendContextPath=function(e,t){return(e?e+".":"")+t};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},o=/[&<>"'`=]/g,s=/[&<>"'`=]/;function r(e){return n[e]}function l(e){for(var t=1;t<arguments.length;t++)for(var i in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],i)&&(e[i]=arguments[t][i]);return e}var a=Object.prototype.toString;i.toString=a;var d=function(e){return"function"==typeof e};d(/x/)&&(i.isFunction=d=function(e){return"function"==typeof e&&"[object Function]"===a.call(e)}),i.isFunction=d;var c=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===a.call(e)};i.isArray=c},{}],248:[function(n,e,t){var o=n("../dist/cjs/handlebars").default,i=n("../dist/cjs/handlebars/compiler/printer");function s(e,t){var i=n("fs").readFileSync(t,"utf8");e.exports=o.compile(i)}o.PrintVisitor=i.PrintVisitor,o.print=i.print,e.exports=o,void 0!==n&&n.extensions&&(n.extensions[".handlebars"]=s,n.extensions[".hbs"]=s)},{"../dist/cjs/handlebars":216,"../dist/cjs/handlebars/compiler/printer":226,fs:215}],249:[function(e,t,i){var s=e("./util"),r=Object.prototype.hasOwnProperty,l="undefined"!=typeof Map;function a(){this._array=[],this._set=l?new Map:Object.create(null)}a.fromArray=function(e,t){for(var i=new a,n=0,o=e.length;n<o;n++)i.add(e[n],t);return i},a.prototype.size=function(){return l?this._set.size:Object.getOwnPropertyNames(this._set).length},a.prototype.add=function(e,t){var i=l?e:s.toSetString(e),n=l?this.has(e):r.call(this._set,i),o=this._array.length;n&&!t||this._array.push(e),n||(l?this._set.set(e,o):this._set[i]=o)},a.prototype.has=function(e){if(l)return this._set.has(e);var t=s.toSetString(e);return r.call(this._set,t)},a.prototype.indexOf=function(e){if(l){var t=this._set.get(e);if(0<=t)return t}else{var i=s.toSetString(e);if(r.call(this._set,i))return this._set[i]}throw new Error('"'+e+'" is not in the set.')},a.prototype.at=function(e){if(0<=e&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},a.prototype.toArray=function(){return this._array.slice()},i.ArraySet=a},{"./util":258}],250:[function(e,t,i){var c=e("./base64");i.encode=function(e){for(var t,i,n="",o=(i=e)<0?1+(-i<<1):0+(i<<1);t=31&o,0<(o>>>=5)&&(t|=32),n+=c.encode(t),0<o;);return n},i.decode=function(e,t,i){var n,o,s,r,l=e.length,a=0,d=0;do{if(l<=t)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(o=c.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));n=!!(32&o),a+=(o&=31)<<d,d+=5}while(n);i.value=(r=(s=a)>>1,1==(1&s)?-r:r),i.rest=t}},{"./base64":251}],251:[function(e,t,i){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");i.encode=function(e){if(0<=e&&e<n.length)return n[e];throw new TypeError("Must be between 0 and 63: "+e)},i.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},{}],252:[function(e,t,d){d.GREATEST_LOWER_BOUND=1,d.LEAST_UPPER_BOUND=2,d.search=function(e,t,i,n){if(0===t.length)return-1;var o=function e(t,i,n,o,s,r){var l=Math.floor((i-t)/2)+t,a=s(n,o[l],!0);return 0===a?l:0<a?1<i-l?e(l,i,n,o,s,r):r==d.LEAST_UPPER_BOUND?i<o.length?i:-1:l:1<l-t?e(t,l,n,o,s,r):r==d.LEAST_UPPER_BOUND?l:t<0?-1:t}(-1,t.length,e,t,i,n||d.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;0<=o-1&&0===i(t[o],t[o-1],!0);)--o;return o}},{}],253:[function(e,t,i){var l=e("./util");function n(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}n.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},n.prototype.add=function(e){var t,i,n,o,s,r;t=this._last,i=e,n=t.generatedLine,o=i.generatedLine,s=t.generatedColumn,r=i.generatedColumn,n<o||o==n&&s<=r||l.compareByGeneratedPositionsInflated(t,i)<=0?this._last=e:this._sorted=!1,this._array.push(e)},n.prototype.toArray=function(){return this._sorted||(this._array.sort(l.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},i.MappingList=n},{"./util":258}],254:[function(e,t,i){function c(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function u(e,t,i,n){if(i<n){var o=i-1;c(e,(a=i,d=n,Math.round(a+Math.random()*(d-a))),n);for(var s=e[n],r=i;r<n;r++)t(e[r],s)<=0&&c(e,o+=1,r);c(e,o+1,r);var l=o+1;u(e,t,i,l-1),u(e,t,l+1,n)}var a,d}i.quickSort=function(e,t){u(e,t,0,e.length-1)}},{}],255:[function(e,t,i){var y=e("./util"),a=e("./binary-search"),h=e("./array-set").ArraySet,w=e("./base64-vlq"),k=e("./quick-sort").quickSort;function r(e,t){var i=e;return"string"==typeof e&&(i=y.parseSourceMapInput(e)),null!=i.sections?new n(i,t):new p(i,t)}function p(e,t){var i=e;"string"==typeof e&&(i=y.parseSourceMapInput(e));var n=y.getArg(i,"version"),o=y.getArg(i,"sources"),s=y.getArg(i,"names",[]),r=y.getArg(i,"sourceRoot",null),l=y.getArg(i,"sourcesContent",null),a=y.getArg(i,"mappings"),d=y.getArg(i,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);r&&(r=y.normalize(r)),o=o.map(String).map(y.normalize).map(function(e){return r&&y.isAbsolute(r)&&y.isAbsolute(e)?y.relative(r,e):e}),this._names=h.fromArray(s.map(String),!0),this._sources=h.fromArray(o,!0),this._absoluteSources=this._sources.toArray().map(function(e){return y.computeSourceURL(r,e,t)}),this.sourceRoot=r,this.sourcesContent=l,this._mappings=a,this._sourceMapURL=t,this.file=d}function x(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function n(e,o){var t=e;"string"==typeof e&&(t=y.parseSourceMapInput(e));var i=y.getArg(t,"version"),n=y.getArg(t,"sections");if(i!=this._version)throw new Error("Unsupported version: "+i);this._sources=new h,this._names=new h;var s={line:-1,column:0};this._sections=n.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=y.getArg(e,"offset"),i=y.getArg(t,"line"),n=y.getArg(t,"column");if(i<s.line||i===s.line&&n<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=t,{generatedOffset:{generatedLine:i+1,generatedColumn:n+1},consumer:new r(y.getArg(e,"map"),o)}})}r.fromSourceMap=function(e,t){return p.fromSourceMap(e,t)},r.prototype._version=3,r.prototype.__generatedMappings=null,Object.defineProperty(r.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),r.prototype.__originalMappings=null,Object.defineProperty(r.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),r.prototype._charIsMappingSeparator=function(e,t){var i=e.charAt(t);return";"===i||","===i},r.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},r.GENERATED_ORDER=1,r.ORIGINAL_ORDER=2,r.GREATEST_LOWER_BOUND=1,r.LEAST_UPPER_BOUND=2,r.prototype.eachMapping=function(e,t,i){var n,o=t||null;switch(i||r.GENERATED_ORDER){case r.GENERATED_ORDER:n=this._generatedMappings;break;case r.ORIGINAL_ORDER:n=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;n.map(function(e){var t=null===e.source?null:this._sources.at(e.source);return{source:t=y.computeSourceURL(s,t,this._sourceMapURL),generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,o)},r.prototype.allGeneratedPositionsFor=function(e){var t=y.getArg(e,"line"),i={source:y.getArg(e,"source"),originalLine:t,originalColumn:y.getArg(e,"column",0)};if(i.source=this._findSourceIndex(i.source),i.source<0)return[];var n=[],o=this._findMapping(i,this._originalMappings,"originalLine","originalColumn",y.compareByOriginalPositions,a.LEAST_UPPER_BOUND);if(0<=o){var s=this._originalMappings[o];if(void 0===e.column)for(var r=s.originalLine;s&&s.originalLine===r;)n.push({line:y.getArg(s,"generatedLine",null),column:y.getArg(s,"generatedColumn",null),lastColumn:y.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o];else for(var l=s.originalColumn;s&&s.originalLine===t&&s.originalColumn==l;)n.push({line:y.getArg(s,"generatedLine",null),column:y.getArg(s,"generatedColumn",null),lastColumn:y.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o]}return n},i.SourceMapConsumer=r,(p.prototype=Object.create(r.prototype)).consumer=r,p.prototype._findSourceIndex=function(e){var t,i=e;if(null!=this.sourceRoot&&(i=y.relative(this.sourceRoot,i)),this._sources.has(i))return this._sources.indexOf(i);for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==e)return t;return-1},p.fromSourceMap=function(e,t){var i=Object.create(p.prototype),n=i._names=h.fromArray(e._names.toArray(),!0),o=i._sources=h.fromArray(e._sources.toArray(),!0);i.sourceRoot=e._sourceRoot,i.sourcesContent=e._generateSourcesContent(i._sources.toArray(),i.sourceRoot),i.file=e._file,i._sourceMapURL=t,i._absoluteSources=i._sources.toArray().map(function(e){return y.computeSourceURL(i.sourceRoot,e,t)});for(var s=e._mappings.toArray().slice(),r=i.__generatedMappings=[],l=i.__originalMappings=[],a=0,d=s.length;a<d;a++){var c=s[a],u=new x;u.generatedLine=c.generatedLine,u.generatedColumn=c.generatedColumn,c.source&&(u.source=o.indexOf(c.source),u.originalLine=c.originalLine,u.originalColumn=c.originalColumn,c.name&&(u.name=n.indexOf(c.name)),l.push(u)),r.push(u)}return k(i.__originalMappings,y.compareByOriginalPositions),i},p.prototype._version=3,Object.defineProperty(p.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),p.prototype._parseMappings=function(e,t){for(var i,n,o,s,r,l=1,a=0,d=0,c=0,u=0,h=0,p=e.length,m=0,f={},g={},b=[],v=[];m<p;)if(";"===e.charAt(m))l++,m++,a=0;else if(","===e.charAt(m))m++;else{for((i=new x).generatedLine=l,s=m;s<p&&!this._charIsMappingSeparator(e,s);s++);if(o=f[n=e.slice(m,s)])m+=n.length;else{for(o=[];m<s;)w.decode(e,m,g),r=g.value,m=g.rest,o.push(r);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");f[n]=o}i.generatedColumn=a+o[0],a=i.generatedColumn,1<o.length&&(i.source=u+o[1],u+=o[1],i.originalLine=d+o[2],d=i.originalLine,i.originalLine+=1,i.originalColumn=c+o[3],c=i.originalColumn,4<o.length&&(i.name=h+o[4],h+=o[4])),v.push(i),"number"==typeof i.originalLine&&b.push(i)}k(v,y.compareByGeneratedPositionsDeflated),this.__generatedMappings=v,k(b,y.compareByOriginalPositions),this.__originalMappings=b},p.prototype._findMapping=function(e,t,i,n,o,s){if(e[i]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[i]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return a.search(e,t,o,s)},p.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var i=this._generatedMappings[e+1];if(t.generatedLine===i.generatedLine){t.lastGeneratedColumn=i.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},p.prototype.originalPositionFor=function(e){var t={generatedLine:y.getArg(e,"line"),generatedColumn:y.getArg(e,"column")},i=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",y.compareByGeneratedPositionsDeflated,y.getArg(e,"bias",r.GREATEST_LOWER_BOUND));if(0<=i){var n=this._generatedMappings[i];if(n.generatedLine===t.generatedLine){var o=y.getArg(n,"source",null);null!==o&&(o=this._sources.at(o),o=y.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var s=y.getArg(n,"name",null);return null!==s&&(s=this._names.at(s)),{source:o,line:y.getArg(n,"originalLine",null),column:y.getArg(n,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},p.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))},p.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;var i=this._findSourceIndex(e);if(0<=i)return this.sourcesContent[i];var n,o=e;if(null!=this.sourceRoot&&(o=y.relative(this.sourceRoot,o)),null!=this.sourceRoot&&(n=y.urlParse(this.sourceRoot))){var s=o.replace(/^file:\/\//,"");if("file"==n.scheme&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!n.path||"/"==n.path)&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(t)return null;throw new Error('"'+o+'" is not in the SourceMap.')},p.prototype.generatedPositionFor=function(e){var t=y.getArg(e,"source");if((t=this._findSourceIndex(t))<0)return{line:null,column:null,lastColumn:null};var i={source:t,originalLine:y.getArg(e,"line"),originalColumn:y.getArg(e,"column")},n=this._findMapping(i,this._originalMappings,"originalLine","originalColumn",y.compareByOriginalPositions,y.getArg(e,"bias",r.GREATEST_LOWER_BOUND));if(0<=n){var o=this._originalMappings[n];if(o.source===i.source)return{line:y.getArg(o,"generatedLine",null),column:y.getArg(o,"generatedColumn",null),lastColumn:y.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},i.BasicSourceMapConsumer=p,(n.prototype=Object.create(r.prototype)).constructor=r,n.prototype._version=3,Object.defineProperty(n.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var i=0;i<this._sections[t].consumer.sources.length;i++)e.push(this._sections[t].consumer.sources[i]);return e}}),n.prototype.originalPositionFor=function(e){var t={generatedLine:y.getArg(e,"line"),generatedColumn:y.getArg(e,"column")},i=a.search(t,this._sections,function(e,t){var i=e.generatedLine-t.generatedOffset.generatedLine;return i||e.generatedColumn-t.generatedOffset.generatedColumn}),n=this._sections[i];return n?n.consumer.originalPositionFor({line:t.generatedLine-(n.generatedOffset.generatedLine-1),column:t.generatedColumn-(n.generatedOffset.generatedLine===t.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},n.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},n.prototype.sourceContentFor=function(e,t){for(var i=0;i<this._sections.length;i++){var n=this._sections[i].consumer.sourceContentFor(e,!0);if(n)return n}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},n.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var i=this._sections[t];if(-1!==i.consumer._findSourceIndex(y.getArg(e,"source"))){var n=i.consumer.generatedPositionFor(e);if(n)return{line:n.line+(i.generatedOffset.generatedLine-1),column:n.column+(i.generatedOffset.generatedLine===n.line?i.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},n.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var i=0;i<this._sections.length;i++)for(var n=this._sections[i],o=n.consumer._generatedMappings,s=0;s<o.length;s++){var r=o[s],l=n.consumer._sources.at(r.source);l=y.computeSourceURL(n.consumer.sourceRoot,l,this._sourceMapURL),this._sources.add(l),l=this._sources.indexOf(l);var a=null;r.name&&(a=n.consumer._names.at(r.name),this._names.add(a),a=this._names.indexOf(a));var d={source:l,generatedLine:r.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:r.generatedColumn+(n.generatedOffset.generatedLine===r.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:r.originalLine,originalColumn:r.originalColumn,name:a};this.__generatedMappings.push(d),"number"==typeof d.originalLine&&this.__originalMappings.push(d)}k(this.__generatedMappings,y.compareByGeneratedPositionsDeflated),k(this.__originalMappings,y.compareByOriginalPositions)},i.IndexedSourceMapConsumer=n},{"./array-set":249,"./base64-vlq":250,"./binary-search":252,"./quick-sort":254,"./util":258}],256:[function(e,t,i){var m=e("./base64-vlq"),f=e("./util"),n=e("./array-set").ArraySet,o=e("./mapping-list").MappingList;function r(e){e||(e={}),this._file=f.getArg(e,"file",null),this._sourceRoot=f.getArg(e,"sourceRoot",null),this._skipValidation=f.getArg(e,"skipValidation",!1),this._sources=new n,this._names=new n,this._mappings=new o,this._sourcesContents=null}r.prototype._version=3,r.fromSourceMap=function(n){var o=n.sourceRoot,s=new r({file:n.file,sourceRoot:o});return n.eachMapping(function(e){var t={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(t.source=e.source,null!=o&&(t.source=f.relative(o,t.source)),t.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(t.name=e.name)),s.addMapping(t)}),n.sources.forEach(function(e){var t=e;null!==o&&(t=f.relative(o,e)),s._sources.has(t)||s._sources.add(t);var i=n.sourceContentFor(e);null!=i&&s.setSourceContent(e,i)}),s},r.prototype.addMapping=function(e){var t=f.getArg(e,"generated"),i=f.getArg(e,"original",null),n=f.getArg(e,"source",null),o=f.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,i,n,o),null!=n&&(n=String(n),this._sources.has(n)||this._sources.add(n)),null!=o&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=i&&i.line,originalColumn:null!=i&&i.column,source:n,name:o})},r.prototype.setSourceContent=function(e,t){var i=e;null!=this._sourceRoot&&(i=f.relative(this._sourceRoot,i)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[f.toSetString(i)]=t):this._sourcesContents&&(delete this._sourcesContents[f.toSetString(i)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},r.prototype.applySourceMap=function(o,e,s){var r=e;if(null==e){if(null==o.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');r=o.file}var l=this._sourceRoot;null!=l&&(r=f.relative(l,r));var a=new n,d=new n;this._mappings.unsortedForEach(function(e){if(e.source===r&&null!=e.originalLine){var t=o.originalPositionFor({line:e.originalLine,column:e.originalColumn});null!=t.source&&(e.source=t.source,null!=s&&(e.source=f.join(s,e.source)),null!=l&&(e.source=f.relative(l,e.source)),e.originalLine=t.line,e.originalColumn=t.column,null!=t.name&&(e.name=t.name))}var i=e.source;null==i||a.has(i)||a.add(i);var n=e.name;null==n||d.has(n)||d.add(n)},this),this._sources=a,this._names=d,o.sources.forEach(function(e){var t=o.sourceContentFor(e);null!=t&&(null!=s&&(e=f.join(s,e)),null!=l&&(e=f.relative(l,e)),this.setSourceContent(e,t))},this)},r.prototype._validateMapping=function(e,t,i,n){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&0<e.line&&0<=e.column)||t||i||n)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&0<e.line&&0<=e.column&&0<t.line&&0<=t.column&&i))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:i,original:t,name:n}))},r.prototype._serializeMappings=function(){for(var e,t,i,n,o=0,s=1,r=0,l=0,a=0,d=0,c="",u=this._mappings.toArray(),h=0,p=u.length;h<p;h++){if(e="",(t=u[h]).generatedLine!==s)for(o=0;t.generatedLine!==s;)e+=";",s++;else if(0<h){if(!f.compareByGeneratedPositionsInflated(t,u[h-1]))continue;e+=","}e+=m.encode(t.generatedColumn-o),o=t.generatedColumn,null!=t.source&&(n=this._sources.indexOf(t.source),e+=m.encode(n-d),d=n,e+=m.encode(t.originalLine-1-l),l=t.originalLine-1,e+=m.encode(t.originalColumn-r),r=t.originalColumn,null!=t.name&&(i=this._names.indexOf(t.name),e+=m.encode(i-a),a=i)),c+=e}return c},r.prototype._generateSourcesContent=function(e,i){return e.map(function(e){if(!this._sourcesContents)return null;null!=i&&(e=f.relative(i,e));var t=f.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,t)?this._sourcesContents[t]:null},this)},r.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},r.prototype.toString=function(){return JSON.stringify(this.toJSON())},i.SourceMapGenerator=r},{"./array-set":249,"./base64-vlq":250,"./mapping-list":253,"./util":258}],257:[function(e,t,i){var n=e("./source-map-generator").SourceMapGenerator,h=e("./util"),p=/(\r?\n)/,s="$$$isSourceNode$$$";function m(e,t,i,n,o){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==i?null:i,this.name=null==o?null:o,this[s]=!0,null!=n&&this.add(n)}m.fromStringWithSourceMap=function(e,i,n){var o=new m,s=e.split(p),r=0,l=function(){return e()+(e()||"");function e(){return r<s.length?s[r++]:void 0}},a=1,d=0,c=null;return i.eachMapping(function(e){if(null!==c){if(!(a<e.generatedLine)){var t=(i=s[r]||"").substr(0,e.generatedColumn-d);return s[r]=i.substr(e.generatedColumn-d),d=e.generatedColumn,u(c,t),void(c=e)}u(c,l()),a++,d=0}for(;a<e.generatedLine;)o.add(l()),a++;if(d<e.generatedColumn){var i=s[r]||"";o.add(i.substr(0,e.generatedColumn)),s[r]=i.substr(e.generatedColumn),d=e.generatedColumn}c=e},this),r<s.length&&(c&&u(c,l()),o.add(s.splice(r).join(""))),i.sources.forEach(function(e){var t=i.sourceContentFor(e);null!=t&&(null!=n&&(e=h.join(n,e)),o.setSourceContent(e,t))}),o;function u(e,t){if(null===e||void 0===e.source)o.add(t);else{var i=n?h.join(n,e.source):e.source;o.add(new m(e.originalLine,e.originalColumn,i,t,e.name))}}},m.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},m.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;0<=t;t--)this.prepend(e[t]);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},m.prototype.walk=function(e){for(var t,i=0,n=this.children.length;i<n;i++)(t=this.children[i])[s]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},m.prototype.join=function(e){var t,i,n=this.children.length;if(0<n){for(t=[],i=0;i<n-1;i++)t.push(this.children[i]),t.push(e);t.push(this.children[i]),this.children=t}return this},m.prototype.replaceRight=function(e,t){var i=this.children[this.children.length-1];return i[s]?i.replaceRight(e,t):"string"==typeof i?this.children[this.children.length-1]=i.replace(e,t):this.children.push("".replace(e,t)),this},m.prototype.setSourceContent=function(e,t){this.sourceContents[h.toSetString(e)]=t},m.prototype.walkSourceContents=function(e){for(var t=0,i=this.children.length;t<i;t++)this.children[t][s]&&this.children[t].walkSourceContents(e);var n=Object.keys(this.sourceContents);for(t=0,i=n.length;t<i;t++)e(h.fromSetString(n[t]),this.sourceContents[n[t]])},m.prototype.toString=function(){var t="";return this.walk(function(e){t+=e}),t},m.prototype.toStringWithSourceMap=function(e){var o={code:"",line:1,column:0},s=new n(e),r=!1,l=null,a=null,d=null,c=null;return this.walk(function(e,t){o.code+=e,null!==t.source&&null!==t.line&&null!==t.column?(l===t.source&&a===t.line&&d===t.column&&c===t.name||s.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:o.line,column:o.column},name:t.name}),l=t.source,a=t.line,d=t.column,c=t.name,r=!0):r&&(s.addMapping({generated:{line:o.line,column:o.column}}),l=null,r=!1);for(var i=0,n=e.length;i<n;i++)10===e.charCodeAt(i)?(o.line++,o.column=0,i+1===n?(l=null,r=!1):r&&s.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:o.line,column:o.column},name:t.name})):o.column++}),this.walkSourceContents(function(e,t){s.setSourceContent(e,t)}),{code:o.code,map:s}},i.SourceNode=m},{"./source-map-generator":256,"./util":258}],258:[function(e,t,a){a.getArg=function(e,t,i){if(t in e)return e[t];if(3===arguments.length)return i;throw new Error('"'+t+'" is a required argument.')};var i=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,s=/^data:.+\,.+$/;function d(e){var t=e.match(i);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function c(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function r(e){var t=e,i=d(e);if(i){if(!i.path)return e;t=i.path}for(var n,o=a.isAbsolute(t),s=t.split(/\/+/),r=0,l=s.length-1;0<=l;l--)"."===(n=s[l])?s.splice(l,1):".."===n?r++:0<r&&(""===n?(s.splice(l+1,r),r=0):(s.splice(l,2),r--));return""===(t=s.join("/"))&&(t=o?"/":"."),i?(i.path=t,c(i)):t}function l(e,t){""===e&&(e="."),""===t&&(t=".");var i=d(t),n=d(e);if(n&&(e=n.path||"/"),i&&!i.scheme)return n&&(i.scheme=n.scheme),c(i);if(i||t.match(s))return t;if(n&&!n.host&&!n.path)return n.host=t,c(n);var o="/"===t.charAt(0)?t:r(e.replace(/\/+$/,"")+"/"+t);return n?(n.path=o,c(n)):o}a.urlParse=d,a.urlGenerate=c,a.normalize=r,a.join=l,a.isAbsolute=function(e){return"/"===e.charAt(0)||i.test(e)},a.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var i=0;0!==t.indexOf(e+"/");){var n=e.lastIndexOf("/");if(n<0)return t;if((e=e.slice(0,n)).match(/^([^\/]+:\/)?\/*$/))return t;++i}return Array(i+1).join("../")+t.substr(e.length+1)};var n=!("__proto__"in Object.create(null));function o(e){return e}function u(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var i=t-10;0<=i;i--)if(36!==e.charCodeAt(i))return!1;return!0}function h(e,t){return e===t?0:null===e?1:null===t?-1:t<e?1:-1}a.toSetString=n?o:function(e){return u(e)?"$"+e:e},a.fromSetString=n?o:function(e){return u(e)?e.slice(1):e},a.compareByOriginalPositions=function(e,t,i){var n=h(e.source,t.source);return 0!==n?n:0!=(n=e.originalLine-t.originalLine)?n:0!=(n=e.originalColumn-t.originalColumn)||i?n:0!=(n=e.generatedColumn-t.generatedColumn)?n:0!=(n=e.generatedLine-t.generatedLine)?n:h(e.name,t.name)},a.compareByGeneratedPositionsDeflated=function(e,t,i){var n=e.generatedLine-t.generatedLine;return 0!==n?n:0!=(n=e.generatedColumn-t.generatedColumn)||i?n:0!==(n=h(e.source,t.source))?n:0!=(n=e.originalLine-t.originalLine)?n:0!=(n=e.originalColumn-t.originalColumn)?n:h(e.name,t.name)},a.compareByGeneratedPositionsInflated=function(e,t){var i=e.generatedLine-t.generatedLine;return 0!==i?i:0!=(i=e.generatedColumn-t.generatedColumn)?i:0!==(i=h(e.source,t.source))?i:0!=(i=e.originalLine-t.originalLine)?i:0!=(i=e.originalColumn-t.originalColumn)?i:h(e.name,t.name)},a.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},a.computeSourceURL=function(e,t,i){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),i){var n=d(i);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var o=n.path.lastIndexOf("/");0<=o&&(n.path=n.path.substring(0,o+1))}t=l(c(n),t)}return r(t)}},{}],259:[function(e,t,i){i.SourceMapGenerator=e("./lib/source-map-generator").SourceMapGenerator,i.SourceMapConsumer=e("./lib/source-map-consumer").SourceMapConsumer,i.SourceNode=e("./lib/source-node").SourceNode},{"./lib/source-map-consumer":255,"./lib/source-map-generator":256,"./lib/source-node":257}],260:[function(e,t,i){t.exports=e("handlebars/runtime").default},{"handlebars/runtime":217}],261:[function(e,t,i){var n,o;n=this,o=function(){"use strict";var t=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var M=void 0;void 0===M&&(M={modules:[]});var i=null;function r(e){var t=e.getBoundingClientRect(),i={};for(var n in t)i[n]=t[n];try{if(e.ownerDocument!==document){var o=e.ownerDocument.defaultView.frameElement;if(o){var s=r(o);i.top+=s.top,i.bottom+=s.top,i.left+=s.left,i.right+=s.left}}}catch(e){}return i}function l(e){var t=(getComputedStyle(e)||{}).position,i=[];if("fixed"===t)return[e];for(var n=e;(n=n.parentNode)&&n&&1===n.nodeType;){var o=void 0;try{o=getComputedStyle(n)}catch(e){}if(null==o)return i.push(n),i;var s=o,r=s.overflow,l=s.overflowX,a=s.overflowY;/(auto|scroll|overlay)/.test(r+a+l)&&("absolute"!==t||0<=["relative","absolute","fixed"].indexOf(o.position))&&i.push(n)}return i.push(e.ownerDocument.body),e.ownerDocument!==document&&i.push(e.ownerDocument.defaultView),i}var e,o=(e=0,function(){return++e}),s={},a=function(){var e=i;e&&document.body.contains(e)||((e=document.createElement("div")).setAttribute("data-tether-id",o()),V(e.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(e),i=e);var t=e.getAttribute("data-tether-id");return void 0===s[t]&&(s[t]=r(e),B(function(){delete s[t]})),s[t]};function d(){i&&document.body.removeChild(i),i=null}function $(e){var t=void 0;e===document?(t=document,e=document.documentElement):t=e.ownerDocument;var i=t.documentElement,n=r(e),o=a();return n.top-=o.top,n.left-=o.left,void 0===n.width&&(n.width=document.body.scrollWidth-n.left-n.right),void 0===n.height&&(n.height=document.body.scrollHeight-n.top-n.bottom),n.top=n.top-i.clientTop,n.left=n.left-i.clientLeft,n.right=t.body.clientWidth-n.width-n.left,n.bottom=t.body.clientHeight-n.height-n.top,n}function S(e){return e.offsetParent||document.documentElement}var c=null;function P(){if(c)return c;var e=document.createElement("div");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");V(t.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);var i=e.offsetWidth;t.style.overflow="scroll";var n=e.offsetWidth;i===n&&(n=t.clientWidth),document.body.removeChild(t);var o=i-n;return c={width:o,height:o}}function V(){var i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(function(e){if(e)for(var t in e)({}).hasOwnProperty.call(e,t)&&(i[t]=e[t])}),i}function u(t,e){if(void 0!==t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.remove(e)});else{var i=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),n=m(t).replace(i," ");f(t,n)}}function h(t,e){if(void 0!==t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.add(e)});else{u(t,e);var i=m(t)+" "+e;f(t,i)}}function p(e,t){if(void 0!==e.classList)return e.classList.contains(t);var i=m(e);return new RegExp("(^| )"+t+"( |$)","gi").test(i)}function m(e){return e.className instanceof e.ownerDocument.defaultView.SVGAnimatedString?e.className.baseVal:e.className}function f(e,t){e.setAttribute("class",t)}function E(t,i,e){e.forEach(function(e){-1===i.indexOf(e)&&p(t,e)&&u(t,e)}),i.forEach(function(e){p(t,e)||h(t,e)})}var g=[],B=function(e){g.push(e)},O=function(){for(var e=void 0;e=g.pop();)e()},b=function(){function e(){n(this,e)}return t(e,[{key:"on",value:function(e,t,i){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];void 0===this.bindings&&(this.bindings={}),void 0===this.bindings[e]&&(this.bindings[e]=[]),this.bindings[e].push({handler:t,ctx:i,once:n})}},{key:"once",value:function(e,t,i){this.on(e,t,i,!0)}},{key:"off",value:function(e,t){if(void 0!==this.bindings&&void 0!==this.bindings[e])if(void 0===t)delete this.bindings[e];else for(var i=0;i<this.bindings[e].length;)this.bindings[e][i].handler===t?this.bindings[e].splice(i,1):++i}},{key:"trigger",value:function(e){if(void 0!==this.bindings&&this.bindings[e]){for(var t=0,i=arguments.length,n=Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];for(;t<this.bindings[e].length;){var s=this.bindings[e][t],r=s.handler,l=s.ctx,a=s.once,d=l;void 0===d&&(d=this),r.apply(d,n),a?this.bindings[e].splice(t,1):++t}}}}]),e}();M.Utils={getActualBoundingClientRect:r,getScrollParents:l,getBounds:$,getOffsetParent:S,extend:V,addClass:h,removeClass:u,hasClass:p,updateClasses:E,defer:B,flush:O,uniqueId:o,Evented:b,getScrollBarSize:P,removeUtilElements:d};var I=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,o=!1,s=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){o=!0,s=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}if(void 0===M)throw new Error("You must include the utils.js file before tether.js");var l=(J=M.Utils).getScrollParents,S=($=J.getBounds,J.getOffsetParent),h=(V=J.extend,J.addClass),u=J.removeClass,P=(E=J.updateClasses,B=J.defer,O=J.flush,J.getScrollBarSize),d=J.removeUtilElements;function v(e,t){var i=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return t<=e+i&&e-i<=t}var y,w,k,x,C=function(){if("undefined"==typeof document)return"";for(var e=document.createElement("div"),t=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],i=0;i<t.length;++i){var n=t[i];if(void 0!==e.style[n])return n}}(),_=[],j=function(){_.forEach(function(e){e.position(!1)}),O()};function A(){return"object"==typeof performance&&"function"==typeof performance.now?performance.now():+new Date}k=w=y=null,x=function e(){if(void 0!==w&&16<w)return w=Math.min(w-16,250),void(k=setTimeout(e,250));void 0!==y&&A()-y<10||(null!=k&&(clearTimeout(k),k=null),y=A(),j(),w=A()-y)},"undefined"!=typeof window&&void 0!==window.addEventListener&&["resize","scroll","touchmove"].forEach(function(e){window.addEventListener(e,x)});var N={center:"center",left:"right",right:"left"},F={middle:"middle",top:"bottom",bottom:"top"},T={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},L=function(e){var t=e.left,i=e.top;return void 0!==T[e.left]&&(t=T[e.left]),void 0!==T[e.top]&&(i=T[e.top]),{left:t,top:i}};function D(){for(var n={top:0,left:0},e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.forEach(function(e){var t=e.top,i=e.left;"string"==typeof t&&(t=parseFloat(t,10)),"string"==typeof i&&(i=parseFloat(i,10)),n.top+=t,n.left+=i}),n}function K(e,t){return"string"==typeof e.left&&-1!==e.left.indexOf("%")&&(e.left=parseFloat(e.left,10)/100*t.width),"string"==typeof e.top&&-1!==e.top.indexOf("%")&&(e.top=parseFloat(e.top,10)/100*t.height),e}var R=function(e){var t=e.split(" "),i=I(t,2);return{top:i[0],left:i[1]}},z=R,Q=function(e){function i(e){var t=this;n(this,i),function(e,t,i){for(var n=!0;n;){var o=e,s=t,r=i;n=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,s);if(void 0!==l){if("value"in l)return l.value;var a=l.get;if(void 0===a)return;return a.call(r)}var d=Object.getPrototypeOf(o);if(null===d)return;e=d,t=s,i=r,n=!0,l=d=void 0}}(Object.getPrototypeOf(i.prototype),"constructor",this).call(this),this.position=this.position.bind(this),_.push(this),this.history=[],this.setOptions(e,!1),M.modules.forEach(function(e){void 0!==e.initialize&&e.initialize.call(t)}),this.position()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,b),t(i,[{key:"getClass",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=this.options.classes;return void 0!==t&&t[e]?this.options.classes[e]:this.options.classPrefix?this.options.classPrefix+"-"+e:e}},{key:"setOptions",value:function(e){var t=this,i=arguments.length<=1||void 0===arguments[1]||arguments[1];this.options=V({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},e);var n=this.options,o=n.element,s=n.target,r=n.targetModifier;if(this.element=o,this.target=s,this.targetModifier=r,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(e){if(void 0===t[e])throw new Error("Tether Error: Both element and target must be defined");void 0!==t[e].jquery?t[e]=t[e][0]:"string"==typeof t[e]&&(t[e]=document.querySelector(t[e]))}),h(this.element,this.getClass("element")),!1!==this.options.addTargetClasses&&h(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=z(this.options.targetAttachment),this.attachment=z(this.options.attachment),this.offset=R(this.options.offset),this.targetOffset=R(this.options.targetOffset),void 0!==this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=l(this.target),!1!==this.options.enabled&&this.enable(i)}},{key:"getTargetBounds",value:function(){if(void 0===this.targetModifier)return $(this.target);if("visible"===this.targetModifier)return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:((s={height:(e=$(this.target)).height,width:e.width,top:e.top,left:e.left}).height=Math.min(s.height,e.height-(pageYOffset-e.top)),s.height=Math.min(s.height,e.height-(e.top+e.height-(pageYOffset+innerHeight))),s.height=Math.min(innerHeight,s.height),s.height-=2,s.width=Math.min(s.width,e.width-(pageXOffset-e.left)),s.width=Math.min(s.width,e.width-(e.left+e.width-(pageXOffset+innerWidth))),s.width=Math.min(innerWidth,s.width),s.width-=2,s.top<pageYOffset&&(s.top=pageYOffset),s.left<pageXOffset&&(s.left=pageXOffset),s);if("scroll-handle"===this.targetModifier){var e=void 0,t=this.target;e=t===document.body?(t=document.documentElement,{left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):$(t);var i=getComputedStyle(t),n=0;(t.scrollWidth>t.clientWidth||0<=[i.overflow,i.overflowX].indexOf("scroll")||this.target!==document.body)&&(n=15);var o=e.height-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth)-n,s={width:15,height:.975*o*(o/t.scrollHeight),left:e.left+e.width-parseFloat(i.borderLeftWidth)-15},r=0;o<408&&this.target===document.body&&(r=-11e-5*Math.pow(o,2)-.00727*o+22.58),this.target!==document.body&&(s.height=Math.max(s.height,24));var l=this.target.scrollTop/(t.scrollHeight-o);return s.top=l*(o-s.height-r)+e.top+parseFloat(i.borderTopWidth),this.target===document.body&&(s.height=Math.max(s.height,24)),s}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(e,t){return void 0===this._cache&&(this._cache={}),void 0===this._cache[e]&&(this._cache[e]=t.call(this)),this._cache[e]}},{key:"enable",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];!1!==this.options.addTargetClasses&&h(this.target,this.getClass("enabled")),h(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(e){e!==t.target.ownerDocument&&e.addEventListener("scroll",t.position)}),e&&this.position()}},{key:"disable",value:function(){var t=this;u(this.target,this.getClass("enabled")),u(this.element,this.getClass("enabled")),this.enabled=!1,void 0!==this.scrollParents&&this.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.position)})}},{key:"destroy",value:function(){var i=this;this.disable(),_.forEach(function(e,t){e===i&&_.splice(t,1)}),0===_.length&&d()}},{key:"updateAttachClasses",value:function(e,t){var i=this;e=e||this.attachment,t=t||this.targetAttachment;void 0!==this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),void 0===this._addAttachClasses&&(this._addAttachClasses=[]);var n=this._addAttachClasses;e.top&&n.push(this.getClass("element-attached")+"-"+e.top),e.left&&n.push(this.getClass("element-attached")+"-"+e.left),t.top&&n.push(this.getClass("target-attached")+"-"+t.top),t.left&&n.push(this.getClass("target-attached")+"-"+t.left);var o=[];["left","top","bottom","right","middle","center"].forEach(function(e){o.push(i.getClass("element-attached")+"-"+e),o.push(i.getClass("target-attached")+"-"+e)}),B(function(){void 0!==i._addAttachClasses&&(E(i.element,i._addAttachClasses,o),!1!==i.options.addTargetClasses&&E(i.target,i._addAttachClasses,o),delete i._addAttachClasses)})}},{key:"position",value:function(){var l=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var t,i,n,o,s=(t=this.targetAttachment,i=this.attachment,n=t.left,o=t.top,"auto"===n&&(n=N[i.left]),"auto"===o&&(o=F[i.top]),{left:n,top:o});this.updateAttachClasses(this.attachment,s);var r=this.cache("element-bounds",function(){return $(l.element)}),a=r.width,d=r.height;if(0===a&&0===d&&void 0!==this.lastSize){var c=this.lastSize;a=c.width,d=c.height}else this.lastSize={width:a,height:d};var u=this.cache("target-bounds",function(){return l.getTargetBounds()}),h=u,p=K(L(this.attachment),{width:a,height:d}),m=K(L(s),h),f=K(this.offset,{width:a,height:d}),g=K(this.targetOffset,h);p=D(p,f),m=D(m,g);for(var b=u.left+m.left-p.left,v=u.top+m.top-p.top,y=0;y<M.modules.length;++y){var w=M.modules[y].position.call(this,{left:b,top:v,targetAttachment:s,targetPos:u,elementPos:r,offset:p,targetOffset:m,manualOffset:f,manualTargetOffset:g,scrollbarSize:_,attachment:this.attachment});if(!1===w)return!1;void 0!==w&&"object"==typeof w&&(v=w.top,b=w.left)}var k={page:{top:v,left:b},viewport:{top:v-pageYOffset,bottom:pageYOffset-v-d+innerHeight,left:b-pageXOffset,right:pageXOffset-b-a+innerWidth}},x=this.target.ownerDocument,C=x.defaultView,_=void 0;return C.innerHeight>x.documentElement.clientHeight&&(_=this.cache("scrollbar-size",P),k.viewport.bottom-=_.height),C.innerWidth>x.documentElement.clientWidth&&(_=this.cache("scrollbar-size",P),k.viewport.right-=_.width),-1!==["","static"].indexOf(x.body.style.position)&&-1!==["","static"].indexOf(x.body.parentElement.style.position)||(k.page.bottom=x.body.scrollHeight-v-d,k.page.right=x.body.scrollWidth-b-a),void 0!==this.options.optimizations&&!1!==this.options.optimizations.moveElement&&void 0===this.targetModifier&&function(){var e=l.cache("target-offsetparent",function(){return S(l.target)}),t=l.cache("target-offsetparent-bounds",function(){return $(e)}),i=getComputedStyle(e),n=t,o={};if(["Top","Left","Bottom","Right"].forEach(function(e){o[e.toLowerCase()]=parseFloat(i["border"+e+"Width"])}),t.right=x.body.scrollWidth-t.left-n.width+o.right,t.bottom=x.body.scrollHeight-t.top-n.height+o.bottom,k.page.top>=t.top+o.top&&k.page.bottom>=t.bottom&&k.page.left>=t.left+o.left&&k.page.right>=t.right){var s=e.scrollTop,r=e.scrollLeft;k.offset={top:k.page.top-t.top+s-o.top,left:k.page.left-t.left+r-o.left}}}(),this.move(k),this.history.unshift(k),3<this.history.length&&this.history.pop(),e&&O(),!0}}},{key:"move",value:function(t){var o=this;if(void 0!==this.element.parentNode){var i={};for(var e in t)for(var n in i[e]={},t[e]){for(var s=!1,r=0;r<this.history.length;++r){var l=this.history[r];if(void 0!==l[e]&&!v(l[e][n],t[e][n])){s=!0;break}}s||(i[e][n]=!0)}var a,d,c={top:"",left:"",right:"",bottom:""},u=function(e,t){if(!1!==(void 0!==o.options.optimizations?o.options.optimizations.gpu:null)){var i=void 0,n=void 0;i=e.top?(c.top=0,t.top):(c.bottom=0,-t.bottom),n=e.left?(c.left=0,t.left):(c.right=0,-t.right),"number"==typeof window.devicePixelRatio&&devicePixelRatio%1==0&&(n=Math.round(n*devicePixelRatio)/devicePixelRatio,i=Math.round(i*devicePixelRatio)/devicePixelRatio),c[C]="translateX("+n+"px) translateY("+i+"px)","msTransform"!==C&&(c[C]+=" translateZ(0)")}else e.top?c.top=t.top+"px":c.bottom=t.bottom+"px",e.left?c.left=t.left+"px":c.right=t.right+"px"},h=!1;if((i.page.top||i.page.bottom)&&(i.page.left||i.page.right)?(c.position="absolute",u(i.page,t.page)):(i.viewport.top||i.viewport.bottom)&&(i.viewport.left||i.viewport.right)?(c.position="fixed",u(i.viewport,t.viewport)):void 0!==i.offset&&i.offset.top&&i.offset.left?function(){c.position="absolute";var e=o.cache("target-offsetparent",function(){return S(o.target)});S(o.element)!==e&&B(function(){o.element.parentNode.removeChild(o.element),e.appendChild(o.element)}),u(i.offset,t.offset),h=!0}():(c.position="absolute",u({top:!0,left:!0},t.page)),!h)if(this.options.bodyElement)this.element.parentNode!==this.options.bodyElement&&this.options.bodyElement.appendChild(this.element);else{for(var p=!0,m=this.element.parentNode;m&&1===m.nodeType&&"BODY"!==m.tagName&&(void 0,((d=(a=m).ownerDocument).fullscreenElement||d.webkitFullscreenElement||d.mozFullScreenElement||d.msFullscreenElement)!==a);){if("static"!==getComputedStyle(m).position){p=!1;break}m=m.parentNode}p||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var f={},g=!1;for(var n in c){var b=c[n];this.element.style[n]!==b&&(g=!0,f[n]=b)}g&&B(function(){V(o.element.style,f),o.trigger("repositioned")})}}}]),i}();Q.modules=[],M.position=j;var U=V(Q,M),V=(I=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,o=!1,s=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){o=!0,s=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},$=(J=M.Utils).getBounds,J.extend),H=(E=J.updateClasses,B=J.defer,["left","top","right","bottom"]);M.modules.push({position:function(e){var f=this,g=e.top,b=e.left,v=e.targetAttachment;if(!this.options.constraints)return!0;var t=this.cache("element-bounds",function(){return $(f.element)}),y=t.height,w=t.width;if(0===w&&0===y&&void 0!==this.lastSize){var i=this.lastSize;w=i.width,y=i.height}var n=this.cache("target-bounds",function(){return f.getTargetBounds()}),k=n.height,x=n.width,o=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(e){var t=e.outOfBoundsClass,i=e.pinnedClass;t&&o.push(t),i&&o.push(i)}),o.forEach(function(t){["left","top","right","bottom"].forEach(function(e){o.push(t+"-"+e)})});var C=[],_=V({},v),M=V({},this.attachment);return this.options.constraints.forEach(function(e){var t=e.to,i=e.attachment,n=e.pin;void 0===i&&(i="");var o=void 0,s=void 0;if(0<=i.indexOf(" ")){var r=i.split(" "),l=I(r,2);s=l[0],o=l[1]}else o=s=i;var a,d,c=(a=f,"scrollParent"===(d=t)?d=a.scrollParents[0]:"window"===d&&(d=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),d===document&&(d=d.documentElement),void 0!==d.nodeType&&function(){var e=d,t=$(d),i=t,n=getComputedStyle(d);if(d=[i.left,i.top,t.width+i.left,t.height+i.top],e.ownerDocument!==document){var o=e.ownerDocument.defaultView;d[0]+=o.pageXOffset,d[1]+=o.pageYOffset,d[2]+=o.pageXOffset,d[3]+=o.pageYOffset}H.forEach(function(e,t){"Top"===(e=e[0].toUpperCase()+e.substr(1))||"Left"===e?d[t]+=parseFloat(n["border"+e+"Width"]):d[t]-=parseFloat(n["border"+e+"Width"])})}(),d);"target"!==s&&"both"!==s||(g<c[1]&&"top"===_.top&&(g+=k,_.top="bottom"),g+y>c[3]&&"bottom"===_.top&&(g-=k,_.top="top")),"together"===s&&("top"===_.top&&("bottom"===M.top&&g<c[1]?(g+=k,_.top="bottom",g+=y,M.top="top"):"top"===M.top&&g+y>c[3]&&g-(y-k)>=c[1]&&(g-=y-k,_.top="bottom",M.top="bottom")),"bottom"===_.top&&("top"===M.top&&g+y>c[3]?(g-=k,_.top="top",g-=y,M.top="bottom"):"bottom"===M.top&&g<c[1]&&g+(2*y-k)<=c[3]&&(g+=y-k,_.top="top",M.top="top")),"middle"===_.top&&(g+y>c[3]&&"top"===M.top?(g-=y,M.top="bottom"):g<c[1]&&"bottom"===M.top&&(g+=y,M.top="top"))),"target"!==o&&"both"!==o||(b<c[0]&&"left"===_.left&&(b+=x,_.left="right"),b+w>c[2]&&"right"===_.left&&(b-=x,_.left="left")),"together"===o&&(b<c[0]&&"left"===_.left?"right"===M.left?(b+=x,_.left="right",b+=w,M.left="left"):"left"===M.left&&(b+=x,_.left="right",b-=w,M.left="right"):b+w>c[2]&&"right"===_.left?"left"===M.left?(b-=x,_.left="left",b-=w,M.left="right"):"right"===M.left&&(b-=x,_.left="left",b+=w,M.left="left"):"center"===_.left&&(b+w>c[2]&&"left"===M.left?(b-=w,M.left="right"):b<c[0]&&"right"===M.left&&(b+=w,M.left="left"))),"element"!==s&&"both"!==s||(g<c[1]&&"bottom"===M.top&&(g+=y,M.top="top"),g+y>c[3]&&"top"===M.top&&(g-=y,M.top="bottom")),"element"!==o&&"both"!==o||(b<c[0]&&("right"===M.left?(b+=w,M.left="left"):"center"===M.left&&(b+=w/2,M.left="left")),b+w>c[2]&&("left"===M.left?(b-=w,M.left="right"):"center"===M.left&&(b-=w/2,M.left="right"))),"string"==typeof n?n=n.split(",").map(function(e){return e.trim()}):!0===n&&(n=["top","left","right","bottom"]),n=n||[];var u,h,p=[],m=[];g<c[1]&&(0<=n.indexOf("top")?(g=c[1],p.push("top")):m.push("top")),g+y>c[3]&&(0<=n.indexOf("bottom")?(g=c[3]-y,p.push("bottom")):m.push("bottom")),b<c[0]&&(0<=n.indexOf("left")?(b=c[0],p.push("left")):m.push("left")),b+w>c[2]&&(0<=n.indexOf("right")?(b=c[2]-w,p.push("right")):m.push("right")),p.length&&(u=(u=void 0)!==f.options.pinnedClass?f.options.pinnedClass:f.getClass("pinned"),C.push(u),p.forEach(function(e){C.push(u+"-"+e)})),m.length&&(h=(h=void 0)!==f.options.outOfBoundsClass?f.options.outOfBoundsClass:f.getClass("out-of-bounds"),C.push(h),m.forEach(function(e){C.push(h+"-"+e)})),(0<=p.indexOf("left")||0<=p.indexOf("right"))&&(M.left=_.left=!1),(0<=p.indexOf("top")||0<=p.indexOf("bottom"))&&(M.top=_.top=!1),_.top===v.top&&_.left===v.left&&M.top===f.attachment.top&&M.left===f.attachment.left||(f.updateAttachClasses(M,_),f.trigger("update",{attachment:M,targetAttachment:_}))}),B(function(){!1!==f.options.addTargetClasses&&E(f.target,C,o),E(f.element,C,o)}),{top:g,left:b}}});var J,$=(J=M.Utils).getBounds,E=J.updateClasses;B=J.defer;M.modules.push({position:function(e){var t=this,i=e.top,n=e.left,o=this.cache("element-bounds",function(){return $(t.element)}),s=o.height,r=o.width,l=this.getTargetBounds(),a=i+s,d=n+r,c=[];i<=l.bottom&&a>=l.top&&["left","right"].forEach(function(e){var t=l[e];t!==n&&t!==d||c.push(e)}),n<=l.right&&d>=l.left&&["top","bottom"].forEach(function(e){var t=l[e];t!==i&&t!==a||c.push(e)});var u=[],h=[];return u.push(this.getClass("abutted")),["left","top","right","bottom"].forEach(function(e){u.push(t.getClass("abutted")+"-"+e)}),c.length&&h.push(this.getClass("abutted")),c.forEach(function(e){h.push(t.getClass("abutted")+"-"+e)}),B(function(){!1!==t.options.addTargetClasses&&E(t.target,h,u),E(t.element,h,u)}),!0}});I=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,o=!1,s=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){o=!0,s=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};return M.modules.push({position:function(e){var t=e.top,i=e.left;if(this.options.shift){var n=this.options.shift;"function"==typeof this.options.shift&&(n=this.options.shift.call(this,{top:t,left:i}));var o=void 0,s=void 0;if("string"==typeof n){(n=n.split(" "))[1]=n[1]||n[0];var r=I(n,2);o=r[0],s=r[1],o=parseFloat(o,10),s=parseFloat(s,10)}else o=n.top,s=n.left;return{top:t+=o,left:i+=s}}}}),U},"function"==typeof define&&define.amd?define([],o):"object"==typeof i?t.exports=o():n.Tether=o()},{}]},{},[108]);